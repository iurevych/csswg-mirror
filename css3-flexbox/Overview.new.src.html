<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html><head><title>Flexible Box Layout Module</title>
  <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-ED"> <!-- TODO: remove before build -->
  <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-[STATUS]">
  <link rel="stylesheet" type="text/css" href="../default.css">
<style type="text/css">
.style1 {
	background-color: #FFFF00;
}
</style>
</head><body>

  <div class="head">

   <h1 id="head-box-flexible">Flexible Box Layout Module</h1>

   <h2 class="no-num no-toc" id="w3c-working">[LONGSTATUS], [DATE]</h2>

   <dl>
  <dt>This version:
    <dd><!-- <a href="http://www.w3.org/TR/[YEAR]/WD-[SHORTNAME]-[CDATE]/">http://www.w3.org/TR/[YEAR]/WD-[SHORTNAME]-[CDATE]/</a></dd> -->
    <a href="http://dev.w3.org/csswg/[SHORTNAME]/">http://dev.w3.org/csswg/[SHORTNAME]/</a>
  <dt>Latest version:
    <dd><a href="http://www.w3.org/TR/css3-flexbox/">http://www.w3.org/TR/css3-flexbox/</a>
    <dt>Editors:
    <dd>Tab Atkins Jr. <a href="mailto:jackalmage@gmail.com">jackalmage@gmail.com</a>
    <dd>Alex Mogilevsky <a href="mailto:alexmog@microsoft.com">alexmog@microsoft.com</a>
    <dd>L. David Baron, Mozilla Corporation, <a href="mailto:dbaron@dbaron.org">dbaron@dbaron.org</a>

    <dt>Authors and former editors:
    <dd>Neil Deakin, Mozilla Corporation, <a href="mailto:enndeakin@gmail.com">enndeakin@gmail.com</a>
    <dd>Ian Hickson, formerly of Opera Software, <a href="mailto:ian@hixie.ch">ian@hixie.ch</a>
    <dd>David Hyatt, Apple, <a href="mailto:hyatt@apple.com">hyatt@apple.com</a>
   </dl>
   <!--copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id="abstract"><a name="abstract">Abstract</a></h2>

  <p>The draft describes a CSS box model optimized for interface design.
  It provides an additional layout system alongside the ones already in
  CSS.  [[!CSS21]]  In this new box model, the children of a box are
  laid out either horizontally or vertically, and unused space can be
  assigned to a particular child or distributed among the children by
  assignment of &ldquo;flex&rdquo; to the children that should expand.
  Nesting of these boxes (horizontal inside vertical, or vertical inside
  horizontal) can be used to build layouts in two dimensions.  This
  model is based on the box model in the XUL user-interface language
  used for the user interface of many Mozilla-based applications
  (such as Firefox).</p>

  <h2 class="no-num no-toc" id="table"><a name="contents">Table of
   contents</a></h2>
  <!--toc-->

  <hr>

  <h2 id="overview">Overview</h2>

<div class="note">
<div class="issue">BEGIN NEW INTRO</div>
  <p>CSS 2.1 defined three layout modes, algorithms which determine the size and 
  position of boxes based on their relationships with their sibling and ancestor 
  boxes: table layout, designed for laying out information in a tabular format, 
  static layout, designed for laying out documents and simple applications, and 
  positioned layout, designed for very explicit positioning without much regard 
  for other elements in the document. This module introduces a new layout mode, 
  flexbox layout, which is designed for laying out more complex applications and 
  webpages.</p>

  <p>Flexbox layout is superfically similar to static layout. It lacks many of 
  the more complex text or document-formatting properties that can be used in 
  static layout, such as float or columns, but in return it gains several 
  additional properties for determining the size and placement of boxes that 
  address common needs in complex applications and web pages. The children of a 
  flexbox can be laid out in any direction and have their order swapped around, 
  as well as &quot;flexing&quot; their sizes and positions to respond to the available 
  space in the flexbox.</p>
  <p>In this specification, an element with display:flex is called a &quot;flexbox&quot;. 
  Children of the flexbox are called &quot;flexbox children&quot;. No other elements are 
  referred to specially, as Flexbox Layout only affects the layout of the 
  flexbox itself and its direct children (or anonymous boxes wrapping its direct 
  children, in some cases).</p>
  
<div class="issue">END NEW INTRO</div>
</div>

  <p>
  Flexible boxes lay out their children using a constraint-based system that
  supports both relative flexible sizing and intrinsic sizing. Elements within
  a box may be intrinsically sized yet have their size increased if additional
  space is available in the container or have their size reduced if less space
  is available. In addition, the position and order of elements within a box
  may be modified.
  </p><p>

  In CSS, flexible boxes (often referred to only as boxes in this
  specification) may be created by setting the <span class="property">'display'</span>
  property. A block-level box can be specified with a value of <span class="css">'box'</span>
  and an inline box can be specified using a value of <span class="css">inline-box</span>.
  </p><p>

  A block-level box placed inside a block level element is positioned and sized as if
  it were any other block. An inline-level box placed inside another element is
  positioned and sized like an inline-block.
  </p><p>

  Inline children of a flexible box are wrapped in anonymous blocks. All other children
  are block-level. Elements within boxes are sized intrinsically. This means that the size is
  determined by the size needed for its content, or, in the case of replaced elements,
  the size of the replaced element. The intrinsic size of non-replaced elements may be affected
  by widths and heights specified on the descendants. When determining the intrinsic size of an
  element, the calculation is done without adding any line breaks, except those necessary
  (e.g. for content with a white-space of 'pre').
  </p><p>

  Children of boxes may specify their width and height using the 
  <span class="property">'width'</span> and <span class="property">'height'</span>
  properties. The width and height of replaced elements is computed as with
  replaced elements in inline contexts. Otherwise, if the width is set to 'auto', then the
  used value is the intrinsic size, which may be calculated using a shrink-to-fit algorithm,
  as with inline-block elements, i.e., it will be given the minimum amount of space required
  to lay out the element without unnecessary line breaks. Similarly, if the height is set to
  'auto', then the used value in a similar manner.
  </p><p>

  An unnested box placed inside an enclosing block will obey all the
  usual sizing rules of the block. For example, setting the width of an unnested box to
  100% ensures that the box is the maximum width permitted by the enclosing block
  (ignoring any margins, border and padding on that box).
  </p><p>

  The difference between boxes and blocks is in how the children of the
  element are laid out. Children of boxes are all block-level (inline-level
  contents get wrapped in anonymous blocks, as described in the section on
  <a href="http://damowmow.com/temp/csswg/old/ui/inlinesAndBlocks">inlines and blocks</a>).
  These blocks then get stacked in the direction specified by the
  <span class="property">'box-orient'</span> and
  <span class="property">'box-direction'</span> properties,
  and order specified by the
  <span class="property">'box-ordinal-group'</span> property.
  They are aligned within the box according to the
  <span class="property">'box-align'</span> property. The boxes may then flex
  or be distributed as specified by the <span class="property">'box-flex'</span>,
  <span class="property">'box-flex-group'</span>,
  <span class="property">'box-pack'</span> and
  <span class="property">'box-lines'</span> properties.
  </p><p>

  The <span class="property">'float'</span> and
  <span class="property">'clear'</span> properties do not apply to
  children of box elements, so the used value for these properties
  is 'none'. These properties do apply to the box itself if it is
  not a child of another box.
  </p>
  
  <div class="example">
  <p>
  For example:
  </p>

<pre>
   &lt;p style="width: 400px;"&gt;
     &lt;button style="width: 200px;"&gt;Child 1&lt;/button&gt;
     &lt;button style="width: 100px;"&gt;Child 2&lt;/button&gt;
   &lt;/p&gt;
</pre>

  <p>
  In this example, the first button is 200 pixels wide and the second button is
  100 pixels wide. As the box is 400 pixels wide, there is extra space left over
  which is placed after the two buttons but inside the box. The placement of this
  extra space may be modified using the various box properties described in the next
  sections. Neither the height of the buttons nor the height of the box are specified,
  so the height is computed intrinsically from the content. In this case, the buttons
  will be the height needed to display the label and button border, and the box will
  also be this height plus any margins around the buttons.
  </p>
</div>

  <p>
  Elements within a box may use the <span class="property">'overflow'</span> property
  to control whether a scrolling mechanism appears when the children of a box overflow.
  A scrolling mechanism may be displayed when flexible elements are reduced below their minimum
  intrinsic size when the overflow property is set to <span class="css">auto</span>
  or <span class="css">scroll</span>.
  If overflow is <span class="css">hidden</span>, the element will be clipped instead. <em>Note
  that the initial value is <span class="css">visible</span>, which is
  typically not the preferred effect in user interfaces.</em>
  </p>

<H2>New values for 'display' property</H2>

<table class="propdef">
<tbody>
<tr valign=baseline><td><em>Name:</em>&nbsp;&nbsp;<td><dfn id="propdef-box-orient">display</dfn>
<tr valign=baseline><td><em>Value:</em>&nbsp;&nbsp;<td>flex | inline-flex 
</tbody>
</table>

<p class="issue">TODO: rename 'display' property in examples and prose</p>

<P>You can declare that an element is a flexbox, and thus should use flexbox 
layout, by setting the <CODE>display</CODE> property on the element to the value 
<CODE>flex</CODE>.</P>
<P>All children of a flexbox must be block-level or atomic inline-level 
elements.  Contiguous runs of non-replaced inline elements are wrapped in an 
anonymous block-level box.  Out-of-flow elements (such as floats and absolutely 
positioned elements) leave behind a "placeholder" in their original source 
location which is treated like a non-replaced inline element for the purpose of 
this wrapping.  (This can, for example, create an empty flexbox child, if all 
the children are block-level elements and one is absolutely positioned.)  It is 
recommended that authors avoid putting in elements which are auto-wrapped with 
anonymous boxes, as the anonymous boxes cannot be targetted and controlled with 
the various flexbox properties defined later in this draft.</P>
<P class="issue">TOSO: Ping fantasai on the correct terms to use here.</P>
<P>Setting <CODE>display:flex</CODE> on an element forces it to use a new layout 
algorithm, and so some properties that were designed with the assumption of 
"normal" flow don't make sense in a flexbox context.  In particular:</P>
<UL>
  <LI>all of the properties in the Multicol module compute to their initial 
  values on a flexbox</LI>
  <LI><STRONG>[Others?]</STRONG></LI></UL>
<P>A flexbox child creates a new BFC.  As well, the margins of a flexbox child 
do not collapse with any other margin.</P>

  <h2 id="orientation">Orientation</h2>

<table class="propdef">
<tbody>
<tr valign=baseline><td><em>Name:</em>&nbsp;&nbsp;<td><dfn id="propdef-box-orient">box-orient</dfn>
<tr valign=baseline><td><em>Value:</em>&nbsp;&nbsp;<td>horizontal | vertical | inline-axis | block-axis | <span class="default">inherit</span>
<tr valign=baseline><td><em>Initial:</em>&nbsp;&nbsp;<td>inline-axis
<tr valign=baseline><td><em>Applies to:</em>&nbsp;&nbsp;<td>box elements
<tr valign=baseline><td><em>Inherited:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Percentages:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Media:</em>&nbsp;&nbsp;<td>visual
<tr valign=baseline><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;<td>specified value
</tbody>
</table>

<p>
A box may lay out its children either horizontally or vertically.
</p>

  <dl>
   <dt>horizontal

   </dt><dd>The box displays its children from left to right in a horizontal line.

   </dd><dt>vertical

   </dt><dd>The box displays its children from stacked from top to bottom vertically.

   </dd><dt>inline-axis

   </dt><dd>The box displays its children along the inline axis.

   </dd><dt>block-axis

   </dt><dd>The box displays its children along the block axis.
  </dd></dl>

  <p>
   The inline and block axes are the writing-mode dependent keywords which,
   in English, map to horizontal and vertical respectively.
  </p>

  <h2 id="displayorder">Display order</h2>

  <p>
  Children within a horizontally oriented box are, by default, displayed from
  left to right in the same order as they appear in the source document. Children
  within a vertically oriented box are displayed top to bottom in the same
  order. The box-direction and box-ordinal-group properties may be used to
  change this ordering.
  </p>

<table class="propdef">
<tbody>
<tr valign=baseline><td><em>Name:</em>&nbsp;&nbsp;<td><dfn id="propdef-box-direction">box-direction</dfn>
<tr valign=baseline><td><em>Value:</em>&nbsp;&nbsp;<td>normal | reverse | <span class="default">inherit</span>
<tr valign=baseline><td><em>Initial:</em>&nbsp;&nbsp;<td>normal
<tr valign=baseline><td><em>Applies to:</em>&nbsp;&nbsp;<td>box elements
<tr valign=baseline><td><em>Inherited:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Percentages:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Media:</em>&nbsp;&nbsp;<td>visual
<tr valign=baseline><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;<td>specified value
</tbody>
</table>

  <p> The <span class="property">'box-direction'</span>
   property specifies the direction in which children of a box are displayed.

  </p><dl>
   <dt>normal

   </dt><dd>A box with a computed value of horizontal for box-orient displays its
    children from left to right. A box with a computed value of vertical displays
    its children from top to bottom.

   </dd><dt>reverse

   </dt><dd>A box with a computed value of horizontal for box-orient displays its
    children from right to left. A box with a computed value of vertical displays
    its children from bottom to top.
  </dd></dl>

  <p>
   If the computed value for the box's 'direction' property is 'normal', a
   child's left edge is placed next to the right edge of the previous child, or
   the left edge of the box for the first child. If the computed value for the box's
   'direction' property is 'reverse', a child's right edge is placed next to the left
   edge of the previous child, or the right edge of the box for the first child.
  </p>

  <p>
  When the computed value for the overflow property is 'visible', 'scroll' or 'auto',
  the content may overflow the container. If the computed value for direction is normal,
  the content will overflow over the right or bottom side. If the computed value for
  direction is reverse, the content will overflow over the left or top side.
  </p>

<table class="propdef">
<tbody>
<tr valign=baseline><td><em>Name:</em>&nbsp;&nbsp;<td><dfn id="propdef-box-ordinal-group">box-ordinal-group</dfn>
<tr valign=baseline><td><em>Value:</em>&nbsp;&nbsp;<td>&lt;integer&gt;
<tr valign=baseline><td><em>Initial:</em>&nbsp;&nbsp;<td>1
<tr valign=baseline><td><em>Applies to:</em>&nbsp;&nbsp;<td>children of box elements
<tr valign=baseline><td><em>Inherited:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Percentages:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Media:</em>&nbsp;&nbsp;<td>visual
<tr valign=baseline><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;<td>specified value
</tbody>
</table>

  <p>The children of a box element may be assigned to <dfn id="ordinal0">ordinal
   groups</dfn> using the <span class="property">'box-ordinal-group'</span>
   property. This property is a natural number value with an initial value is 1.

  </p><p>Ordinal groups can be used in conjunction with the 'box-direction'
   property to control the order in which the direct children of a box appear.
   When the computed box-direction is normal, a box will display its elements
   starting from the lowest numbered ordinal group and ensure that those elements
   appear to the left (for horizontal boxes) or at the top (for vertical boxes)
   of the container. Elements with the same ordinal group are flowed in the order
   they appear in the source document tree. In the reverse direction, the
   ordinal groups are examined in the same order, except the elements appear
   reversed.

<div class="example">
<p>
    This example shows how ordinal groups might be used.
</p>

<pre>
    #div1 { display: box; }
    #span1 { box-ordinal-group: 2; }
    #span3 { box-ordinal-group: 2; }
    #span4 { box-ordinal-group: 1; }

    &lt;div id="div1"&gt;
      &lt;span id="span1" &gt;Sentence One&lt;/span&gt;
      &lt;span id="span2" &gt;Sentence Two&lt;/span&gt;
      &lt;span id="span3" &gt;Sentence Three&lt;/span&gt;
      &lt;span id="span4" &gt;Sentence Four&lt;/span&gt;
    &lt;/div&gt;
</pre>

<p>
The first ordinal group, 1, contains span2 and span4. As span2 does not specify an
ordinal group, it will default to 1. The elements will be displayed in document order,
so span2 will be displayed before span4. The second ordinal group, 2, contains the
remaining two spans. The resulting display order will be:
</p>

<pre>
    span2 span4 span1 span3
</pre>
</div>

  <p>Elements within a box can use the <span class="property">'visibility'</span>
   property to render themselves invisible. Boxes behave like tables in that the value
   <span class="css">collapsed</span> can be used to specify that an element within a
   box should not take up any space at all. The computed width and height of a collapsed
   element are both 0, and the element is not considered when calculating flexibility.
   Other non-collapsed flexible elements may expand as needed to fill in any space left
   open by a collapsed element.

<!--
  <h2 id="boxsizing">Box sizing</h2>

<table class="propdef">
<tbody>
<tr valign=baseline><td><em>Name:</em>&nbsp;&nbsp;<td><dfn id="propdef-box-sizing">box-sizing</dfn>
<tr valign=baseline><td><em>Value:</em>&nbsp;&nbsp;<td>content-box | padding-box | border-box | margin-box
<tr valign=baseline><td><em>Initial:</em>&nbsp;&nbsp;<td>1
<tr valign=baseline><td><em>Applies to:</em>&nbsp;&nbsp;<td>box and block elements
<tr valign=baseline><td><em>Inherited:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Percentages:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Media:</em>&nbsp;&nbsp;<td>visual</a>
<tr valign=baseline><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;<td>specified value
</tbody>
</table>

  <p>The <span class="property">'box-sizing'</span>
   property determines how the <span class="property">'height'</span> and
   <span class="property">'width'</span> properties should be interpreted.

  </p><dl>
   <dt>content-box

   </dt><dd>This is the behavior of width and height as specified by CSS2. The
    specified width and height apply to the width and height respectively of
    the content box of the element. The padding and border of the element are
    drawn outside the specified width and height.

   </dd><dt>padding-box

   </dt><dd>The specified width and height of this element determine the padding
    box of the element. That is, any padding specified on the element is
    drawn inside this specified width and height. The content width
    and height is computed by subtracting the padding of the respective
    sides from the specified width and height. The padding-box size is the
    dimension used for the containing block of absolutely positioned blocks.

   </dd><dt>border-box

   </dt><dd>The specified width and height of this element determine the border
    box of the element. That is, any padding or border specified on the
    element is laid out and drawn inside this specified width and height. The
    content width and height is computed by subtracting the border and
    padding of the respective sides from the specified width and
    height. This is the behavior of width and height as commonly implemented
    by legacy HTML user agents for replaced elements and input elements.

   </dd><dt>margin-box

   </dt><dd>The specified width and height of this element determine the margin
    box of the element. That is, any margin, padding or border specified on
    the element is laid out and drawn inside this specified width and height.
    The content width and height is computed by subtracting the margin,
    border and padding of the respective sides from the specified
    width and height. When margins collapse, the height (or width, for
    horizontal block layout) is calculated before applying any collapsing
    algorithms.
  </dd></dl>

  <p>Note that despite the name of the property, <span class="property">'box-sizing'</span> applies to block and
   table-level elements as well as boxes.

-->

  </p>
  
<H2>Flexbox Direction (<span class="issue">new: alternative to 'box-direction' and 
'box-orientation'</span>)</H2>
<DL>
  <DT>property</DT>
  <DD><CODE>flex-direction</CODE></DD>
  <DT>values</DT>
  <DD><CODE>ltr | rtl | ttb | btt | inline | inline-reverse | block | 
  block-reverse</CODE></DD>
  <DT>default value</DT>
  <DD><CODE>inline</CODE></DD>
  <DT>applies to</DT>
  <DD>flexboxes</DD></DL>
<P>The <CODE>flexbox-direction</CODE> property specifies how flexbox children 
are placed on each line of the flexbox.  A value of <CODE>ltr</CODE> means that 
the first flexbox child is placed against the left edge of the flexbox, with 
later children placed immediately to the right of the preceding flexbox child.  
A value of <CODE>rtl</CODE> is the same, but with the initial flexbox child 
placed against the right edge of the flexbox and later children placed to the 
left.  Both of these values mean that the flexbox is a <STRONG>horizontal 
flexbox</STRONG>.  A value of <CODE>ttb</CODE> means that the first flexbox 
child is placed against the top edge of the flexbox, with later children placed 
immediately below it, while <CODE>btt</CODE> means the first child is placed 
against the bottom edge of the flexbox, with later children placed immediately 
above it.  Both of these values mean that the flexbox is a <STRONG>vertical 
flexbox</STRONG>.</P>
<P>A value of <CODE>inline</CODE> computes to one of <CODE>ltr</CODE>, 
<CODE>rtl</CODE>, <CODE>ttb</CODE>, or <CODE>btt</CODE>, depending on the 
direction and block-flow of the flexbox: if the start side of the flexbox is the 
left side, <CODE>inline</CODE> must compute to <CODE>ltr</CODE>; if the start 
side of the flexbox is the right side, <CODE>inline</CODE> must compute to 
<CODE>rtl</CODE>; if the start side of the flexbox is the top side, 
<CODE>inline</CODE> must compute to <CODE>ttb</CODE>; if the start side of the 
flexbox is the bottom side, <CODE>inline</CODE> must compute to 
<CODE>btt</CODE>.  <CODE>inline-reverse</CODE>, <CODE>block</CODE>, and 
<CODE>block-reverse</CODE> are identical to <CODE>inline</CODE>, but base their 
computed value off of the end side, before side, or after side of the flexbox, 
respectively.</P>
<P>For example, a very basic flexbox can be marked up as:</P><PRE class="example"><CODE>&lt;div style="display: flex; width: 400px; height:100px;"&gt;
  &lt;div style="flex-grow: 1;"&gt;&lt;/div&gt;
  &lt;div style="flex-grow: 2;"&gt;&lt;/div&gt;
  &lt;div style="flex-grow: 1;&gt;&lt;/div&gt;
&lt;/div&gt;
</CODE></PRE>
<IMG alt="" src="images/basic-flexbox.png">
<P class="issue">TODO: Fix diagram to not use the flex unit.</P>
<P>A vertical flexbox can be used to emulate the functionality of HTML's 
<CODE>&lt;center&gt;</CODE> element:</P><PRE class="example"><CODE>&lt;div&gt;
  &lt;span&gt;foo foo foo foo&lt;/span&gt;
  &lt;span&gt;bar bar&lt;br&gt;bar bar&lt;/span&gt;
  &lt;span&gt;foo foo foo foo foo foo foo foo foo foo foo foo&lt;/span&gt;
&lt;/div&gt;
&lt;style&gt;
  div { display: flex; flex-direction: ttb; width: 200px; }
  span { margin: 0 auto; }
&lt;/style&gt;
</CODE></PRE>
<P><IMG alt="" src="images/basic-vertical-flexbox.png"></P>
  
  <h2 id="alignment">Alignment (<span class="issue">old</span>)</h2>

<table class="propdef">
<tbody>
<tr valign=baseline><td><em>Name:</em>&nbsp;&nbsp;<td><dfn id="propdef-box-align">box-align</dfn>
<tr valign=baseline><td><em>Value:</em>&nbsp;&nbsp;<td>start | end | center | baseline | <span class="default">stretch</span>
<tr valign=baseline><td><em>Initial:</em>&nbsp;&nbsp;<td>stretch
<tr valign=baseline><td><em>Applies to:</em>&nbsp;&nbsp;<td>box elements
<tr valign=baseline><td><em>Inherited:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Percentages:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Media:</em>&nbsp;&nbsp;<td>visual
<tr valign=baseline><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;<td>specified value
</tbody>
</table>

  <p>
   When the size of the containing box is larger than the size of a child,
   extra space will be available.
   The <span class="property">'box-align'</span>
   property specifies how a box's children are placed and aligned along the direction
   perpendicular to the box orientation, and where the extra space, if any, is
   positioned. For horizontal orientation, it
   specifies how the children are positioned vertically. For vertical
   orientation, it specifies how the children are positioned horizontally.

  </p><p>The amount of extra space may be different for each child. For example, if
   the containing box has a height of 200 pixels, and it contains two children at
   100 and 150 pixels respectively, there will be 100 pixels of extra space for the
   first child and 50 pixels of space for the second child.

  </p><p>The following values are valid for the box-align property, but see the
   text afterward for more specifics as to how children are positioned.

<dl>
   <dt>start

   </dt><dd>For normal direction boxes, the top edge of each child is placed
    along the top of the box. Extra space is placed below the element. For reverse
    direction boxes, the bottom edge of each child is placed 
    along the bottom of the box. Extra space is placed above the element.

   </dd><dt>end

   </dt><dd>For normal direction boxes, the bottom edge of each child is placed
    along the bottom of the box. Extra space is placed above the element. For reverse
    direction boxes, the top edge of each child is placed 
    along the top of the box. Extra space is placed below the element.

   </dd><dt>center

   </dt><dd>Any extra space is divided evenly, with half placed above the child
    and the other half placed after the child.

   </dd><dt>baseline

   </dt><dd>If this box orientation is inline-axis or horizontal, all children are
    placed with their baselines aligned, and extra space
    placed before or after as necessary. For block flows, the baseline of the first
    non-empty line box located within the element is used. For tables, the baseline
    of the first cell is used. The children, once aligned on their baselines, should
    then be placed into the box so that the child with the earliest extent margin has
    its top margin edge (or bottom margin edge for reverse direction boxes) flush with
    the top (or bottom) edge of the box's content area. If the box does not have an
    'auto' height, overflow will always be on the bottom (or top for reverse direction
    boxes) edge. If the box orientation is block-axis or vertical, then
    <span class="css">baseline</span> is interpreted as <span class="css">center</span>.

   </dd><dt>stretch

   </dt><dd>The height of each child is adjusted to that of the containing block. However,
    note the text below.
  </dd></dl>

  <p>The following rules should be applied when determining the size of
   children inside boxes in the dimension opposite to the orientation of the
   box. Exceptions to these rules are noted under each of the possible values
   of 'box-align' below.

  </p><p>All normal flow children of boxes will attempt to satisfy the following
   sizing equation when placed inside vertical boxes if and only if at least
   one of the specified values is auto:

  </p><p>'margin-left' + 'border-left-width' + 'padding-left' + 'width' +
   'padding-right' + 'border-right-width' + 'margin-right' = width of
   containing box

  </p><p>and a similar equation for height when placed inside horizontal boxes:

  </p><p>'margin-top' + 'border-top-width' + 'padding-top' + 'height' +
   'padding-bottom' + 'border-bottom-width' + 'margin-bottom' = height of
   containing box

  </p><p>If all the values in the equation are specified (i.e., if there are no
   auto values), then the equation above does not apply, and the specified
   values should be used. If applying the equation results in a negative
   value for width/height, then that value is set to 0, and those values
   should be used.

  </p><p>If the value of <span class="property">'box-align'</span>
   is <span class="css">stretch</span>, then elements obey the sizing rules specified
   above. This is the default value. If both width/height and one or both
   margin values are 'auto', the 'auto' margins are set to 0 and the equation
   is used to find a value for width/height. Otherwise, if both margins are
   'auto', then the equation is solved under the additional constraint that
   the two margins must get the same value. If neither the width/height or
   either margin is auto, then the extra space is positioned as if box-align
   was start.

  </p><p>If the value of <span class="property">'box-align'</span>
   is start, center, baseline, or
   end, and a value of 'auto' is specified for width/height, then the
   intrinsic size (or shrink to fit size) of the element should be used.
   If one margin has the value of auto, then the equations above should be used.
   If both margins have a value of auto then the above equations should be used,
   with the space being divided evenly between the two margins. These rules are
   similar to the rules for replaced elements inside blocks.

  </p><p>If the above would cause the width or height to greater than the computed
   maximum width or height, then the width or height is set to the maximum width
   or height, and the auto margins increased by the extra amount left over. If both
   margins are auto, they should both be increased by the same amount. If neither
   margin is auto, the extra space is placed as necessary depending on the box-align
   value.

  </p><p>Once the sizes are computed, the margin boxes of the elements should be
   aligned at the start, center, baseline, or end of the box. For horizontal
   boxes, this typically means the top, center, baseline or bottom of the
   box. For vertical boxes, the start and end alignments depend upon the
   direction. For LTR, the elements would be aligned at the left side of the
   box for start and the right side for end. For RTL, the elements would be
   aligned at the right of the box for start and the left side for end.

  </p>
  <p>&nbsp;</p>
<H2>Alignment (<span class="issue">new</span>)</H2>
<P>Vertically sizing and positioning flexbox children is much simpler than doing 
so horizontally, as you only have to worry about one box and its margins.  Free 
space is just the height of the flexbox minus the preferred height of the 
flexbox child and its top and bottom margins.  Ordinarily, an auto height will 
attempt to fill all the available space (<CODE>flex-align</CODE> can change this 
behavior, see below).  If there is space left over after computing the height, 
remaining space is split evenly between the auto margins.  If there is free 
space left over and neither margin is auto, then the free space is placed after 
the flexbox (the 'end' or 'after' logical side of the flexbox, whichever maps to 
a vertical direction).</P>
<DL>
  <DT>new property</DT>
  <DD><CODE>flex-align</CODE></DD>
  <DT>values</DT>
  <DD><CODE>shrink | before | after | middle | baseline</CODE></DD>
  <DT>default value</DT>
  <DD><CODE>before</CODE></DD>
  <DT>applies to</DT>
  <DD>flexbox children</DD></DL>
<P>The <CODE>flex-align</CODE> property aligns the contents of a flexbox child 
with the contents of other flexbox children in the same flexbox.  It has 
slightly different effects depending on the writing-mode of the flexbox 
child.</P>
<P>If the flexbox child has a vertical writing-mode (in a horizontal flexbox, 
remember - the same applies to a horizontal writing-mode in a vertical flexbox), 
then <CODE>flex-align</CODE> has only a minor effect.  A value of 
<CODE>before</CODE>, <CODE>after</CODE>, <CODE>middle</CODE>, or 
<CODE>baseline</CODE> will make the flexbox child's height flex if it is auto; a 
value of <CODE>shrink</CODE> makes an auto height shrink-wrap.</P>
<P>If the flexbox child has a horizontal writing-mode, <CODE>flex-align</CODE> 
has its full effect.  Similar to the previous paragraph, a value of 
<CODE>before</CODE>, <CODE>after</CODE>, <CODE>middle</CODE>, or 
<CODE>baseline</CODE> will make an auto height flex to the full height of the 
flexbox, while a value of <CODE>shrink</CODE> will make an auto height 
shrink-wrap.  As well, <CODE>flex-align</CODE> will align the contents of the 
flexbox children with each other.  All the flexbox children with the same value 
for <CODE>flex-align</CODE> will be aligned together, independent of the 
alignment of any flexbox children with a different <CODE>flex-align</CODE> 
values:</P>
<UL>
  <LI><STRONG>before</STRONG> and <STRONG>shrink</STRONG>: All flexbox children 
  with a value of <CODE>before</CODE> or <CODE>shrink</CODE> for 
  <CODE>flex-align</CODE> will have the before-side of their contents aligned 
  together.  In English text, for example, this is the top of the content.</LI>
  <LI><STRONG>after</STRONG>: All flexbox children with a value of 
  <CODE>after</CODE> for <CODE>flex-align</CODE> will have the after-side of 
  their contents aligned together.</LI>
  <LI><STRONG>middle</STRONG>: All flexbox children with a value of 
  <CODE>middle</CODE> for <CODE>flex-align</CODE> will have the middle of their 
  contents (halfway between the before-edge and the after-edge of their 
  content).</LI>
  <LI><STRONG>baseline</STRONG>: All flexbox children with a value of 
  <CODE>baseline</CODE> for <CODE>flex-align</CODE> will have the baselines of 
  their contents aligned.</LI></UL>
  <p>&nbsp;</p><h2 id="flex">Flexibility (<span class="issue">old</span>)</h2>

  <p>Each element directly within a box may be made either 
   <dfn id="flexible">flexible</dfn> or <dfn id="inflexible">inflexible</dfn>.
   Flexible elements may grow when the containing box has extra space available
   after the size of all of its children have been computed, and shrink if the
   size would cause the containing box to overflow, yet the preferred width of
   the flexible element is larger than its minimum width. Inflexible elements do not
   change in size, even when there is extra space left over in the box.

  </p><p>
  The flexibility only affects the size in the axis along the box's orientation.
  (e.g. the flexibility only affects the width in a horizontal box, and only
  the height in a vertical box.)
  </p>

<table class="propdef">
<tbody>
<tr valign=baseline><td><em>Name:</em>&nbsp;&nbsp;<td><dfn id="propdef-box-flex">box-flex</dfn>
<tr valign=baseline><td><em>Value:</em>&nbsp;&nbsp;<td>&lt;number&gt;
<tr valign=baseline><td><em>Initial:</em>&nbsp;&nbsp;<td>0.0
<tr valign=baseline><td><em>Applies to:</em>&nbsp;&nbsp;<td>in-flow children of box elements
<tr valign=baseline><td><em>Inherited:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Percentages:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Media:</em>&nbsp;&nbsp;<td>visual
<tr valign=baseline><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;<td>specified value
</tbody>
</table>

<table class="propdef">
<tbody>
<tr valign=baseline><td><em>Name:</em>&nbsp;&nbsp;<td><dfn id="propdef-box-flex-group">box-flex-group</dfn>
<tr valign=baseline><td><em>Value:</em>&nbsp;&nbsp;<td>&lt;integer&gt;
<tr valign=baseline><td><em>Initial:</em>&nbsp;&nbsp;<td>1
<tr valign=baseline><td><em>Applies to:</em>&nbsp;&nbsp;<td>in-flow children of box elements
<tr valign=baseline><td><em>Inherited:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Percentages:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Media:</em>&nbsp;&nbsp;<td>visual
<tr valign=baseline><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;<td>specified value
</tbody>
</table>

  <p>An element is flexible when the <span class="property">box-flex</span>
    property is specified. The <span class="property">box-flex</span>
    property is a floating point value representing the flexibility of the element. Its
    initial value is 0, which indicates that the element is inflexible. Elements
    that are flexible can shrink or grow as the box shrinks and grows.
    Whenever there is extra space left over in a box, the flexible elements are
    expanded to fill that space. All flex is relative. For example, a child
    with a box-flex of 2 is twice as flexible as a child with a box-flex of 1. A negative
    value for box-flex is not allowed.

  <p>Flexible elements can be assigned to <dfn id="flex-groups0">flex
   groups</dfn> using the <span class="property">'box-flex-group'</span> property. This property
   is a natural number value (the first flex group is 1 and higher values
   are later flex groups). The initial value is 1.

  </p><p>
    In a horizontally oriented box, the preferred width of each child is computed. If
    the width of the margin box of each child is equal to the width of the containing block,
    then there is no extra space available, so the preferred widths are used for each child.
    If the width of the margin box adds up
    to a value smaller than the width of the containing block, then extra space is
    available. This extra space is divided up among the flexible children, as described
    below. If the width of the margin box adds up to a value larger than the width of the
    containing block, then the flexible children shrink as much as necessary to prevent
    overflow.

  </p><p>
    Flexibility only applies to elements in normal flow. As absolute and fixed positioned
    elements are not in flow, any flexibility or flexgroup specified on them is ignored.
    In addition, as the <span class="property">'float'</span> property does not apply to
    children of flexible boxes, they are considered part of normal flow and flexibility
    does apply.

  </p><p>
    When dividing up extra space, first take all elements within the first flex group.
    Each element within that group should be given extra width based on the ratio of
    that element's flexibility compared to the flexibility of other elements within
    the same flex group.
  </p>

  <p>
    However, if the preferred width of the element plus the extra width allotted to it
    is larger than the maximum width of the element, then the width is set to that
    maximum width, and any remaining extra width beyond that is divided up among the
    other children.
  </p>

<div class="example">
<p>
    In this example there is 60 pixels of extra space available in the containing box.
</p>

<pre>
    #div1 { display: box; width: 300px; }
    #button1 { box-flex: 1.0; width: 100px; }
    #button2 { box-flex: 2.0; width: 140px; }

    &lt;div id="div1"&gt;
      &lt;button id="button1"&gt;Hello&lt;/button&gt;
      &lt;button id="button2"&gt;Goodbye&lt;/button&gt;
    &lt;/div&gt;
</pre>

<p>
    As both child buttons are flexible, the extra space will be divided up between them.
    The first child button has a flexibility of 1.0 and the second child button has a
    flexibility of 2.0. The first button will receive 20 pixels of extra width and the second
    button will receive 40 pixels of extra width, maintaining the same ratio of extra width
    to flexibility values. This extra width is added to the preferred size of the element.
</p>
<p>
    However, if the second button had a maximum width of 150 pixels, it
    could only grow by 10 pixels before hitting this maximum size, so the remaining
    30 pixels would instead be given to the first element, breaking the flexibility ratio.
</p>
</div>

  <p>
    More specifically, the percentage of extra space that an element may receive is calculated
    as follows:
  </p><p>'box-flex of child' / 'total of box-flex values of child and all siblings'

  </p><p>
    If the width of all flexible children within the group has been increased to their
    maximum widths, the process repeats for the children within the next flex group,
    using any space left over from the previous flex group. Once there are no more flex groups,
    and there is still space remaining, the extra space is divided within the containing
    box according to the box-pack property.

  </p><p>
    If the box would overflow after the preferred width of the children have been computed,
    then width is removed from flexible elements in a manner similar to that used when adding
    extra space. Each flex group is examined in turn and space is removed according to
    the ratio of the flexibility of each element. Elements do not shrink below their
    minimum widths.

  </p><p>
    If all children have been shrunk to their minimum sizes, then the box overflows,
    although if the box-lines property is set to multiple, the box may be able to move
    elements to additional lines to prevent this.

  </p><p>
    For vertically oriented boxes, the algorithm as described above is similar except
    using the height instead of the width.

  </p><p>
    When a child box of a horizontally oriented box contains an inline element, it is
    likely that shrinking the width of the element due to flexibility may cause the
    inline element to grow in height, as the text within it may need to wrap to
    additional lines.
  </p>

<div class="example">
<p>
Examples:
</p>

<pre>
    #div1 { display: box; box-orient: vertical; height: 200px }

    &lt;div id="div1"&gt;
      &lt;button&gt;Cat&lt;/button&gt;
      &lt;button style="box-flex: 1"&gt;Piranha&lt;/button&gt;
      &lt;button&gt;Antidisestablishmentarianism&lt;/button&gt;
    &lt;/div&gt;
</pre>

  <p>
    In the example above, the box is 200 pixels tall and is more than
    enough room for the three buttons. Because the first and third buttons
    are inflexible, they remain the same size, which is their intrinsic size.
    The second button is specified as being flexible, and because it is the only
    flexible element in the box, it receives all of the extra space.
  </p>

<pre>
    &lt;div style="display: box; box-orient: vertical;"&gt;
      &lt;button style="box-flex: 1; height: 1000px;"&gt;
        Cat
      &lt;/button&gt;
    &lt;/div&gt;
</pre>

  <p>
    In this example, if the height of the box is reduced, for instance, because
    the user resized the containing viewport, the height of the flexible button
    also shrinks with the box, despite the specification of 1000 pixels as the
    preferred height. It continues to shrink until the minimum required height for
    the button is reached, which here will likely be the height needed to display
    the button's label and border. After that, the button can shrink no further.
    Elements within a box can therefore have their own notions of minimum and
    maximum intrinsic sizes. In the above example, the button could not get
    any smaller than the minimum height required to draw its borders and its
    text.
  </p>

<pre>
    #div1 { display: box; }
    #iframe1 { box-flex: 1; min-width: 100px; max-width: 300px; height: 300px; }

    &lt;div id="div1"&gt;
      &lt;iframe id="iframe1" src="http://www.mozilla.org/"/&gt;
    &lt;/div&gt;
</pre>

  <p>
    In this example, the iframe has a minimum width of 100 pixels and a maximum
    width of 300 pixels. If the containing box is less than 100 pixels wide, the
    iframe will overflow its containing div. If the containing box is between
    100 pixels and 300 pixels inclusive, the width of the iframe would be set to that
    size, minus any necessary padding, borders and margins. If the width of
    the containing box is larger than 300 pixels, the extra space will be added
    inside the div. The extra space is added after the iframe inside the box.
   </p>

<pre>
    &lt;p style="display: box;"&gt;
      &lt;button style="box-flex: 1; max-width: 50px;"&gt;Child 1&lt;/button&gt;
      &lt;button style="box-flex: 1; min-width: 50px;"&gt;Child 2&lt;/button&gt;
    &lt;/p&gt;
</pre>

   <p>In this example, the box has been stretched so that it is very
    wide. The first child has a maximum width of 50 pixels, and it divides
    the excess space equally with the second child until its maximum width
    has been reached. After that, since it is not allowed to grow any
    further, the remaining space all goes to the second child.
  </p>
</div>

<H2>Flexibility (<span class="issue">new</span>)</H2>
<P>The defining aspect of Flexbox Layout is <EM>flexibility</EM> - flexbox 
children can be made <STRONG>flexible</STRONG>, which means they'll work 
together to distribute available space, stretching or shrinking their widths and 
heights as necessary to fill the flexbox completely.  The space around and 
between the children can flex as well, pushing the children around inside the 
flexbox.</P>
<P>This is controlled through several new properties, and some existing 
properties: the width/height properties, <CODE>flex-stretch</CODE> controls the 
size of the flexbox children in the direction of the flexbox (width for 
horizontal flexboxes, height for vertical flexboxes), <CODE>margin</CODE> and 
<CODE>flex-pack</CODE> control the space between flexbox children in the 
direction of the flexbox, and <CODE>margin</CODE>, the width/height properties, 
and <CODE>flex-align</CODE> control the size, spacing, and alignment of boxes in 
the perpendicular direction.</P>
<P>Note: The flexbox properties in this section are symmetrical for horizontal 
and vertical flexboxes, except where noted.  To simplify the language, this 
section will assume a horizontal flexbox.  In a vertical flexbox all properties 
apply in the same way, with all references to physical directions or dimensions 
swapped to the relevant direction or dimension in the opposite direction.</P>
<P><STRONG>This chapter is almost entirely informative.  The only normative 
content in this chapter, and the contained subchapters, are the syntax 
definitions of the properties introduced herein.  In particular, the 
descriptions of how these properties work <EM>are entirely informative</EM>.  A 
later section of the spec gives the normative meaning of each property, in terms 
of the sizing algorithm.</STRONG></P>
<DL>
  <DT>new property</DT>
  <DD><CODE><span class="style1">flex-grow</span></CODE></DD>
  <DT>values</DT>
  <DD><CODE>&lt;number&gt;</CODE></DD>
  <DT>default value</DT>
  <DD><CODE>0.0</CODE></DD>
  <DT>allowed on</DT>
  <DD>flexbox children</DD>
  <DT>new property</DT>
  <DD><CODE><span class="style1">flex-shrink</span></CODE></DD>
  <DT>values</DT>
  <DD><CODE>&lt;number&gt;</CODE></DD>
  <DT>default value</DT>
  <DD><CODE>0.0</CODE></DD>
  <DT>allowed on</DT>
  <DD>flexbox children</DD>
  <DT>new property</DT>
  <DD><CODE><span class="style1">flex-stretch</span></CODE></DD>
  <DT>values</DT>
  <DD><CODE>&lt;flex-grow&gt; &lt;flex-shrink&gt;</CODE></DD>
  <DT>default value</DT>
  <DD><CODE>0.0 0.0</CODE></DD>
  <DT>allowed on</DT>
  <DD>flexbox children</DD></DL>
<P>The <CODE>flex-grow</CODE> and <CODE>flex-shrink</CODE> properties control 
whether or not a flexbox child's width is flexible, and how flexible it is.  The 
value of these properties must be non-negative numbers; a negative number for 
either value renders the property invalid.  The <CODE>flex-stretch</CODE> 
property is a shorthand property which sets both <CODE>flex-grow</CODE> and 
<CODE>flex-shrink</CODE> together.</P>
<P>Free space is determined by subtracting the sum of the <STRONG>preferred 
widths</STRONG> of the flexbox children from the width of the flexbox.  The free 
space may be positive, in which case any flexible children may grow to fill the 
space, or negative, in which case any flexible children may shrink to avoid 
overflowing the space, in either case respecting min and max widths on the 
flexbox children as well.  The <STRONG>preferred width</STRONG> of a flexbox 
child with a specified width is that width; otherwise, it's the max-content 
width of the flexbox child.</P>
<P>If there is positive free space in the flexbox, then any flexbox child with a 
non-0 value for flex-grow is considered <STRONG>flexible</STRONG>.  Flexible 
children will divide up the free space proportionally according to their 
<CODE>flex-grow</CODE> values.  For example, if the flexbox has three children, 
two with <CODE>flex-grow:1</CODE> and one with <CODE>flex-grow:2</CODE>, and 
there is 100px of free space in the flexbox, the first two children will 
increase their width by 25px, while the latter child will increase its width by 
50px.</P>
<P>Similarly, if there is negative free space in the flexbox, then any flexbox 
child with a non-0 value for flex-shrink is considered 
<STRONG>flexible</STRONG>.  Flexible children will divide up the (negative) free 
space proportionally according to their <CODE>flex-shrink</CODE> values.  For 
example, if the flexbox has three children, two with <CODE>flex-shrink:1</CODE> 
and one with <CODE>flex-shrink:2</CODE>, and there is -100px of free space in 
the flexbox, the first two children will decrease their width by 25px, while the 
latter child will decrease its width by 50px.</P>
<P>Auto left and right margins also participate in free space distribution, 
similar to if they were blocks with <CODE>width:0; flex-grow:1;</CODE>.</P>

  <h2 id="packing">Packing along the box axis (<span class="issue">old</span>)</h2>

<table class="propdef">
<tbody>
<tr valign=baseline><td><em>Name:</em>&nbsp;&nbsp;<td><dfn id="propdef-box-pack">box-pack</dfn>
<tr valign=baseline><td><em>Value:</em>&nbsp;&nbsp;<td><span class="default">start</span> | end | center | justify
<tr valign=baseline><td><em>Initial:</em>&nbsp;&nbsp;<td>start
<tr valign=baseline><td><em>Applies to:</em>&nbsp;&nbsp;<td>box elements
<tr valign=baseline><td><em>Inherited:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Percentages:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Media:</em>&nbsp;&nbsp;<td>visual
<tr valign=baseline><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;<td>specified value
</tbody>
</table>

  <p>When all of the elements within a box are inflexible or when all elements
   have grown to their maximum sizes and can stretch no further, extra space
   may be left over in the box. The box-pack property may be used to dictate
   how any additional space along the box-axis should be distributed between elements.
   The box-pack property does not affect the position of elements in the opposite
   direction. That is, box-pack affects only the horizontal position in horizontally
   oriented boxes and only the vertical position in vertically oriented boxes.
   </p>

<dl>
   <dt>start

   </dt><dd>For normal direction boxes, the left edge of the first child
    is placed at the left side, with all extra space placed after the last
    child. For reverse direction boxes, the right edge of the last child
    is placed at the right side, with all extra space placed before the first
    child.

   </dd><dt>end

   </dt><dd>For normal direction boxes, the right edge of the last child
    is placed at the right side, with all extra space placed before the first
    child. For reverse direction boxes, the left edge of the first child
    is placed at the left side, with all extra space placed after the last child.

   </dd><dt>center

   </dt><dd>The extra space is divided evenly, with half placed before the first
    child and the other half placed after the last child.

   </dd><dt>justify

   </dt><dd>The space is divided evenly in-between each child, with none of the
    extra space placed before the first child or after the last child. If there
    is only one child, treat the pack value as if it were start.
  </dd></dl>

<div class="example">
<pre>
    &lt;p style="box-align: center; box-pack: center; width: 300px; height: 300px;"&gt;
      &lt;button&gt;centered&lt;/button&gt;
    &lt;/p&gt;
</pre>

  <p> In the example above, the button is centered within the box using the
   <span class="property">'box-align'</span> and
   <span class="property">'box-pack'</span>
   properties together. The former centers the button vertically, and the
   latter centers the button horizontally.
</div>

<h2>Packing along the box axis (<span class="issue">new</span>)</h2>
<DL>
  <DT>new property</DT>
  <DD><CODE>flex-pack</CODE></DD>
  <DT>values</DT>
  <DD><CODE>start | end | center | justify</CODE></DD>
  <DT>default value</DT>
  <DD><CODE>start</CODE></DD>
  <DT>applies to</DT>
  <DD>flexboxes</DD></DL>
<P>The <CODE>flex-pack</CODE> property specifies what to do with leftover free 
space if there are no flexible widths or margins, or if all flexible widths have 
grown to their maximum size and there is still space left over.</P>
<P>The <CODE>start</CODE> value specifies that flexbox children will be packed 
toward the start of the flexbox (this is not necessarily the 'start' logical 
edge - it's the edge of the flexbox that flexbox children are first placed 
against).  That is, any leftover free space must be placed at the end of the 
flexbox.</P>
<P>Similarly, the <CODE>end</CODE> value specifies that flexbox children will be 
packed toward the end of the flexbox (same caveat as above applies).  That is, 
leftover free space is placed at the start of the flexbox.</P>
<P>The <CODE>center</CODE> value specifies that flexbox children will be placed 
in the center of the flexbox; leftover free space is split equally between being 
placed at the start and end of the flexbox.</P>
<P>The <CODE>justify</CODE> value specifies that flexbox children will be spaced 
evenly in the flexbox; if there are N flexbox children, leftover free space is 
split into N-1 equal parts and inserted between each flexbox child.  There is no 
free space placed at the start or the end of the flexbox; the first and last 
flexbox child will be flush with the edges of the flexbox.</P>
<H2>Flex Assignment Algorithm (<span class="issue">new</span>)</H2>
<P class="issue">TODO: to be completed</P>

  <h2 id="multiple">Multiple Lines (<span class="issue">at risk, sugested cut</span>)</h2>

<table class="propdef">
<tbody>
<tr valign=baseline><td><em>Name:</em>&nbsp;&nbsp;<td><dfn id="propdef-box-lines">box-lines</dfn>
<tr valign=baseline><td><em>Value:</em>&nbsp;&nbsp;<td><span class="default">single</span> | multiple
<tr valign=baseline><td><em>Initial:</em>&nbsp;&nbsp;<td>single
<tr valign=baseline><td><em>Applies to:</em>&nbsp;&nbsp;<td>box elements
<tr valign=baseline><td><em>Inherited:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Percentages:</em>&nbsp;&nbsp;<td>no
<tr valign=baseline><td><em>Media:</em>&nbsp;&nbsp;<td>visual
<tr valign=baseline><td><em>Computed&nbsp;value:</em>&nbsp;&nbsp;<td>specified value
</tbody>
</table>

  <p>By default a horizontal box will lay out its children in a single row,
   and a vertical box will lay out its children in a single column. This
   behavior can be changed using the box-lines property. The default value is
   single, which means that all elements will be placed in a single row
   or column, and any elements that don't fit will simply be considered
   overflow.

  </p><p>If a value of multiple is specified, however, then the box is allowed to
   expand to multiple lines (that is, multiple rows or columns) in order to
   accommodate all of its children. The box must attempt to fit its children
   on as few lines as possible by shrinking all elements down to their minimum
   widths or heights if necessary.

  </p><p>If the children in a horizontal box still do not fit on a line after
   being reduced to their minimum widths, then children are moved one by one
   onto a new line, until the elements remaining on the previous line fit.
   This process can repeat to an arbitrary number of lines. If a line contains
   only a single element that doesn't fit, then the element should stay on that
   line and overflow out of the box. The later lines are placed below the
   earlier lines in normal direction boxes and above in reverse direction boxes.
   The height of a line is the height of the largest child in that line. No
   additional space appears between the lines apart from the margins on the
   largest elements in each line. For calculating the height of a line, margins
   with a computed value of auto should be treated as having a value of 0.

  </p><p>A similar process occurs for children in a vertical box. Later lines in
  normal direction boxes are placed to the right of earlier lines and to the left
  in reverse direction boxes.

  </p><p>Once the number of lines has been determined, elements with a computed value
   for box-flex other than 0 stretch as necessary in an attempt to fill the remaining
   space on the lines. Each line computes flexes independently, so only elements on
   that line are considered when evaluating flex and flex-groups. The packing of elements
   in a line, as specified by the box-pack property, is also computed independently
   for each line.
  </p>

<div class="example">
<p>
    This example shows four buttons that do not fit horizontally.
</p>

<pre>
    #div1 {
      display: box;
      box-lines: multiple;
      width: 300px;
    }
    button {
      box-flex: 1.0;
      width: 100px;
    }

    &lt;div id="div1"&gt;
      &lt;button id="button1"&gt;Elephant&lt;/button&gt;
      &lt;button id="button2"&gt;Tiger&lt;/button&gt;
      &lt;button id="button1"&gt;Antelope&lt;/button&gt;
      &lt;button id="button2"&gt;Wildebeest&lt;/button&gt;
    &lt;/div&gt;
</pre>

<p>
    The buttons are shrunk to their minimum widths, in this case calculated
    intrinsically. Assume that the four buttons have a minimum intrinsic width
    of 80 pixels. This will allow the first three buttons to fit in 240 pixels
    with 60 pixels left over of remaining space. Because the box-lines
    property has a specified value of multiple, the fourth button may be moved
    onto a second line.
</p>

<p>
    Flexibility is applied to each element, separately for each line. The first line
    has 60 pixels of remaining space, so each of the three buttons on that line will
    receive 20 pixels of extra width. The remaining button on a line of its own will
    stretch to the entire width of the containing box, or 300 pixels.
</p>

<p>
    If the box was resized, the buttons may rearrange onto different lines as necessary.
    If the style rules in the example above were changed to the following:
</p>

<pre>
    #div1 {
      display: box;
      box-lines: multiple;
      box-pack: center;
      width: 300px;
    }
    button {
      box-flex: 1.0;
      width: 90px;
      max-width: 90px;
    }
</pre>

<p>
    Now, each of the buttons will only stretch to include an additional 10 pixels
    of width, as the maximum width of 90 pixels is only 10 pixels larger than
    the minimum intrinsic width of the buttons. The remaining 30 pixels of space
    left over is divided up and placed inside the box outside of the buttons, as
    the value of box-pack is center. The fourth button will also appear at 90 pixels
    wide, centered within the box.
</p>
</div>

  <h3 id="multiple-alignment">Multiple Lines and alignment</h3>

  <p class="note">
    Note: not sure what this should do yet.
  </p>

  <p>
    The box-align property may be used to control the alignment of children in
    multiple line boxes, as with single line boxes. If box-align is start, the
    first line is placed along the top or left edge of the box (or the bottom
    or right edge for reverse direction boxes), and additional lines are placed
    afterward with no extra spacing between them. Each element within a line is
    placed with that same edge aligned. For instance, in a normal direction,
    vertical box, the top edges of each element are aligned with the top edge of
    the line it is within. If box-align is end, the first line is placed along the
    bottom or right edge of the box (or the top or left edge for reverse direction
    boxes), and additional lines are placed before. Each element within a line is
    placed with that same edge aligned.
  </p>

  <p>
    If box-align is center, the extra spacing is divided evenly on both sides of
    the box, and the lines placed between this space. Elements are centered within
    their lines. If box-align is baseline, the elements in a line are aligned by
    their baselines as with single line boxes, with space placed before or after
    each element in the line as necessary. The first line is placed as with the
    value start.
  </p>

  <p>
    If box-align is stretch, then each line is stretched equally, and the elements
    within each line are stretched to the size of the largest item in that line.
  </p>

  <h2 id="inlinesAndBlocks">Relationship to Inlines and blocks</h2>

  <p>
   A box placed in a block is considered a block level element and will be positioned
   and sized according to the rules for CSS 2.1 (section 10.3 for widths). Specifically,
   the following equation applies for calculating the width:
  </p>
  <blockquote>
  <p>'margin-left' + 'border-left-width' + 'padding-left' + 'width' + 'padding-right' + 'border-right-width' + 'margin-right' + scrollbar width (if any) = width of containing block
  </p>
  </blockquote>
  <p>All children of 'box' elements are block-level. If inline-level elements are nested
     inside boxes, they get wrapped in an anonymous block which then takes part in the
     box layout.

  </p><p>
     If the width of a child of a flexible box is computed as 'auto', then the used value
     is the shrink-to-fit width. This calculation is done similarly to how the width of
     a floating element is determined. Otherwise if the width has a computed value,
     then that value is used as the width.
  </p><p>

     In a horizontally oriented box, the flexibility is then applied which may increase
     or decrease the used width. In a vertically oriented box, the position and size
     of the child may be adjusted by the value of the container's
     <span class="property">'box-align'</span> property.
  </p><p>

     The <span class="property">'min-width'</span>, <span class="property">'min-height'</span>,
     <span class="property">'max-width'</span>, and <span class="property">'max-height'</span>
     CSS properties act the same on boxes as on blocks.
  </p><p>

     The height of a child of a flexible box is determined in the same manner as specified
     in the CSS specification. The used height may further be adjusted by the container's
     <span class="property">'box-align'</span> property in a horizontally
     oriented box, or the flexibility in a vertically oriented box.
  </p><p>

     Note that it is possible for a horizontally oriented box that the height of a
     flexible child containing an inline descendant will change when the flexibility is
     applied. Similarly, in a vertically oriented box, the height of a child may change
     based on the <span class="property">'box-align'</span> property of the
     box.

  </p>

  <p class="note">
    Note: more details are needed here, and the relationship with other CSS constructs is
    yet to be defined.
  </p>

  <!--<h2 id="inlinesAndBlocks">Initial Containing Blocks</h2>

  <p>
  A user agent that supports flexible boxes may have a viewport where the size is
  computed from the content contained within it. Even if the viewport size is not
  known, it may be constrained by other physical constraints, such as the size of the
  screen, which may be used as the size of the viewport instead.

  </p><p>
  When the size of the viewport is not known, the size of the initial containing block
  will not be known beforehand. In this situation, this size will be computed from
  the contents within the block. Both the width and height of the initial containing
  block are considered to be 0 when computing a value that depends on the size of the
  initial containing block. Specifically, this means that a percentage size of
  the initial containing block will be calculated as 0.

  </p><p>
  Once the document has been laid out, the size of the viewport can be determined from
  the content, and that size may later be used when the document needs to be reflowed.
  -->

  <hr title="Separator from footer">

  <h2 class="no-num" id="acknowledgments"><a name="acknowledgments">Acknowledgments</a></h2>

  <p>[This section will contain further acknowledgments.]</p>

  <p>Thanks for feedback from James Elmore and Shinichiro Hamaji.</p>

  <h2 class="no-num" id="references">References</h2>

  <h3 class="no-num" id="normative">Normative references</h3>
  <!--normative-->

  <h2 class="no-num" id="index">Index</h2>
  <!--index-->

  <h2 id="property" class="no-num">Property index</h2>
  <!--properties-->

  <!-- Keep this comment at the end of the file
    Local variables:
    mode: sgml
    sgml-declaration:"~/SGML/HTML4.decl"
    sgml-default-doctype-name:"html"
    sgml-minimize-attributes:t
    sgml-nofill-elements:("pre" "style" "br")
    sgml-live-element-indicator:t
    End:
    -->
</body></html>
