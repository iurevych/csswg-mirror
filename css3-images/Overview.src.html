<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>CSS Image Values Module Level 3</title>
  <link rel="stylesheet" type="text/css" href="../default.css">
  <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-ED">
</head>

<body>

<div class="head">
<!--logo-->

<h1>CSS Image Values Module Level 3</h1>

<h2 class="no-num no-toc">[LONGSTATUS] [DATE]</h2>
<dl>
  <dt>This version:</dt>
    <!-- <dd><a href="http://www.w3.org/TR/[YEAR]/CR-css3-images-[CDATE]/">http://www.w3.org/TR/[YEAR]/CR-css3-images-[CDATE]/</a></dd> -->
    <dd><a href="http://dev.w3.org/csswg/css3-images/">http://dev.w3.org/csswg/css3-images/</a>
  <!-- <dt>Latest version:</dt>
    <dd><a href="http://www.w3.org/TR/css3-images/">http://www.w3.org/TR/css3-images/</a></dd>
  <dt>Previous version:</dt>
    <dd><a href="http://www.w3.org/TR/2008/CR-css3-namespace-20080523/">http://www.w3.org/TR/2008/CR-css3-namespace-20080523/</a></dd> -->
  <dt>Editor:</dt>
    <dd><a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a></dd>
</dl>
<!--begin-copyright-->
<p>[Here will be included the file "../copyright.inc"]</p>
<!--end-copyright-->

<hr title="Separator for header">
</div>

<h2 class="no-num no-toc" id="abstract">Abstract</h2>

  <p>This CSS Image Values module defines the syntax for &lt;image&gt; values
    in CSS. &lt;image&gt; values can be a single URI to an image, a list of
    URIs denoting a series of fallbacks, sprites (image slices), or gradients.</p>

<h2 class="no-num no-toc" id="status">Status of this document</h2>
<!--status-->

<h2 class="no-num no-toc" id="contents">Table of contents</h2>
<!--toc-->

<div>
  <h2 id="intro">Introduction</h2>

  <p><em>This section is non-normative.</em></p>

  <p>In CSS Levels 1 and 2, image values, such as those used in the
    'background-image' property, could only be given by a single URI
    value. This module introduces additional notations that allow a
    2D image to be given as a list of URIs denoting fallbacks, as a
    slice of a larger image (sprite), and as a gradient.</p>
</div>

<div>
  <h2 id="conformance">Conformance</h2>

  <p>A document or implementation cannot conform to CSS Image Values Level 3
    alone, but can claim conformance to CSS Image Values Level 3 if it satisfies
    the conformance requirements in this specification when implementing CSS or
    another host language that normatively references this specification.</p>

  <p>Conformance to CSS Namespaces is defined for two classes:
  <dl>
    <dt><dfn>style sheet</dfn></dt>
      <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS style
        sheet</a> (or a complete unit of another host language that normatively
        references CSS Namespaces).
    <dt><dfn>interpreter</dfn></dt>
      <dd>Someone or something that interprets the semantics of a style sheet.
        (CSS <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">user
        agents</a> fall under this category.)</dd>
  </dl>

  <p>The conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words "MUST",
    "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
    "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. All of the text of this specification is
    normative except sections explicitly marked as non-normative, examples,
    and notes. [[!RFC2119]]</p>

  <p>Examples in this specification are introduced with the words "for example"
    or are set apart from the normative text with <code>class="example"</code>,
    like this:

  <div class="example">
    <p>This is an example of an informative example.</p>
  </div>

  <p>Informative notes begin with the word "Note" and are set apart from the
    normative text with <code>class="note"</code>, like this:

  <p class="note">Note, this is an informative note.</p>
</div>

<div>
  <h2 id="image">The &lt;image&gt; value type</h2>

  <p>The &lt;image&gt; value type denotes a 2D image. It is defined as

  <pre class="prod"><dfn>&lt;image&gt;</dfn> = &lt;url&gt; | &lt;sprite&gt; | &lt;image-list&gt;</pre>

  <p>Image values can be used in many CSS properties, including the
    'background-image', 'list-style-image', 'cursor' properties [[!CSS21]].

<div>
  <h2 id="#url">Image References and Image Slices: the ''url()'' notation</h2>

  <p>The simplest way to indicate an image is to reference an image file
  by URI. This is done with the
  <a href="http://www.w3.org/TR/CSS21/syndata.html#uri">''url()'' notation</a>,
  defined in [[!CSS21]].

  <div class="example">
    <p>In the example below, a background image is specified with ''url()''
    syntax:</p>
    <pre>background-image: url(wavy.png);</pre>
  </div>

  <p>A portion of an image may be referenced (clipped out and used as a
  standalone image) by use of fragment identifiers.
  <span class='issue'>Need a spec to reference here. Expecting to get one from
    <a href="http://www.w3.org/2008/WebVideo/Fragments/">Media Fragments WG</a>.</span>

  <div class="example">
    <p>For example,</p>
    <pre>background-image: url('logos.png#xywh=10,30,60,20')</pre>
    <p>uses the 60 pixel by 20 pixel rectangle of <code>logos.png</code> beginning
    at the point 10 pixels in from the left, 30 pixels down from the top.

    <p class="note">Note that quotation marks are required here, because
    unquoted commas are not allowed in ''url()'' syntax.</p>
  </div>
</div>

<div>
  <h2 id="#image">Image Fallbacks: the ''image()'' notation</h2>

  <p>The ''image()'' notation allows an author to specify multiple images,
  each one a fallback for the previous. The UA must use only the first image
  that it can load and display. The syntax for ''image()'' is defined as

  <pre class="prod"><dfn>&lt;image-list&gt;</dfn> = <!--
     -->image( [ &lt;image-decl&gt; , ]* [ &lt;image-decl&gt; ] [ or &lt;color&gt; ]? )</pre>

  <p>where &lt;image-decl&gt; is given by

  <pre class="prod"><dfn>&lt;image-decl&gt;</dfn> = <!--
    -->[ &lt;string&gt; | &lt;url-token&gt; ] [ snap? &amp;&amp; &lt;resolution&gt; ]?

  <p>&lt;url-token&gt; is given as <code>[!#$%&amp;*-~]|{nonascii}|{escape}</code>
  (i.e. the contents of ''url()'') using the productions in the
  <a href="http://www.w3.org/TR/CSS21/syndata.html#tokenization">CSS2.1 tokenization</a>.
  <strong>The &lt;url-token&gt; must not contain unescaped brackets, commas,
  white space characters, single quotes (&apos;) or double quotes (&quot;);
  if it does the ''image()'' containing it is invalid.</strong>

  <p>Each string or url-token represents the URI of an image. If a resolution
  is given, then the image must be rendered at the specified resolution. If the
  ''snap'' keyword is also specified, and the image is a raster image, then the
  image must be rendered at the resolution closest to the specified resolution
  that would result in no pixel rounding. <span class="issue">I don't think
  "no pixel rounding" is the right terminology here... basically we want to
  avoid blurry images.</span></p>

  <p>The optional color at the end of the list is the <dfn>fallback color</dfn>.
  It is used if, and only if, none of the images can be loaded and displayed
  (e.g. because they are in unsupported formats, or cannot be found, or are
  corrupted in some way, or because image loading is disabled in the UA). It
  is treated as a single-color image with no intrinsic dimensions.

  <div class="example">
    <p>For example, the rule below would tell the UA to load ''wavy.svg'' if
      it can; failing that to load ''wavy.png'' and display it at 150dpi;
      failing that to display ''wavy.gif''; and finally, if none of the images
      can be loaded and displayed, to use the color ''blue'' to create a
      dimensionless background image.
      <pre>background-image: image(wavy.svg, 'wavy.png' 150dpi, "wavy.gif"  or blue);</pre>
    <p>The 'background-image' property specifies that dimensionless images
       must stretch to cover the entire background positioning area
       [[CSS3BG]], so if none of the specified images can be displayed
       the background will be painted blue. As with any image, this fallback
       will be painted over the 'background-color' (if any).
  </div>

  <p>If the URL for the image ends in a file extension (a period followed by
  letters) of four ascii letters ([a-zA-Z]) or less, then the UA <em>may</em>
  skip trying to load images whose file extension matches an image format it
  knows it does not support. For example, a UA that knows it supports JPEG and
  GIF, but expects to encounter many PNG and SVG images may choose to skip over
  images with filenames ending in '.png' or '.svg' without loading them to
  check their MIME type. However it must not skip over images with filenames
  ending in extensions it doesn't recognize.
</div>

<div>
  <h2>Image Sprites</h2>

  <p>The image sprites syntax is different from image slices noted above.
    Image slice syntax allows you to specify the coordinates of a region
    in the image and use that as a standalone image, but all the coordinates
    must be specified inline. This is great for one-off cutouts, but becomes
    unnecessarily verbose when the slices fit into a grid structure. The goal
    of this section is to define a syntax that:
  <ul>
    <li>Makes it easy to specify an image slice and swap it out in later
      subclass or :hover rules.
    <li>Makes it easy to maintain a sprite image, so that adding or shifting
      sections of the image don't require crawling through and modifying the
      entire style sheet.
    <li>Has straightforward handling of strict grids, but can also handle
      more irregular sprite organization.
    <li>(Any other use cases/requirements?)
  </ul>

  <div class="issue">
    <p>As yet unwritten. Discussions/proposals include:</p>
    <ul>
      <li><a href="http://lists.w3.org/Archives/Public/www-style/2009May/0157.html">Jorrit's @sprite proposal</a>
      <li><a href="http://www.css3.info/summary-of-the-two-current-css-constants-proposals/#comment-212898">Adrian's image-vars proposal</a>
      <li><a href="http://lists.w3.org/Archives/Public/www-style/2009Jan/0185.html">Discussion from Jan 2008</a> and <a href="http://lists.w3.org/Archives/Public/www-style/2009Jan/0284.html">Jorrit's response</a>
    </ul>
</div>

<div>
  <h2>Resolution Units</h2>

  <p>This specification defines the following units as part of the
    <dfn>&lt;resolution&gt;</dfn> value type:

  <dl>
    <dt>dpi <dd>dots per inch

    <dt>dpcm <dd>dots per centimeter

    <dt>dppx <dd>dots per ''px'' unit
  </dl>

  <p class="note">The default resolution of raster images in CSS is ''1dppx''.</p>
</div>

<h2 class="no-num" id="acknowledgments">Acknowledgments</h2>


<h2 class="no-num" id="references">References</h2>


<h3 class="no-num" id="normative-references">Normative references</h3>
<!--begin-normative-->
<p>[Here will be inserted the file "normative.inc"]</p>
<!--end-normative-->


<h3 class="no-num" id="informative-references">Informative references</h3>
<!--begin-informative-->
<p>[Here will be inserted the file "informative.inc"]</p>
<!--end-informative-->


</body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
