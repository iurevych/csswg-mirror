<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html lang=en>
 <head><meta content="text/html; charset=utf-8" http-equiv=Content-Type>

  <title>CSS Image Values and Replaced Content Module Level 3</title>
  <link href="http://dev.w3.org/csswg/default.css" rel=stylesheet
  type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel=stylesheet
  type="text/css">

 <body>
  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1>CSS Image Values and Replaced Content Module Level 3</h1>

   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft 2 August 2011</h2>

   <dl>
    <dt>This version:

    <dd><a
     href="http://www.w3.org/TR/2011/ED-css3-images-20110802/">http://www.w3.org/TR/2011/ED-css3-images-20110802/</a>
     

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css3-images/">http://www.w3.org/TR/css3-images/</a>

    <dt>Editor's draft:

    <dd><a
     href="http://dev.w3.org/csswg/css3-images/">http://dev.w3.org/csswg/css3-images/</a>
     

    <dt>Previous version:

    <dd><a
     href="http://www.w3.org/TR/2011/WD-css3-images-20110217/">http://www.w3.org/TR/2011/WD-css3-images-20110217/</a>

    <dd><a
     href="http://www.w3.org/TR/2009/WD-css3-images-20090723/">http://www.w3.org/TR/2009/WD-css3-images-20090723/</a>

    <dt>Editors:

    <dd><a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a>
     (Invited Expert)

    <dd><a href="http://www.xanthir.com/contact">Tab Atkins Jr.</a> (Google)
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> &copy; 2011 <a
    href="http://www.w3.org/"><acronym title="World Wide Web
    Consortium">W3C</acronym></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute
    of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym
    title="European Research Consortium for Informatics and
    Mathematics">ERCIM</acronym></a>, <a
    href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>
  <!-- ====================================================================== -->

  <h2 class="no-num no-toc" id=abstract> Abstract</h2>

  <p>This CSS Image Values and Replaced Content module has two parts: First,
   it defines the syntax for <a href="#ltimage"><i>&lt;image></i></a> values
   in CSS. <a href="#ltimage"><i>&lt;image></i></a> values can be a single
   URI to an image, a list of URIs denoting a series of fallbacks, a
   reference to an element in the document, or gradients. Second, it defines
   properties used to control the interaction of replaced content and the CSS
   layout algorithms. These properties can affect the used image resolution
   for bitmaps, the replaced object's orientation, and whether and how to
   preserve the object's aspect ratio.

  <p>The following properties and values are &lsquo;<code
   class=property>at-risk</code>&rsquo;, which means they may be removed from
   this specification if they do not achieve two interoperable
   implementations in a reasonable amount of time:

  <ol>
   <li>The element() function

   <li>The object-fit and object-position properties
  </ol>
  <!-- ====================================================================== -->

  <h2 class="no-num no-toc" id=status> Status of this document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bcss3-images%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   &#8220;css3-images&#8221; in the subject, preferably like this:
   &#8220;[<!---->css3-images<!---->] <em>&hellip;summary of
   comment&hellip;</em>&#8221;

  <p>This document was produced by the <a href="/Style/CSS/members">CSS
   Working Group</a> (part of the <a href="/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->
  <!-- ====================================================================== -->

  <h2 class="no-num no-toc" id=contents> Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#intro"><span class=secno>1. </span> Introduction</a>

   <li><a href="#conformance"><span class=secno>2. </span> Conformance</a>

   <li><a href="#resolution-units"><span class=secno>3. </span> Resolution
    Units: the &lt;resolution&gt; value type</a>

   <li><a href="#image"><span class=secno>4. </span> Image Values: the
    &lt;image> value type</a>
    <ul class=toc>
     <li><a href="#url"><span class=secno>4.1. </span> Image References and
      Image Slices: the &lsquo;<code class=css>url()</code>&rsquo;
      notation</a>

     <li><a href="#image-notation"><span class=secno>4.2. </span> Image
      Annotations and Fallbacks: the &lsquo;<code
      class=css>image()</code>&rsquo; notation</a>

     <li><a href="#element-reference"><span class=secno>4.3. </span> Using
      Elements as Images: the &lsquo;<code class=css>element()</code>&rsquo;
      notation</a>

     <li><a href="#cross-fade-function"><span class=secno>4.4. </span>
      Combining images: the &lsquo;<code class=css>cross-fade()</code>&rsquo;
      notation</a>
    </ul>

   <li><a href="#gradients"><span class=secno>5. </span> Gradients</a>
    <ul class=toc>
     <li><a href="#linear-gradients"><span class=secno>5.1. </span> Linear
      Gradients</a>

     <li><a href="#radial-gradients"><span class=secno>5.2. </span> Radial
      Gradients</a>

     <li><a href="#repeating-gradients"><span class=secno>5.3. </span>
      Repeating Gradients</a>

     <li><a href="#color-stop-syntax"><span class=secno>5.4. </span> Gradient
      Color-Stops</a>
    </ul>

   <li><a href="#sizing"><span class=secno>6. </span> Sizing Images and
    Objects in CSS</a>
    <ul class=toc>
     <li><a href="#sizing-terms"><span class=secno>6.1. </span> Object-Sizing
      Terminology</a>

     <li><a href="#object-negotiation"><span class=secno>6.2. </span>
      CSSâ‡‹Object Negotiation</a>

     <li><a href="#default-sizing"><span class=secno>6.3. </span> Concrete
      Object Size Resolution</a>

     <li><a href="#object-fit"><span class=secno>6.4. </span> Sizing Objects:
      the &lsquo;<code class=property>object-fit</code>&rsquo; property</a>

     <li><a href="#object-position"><span class=secno>6.5. </span>
      Positioning Objects: the &lsquo;<code
      class=property>object-position</code>&rsquo; property</a>
    </ul>

   <li><a href="#image-processing"><span class=secno>7. </span> Image
    Processing</a>
    <ul class=toc>
     <li><a href="#image-resolution"><span class=secno>7.1. </span>
      Overriding Image Resolutions: the &lsquo;<code
      class=property>image-resolution</code>&rsquo; property</a>

     <li><a href="#image-orientation"><span class=secno>7.2. </span>
      Orienting an Image on the Page: the &lsquo;<code
      class=property>image-orientation</code>&rsquo; property</a>

     <li><a href="#image-rendering"><span class=secno>7.3. </span>
      Determining How to Scale an Image: the &lsquo;<code
      class=property>image-rendering</code>&rsquo; property</a>
    </ul>

   <li><a href="#serialization"><span class=secno>8. </span>
    Serialization</a>
    <ul class=toc>
     <li><a href="#serializing-resolution"><span class=secno>8.1. </span>
      Serializing a &lt;resolution></a>

     <li><a href="#serializing-url-notation"><span class=secno>8.2. </span>
      Serializing the &lsquo;<code class=css>url()</code>&rsquo; notation</a>
      

     <li><a href="#serializing-image-notation"><span class=secno>8.3. </span>
      Serializing the &lsquo;<code class=css>image()</code>&rsquo; /
      <i>&lt;image-list></i> notation</a>

     <li><a href="#serializing-element-notation"><span class=secno>8.4.
      </span> Serializing the &lsquo;<code class=css>element()</code>&rsquo;
      / <i>&lt;element-reference></i> notation</a>

     <li><a href="#serializing-cross-fade"><span class=secno>8.5. </span>
      Serializing the &lsquo;<code class=css>cross-fade()</code>&rsquo; /
      <i>&lt;image-combination></i> notation</a>

     <li><a href="#serializing-gradients"><span class=secno>8.6. </span>
      Serializing Gradients</a>

     <li><a href="#serializing-properties"><span class=secno>8.7. </span>
      Serializing new properties</a>
    </ul>

   <li><a href="#interpolation"><span class=secno>9. </span>
    Interpolation</a>
    <ul class=toc>
     <li><a href="#interpolating-images"><span class=secno>9.1. </span>
      Interpolating <i>&lt;image></i></a>

     <li><a href="#interpolating-image-combinations"><span class=secno>9.2.
      </span> Interpolating <i>&lt;image-combination></i></a>

     <li><a href="#interpolating-gradients"><span class=secno>9.3. </span>
      Interpolating <i>&lt;gradient></i></a>
    </ul>

   <li class=no-num><a href="#changes">Changes Since the 17 February 2011
    Working Draft</a>

   <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

   <li class=no-num><a href="#references">References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references">Normative
      references</a>

     <li class=no-num><a href="#informative-references">Informative
      references</a>
    </ul>
  </ul>
  <!--end-toc-->
  <!-- ====================================================================== -->

  <h2 id=intro><span class=secno>1. </span> Introduction</h2>

  <p><em>This section is non-normative.</em>

  <p>In CSS Levels 1 and 2, image values, such as those used in the
   &lsquo;<code class=property>background-image</code>&rsquo; property, could
   only be given by a single URI value. This module introduces additional
   notations that allow a 2D image to be given as a list of URIs denoting
   fallbacks, as a reference to an element in the document, and as a
   gradient.</p>
  <!-- ====================================================================== -->

  <h2 id=conformance><span class=secno>2. </span> Conformance</h2>

  <p>A document or implementation cannot conform to CSS Image Values &
   Replaced Content Level 3 alone, but can claim conformance to CSS Image
   Values & Replaced Content Level 3 if it satisfies the conformance
   requirements in this specification when implementing CSS or another host
   language that normatively references this specification.

  <p>Conformance to CSS Image Values & Replaced Content Level 3 is defined
   for three classes:

  <dl>
   <dt><dfn id=minimal>minimal</dfn>

   <dd>A device that does not implement CSS Transitions, CSS Animations, nor
    CSSOM may ignore the chapters on Serializing and Interpolating values for
    the purpose of claiming conformance.

   <dt><dfn id=transition-capable>transition-capable</dfn>

   <dd>A device that implements CSS Transitions or CSS Animations must
    conform to the <a href="#minimal"><i>minimal</i></a> class, and
    additionally must implement the chapter on Interpolation.

   <dt><dfn id=cssom-capable>CSSOM-capable</dfn>

   <dd>A device that implements CSSOM must conform to the <a
    href="#minimal"><i>minimal</i></a> class, and additionally must implement
    the chapter on Serialization.
  </dl>

  <p>The conformance requirements are expressed with a combination of
   descriptive assertions and RFC 2119 terminology. The key words "MUST",
   "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
   "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
   document are to be interpreted as described in RFC 2119. However, for
   readability, these words do not appear in all uppercase letters in this
   specification. All of the text of this specification is normative except
   sections explicitly marked as non-normative, examples, and notes. <a
   href="#RFC2119" rel=biblioentry>[RFC2119]<!--{{!RFC2119}}--></a>

  <p>Examples in this specification are introduced with the words "for
   example" or are set apart from the normative text with
   <code>class="example"</code>, like this:

  <div class=example>
   <p>This is an example of an informative example.</p>
  </div>

  <p>Informative notes begin with the word "Note" and are set apart from the
   normative text with <code>class="note"</code>, like this:

  <p class=note>Note, this is an informative note.</p>
  <!-- ====================================================================== -->

  <h2 id=resolution-units><span class=secno>3. </span> Resolution Units: the
   &lt;resolution&gt; value type</h2>

  <p>This specification defines the following units as part of the <dfn
   id=ltresolution>&lt;resolution></dfn> value type:

  <dl>
   <dt><dfn id=dpi>dpi</dfn>

   <dd>dots per inch

   <dt><dfn id=dpcm>dpcm</dfn>

   <dd>dots per centimeter

   <dt><dfn id=dppx>dppx</dfn>

   <dd>dots per &lsquo;<code class=css>px</code>&rsquo; unit
  </dl>

  <p>The &lt;resolution> unit represents the size of a single "dot" of an
   image. For raster images, a dot is an image pixel. A &lt;resolution>
   defines how many of these dots fit in a CSS &lsquo;<code
   class=property>in</code>&rsquo;, &lsquo;<code
   class=property>cm</code>&rsquo;, or &lsquo;<code
   class=property>px</code>&rsquo; so that images can be sized accordingly.
   The default resolution of raster images in CSS is &lsquo;<code
   class=css>1dppx</code>&rsquo;, which is equivalent to &lsquo;<code
   class=css>96dpi</code>&rsquo;. The concept of "resolution" does not apply
   to vector image formats like SVG; generally, this means that any attempt
   to change the resolution of a vector image is simply meaningless.
   Individual uses of the &lt;resolution> value define precisely what effects
   they have on raster and vector images.

  <div class=example>
   <p>Printers tend to have substantially higher resolution than computer
    monitors; due to this, an image that looks fine on the screen may look
    pixellated when printed out. A &lt;resolution> may be used in the
    &lsquo;<a href="#image-resolution0"><code
    class=property>image-resolution</code></a>&rsquo; property to embed a
    high-resolution image into the document that maintains an appropriate
    size, ensuring attractive display both on screen and on paper:</p>

   <pre class=css><code>
img.high-res {
	image-resolution: 300dpi;
}</code></pre>

   <p>With this set, an image meant to be 5 inches wide that was saved at
    300dpi will actually display as 5 inches wide; without this set, the
    image would display as approximately 15.6 inches wide since the image is
    15000 image pixels across, and by default there are 96 image pixels per
    inch.</p>
  </div>
  <!-- ====================================================================== -->

  <h2 id=image><span class=secno>4. </span> Image Values: the &lt;image>
   value type</h2>

  <p>The &lt;image> value type denotes a 2D image. It is defined as

  <pre
   class=prod><dfn id=ltimage>&lt;image></dfn> = &lt;url> | &lt;image-list> | &lt;element-reference> | &lt;image-combination> | &lt;gradient></pre>

  <p>Image values can be used in many CSS properties, including the
   &lsquo;<code class=property>background-image</code>&rsquo;, &lsquo;<code
   class=property>list-style-image</code>&rsquo;, &lsquo;<code
   class=property>cursor</code>&rsquo; properties <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>.
   <!-- ====================================================================== -->
   

  <h3 id=url><span class=secno>4.1. </span> Image References and Image
   Slices: the &lsquo;<code class=css>url()</code>&rsquo; notation</h3>

  <p>The simplest way to indicate an image is to reference an image file by
   URI. This is done with the <a
   href="http://www.w3.org/TR/CSS21/syndata.html#uri">&lsquo;<code
   class=css>url()</code>&rsquo; notation</a>, defined in <a href="#CSS21"
   rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>.

  <div class=example>
   <p>In the example below, a background image is specified with &lsquo;<code
    class=css>url()</code>&rsquo; syntax:</p>

   <pre>background-image: url(wavy.png);</pre>
  </div>

  <p>A portion of an image may be referenced (clipped out and used as a
   standalone image) by use of <a
   href="http://www.w3.org/TR/media-frags/#naming-space">media fragment
   identifiers</a>. <a href="#MEDIA-FRAGS"
   rel=biblioentry>[MEDIA-FRAGS]<!--{{!MEDIA-FRAGS}}--></a>

  <div class=example>
   <p>For example, given the following image* and CSS:</p>
   <a href=sprites.svg> <img alt="[9 circles, with 0 to 8 eighths filled in]"
   height=20 src=sprites.svg width=180> </a>
   <pre>background-image: url('sprites.svg#xywh=40,0,20,20')</pre>

   <p>...the background of the element will be the portion of the image that
    starts at (40px,0px) and is 20px wide and tall, which is just the circle
    with a quarter filled in.</p>

   <p><small>* SVG-in-&lt;img> support required. Click the picture to view
    the SVG directly.</small></p>
  </div>

  <p class=note>Note that a legacy UA that doesn't understand the media
   fragments notation will ignore the fragment and simply display the
   entirety of an image specified with &lsquo;<code
   class=css>url</code>&rsquo;. However, since URLs with media fragment
   identifiers can also be used in the &lsquo;<code
   class=css>image()</code>&rsquo; notation defined below, authors can take
   advantage of CSS's forward-compatible parsing rules to provide a fallback
   when using an image fragment URL:

  <div class=example>
   <p>In the example below, the &lsquo;<code class=css>image()</code>&rsquo;
    notation is used together with the media fragment syntax, so that UAs
    that don't support media fragments fail to parse the second declaration
    and use the first.</p>

   <pre>
<!-- -->background-image: url('swirl.png'); /* old UAs */
<!-- -->background-image: image('sprites.png#xywh=10,30,60,20'); /* new UAs */</pre>
  </div>
  <!-- ====================================================================== -->

  <h3 id=image-notation><span class=secno>4.2. </span> Image Annotations and
   Fallbacks: the &lsquo;<code class=css>image()</code>&rsquo; notation</h3>

  <p>The &lsquo;<code class=css>image()</code>&rsquo; notation allows an
   author to tag an image with a few types of useful processing instructions
   which can affect the rendering of the image and to declare fallback images
   to be used if the original image can't be decoded or is a type that the
   browser doesn't recognize. The author can specify the desired resolution
   the image should be rendered at, declare the directionality of an image so
   that it can be automatically be reversed if used in text with a different
   directionality.

  <p>So that authors can take advantage of CSS's forwards-compatible parsing
   rules to provide a fallback for image slices, implementations that support
   the &lsquo;<code class=css>image()</code>&rsquo; notation <em>must</em>
   support the <code>xywh=#,#,#,#</code> form of media fragment identifiers
   for images. <a href="#MEDIA-FRAGS"
   rel=biblioentry>[MEDIA-FRAGS]<!--{{!MEDIA-FRAGS}}--></a>

  <p>The &lsquo;<code class=css>image()</code>&rsquo; notation is defined as:
   

  <pre class=prod><dfn id=ltimage-list>&lt;image-list></dfn> = 
	image( [ &lt;image-decl> , ]* [ &lt;image-decl> | &lt;color> ] )</pre>

  <p>where &lt;image-decl> is given by:

  <pre class=prod><dfn id=ltimage-decl>&lt;image-decl></dfn> = 
	&lt;string> [ [ snap? && &lt;resolution> ] || [ ltr | rtl ] ]</pre>

  <p>Each <a href="#ltimage-decl"><i>&lt;image-decl></i></a> represents the
   external image referenced by the URI given as the &lt;string> argument.

  <p>If the image is a raster image and a &lt;resolution> is given, the image
   must be rendered at that resolution. This must override the default
   resolution given by the &lsquo;<a href="#image-resolution0"><code
   class=property>image-resolution</code></a>&rsquo; property. <span
   class=note>Recall that the default resolution of raster images is
   &lsquo;<code class=css>1dppx</code>&rsquo;, so that one image pixel
   corresponds to one CSS &lsquo;<code class=css>px</code>&rsquo;
   unit.</span> If the &lsquo;<code class=css>snap</code>&rsquo; keyword is
   also specified, and the specified resolution would make one image pixel
   larger than one device pixel, the image must be rendered at the specified
   resolution, rounded to the nearest value that would map one image pixel to
   an integer number of device pixels; if the specified resolution would make
   one image pixel smaller than one device pixel, the image must be rendered
   at the specified resolution, rounded to the nearest value that would map
   an integer number of image pixels to one device pixel. If the image is a
   vector image, specifying a resolution has no effect.

  <p>If a directional keyword (&lsquo;<code class=css>ltr</code>&rsquo; or
   &lsquo;<code class=css>rtl</code>&rsquo;) is given, the image itself gains
   that directionality. If the image is used in a property on an element with
   opposite directionality, is must be mirrored in the inline dimension when
   rendered.

  <p>Multiple arguments can be given separated by commas, in which case the
   function represents the first &lt;image-decl> representing an image that
   the browser can successfully load and display. The final argument can
   specify a &lt;color> to serve as an ultimate fallback; this can be used,
   e.g. for &lsquo;<code class=property>background-image</code>&rsquo;, to
   ensure adequate contrast if none of the preceding &lt;image-decl>s can be
   used. If the final argument is a &lt;color>, it represents a solid-color
   image of the given color with no <a
   href="#intrinsic-dimensions"><i>intrinsic dimensions</i></a>.

  <div class=example>
   <p>The rule below would tell the UA to load &lsquo;<code
    class=css>wavy.svg</code>&rsquo; if it can; failing that to load
    &lsquo;<code class=css>wavy.png</code>&rsquo; and display it at 150dpi;
    failing that to display &lsquo;<code class=css>wavy.gif</code>&rsquo;;
    and finally, if none of the images can be loaded and displayed, to use
    the color &lsquo;<code class=css>rgba(0,0,255,0.5)</code>&rsquo; to
    create a dimensionless background image. For example, the browser might
    not understand how to render SVG images, the PNG may be malformed, and
    the GIF might not exist on the server and return 404 error instead of an
    image.</p>

   <pre>background-image: image(url(wavy.svg), 'wavy.png' 150dpi, "wavy.gif", rgba(0,0,255,0.5));</pre>

   <p>The &lsquo;<code class=property>background-size</code>&rsquo; property
    specifies that dimensionless images by default stretch to cover the
    entire background positioning area <a href="#CSS3BG"
    rel=biblioentry>[CSS3BG]<!--{{CSS3BG}}--></a>, so if none of the
    specified images can be displayed the background will be painted
    semi-transparent blue. As with any image, this fallback will be painted
    over the &lsquo;<code class=property>background-color</code>&rsquo; (if
    any).</p>
  </div>
  <!-- ====================================================================== -->

  <h3 id=element-reference><span class=secno>4.3. </span> Using Elements as
   Images: the &lsquo;<code class=css>element()</code>&rsquo; notation</h3>

  <p>The &lsquo;<code class=css>element()</code>&rsquo; function allows an
   author to reference an element in the document that should be used as an
   image. As the referenced element changes, for example, by the user typing
   into a &lt;textarea> element or a script drawing into a &lt;canvas>
   element in HTML, the image produced by the &lsquo;<code
   class=css>element()</code>&rsquo; function stays in sync, allowing dynamic
   effects such as script-animated background images or previews of the next
   slide in a slideshow. The syntax for &lsquo;<code
   class=css>element()</code>&rsquo; is defined as:

  <pre
   class=prod><dfn id=ltelement-reference>&lt;element-reference></dfn> = element( [&lt;id-selector> | &lt;identifier> ] )</pre>

  <p>where &lt;id-selector> is an ID selector <a href="#SELECT"
   rel=biblioentry>[SELECT]<!--{{!SELECT}}--></a>, and &lt;identifier> is an
   identifer <a href="#CSS3VAL"
   rel=biblioentry>[CSS3VAL]<!--{{!CSS3VAL}}--></a>.

  <p>If the argument to the &lsquo;<code class=css>element()</code>&rsquo;
   function is an ID selector, the function references the element matched by
   the selector. If it's an identifier, the function references the element
   whose <dfn id=css-element-reference-identifier>CSS element reference
   identifier</dfn> is the given identifier. (CSS does not define how an
   element acquires a <a href="#css-element-reference-identifier"><i>CSS
   element reference identifier</i></a>; that is determined by the host
   language.) If no element in the document matches the selector, or no
   element has the identifier as its <a
   href="#css-element-reference-identifier"><i>CSS element reference
   identifier</i></a>, the function represents a fully transparent image with
   no intrinsic dimensions, equivalent to <code>image(transparent)</code>. If
   the document changes so that which element is matched, or whether an
   element is matched at all, changes, the image represented by the function
   must change accordingly.

  <p>If the &lsquo;<code class=css>element()</code>&rsquo; function refers to
   an element, then it represents an image with width and height equal to the
   width and height of the margin box of the referenced element. The image
   must be constructed by rendering the referenced element and its
   descendants at the same size that the element would be in its document,
   over an infinite transparent black background, positioned so that the
   edges of the margin box of the element is flush with the edges of the
   image. <span class=note>If the element has decorations or descendants that
   extend outside the margin box, these will be clipped to the margin box in
   the generated image by default. &lsquo;<code
   class=css>background-repeat:extend</code>&rsquo; may allow the author to
   override this behavior so that decorations and descendants outside the
   margin box are still painted.</span> If the referenced element or an
   ancestor of the referenced element has a transform applied to it, the
   transform must be ignored for the purpose of constructing this image
   (transforms on descendants must be unaffected).

  <p>If the argument passed to &lsquo;<code class=css>element()</code>&rsquo;
   isn't an ID selector or an ident, it is a syntax error.

  <p>Implementations may either re-use existing bitmap data generated for the
   referenced element or regenerate the display of the element to maximize
   quality at the image's size (for example, if the implementation detects
   that the referenced element is an SVG fragment); in the latter case, the
   layout of the referenced element in the image must not be changed by the
   regeneration process. That is, the image must look identical to the
   referenced element, modulo rasterization quality.

  <div class=example> TODO: copy an example from the MozHacks article</div>
  <!-- ====================================================================== -->

  <h4 class="no-num no-toc" id=element-cycles> Detecting and Resolving
   Circular Relationships Introduced by &lsquo;<code
   class=css>element()</code>&rsquo;</h4>

  <p>The &lsquo;<code class=css>element()</code>&rsquo; function can produce
   nonsensical circular relationships, such as an element using itself as its
   own background. These relationships can be easily and reliably detected
   and resolved, however, by keeping track of a dependency graph and using
   common cycle-detection algorithms.

  <p>Populate the dependency graph initially by having every element depend
   on each of its children. Then, whenever a property on an element A uses
   the &lsquo;<code class=css>element()</code>&rsquo; function to refer to an
   element B, add an edge to the graph by having A depend on B. If a
   dependency cycle is detected, any &lsquo;<code
   class=css>element()</code>&rsquo; functions that produced a dependency in
   the cycle represent a fully transparent image with no intrinsic
   dimensions.

  <p class=issue>Someone else needs to review this and make sure that I'm not
   missing any cycles.</p>
  <!-- ====================================================================== -->

  <h3 id=cross-fade-function><span class=secno>4.4. </span> Combining images:
   the &lsquo;<code class=css>cross-fade()</code>&rsquo; notation</h3>

  <p>When transitioning between images, CSS requires a way to explicitly
   refer to the intermediate image that is a combination of the start and end
   images. This is accomplished with the &lsquo;<code
   class=css>cross-fade()</code>&rsquo; function, which indicates the two
   images to be combined and how far along in the transition the combination
   is.

  <p class=note>Authors can also use the &lsquo;<code
   class=css>cross-fade()</code>&rsquo; function for many simple image
   manipulations, such as tinting an image with a solid color or highlighting
   a particular area of the page by combining an image with a radial
   gradient.

  <p>The syntax for &lsquo;<code class=css>cross-fade()</code>&rsquo; is
   defined as:

  <pre
   class=prod><dfn id=ltimage-combination>&lt;image-combination></dfn> = cross-fade( &lt;image>, &lt;image>, &lt;percentage> )</pre>

  <p>The function represents an image generated by combining the first and
   second image (referred to in this section as the "start" and "end" images,
   respectively). The percentage represents how far along the transformation
   is, with 0% representing the start image, 100% representing the end image,
   and percentages between that representing corresponding combinations of
   the two images. The <code>&lt;percentage></code> must be between 0% and
   100% inclusive; any other value is invalid.

  <p>More precisely, given &lsquo;<code
   class=css>cross-fade(A,B,p)</code>&rsquo;, where <var>A</var> and
   <var>B</var> are images and <var>p</var> is a percentage between 0% and
   100%, the function represents an image with width equal to
   <code>width<sub>A</sub> &times; (1-<var>p</var>) + width<sub>B</sub>
   &times; p</code> and height equal to <code>height<sub>A</sub> &times;
   (1-<var>p</var>) + height<sub>B</sub> &times; p</code>. The contents of
   the image must be constructed by first scaling <var>A</var> and
   <var>B</var> to the size of the generated image, then applying
   <code>dissolve(<var>A</var>,1-<var>p</var>) plus
   dissolve(<var>B</var>,<var>p</var>)</code>. <span class=note>The
   "dissolve()" function and "plus" compositing operator are defined in the
   literature by Porter-Duff.</span></p>
  <!-- ====================================================================== -->

  <h2 id=gradients><span class=secno>5. </span> Gradients</h2>

  <p>A gradient is an image that smoothly fades from one color to another.
   These are commonly used for subtle shading in background images, buttons,
   and many other things. The two functions described in this section allow
   an author to specify such an image in a terse syntax, so that the UA can
   generate the image automatically when rendering the page. The syntax of a
   <a href="#ltgradient"><i>&lt;gradient></i></a> is:

  <pre
   class=prod><dfn id=ltgradient>&lt;gradient></dfn> = [ &lt;linear-gradient> | &lt;radial-gradient> | &lt;repeating-linear-gradient> | &lt;repeating-radial-gradient> ]</pre>

  <p>where <a href="#ltlinear-gradient"><i>&lt;linear-gradient></i></a>, <a
   href="#ltradial-gradient"><i>&lt;radial-gradient></i></a>, <a
   href="#ltrepeating-linear-gradient"><i>&lt;repeating-linear-gradient></i></a>,
   and <a
   href="#ltrepeating-radial-gradient"><i>&lt;repeating-radial-gradient></i></a>
   are defined in their applicable sections below.

  <p>Gradients are a type of image, and can be used anywhere an image can,
   such as in the &lsquo;<code class=property>background-image</code>&rsquo;
   or &lsquo;<code class=property>list-style-image</code>&rsquo; properties.

  <div class=example>
   <p>As with the other <a href="#ltimage"><i>&lt;image></i></a> types
    defined in this specification, gradients can be used in any property that
    accepts images. For example:</p>

   <ul>
    <li><code>background: linear-gradient(white, gray);</code>

    <li><code>list-style-image: radial-gradient(circle, #006, #00a 90%,
     #0000af 100%, white 100%)</code>
   </ul>
  </div>

  <p>A gradient is drawn into a box with the dimensions of the <a
   href="#concrete-object-size"><i>concrete object size</i></a>. Elsewhere in
   this section this rectangle is simply called the "box".

  <p>A gradient has no <a href="#intrinsic-dimensions"><i>intrinsic
   dimensions</i></a>. This means that, for example, if you use a gradient in
   the &lsquo;<code class=property>background-image</code>&rsquo; property
   (with &lsquo;<code class=property>background-size</code>&rsquo; at the
   default value and &lsquo;<code
   class=property>background-repeat</code>&rsquo; not equal to &lsquo;<code
   class=property>round</code>&rsquo;), the box will simply be the size of
   the background sizing area. Similarly, for a gradient used as a
   list-style-image, the box would be a 1em square.

  <p class=issue>It has been suggested that several of the controls offered
   by gradients are unnecessary. Repeating gradients could potentially be
   done by hooking into â€˜background-repeatâ€™, sizing and positioning
   radial gradients could be done by hooking into â€˜background-sizeâ€™ and
   â€˜background-positionâ€™, etc.</p>
  <!-- ====================================================================== -->

  <h3 id=linear-gradients><span class=secno>5.1. </span> Linear Gradients</h3>

  <p>A linear gradient is created by specifying a gradient-line and then
   several colors placed along that line. The image is constructed by
   creating an infinite canvas and painting it with lines perdendicular to
   the gradient-line, with the color of the painted line being the color of
   the gradient-line where the two intersect. This produces a smooth fade
   from each color to the next, progressing in the specified direction.</p>
  <!-- ====================================================================== -->

  <h4 class=no-toc id=linear-gradient-syntax><span class=secno>5.1.1. </span>
   linear-gradient() syntax</h4>

  <pre
   class=prod><code><dfn id=ltlinear-gradient>&lt;linear-gradient></dfn> = linear-gradient(
	[[ 
		[ [ top | bottom ] || [ left | right ] ] 
		| 
		&lt;angle>
	],]? 
	&lt;color-stop>[, &lt;color-stop>]+
	);</code></pre>

  <p>The first argument to the function specifies the <dfn
   id=gradient-line>gradient-line</dfn>, which gives the gradient a direction
   and determines how color-stops are positioned. It may be omitted; if so,
   it defaults to &lsquo;<code class=css>bottom</code>&rsquo;.

  <p>The <a href="#gradient-line"><i>gradient-line</i></a> may be specified
   in two different ways. The first is by specifying the angle the <a
   href="#gradient-line"><i>gradient-line</i></a> should assume; for the
   purposes of this argument, 0deg points upwards, 90deg points toward the
   right, and positive angles go clockwise. The starting-point and
   ending-point of the <a href="#gradient-line"><i>gradient-line</i></a> are
   determined by extending a line in both directions from the center of the
   box at the angle specified. In the direction of the angle, the
   ending-point is the point on the <a
   href="#gradient-line"><i>gradient-line</i></a> where a line drawn
   perpendicular to the <a href="#gradient-line"><i>gradient-line</i></a>
   would intersect the corner of the box in that direction. The
   starting-point is determined identically, except in the opposite direction
   of the angle.

  <p>The second way is to simply provide one or two keywords representing the
   side or corner of the box that the <a
   href="#gradient-line"><i>gradient-line</i></a> should point towards.
   Similar to the previous case, the starting-point and ending-point of the
   <a href="#gradient-line"><i>gradient-line</i></a> are determined by
   extending a line in both directions from the center of the box. If a
   single keyword is specified, the line assumes the necessary angle to place
   the starting-point of the <a
   href="#gradient-line"><i>gradient-line</i></a> in the center of the side
   specified by the keyword; if two keywords are specified, the line assumes
   the necessary angle to place the starting-point of the <a
   href="#gradient-line"><i>gradient-line</i></a> in the specified corner of
   the box. The ending-point of the gradient-line is then where the line
   intersects the opposite side or corner of the box.

  <p class=issue>This usage of keywords appears to be subtly confusing. When
   you ask solely about how keywords should work, most people prefer the
   above model (keyword denotes starting point). Similarly, most people
   prefer the way angles currently work. When you ask about whether "bottom"
   and "0deg" should be the same direction or opposite, though, most people
   prefer them to be opposite, despite that being contradictory with one of
   their previous answers. I am exploring alternate solutions that resolve
   this problem of expectations.

  <div class=example>
   <div style="overflow: hidden"> <img alt="[An image showing a box with a
    background shading gradually from white in the bottom-left corner to
    black in the top-right corner. There is a line, illustrating the
    gradient-line, angled at 45 degrees and passing through the center of the
    box. The starting-point and ending-point of the gradient-line are
    indicated by the intersection of the gradient-line with two additional
    lines that pass through the bottom-left and top-right corners of the
    box.]" src=gradient-diagram.png style="float: right; margin-left: 1em;">
    <p>This example illustrates visually how to calculate the <a
     href="#gradient-line"><i>gradient-line</i></a> from the rules above.
     This shows the starting and ending-point of the <a
     href="#gradient-line"><i>gradient-line</i></a>, along with the actual
     gradient, produced by an element with &lsquo;<code class=css>background:
     linear-gradient(45deg, white, black);</code>&rsquo;.</p>

    <p>Notice how, though the starting-point and ending-point are outside of
     the box, they're positioned precisely right so that the gradient is pure
     white <em>exactly</em> at the corner, and pure black <em>exactly</em> at
     the opposite corner. That's intentional, and will always be true for
     linear gradients.</p>
   </div>
  </div>

  <p>The gradient's color stops are typically placed between the
   starting-point and ending-point on the <a
   href="#gradient-line"><i>gradient-line</i></a>, but this isn't required -
   the <a href="#gradient-line"><i>gradient-line</i></a> extends infinitely
   in both directions. The starting-point and ending-point are merely
   arbitrary distance markers - the starting-point defines where 0%, 0px, etc
   are located when specifying color-stops, and the ending-point defines
   where 100% is located. Color-stops are allowed to have positions before 0%
   or after 100%.</p>
  <!-- ====================================================================== -->

  <h4 class=no-toc id=linear-gradient-examples><span class=secno>5.1.2.
   </span> Linear Gradient Examples</h4>

  <p>All of the following &lsquo;<code
   class=css>linear-gradient()</code>&rsquo; examples are presumed to be
   backgrounds applied to a box that is 200px wide and 100px tall.

  <div class=example>
   <p>Below are various ways of specifying a basic vertical gradient:</p>

   <pre><code>linear-gradient(yellow, blue);
linear-gradient(top, yellow, blue);
linear-gradient(180deg, yellow, blue);
linear-gradient(bottom, blue, yellow);
linear-gradient(top, yellow 0%, blue 100%);</code></pre>

   <p><img alt="" src=linear1.png></p>
  </div>

  <div class=example>
   <p>This gradient goes from the top-left to the bottom-right corner.</p>

   <pre><code>linear-gradient(top left, yellow, blue);</code></pre>

   <p><img alt="" src=linear2.png></p>
  </div>

  <div class=example>
   <p>This demonstrates the use of an angle in the gradient. Compare this
    image with the previous example. In both gradients, the top-left of the
    box is pure yellow, and the bottom-right of the box is pure blue. The
    difference is in the angle that the gradient follows.</p>

   <pre><code>linear-gradient(135deg, yellow, blue);
linear-gradient(-45deg, blue, yellow);</code></pre>

   <p><img alt="" src=linear3.png></p>
  </div>

  <div class=example>
   <p>This demonstrates a 3-color gradient, and how to specify the location
    of a stop explicitly:</p>

   <pre><code>linear-gradient(yellow, blue 20%, #0f0);</code></pre>

   <p><img alt="" src=linear4.png></p>
  </div>
  <!-- ====================================================================== -->

  <h3 id=radial-gradients><span class=secno>5.2. </span> Radial Gradients</h3>

  <p>In a radial gradient, rather than colors smoothly fading from one side
   of the box to the other as with linear gradients, they instead emerge from
   a single point and smoothly spread outward in a circular or elliptical
   shape.

  <p>A radial gradient is specified by first pinpointing the center of the
   gradient, where the 0% ellipse will be, then specifying the size and shape
   of the 100% ellipse, ending with a list of color-stops just like a
   linear-gradient. Between the center and the ending-ellipse, and past the
   ending-ellipse, concentric ellipses are drawn and colored according to the
   specified color-stops.</p>
  <!-- ====================================================================== -->

  <h4 class=no-toc id=radial-gradient-syntax><span class=secno>5.2.1. </span>
   radial-gradient() Syntax</h4>

  <pre class=prod>
<dfn id=ltradial-gradient>&lt;radial-gradient></dfn> = radial-gradient(
	[&lt;bg-position&gt;,]? 
	[[
		[&lt;shape&gt; || &lt;size&gt;]
		|
		[&lt;length> | &lt;percentage>]{2}
	],]? 
	&lt;color-stop&gt;[, &lt;color-stop&gt;]+
)
	</pre>

  <p>The first argument to the function specifies the center of the ellipse.
   <i>&lt;bg-position></i> is taken from the Backgrounds and Borders Module,
   and has the same definition. It specifies the center of the gradient. If
   omitted, it defaults to &lsquo;<code class=css>center</code>&rsquo;.
   Color-stop positions are measured along an imaginary line extending from
   the center of the gradient to the right.

  <p>The second argument to the function specifies the size and shape of the
   ending-ellipse. This can be specified in two ways, with different
   characteristics:

  <dl>
   <dt>Implicitly

   <dd>
    <p>The size and shape of the ending-ellipse can be defined
     <em>implicitly</em> with a size and shape keyword. The <a
     href="#ltshape"><i>&lt;shape></i></a> is defined as</p>

    <pre><code><dfn id=ltshape>&lt;shape></dfn> = [ circle | ellipse ]</code></pre>

    <p>&lsquo;<code class=css>circle</code>&rsquo; indicates that the
     ending-ellipse will be a circle with a constant radius. &lsquo;<code
     class=css>ellipse</code>&rsquo; indicates that the gradient-shape will
     be an axis-aligned ellipse (that is, its major and minor radiuses will
     be horizontal and vertical, not necessarily in that order).</p>

    <p>The <a href="#ltsize"><i>&lt;size></i></a> keyword is defined as</p>

    <pre><code><dfn id=ltsize>&lt;size></dfn> = [ closest-side | closest-corner | farthest-side | farthest-corner | contain | cover ]</code></pre>

    <p>If <a href="#ltshape"><i>&lt;shape></i></a> is &lsquo;<code
     class=css>circle</code>&rsquo; and <a
     href="#ltsize"><i>&lt;size></i></a> is &lsquo;<code
     class=css>closest-side</code>&rsquo;, the ending-shape is a circle sized
     so that it exactly meets the side of the box closest to its center. For
     example, if the box was 100px wide and 200px tall, and the center of the
     gradient was &lsquo;<code class=css>10% 10%</code>&rsquo;, then the
     closest side is the left side of the box (it is 10px from the
     starting-point, while the top is 20px from it, and the right and bottom
     sides are much further). The gradient-shape would thus be a circle with
     a radius of 10px. If <a href="#ltshape"><i>&lt;shape></i></a> is
     &lsquo;<code class=css>ellipse</code>&rsquo; and <a
     href="#ltsize"><i>&lt;size></i></a> is &lsquo;<code
     class=css>closest-side</code>&rsquo;, the gradient-shape is an ellipse
     sized so that it exactly meets the vertical and horizontal sides of the
     box closest to its center. Using the same box and starting-point as the
     previous example, the gradient-shape would be an ellipse with a 20px
     vertical radius and a 10px horizontal radius. (If necessary, such as if
     the starting-point is outside of the box, extend the sides of the box so
     that there is a line the ellipse can meet.)</p>

    <p>&lsquo;<code class=css>farthest-side</code>&rsquo; is identical to
     &lsquo;<code class=css>closest-side</code>&rsquo;, except that the
     gradient-shape is sized to meet the side of the box that is farthest
     from its center (or the farthest vertical and horizontal sides, if the
     shape is &lsquo;<code class=css>ellipse</code>&rsquo;). &lsquo;<code
     class=css>closest-corner</code>&rsquo; and &lsquo;<code
     class=css>farthest-corner</code>&rsquo; size the gradient-shape so that
     it exactly meets the closest or farthest corner of the box from its
     center, respectively. If <a href="#ltshape"><i>&lt;shape></i></a> is
     &lsquo;<code class=css>ellipse</code>&rsquo;, the gradient-shape has the
     same ratio of width to height that it would if &lsquo;<code
     class=css>closest-side</code>&rsquo; or &lsquo;<code
     class=css>farthest-side</code>&rsquo; were specified, as appropriate.
     &lsquo;<code class=css>contain</code>&rsquo; is a synonym for
     &lsquo;<code class=css>closest-side</code>&rsquo;, and &lsquo;<code
     class=css>cover</code>&rsquo; is a synonym for &lsquo;<code
     class=css>farthest-corner</code>&rsquo;.</p>

   <dt>Explicitly

   <dd>
    <p>Alternately, the ending-shape's size and shape can be defined
     explicitly, by providing two lengths or percentages. These measure the
     length of the horizontal and vertical axes of the ellipse, respectively.
     (The axis length is the length from the center of the ellipse to the
     edge, similar to the radius of a circle, not the diameter.)</p>

    <p>Percentages used in the first value are relative to the width of the
     box, while percentages used in the second value are relative to the
     height of the box.</p>

    <p>Both of the values must be non-negative. Specifying either as
     &lsquo;<code class=css>0</code>&rsquo; is allowed, but produces a
     degenerate shape. The handling of degenerate ending-shapes is specified
     later in this specification.</p>
  </dl>

  <p>If this argument is omitted, it defaults to &lsquo;<code
   class=css>ellipse cover</code>&rsquo;.

  <p>If only one argument is provided before the color-stops, and it could be
   interpreted as either a position or an explicit size (for example, in
   &lsquo;<code class=css>radial-gradient(10% 10%, red, blue)</code>&rsquo;),
   it must be interpreted as a position.

  <p>In certain circumstances the given parameters may define a degenerate
   shape - a circle or ellipse with a radius of 0. In these instances the
   gradient image is just a solid color equal to the color of the last
   color-stop in the rule. The following combinations of values will trigger
   this: &lsquo;<code class=css>closest-side</code>&rsquo; if the
   starting-point is on a box edge, &lsquo;<code
   class=css>closest-corner</code>&rsquo; if the starting-point is on a box
   corner, and &lsquo;<code class=css>ellipse closest-corner</code>&rsquo; if
   the starting-point is on a box edge.

  <p>Color-stops are placed on an imaginary line extending from the center of
   the gradient toward the right, with the 0% point at the center of the
   gradient, and 100% at the point where the line intersects the
   ending-ellipse. The color of each ellipse is equal to the color of the
   line where the ellipse intersects it. Distances past 100% can be
   specified, and simply indicate a color-stop placed on the line a
   corresponding distance from the center. Negative distances are allowed in
   a radial gradient and work the same as in linear gradients with respect to
   setting the color of the <a
   href="#gradient-line"><i>gradient-line</i></a>, but colors before the
   starting-point of the <a href="#gradient-line"><i>gradient-line</i></a>
   are not displayed. For example, &lsquo;<code class=css>radial-gradient(red
   -50px, yellow 100px)</code>&rsquo; would produce an elliptical gradient
   which starts with a reddish-orange color in the center (the color 1/3
   between red and yellow) and transitions to yellow at 100px wide.</p>
  <!-- ====================================================================== -->

  <h4 class=no-toc id=radial-gradient-examples><span class=secno>5.2.2.
   </span> Radial Gradient Examples</h4>

  <p>All of the following examples are applied to a box that is 200px wide
   and 100px tall.

  <div class=example>
   <p>These examples demonstrate the basic syntax for radial gradients:</p>

   <pre><code>radial-gradient(yellow, green);
radial-gradient(center, ellipse cover, yellow 0%, green 100%);
radial-gradient(50% 50%, farthest-corner, yellow, green);</code></pre>

   <p><img alt="" src=radial1.png></p>

   <pre><code>radial-gradient(circle, yellow, green);</code></pre>

   <p><img alt="" src=radial2.png></p>

   <pre><code>radial-gradient(red, yellow, green);</code></pre>

   <p><img alt="" src=radial3.png></p>
  </div>

  <div class=example>
   <p>This image shows a gradient originating from somewhere other than the
    center of the box:</p>

   <pre><code>radial-gradient(bottom left, farthest-side, red, yellow 50px, green);</code></pre>

   <p><img alt="" src=radial4.png></p>
  </div>

  <div class=example>
   <p>Here we illustrate a &lsquo;<code class=property>contain</code>&rsquo;
    gradient.</p>

   <pre><code>radial-gradient(20px 30px, contain, red, yellow, green);
radial-gradient(20px 30px, 20px 30px, red, yellow, green);</code></pre>

   <p><img alt="" src=radial6.png></p>

   <pre><code>radial-gradient(20px 30px, circle contain, red, yellow, green);
radial-gradient(20px 30px, 20px 20px, red, yellow, green);</code></pre>

   <p><img alt="" src=radial7.png></p>
  </div>
  <!-- ====================================================================== -->

  <h3 id=repeating-gradients><span class=secno>5.3. </span> Repeating
   Gradients</h3>

  <p>In addition to the &lsquo;<code
   class=css>linear-gradient()</code>&rsquo; and &lsquo;<code
   class=css>radial-gradient()</code>&rsquo; functions, this specification
   defines &lsquo;<code class=css>repeating-linear-gradient()</code>&rsquo;
   and &lsquo;<code class=css>repeating-radial-gradient()</code>&rsquo;
   functions. These two functions take the same values and are interpreted
   the same as their respective non-repeating siblings defined previously:

  <pre
   class=prod><code><dfn id=ltrepeating-linear-gradient>&lt;repeating-linear-gradient></dfn> = repeating-linear-gradient(
	[[
		[ [top | bottom] || [left | right] ] 
		|| 
		&lt;angle>
	],]? 
	&lt;color-stop&gt;[, &lt;color-stop&gt;]+
)
<dfn id=ltrepeating-radial-gradient>&lt;repeating-radial-gradient></dfn> = repeating-radial-gradient(
	[&lt;bg-position&gt;,]? 
	[[
		[&lt;shape&gt; || &lt;size&gt;]
		|
		[&lt;length> | &lt;percentage>]{2}
	],]? 
	&lt;color-stop&gt;[, &lt;color-stop&gt;]+
)</code></pre>

  <p>When rendered, however, the color-stops are repeated infinitely in both
   directions, with their positions shifted by multiples of the difference
   between the last specified color-stop's position and the first specified
   color-stop's position. For example, &lsquo;<code
   class=css>repeating-linear-gradient(red 10px, blue 50px)</code>&rsquo; is
   equivalent to &lsquo;<code class=css>linear-gradient(..., red -30px, blue
   10px, red 10px, blue 50px, red 50px, blue 90px, ...)</code>&rsquo;. Note
   that the last color-stop and first color-stop will always coincide at the
   boundaries of each group, which will produce sharp transitions if the
   gradient does not start and end with the same color.

  <div class=example>
   <p>Repeating gradient syntax is basically identical to that of
    non-repeating gradients:</p>

   <pre><code>repeating-linear-gradient(red, blue 20px, red 40px)</code></pre>

   <p><img alt="" src=repeating1.png></p>

   <pre><code>repeating-radial-gradient(red, blue 20px, red 40px)</code></pre>

   <p><img alt="" src=repeating2.png></p>

   <pre><code>repeating-radial-gradient(20px 30px, circle contain, red, yellow, green 100%, yellow 150%, red 200%)</code></pre>

   <p><img alt="" src=repeating3.png></p>
  </div>

  <p>If the distance between the first and last color-stops is zero, the
   gradient must be rendered as a solid-color image equal to the "average"
   color of the gradient, determined by linearly blending the colors of all
   the color-stops in premultipied sRGBA space.

  <p>If the distance between the first and last color-stops is non-zero, but
   is small enough that the implementation knows that the physical resolution
   of the output device is insufficient to faithfully render the gradient,
   the gradient must be rendered as a solid-color image equal to the weighted
   average color of the gradient, as determined by the following algorithm:

  <ol>
   <li>Define <var>list</var> as an initially-empty list of premultiplied
    RGBA colors, and <var>total-length</var> as the distance between first
    and last color stops.

   <li>For each adjacent pair of color-stops, define <var>weight</var> as
    half the distance between the two color-stops, divided by
    <var>total-length</var>. Add two entries to <var>list</var>, the first
    obtained by representing the color of the first color-stop in
    premultiplied sRGBA and scaling all of the components by
    <var>weight</var>, and the second obtained in the same way with the
    second color-stop.

   <li>Sum the entries of <var>list</var> component-wise to produce the
    average color.
  </ol>

  <p class=note>As usual, implementations may use whatever algorithm they
   wish, so long as it produces the same result as the above.

  <div class=example>
   <p class=issue>TODO fill in examples here of the 0-length or
    too-small-length cases.</p>
  </div>
  <!-- ====================================================================== -->

  <h3 id=color-stop-syntax><span class=secno>5.4. </span> Gradient
   Color-Stops</h3>

  <pre
   class=prod><code><dfn id=ltcolor-stop>&lt;color-stop></dfn> = &lt;color> [ &lt;percentage> | &lt;length> ]?</code></pre>

  <p>Color-stops are points placed along the line defined by the <a
   href="#gradient-line"><i>gradient-line</i></a> at the beginning of the
   rule. Color-stops must be specified in order. Percentages refer to the
   length of the gradient-line, with 0% being at the starting point and 100%
   being at the ending point. Lengths are measured from the starting-point in
   the direction of the ending-point. Color-stops are usually placed between
   the starting-point and ending-point, but that's not required; the
   gradient-line extends infinitely in both directions, and a color-stop can
   be placed at any position on the line.

  <p>At each color-stop, the line is the color of the color-stop. Between two
   color-stops, the line's color is linearly interpolated between the colors
   of the two color-stops, with the interpolation taking place in
   premultiplied RGBA space. Before the first color-stop, the line is the
   color of the first color-stop. After the last color-stop, the line is the
   color of the last color-stop.

  <p>The following steps must be applied <em>in order</em> to process the
   list of color-stops. After applying these rules, all color-stops will have
   a definite position and they will be in ascending order:

  <ol>
   <li>If the first color-stop does not have a position, its position
    defaults to 0%. If the last color-stop does not have a position, its
    position defaults to 100%.

   <li>If a color-stop has a position that is less than the specified
    position of any color-stop before it in the list, its position is changed
    to be equal to the largest specified position of any color-stop before
    it.

   <li>If any color-stop still does not have a position, then, for each run
    of adjacent color-stops without positions, set their positions so that
    they are evenly spaced between the preceding and following color-stops
    with positions.
  </ol>

  <p>If multiple color-stops have the same position, they produce an
   infinitesimal transition from the one specified first in the rule to the
   one specified last. In effect, the color suddenly changes at that position
   rather than smoothly transitioning.

  <p class=note>It is recommended that authors not mix different types of
   units, such as px, em, or %, in a single rule, as this can cause a
   color-stop to unintentionally try to move before an earlier one. For
   example, the rule &lsquo;<code class=css>background-image:
   linear-gradient(red, yellow 100px, blue 50%)</code>&rsquo; would work as
   expected as long as the background area is at least 200px tall. If it was
   150px tall, however, the blue color-stop's position would be equivalent to
   "75px", which precedes the yellow color-stop, and would be corrected to a
   position of 100px.

  <p class=note>The definition and implications of "premultiplied" color
   spaces are given elsewhere in the technical literature, but a quick primer
   is given here to illuminate the process. Given a color expressed as an
   rgba() 4-tuple, one can convert this to a premultiplied representation by
   multiplying the red, green, and blue components by the alpha component.
   For example, a partially-transparent blue may be given as
   rgba(0,0,255,.5), which would then be expressed as (0,0,127.5,.5) in its
   premultiplied representation. Note that fully opaque colors have the same
   representation in rgba and premultiplied-rgba (you multiply the components
   by 1), and all fully transparent colors are expressed the same way in the
   premultiplied representation (you multiply each component by 0, so no
   matter what the source color was in rgba, the premultiplied representation
   is (0,0,0,0)). Interpolating colors using the premultiplied
   representations rather than the plain rgba representations tends to
   produce more attractive transitions, particularly when transitioning from
   a fully opaque color to fully transparent.</p>
  <!-- ====================================================================== -->

  <h2 id=sizing><span class=secno>6. </span> Sizing Images and Objects in CSS</h2>

  <p>Images used in CSS may come from a number of sources, from defined image
   formats (such as gif, jpeg, etc), dedicated markup formats (such as SVG),
   and CSS-specific formats (such as the linear-gradient() value type defined
   in this specification). As well, a document may contain many other types
   of objects, such as video, plugins, or nested documents. These images and
   objects (just <dfn id=objects>objects</dfn> hereafter) may offer many
   types of sizing information to CSS, or none at all. This section defines
   generically the size negotiation model between the object and the CSS
   layout algorithms.</p>
  <!-- ====================================================================== -->

  <h3 id=sizing-terms><span class=secno>6.1. </span> Object-Sizing
   Terminology</h3>

  <p>In order to define this handling, we define a few terms, to make it
   easier to refer to various concepts:

  <dl>
   <dt><dfn id=intrinsic-dimensions>intrinsic dimensions</dfn>

   <dd>
    <p>An object's intrinsic dimensions are its preferred, natural width,
     height, and aspect ratio, if they exist. There can be an <dfn
     id=intrinsic-height>intrinsic height</dfn> and <dfn
     id=intrinsic-width>intrinsic width</dfn>, defining a definite rectangle.
     (Most bitmap images fall into this category.) There can be an <dfn
     id=intrinsic-aspect-ratio>intrinsic aspect ratio</dfn> defining the
     relation of the width to the height, but no definite size. (SVG images
     designed to scale may fall into this category.) There can be just an
     intrinsic height or width. Or there can be no intrinsic dimensions at
     all, implying that the object has no preferred size or aspect ratio.
     (Embedded documents are often assumed to have no intrinsic size, as are
     CSS gradients, defined in this specification.)</p>

    <p>If an object (such as an icon) has multiple sizes, then the largest
     size is used. If it has multiple aspect ratios of that size (or of no
     size), then the aspect ratio closest to the aspect ratio of the <a
     href="#default-object-size"><i>default object size</i></a> is used.</p>

   <dt><dfn id=specified-size>specified size</dfn>

   <dd>The specified size of an object is given by CSS, such as through the
    &lsquo;<a href="#object-fit0"><code
    class=property>object-fit</code></a>&rsquo; or &lsquo;<code
    class=property>background-size</code>&rsquo; properties. The specified
    size can be a definite width and height, a set of constraints, or a
    combination thereof.

   <dt><dfn id=concrete-object-size>concrete object size</dfn>

   <dd>The <a href="#concrete-object-size"><i>concrete object size</i></a> is
    the result of transforming the <a
    href="#intrinsic-dimensions"><i>intrinsic dimensions</i></a> into a
    concrete size, based on the <a href="#specified-size"><i>specified
    size</i></a> and the <a href="#default-object-size"><i>default object
    size</i></a>. A <a href="#concrete-object-size"><i>concrete object
    size</i></a> always has a definite height and width.

   <dt><dfn id=default-object-size>default object size</dfn>

   <dd>
    <p>The <a href="#default-object-size"><i>default object size</i></a> is a
     rectangle with a definite height and width used to determine the <a
     href="#concrete-object-size"><i>concrete object size</i></a> when both
     the <a href="#intrinsic-dimensions"><i>intrinsic dimensions</i></a> and
     <a href="#specified-size"><i>specified size</i></a> are missing
     dimensions. It varies based on the context in which that the image is
     being laid out.</p>

    <div class=example>
     <p>Below are some examples of default object sizing areas:

     <dl>
      <dt>&lsquo;<code class=property>background-image</code>&rsquo;

      <dd>The <a href="#default-object-size"><i>default object size</i></a>
       is the size of the element's <a
       href="http://www.w3.org/TR/css3-background/#background-positioning-area">background
       positioning area</a>. <a href="#CSS3BG"
       rel=biblioentry>[CSS3BG]<!--{{CSS3BG}}--></a>

      <dt>&lsquo;<code class=property>list-style-image</code>&rsquo;

      <dd>The <a href="#default-object-size"><i>default object size</i></a>
       is a 1em square. <a href="#CSS21"
       rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

      <dt>&lsquo;<code class=property>border-image</code>&rsquo;

      <dd>The <a href="#default-object-size"><i>default object size</i></a>
       is the size of the element's <a
       href="http://www.w3.org/TR/css3-background/#border-image-area">border
       image area</a>. <a href="#CSS3BG"
       rel=biblioentry>[CSS3BG]<!--{{CSS3BG}}--></a>

      <dt>&lsquo;<code class=property>cursor</code>&rsquo;

      <dd>The <a href="#default-object-size"><i>default object size</i></a>
       is a UA-defined size that should be based on the size of a typical
       cursor on the UA's operating system. <a href="#CSS21"
       rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

      <dt>replaced elements

      <dd>The <a href="#default-object-size"><i>default object size</i></a>
       is a rectangle 300px wide and 150px tall. <a href="#CSS21"
       rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>
     </dl>

     <p class=issue>The only reason these are examples is because the proper
      place for the normative definitions of default object sizes is in the
      definitions for the relevant properties. These are the correct values,
      though.</p>
    </div>
  </dl>
  <!-- ====================================================================== -->

  <h3 id=object-negotiation><span class=secno>6.2. </span> CSSâ‡‹Object
   Negotiation</h3>

  <p>Objects in CSS are sized and rendered as follows:

  <ol>
   <li>When an image or object is specified in a document, such as through a
    url() value in a &lsquo;<code
    class=property>background-image</code>&rsquo; property or a @src
    attribute on an &lt;img> element, CSS queries the object for its <a
    href="#intrinsic-dimensions"><i>intrinsic dimensions</i></a>.

   <li>Using the <a href="#intrinsic-dimensions"><i>intrinsic
    dimensions</i></a> and the <a href="#specified-size"><i>specified
    size</i></a>, CSS then computes a <a
    href="#concrete-object-size"><i>concrete object size</i></a> that defines
    the size and position of the region the object will render in (specified
    in the following section).

   <li>CSS asks the object to render itself at the <a
    href="#concrete-object-size"><i>concrete object size</i></a>. CSS does
    not define how objects render when the <a
    href="#concrete-object-size"><i>concrete object size</i></a> is different
    from the object's <a href="#intrinsic-dimensions"><i>intrinsic
    dimensions</i></a>. The object may adjust itself to match the <a
    href="#concrete-object-size"><i>concrete object size</i></a> in some way,
    or even render itself larger or smaller than the <a
    href="#concrete-object-size"><i>concrete object size</i></a> to satisfy
    sizing constraints of its own.

   <li>Unless otherwise specified by CSS, the object is then clipped to the
    <a href="#concrete-object-size"><i>concrete object size</i></a>.
  </ol>
  <!-- ====================================================================== -->

  <h3 id=default-sizing><span class=secno>6.3. </span> Concrete Object Size
   Resolution</h3>

  <p>In the absence of more specific rules, an object's <a
   href="#intrinsic-dimensions"><i>intrinsic dimensions</i></a> are resolved
   to a <a href="#concrete-object-size"><i>concrete object size</i></a> as
   follows:

  <ul>
   <li>If the <a href="#specified-size"><i>specified size</i></a> is a
    definite width and height, the <a
    href="#concrete-object-size"><i>concrete object size</i></a> is given
    that width and height.

   <li>If the <a href="#specified-size"><i>specified size</i></a> has only a
    width or height, but not both, then the <a
    href="#concrete-object-size"><i>concrete object size</i></a> is given
    that specified width or height. The other dimension is calculated as
    follows:
    <ol>
     <li>If the object has an <a href="#intrinsic-aspect-ratio"><i>intrinsic
      aspect ratio</i></a>, the missing dimension of the <a
      href="#concrete-object-size"><i>concrete object size</i></a> is
      calculated using the <i>intrinsic aspect-ratio</i> and the present
      dimension.

     <li>Otherwise, if the missing dimension is present in the object's <a
      href="#intrinsic-dimensions"><i>intrinsic dimensions</i></a>, the
      missing dimension is taken from the object's <a
      href="#intrinsic-dimensions"><i>intrinsic dimensions</i></a>.

     <li>Otherwise, the missing dimension of the <a
      href="#concrete-object-size"><i>concrete object size</i></a> is taken
      from the <a href="#default-object-size"><i>default object size</i></a>.
    </ol>

   <li>If the <a href="#specified-size"><i>specified size</i></a> has neither
    a definite width nor height, and has no additional contraints, the
    dimensions of the <a href="#concrete-object-size"><i>concrete object
    size</i></a> are calculated as follows:
    <ol>
     <li>If the object has only an <a
      href="#intrinsic-aspect-ratio"><i>intrinsic aspect ratio</i></a>, the
      <a href="#concrete-object-size"><i>concrete object size</i></a> must
      have that aspect ratio, and additionally be as large as possible
      without either its height or width exceeding the height or width of the
      <a href="#default-object-size"><i>default object size</i></a>.
      Otherwise, the width and height of the <a
      href="#concrete-object-size"><i>concrete object size</i></a> is the
      same as the object's <a href="#intrinsic-width"><i>intrinsic
      width</i></a> and <a href="#intrinsic-height"><i>intrinsic
      height</i></a>, if they exist.

     <li>If the <a href="#concrete-object-size"><i>concrete object
      size</i></a> is still missing a width or height, and the object has an
      <a href="#intrinsic-aspect-ratio"><i>intrinsic aspect ratio</i></a>,
      the missing dimension is calculated from the present dimension and the
      <a href="#intrinsic-aspect-ratio"><i>intrinsic aspect ratio</i></a>.
      Otherwise, the missing dimensions is taken from the <a
      href="#default-object-size"><i>default object size</i></a>.
    </ol>
  </ul>

  <p>If the <a href="#specified-size"><i>specified size</i></a> has
   additional constraints, the <a href="#concrete-object-size"><i>concrete
   object size</i></a> must be sized to satisfy those constraints. For
   example, the &lsquo;<code class=property>min-width</code>&rsquo;,
   &lsquo;<code class=property>min-height</code>&rsquo;, &lsquo;<code
   class=property>max-width</code>&rsquo;, and &lsquo;<code
   class=property>max-height</code>&rsquo; properties specify slightly more
   complex handling for sizing replaced elements, and &lsquo;<code
   class=css>background-repeat: round</code>&rsquo; can further adjust the
   size calculated by &lsquo;<code
   class=property>background-size</code>&rsquo; so that the image fits a
   whole number of times into the background positioning area.</p>
  <!-- ====================================================================== -->

  <h3 id=object-fit><span class=secno>6.4. </span> Sizing Objects: the
   &lsquo;<a href="#object-fit0"><code
   class=property>object-fit</code></a>&rsquo; property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=object-fit0>object-fit</dfn>

    <tr>
     <th>Value:

     <td>fill | contain | cover | none | scale-down

    <tr>
     <th>Initial:

     <td>fill

    <tr>
     <th>Applies to:

     <td>replaced elements

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Percentages:

     <td>N/A

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>specified value
  </table>

  <p>The &lsquo;<a href="#object-fit0"><code
   class=property>object-fit</code></a>&rsquo; property specifies how the
   contents of a replaced element should be scaled relative to the box
   established by its used height and width. It also enables scaling a
   replaced element's contents up to a specified maximum size or down to a
   specified minimum size while preserving its aspect ratio. This property
   never affects the size of the replaced element; it only affects the size
   of the contents of the replaced element.

  <p>Not all replaced elements can be scaled, but images typically can.

  <p>If the replaced element's content do not have an intrinsic aspect ratio
   (which may be derived from an intrinsic width and height), all of the
   values for &lsquo;<a href="#object-fit0"><code
   class=property>object-fit</code></a>&rsquo; are treated as &lsquo;<code
   class=css>fill</code>&rsquo;. Otherwise, the contents are scaled as
   follows:

  <dl>
   <dt>fill

   <dd>
    <p>Set the content's size to the <a
     href="#concrete-object-size"><i>concrete object size</i></a> obtained by
     running the <i title=default-sizing>object sizing algorithm</i> with a
     <a href="#specified-size"><i>specified size</i></a> and a <a
     href="#default-object-size"><i>default object size</i></a> equal to the
     replaced element's used width and height.</p>

    <p>This will make the contents exactly fill the replaced element.</p>

   <dt>contain

   <dd>
    <p>Determine the used â€˜heightâ€™ and â€˜widthâ€™ of the element as
     usual, except if both â€˜heightâ€™ and â€˜widthâ€™ are â€˜autoâ€™, and
     the used value of at least one of â€˜max-widthâ€™ and â€˜max-heightâ€™
     is not â€˜noneâ€™, then compute the element's used width and used height
     as though the intrinsic dimensions of the contents were infinitely large
     numbers whose ratio is the actual intrinsic ratio of the contents.</p>

    <p>Set the content's size to the largest width and height that has the
     same aspect ratio as the content's intrinsic aspect ratio, and
     additionally has neither width nor height larger than the replaced
     element's used width and height, respectively.</p>

   <dt>cover

   <dd>
    <p>Determine the used â€˜heightâ€™ and â€˜widthâ€™ of the element as
     usual, except if both â€˜heightâ€™ and â€˜widthâ€™ are â€˜autoâ€™, and
     the used value of at least one of â€˜min-widthâ€™ and â€˜min-heightâ€™
     is not â€˜noneâ€™, then compute the element's used width and used height
     as though the intrinsic dimensions of the contents were infinitely small
     numbers whose ratio is the actual intrinsic ratio of the contents.</p>

    <p>Set the content's size to the smallest width and height that has the
     same aspect ratio as the content's intrinsic aspect ratio, and
     additionally has neither width nor height smaller than the replaced
     element's used width and height, respectively.</p>

   <dt>none

   <dd>
    <p>Set the content's size to the <a
     href="#concrete-object-size"><i>concrete object size</i></a> obtained by
     running the <i title=default-sizing>object sizing algorithm</i> with no
     <a href="#specified-size"><i>specified size</i></a>, and a <a
     href="#default-object-size"><i>default object size</i></a> equal to the
     replaced element's used width and height.</p>

   <dt>scale-down <i class=issue>better name?</i>

   <dd>
    <p>Size the content as if &lsquo;<code class=property>none</code>&rsquo;
     or &lsquo;<code class=property>contain</code>&rsquo; were specified,
     whichever would result in a smaller size.</p>

    <p class=note>Note that both &lsquo;<code
     class=property>none</code>&rsquo; and &lsquo;<code
     class=property>contain</code>&rsquo; respect the content's intrinsic
     aspect ratio, so the concept of "smaller" is well-defined.</p>
  </dl>

  <p>If the content does not completely fill the replaced element, the
   unfilled space shows the replaced element's background. Replaced elements
   always clip their contents, similar to the effects of &lsquo;<code
   class=css>overflow:hidden</code>&rsquo; on non-replaced elements, so any
   content that would extend beyond the edges of the box are simply not
   displayed. See the &lsquo;<a href="#object-position0"><code
   class=property>object-position</code></a>&rsquo; property for positioning
   the object with respect to the element's box.

  <div class=figure>
   <p><img alt="" src="img_scale.png" style="border: thin solid black;"></p>

   <p class=caption>An example showing how four of the values of &lsquo;<a
    href="#object-fit0"><code class=property>object-fit</code></a>&rsquo;
    cause the replaced element (blue figure) to be scaled to fit its
    height/width box (shownwith a green background), using the initial value
    for &lsquo;<a href="#object-position0"><code
    class=property>object-position</code></a>&rsquo;. The fifth value,
    &lsquo;<code class=css><span class=css>scale-down</span>, in this case
    looks identical to </code>&rsquo;<span class=css>contain</span>.</p>
  </div>

  <p class=note>Note: the &lsquo;<a href="#object-fit0"><code
   class=property>object-fit</code></a>&rsquo; property has similar semantics
   to the fit attribute in <a href="#SMIL10"
   rel=biblioentry>[SMIL10]<!--{{SMIL10}}--></a>.

  <p class=note>Note: Per the <i title=object-negotiation>CSSâ‡‹Object
   Negotiation</i> algorithm, the <a href="#concrete-object-size"><i>concrete
   object size</i></a> (or, in this case, the size of the content) does not
   directly scale the object itself - it is merely passed to the object as
   information about the size of the visible canvas. How to then draw into
   that size is up to the image format. In particular, raster images always
   scale to the given size, while SVG uses the given size as the size of the
   "SVG Viewport" (a term defined by SVG) and then uses the values of several
   attributes on the root &lt;svg> element to determine how to draw itself.

  <p>User agents MAY accept &lsquo;<code
   class=property>image-fit</code>&rsquo; as an alias for &lsquo;<a
   href="#object-fit0"><code class=property>object-fit</code></a>&rsquo;, as
   a previous version of this specification used that name. Authors must not
   use &lsquo;<code class=property>image-fit</code>&rsquo; in their
   stylesheets.</p>
  <!-- ====================================================================== -->

  <h3 id=object-position><span class=secno>6.5. </span> Positioning Objects:
   the &lsquo;<a href="#object-position0"><code
   class=property>object-position</code></a>&rsquo; property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=object-position0>object-position</dfn>

    <tr>
     <th>Value:

     <td>[ [ &lt;percentage> | &lt;length> | left | center | right ] [
      &lt;percentage> | &lt;length> | top | center | bottom ]? ] | [ [ left |
      center | right ] || [ top | center | bottom ] ]

    <tr>
     <th>Initial:

     <td>50% 50%

    <tr>
     <th>Applies to:

     <td>replaced elements

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Percentages:

     <td>refer to width and height of box itself

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>specified value
  </table>

  <p>The &lsquo;<a href="#object-position0"><code
   class=property>object-position</code></a>&rsquo; property determines the
   alignment of the replaced element inside its box. The values have the same
   meaning as the values for the <a
   href="http://w3.org/TR/CSS21/colors.html#propdef-background-position">&lsquo;<code
   class=property>background-position</code>&rsquo;</a> property, using the
   image as the image and the content box as the positioning area. <a
   href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>

  <p class=note>Note that areas of the box not covered by the replaced
   element will show the element's background.

  <p>User agents MAY accept &lsquo;<code
   class=property>image-position</code>&rsquo; as an alias for &lsquo;<a
   href="#object-position0"><code
   class=property>object-position</code></a>&rsquo;, as a previous version of
   this specification used that name. Authors must not use &lsquo;<code
   class=property>image-position</code>&rsquo; in their stylesheets.</p>
  <!-- ====================================================================== -->

  <h2 id=image-processing><span class=secno>7. </span> Image Processing</h2>

  <h3 id=image-resolution><span class=secno>7.1. </span> Overriding Image
   Resolutions: the &lsquo;<a href="#image-resolution0"><code
   class=property>image-resolution</code></a>&rsquo; property</h3>

  <p>The <i>image resolution</i> is defined as the number of image pixels per
   unit length, e.g., pixels per inch. Some image formats can record
   information about the resolution of images. This information can be
   helpful when determining the actual size of the image in the formatting
   process. However, the information can also be wrong, in which case it
   should be ignored. By default, CSS assumes a resolution of one image pixel
   per CSS &lsquo;<code class=css>px</code>&rsquo; unit; however, the
   &lsquo;<a href="#image-resolution0"><code
   class=property>image-resolution</code></a>&rsquo; property allows using
   some other resolution.

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=image-resolution0>image-resolution</dfn>

    <tr>
     <th>Value:

     <td>from-image || &lt;resolution>

    <tr>
     <th>Initial:

     <td>1dppx

    <tr>
     <th>Applies to:

     <td>all elements

    <tr>
     <th>Inherited:

     <td>yes

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>specified value
  </table>

  <p>The &lsquo;<a href="#image-resolution0"><code
   class=property>image-resolution</code></a>&rsquo; property specifies the
   resolution of all images used in or on the element: images in content
   (e.g. replaced elements and generated content), background images, list
   markers, etc. Values have the following meanings:

  <dl>
   <dt>&lt;resolution>

   <dd>The value sets the resolution of the image. In combination with
    &lsquo;<code class=css>from-image</code>&rsquo;, the specified resolution
    is only used if the image does not have a resolution.

   <dt>from-image

   <dd>The UA must look for the resolution in the image itself. If the image
    does not have a resolution, the specified &lt;resolution> value is used,
    or &lsquo;<code class=css>1dppx</code>&rsquo; if none is given.
  </dl>

  <p>This property must have no effect on vector images, as vector images do
   not have a concept of "resolution".

  <p class=note>Note that for all images other than the contents of replaced
   elements, the &lsquo;<code class=css>image()</code>&rsquo; function may be
   used to override the resolution set here.

  <div class=example>
   <p>This rule specifies that the UA should use the image resolution found
    in the image itself, falling back to 1 image pixel per CSS &lsquo;<code
    class=css>px</code>&rsquo; unit.</p>

   <pre class=css>img { image-resolution: from-image }</pre>
  </div>

  <div class=example>
   <p>Using this rule, the image resolution is set to 300dpi and the
    resolution in the image, if any, is ignored.</p>

   <pre>img { image-resolution: 300dpi }</pre>
  </div>

  <div class=example>
   <p>These rules both specify that the UA should use the image resolution
    found in the image itself. If the image has no resolution, the resolution
    is set to 300dpi.</p>

   <pre>
img { image-resolution: from-image 300dpi }
img { image-resolution: 300dpi from-image }
	  </pre>
  </div>
  <!-- ====================================================================== -->

  <h3 id=image-orientation><span class=secno>7.2. </span> Orienting an Image
   on the Page: the &lsquo;<a href="#image-orientation0"><code
   class=property>image-orientation</code></a>&rsquo; property</h3>

  <p>Images from camera phones, digital cameras or scanners may be encoded
   sideways. For example, the first row of image data may represent the
   leftmost or rightmost column of image pixels. Furthermore, often such
   devices have limited resources, and do not have the capability to rotate
   the image into an upright orientation. However, this type of device may
   have internal knowledge or can accept input from its user as to the
   rotational correction to perform.

  <p>The image-orientation property provides a way to specify an
   "out-of-band" rotation to be applied to image source data. This facility
   is not intended to specify layout transformations such as arbitrary
   rotation or flipping the image in the horizontal or vertical direction. It
   is not needed to correctly orient an image when printing in landscape
   versus portrait orientation, as that rotation is done as part of layout.
   It should only be used to correct incorrectly-oriented images.

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=image-orientation0>image-orientation</dfn>

    <tr>
     <th>Value:

     <td>&lt;angle>

    <tr>
     <th>Initial:

     <td>0deg

    <tr>
     <th>Applies to:

     <td>images

    <tr>
     <th>Inherited:

     <td>no

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed value:

     <td>specified value, rounded and normalized (see text)
  </table>

  <p>&lsquo;<a href="#image-orientation0"><code
   class=property>image-orientation</code></a>&rsquo; specifies an orthogonal
   rotation to be applied to an image before it is laid out. CSS layout
   processing applies to the image <em>after</em> rotation. This implies, for
   example:

  <ul>
   <li>The intrinsic height and width are derived from the rotated rather
    than the original image dimensions;

   <li>The height (width) property applies to the vertical (horizontal)
    dimension of the image, <em>after</em> rotation.
  </ul>

  <p>Positive values cause the image to be rotated to the right (in a
   clockwise direction), while negative values cause a rotation to the left.
   The computed value of the property is calculated by rounding the specified
   angle to the nearest quarter-turn (90deg, 100grad, .25turn, etc.),
   rounding away from 0 (that is, 45deg is rounded to 90deg, while -45deg is
   rounded to -90deg), then moduloing the value by 1 turn (360deg, 400grad,
   etc.).

  <div class=example>
   <p>The following example rotates the image 90 degrees clockwise:</p>

   <pre>
img.ninety     { image-orientation: 90deg }
...
&lt;img class="ninety" src=... />
		</pre>

   <p>The same effect could be achieved with, for example, an angle of
    -270deg or 450deg.</p>
  </div>
  <!-- ====================================================================== -->

  <h3 id=image-rendering><span class=secno>7.3. </span> Determining How to
   Scale an Image: the &lsquo;<a href="#image-rendering0"><code
   class=property>image-rendering</code></a>&rsquo; property</h3>

  <table class=propdef>
   <tbody>
    <tr>
     <th>Name:

     <td><dfn id=image-rendering0>image-rendering</dfn>

    <tr>
     <th>Value:

     <td>auto | crisp-edges<!-- | pixelated -->

    <tr>
     <th>Initial:

     <td>auto

    <tr>
     <th>Applies to:

     <td>all elements

    <tr>
     <th>Inherited:

     <td>yes

    <tr>
     <th>Media:

     <td>visual

    <tr>
     <th>Computed Value:

     <td>specified value
  </table>

  <p>The &lsquo;<a href="#image-rendering0"><code
   class=property>image-rendering</code></a>&rsquo; property provides a hint
   to the user-agent about what aspects of an image are most important to
   preserve when the image is scaled, to aid the user-agent in the choice of
   an appropriate scaling algorithm. When specified on an element, it applies
   to all images given in properties for the element, such as background
   images, list-style images, or the content of replaced elements when they
   represent an image that must be scaled. The values of the &lsquo;<a
   href="#image-rendering0"><code
   class=property>image-rendering</code></a>&rsquo; property are interpreted
   as follows:

  <dl>
   <dt><dfn id=auto title=image-rendering-auto>auto</dfn>

   <dd>
    <p>The image should be scaled with an algorithm that maximizes the
     appearance of the image, possibly smoothing colors or introducing minor
     blur. This value is intended for use with photos and similar "real-life"
     images.</p>

    <p>For example, algorithms such as bilinear interpolation or lancosz
     interpolation are acceptable. Lesser or greater algorithms may be used
     as well; in high-load situations, user agents may choose to use a very
     cheap algorithm such as nearest-neighbor, while in low-load situations
     they may choose to use a very expensive and high-quality scaling
     algorithm.</p>

   <dt><dfn id=crisp-edges>crisp-edges</dfn>

   <dd>
    <p>The image should be scaled with an algorithm that preserves contrast
     and edges in the image, and which does not smooth colors or introduce
     blur to the image in the process. This is intended for images such as
     pixel art, or diagrams with sharp, straight lines. When downscaling an
     image, some color-smoothing is acceptable, but should not introduce
     blurriness.</p>

    <p>For example, when upscaling an image, algorithms such as
     nearest-neighbor are acceptable, as are specialized pixel-art scaling
     algorithms like EPX or <a
     href="http://research.microsoft.com/en-us/um/people/kopf/pixelart/">the
     algorithm described in this SIGGRAPH paper</a>. When downscaling an
     image, algorithms such as nearest-neighbor or bilinear interpolation are
     acceptable.</p>
   </dd>
   <!--<dt><dfn>pixelated</dfn></dt>
		<dd>
			<p>The image should be scaled with an algorithm that preserves a "pixelated" look.  This is intended for images such as pixel art.</p>

			<p>If the image is upscaled an integer multiple of its original size, it must be scaled with the nearest-neighbor algorithm.  When upscaled by any other factor, nearest-neighbor is acceptable, as are other algorithms that preserve a pixelated look.  When downscaling an image, any algorithm that preserves a pixelated look are acceptable, such as nearest-neighbor or bilinear interpolation.</p>
		</dd>-->
  </dl>

  <p>This property does <em>not</em> dictate any particular scaling algorithm
   to be used. For example, with &lsquo;<code
   class=css>image-rendering:auto</code>&rsquo;, a user agent might scale
   images with bilinear interpolation by default, switch to nearest-neighbor
   interpolation in high-load situations, and switch to a high-quality
   scaling algorithm like Lanczos interpolation for static images that aren't
   moving or changing. Similarly, with &lsquo;<code
   class=css>image-rendering:crisp-edges</code>&rsquo;, a user agent might
   scale images with nearest-neighbor interpolation by default, and switch to
   EPX interpolation in low-load situations.

  <p>This property must only have an effect on raster images. Vector images
   can be upscaled or downscaled infinitely without losing detail, and thus
   do not require any hints as to what details are important to preserve.

  <p>This property previously accepted the values &lsquo;<code
   class=css>optimizeSpeed</code>&rsquo; and &lsquo;<code
   class=css>optimizeQuality</code>&rsquo;. These are now deprecated; a user
   agent may accept them as valid values, but must treat them as aliases for
   the &lsquo;<code class=css>auto</code>&rsquo; value.

  <p class=issue>dbaron suggests that optimizeSpeed should instead alias to
   crisp-edges.</p>
  <!-- ====================================================================== -->

  <h2 id=serialization><span class=secno>8. </span> Serialization</h2>

  <p>This section describes the serialization of all new properties and value
   types introduced in this specification, for the purpose of interfacing
   with the CSS Object Model <a href="#CSSOM"
   rel=biblioentry>[CSSOM]<!--{{CSSOM}}--></a>.

  <p>All of these algorithms refer to a variable "s". For each, let s
   initially be the empty string, run the steps described, and then return s.</p>
  <!-- ====================================================================== -->

  <h3 id=serializing-resolution><span class=secno>8.1. </span> Serializing a
   &lt;resolution></h3>

  <p>The serialization of the <a
   href="#ltresolution"><i>&lt;resolution></i></a> value type is defined in
   the CSSOM spec.

  <p class=note>This spec defines several new units for resolutions. These
   can all be converted to the canonical "dpcm" unit that CSSOM defines the
   serialization in terms of.</p>
  <!-- ====================================================================== -->

  <h3 id=serializing-url-notation><span class=secno>8.2. </span> Serializing
   the &lsquo;<code class=css>url()</code>&rsquo; notation</h3>

  <p>The serialization of the url() function is defined in the CSSOM spec.</p>
  <!-- ====================================================================== -->

  <h3 id=serializing-image-notation><span class=secno>8.3. </span>
   Serializing the &lsquo;<code class=css>image()</code>&rsquo; / <a
   href="#ltimage-list"><i>&lt;image-list></i></a> notation</h3>

  <p>To serialize an <a href="#ltimage-list"><i>&lt;image-list></i></a>:

  <ol>
   <li>Append "image(" to s.

   <li>For each argument, serialize the argument as an &lt;image-decl> or
    &lt;color> as appropriate, and append it to s. Then, if it is not the
    final argument, append a comma and a space ", " to s.

   <li>Append a close parenthesis ")" to s.
  </ol>

  <p>To serialize an <a href="#ltimage-decl"><i>&lt;image-decl></i></a>:

  <ol>
   <li>Serialize the first part of the value (the &lt;string>) as a string.

   <li>If a &lt;resolution> was provided, append a space " " to s. Then
    serialize the &lt;resolution> and append it to s.

   <li>If the &lsquo;<code class=property>snap</code>&rsquo; keyword was
    provided, append a space " " and the literal string "snap" to s.

   <li>If a directional keyword was provided, append a space " " to s, then
    append the keyword to s.
  </ol>
  <!-- ====================================================================== -->

  <h3 id=serializing-element-notation><span class=secno>8.4. </span>
   Serializing the &lsquo;<code class=css>element()</code>&rsquo; / <a
   href="#ltelement-reference"><i>&lt;element-reference></i></a> notation</h3>

  <p>To serialize an <a
   href="#ltelement-reference"><i>&lt;element-reference></i></a>:

  <ol>
   <li>Append "element(" to s.

   <li>Serialize the argument as a selector or identifier, as appropriate,
    and append it to s.

   <li>Append a close parenthesis ")" to s.
  </ol>
  <!-- ====================================================================== -->

  <h3 id=serializing-cross-fade><span class=secno>8.5. </span> Serializing
   the &lsquo;<code class=css>cross-fade()</code>&rsquo; / <a
   href="#ltimage-combination"><i>&lt;image-combination></i></a> notation</h3>

  <p>To serialize an <a
   href="#ltimage-combination"><i>&lt;image-combination></i></a>:

  <ol>
   <li>Append "cross-fade(" to s.

   <li>Serialize the first argument to the function as an <a
    href="#ltimage"><i>&lt;image></i></a>, and append it to s.

   <li>Append a comma and a space ", " to s.

   <li>Serialize the second argument to the function as an <a
    href="#ltimage"><i>&lt;image></i></a>, and append it to s.

   <li>Append a comma and a space ", " to s.

   <li>Serialize the third argument to the function as a &lt;percentage>, and
    append it to s.

   <li>Append a close parenthesis ")" to s.
  </ol>
  <!-- ====================================================================== -->

  <h3 id=serializing-gradients><span class=secno>8.6. </span> Serializing
   Gradients</h3>

  <p>To serialize a <a
   href="#ltlinear-gradient"><i>&lt;linear-gradient></i></a>:

  <ol>
   <li>Append "linear-gradient(" to s.

   <li>
    <ul>
     <li>If the first argument to the gradient function was a single keyword,
      serialize the keyword and append it to s.

     <li>Otherwise, if the first argument to the gradient function was two
      keywords, serialize the vertical keyword (&lsquo;<code
      class=css>top</code>&rsquo; or &lsquo;<code
      class=css>bottom</code>&rsquo;) and append it to s, then append a space
      " " to s, then serialize the horizontal keyword (&lsquo;<code
      class=css>left</code>&rsquo; or &lsquo;<code
      class=css>right</code>&rsquo;) and append it to s.

     <li>Otherwise, if the first argument to the gradient function was an
      &lt;angle>, serialize the &lt;angle> and append it to s.

     <li>Otherwise, append "top" to s.
    </ul>

   <li>Append a comma and a space ", " to s.

   <li>For each color-stop in the gradient, serialize the color-stop, and
    append it to s. Then, if it is not the final color-stop, append a comma
    and a space ", " to s.

   <li>Append a close parenthesis ")" to s.
  </ol>

  <p>To serialize a <a
   href="#ltradial-gradient"><i>&lt;radial-gradient></i></a>:

  <ol>
   <li>Append "radial-gradient(" to s.

   <li>If a &lt;bg-position> was specified in the first argument to the
    gradient function, serialize it and append it to s. Otherwise, append
    "center" to s.

   <li>Append a comma and a space ", " to s.

   <li>
    <ul>
     <li>If a &lt;shape> and/or &lt;size> was specified in the second
      argument to the gradient function:
      <ol>
       <li>If a &lt;shape> was specified, serialize it as a keyword and
        append it to s. Otherwise, append "ellipse" to s.

       <li>Append a space " " to s.

       <li>If a &lt;size> was specified, serialize it as a keyword and append
        it to s. Otherwise, append "cover" to s.
      </ol>

     <li>Otherwise, if two &lt;length>s or &lt;percentage>s were specified in
      the second argument to the gradient function:
      <ol>
       <li>Serialize the first &lt;length> or &lt;percentage> and append it
        to s.

       <li>Append a space " " to s.

       <li>Serialize the second &lt;length> or &lt;percentage> and append it
        to s.
      </ol>

     <li>Otherwise, append "ellipse cover" to s.
    </ul>

   <li>Append a comma and a space ", " to s.

   <li>For each color-stop in the gradient, serialize the color-stop, and
    append it to s. Then, if it is not the final color-stop, append a comma
    and a space ", " to s.

   <li>Append a close parenthesis ")" to s.
  </ol>

  <p>To serialize a <a
   href="#ltrepeating-linear-gradient"><i>&lt;repeating-linear-gradient></i></a>:

  <ol>
   <li>Append "repeating-linear-gradient(" to s.

   <li>Follow the steps for serializing a <a
    href="#ltlinear-gradient"><i>&lt;linear-gradient></i></a>, except skip
    step 1.
  </ol>

  <p>To serialize a <a
   href="#ltrepeating-radial-gradient"><i>&lt;repeating-radial-gradient></i></a>:

  <ol>
   <li>Append "repeating-radial-gradient(" to s.

   <li>Follow the steps for serializing a <a
    href="#ltradial-gradient"><i>&lt;radial-gradient></i></a>, except skip
    step 1.
  </ol>

  <p>To serialize a <a href="#ltcolor-stop"><i>&lt;color-stop></i></a>:

  <ol>
   <li>Serialize the &lt;color>, and append it to s.

   <li>If a &lt;length> or &lt;percentage> was specified, append a space " "
    to s, then serialize the &lt;length> or &lt;percentage> and append it to
    s.
  </ol>
  <!-- ====================================================================== -->

  <h3 id=serializing-properties><span class=secno>8.7. </span> Serializing
   new properties</h3>

  <p>To serialize the &lsquo;<a href="#image-resolution0"><code
   class=property>image-resolution</code></a>&rsquo; property:

  <ol>
   <li>If the &lsquo;<code class=css>from-image</code>&rsquo; keyword is
    specified in the property value, append "from-image" to s.

   <li>If both the &lsquo;<code class=css>from-image</code>&rsquo; keyword
    and a &lt;resolution> are specified, append a space " " to s.

   <li>If a &lt;resolution> is specified, serialize it and append it to s.
  </ol>

  <p>To serialize the &lsquo;<a href="#image-orientation0"><code
   class=property>image-orientation</code></a>&rsquo; property:

  <ol>
   <li>Serialize the &lt;angle> and append it to s.
  </ol>

  <p>To serialize the &lsquo;<a href="#image-rendering0"><code
   class=property>image-rendering</code></a>&rsquo; property:

  <ol>
   <li>Serialize the keyword and append it to s.
  </ol>

  <p>To serialize the &lsquo;<a href="#object-fit0"><code
   class=property>object-fit</code></a>&rsquo; property:

  <ol>
   <li>Serialize the keyword and append it to s.
  </ol>

  <p>To serialize the &lsquo;<a href="#object-position0"><code
   class=property>object-position</code></a>&rsquo; property:

  <ol>
   <li>Serialize the value as a &lt;bg-position> and append it to s.
  </ol>
  <!-- ====================================================================== -->

  <h2 id=interpolation><span class=secno>9. </span> Interpolation</h2>

  <p>This section describes how to interpolate between new value types
   defined in this specification, for use with modules such as CSS
   Transitions and CSS Animations.

  <p>If an algorithm below simply states that two values should be
   "interpolated" or "transitioned" without further details, then the value
   should be interpolated as described by the Transitions spec. Otherwise,
   the algorithm may reference a variable "t" in its detailed description of
   the interpolation. This is a number which starts at 0% and goes to 100%,
   and is set to a value that represents the progress through the transition,
   based on the duration of the transition, the elapsed time, and the timing
   function in use. For example, with a linear timing function and a 1s
   duration, after .3s t is equal to 30%.</p>
  <!-- ====================================================================== -->

  <h3 id=interpolating-images><span class=secno>9.1. </span> Interpolating <a
   href="#ltimage"><i>&lt;image></i></a></h3>

  <p>All images can be interpolated, though some special types of images
   (like some gradients) have their own special interpolation rules. In
   general terms, images are interpolated by scaling them to the size of the
   start image and cross-fading the two while they transition to the size of
   the end image.

  <p>In specific terms, at each point in the interpolation the image is equal
   to <code>cross-fade(&lt;start image>, &lt;end image>, t)</code>.</p>
  <!-- ======================================================================= -->

  <h3 id=interpolating-image-combinations><span class=secno>9.2. </span>
   Interpolating <a
   href="#ltimage-combination"><i>&lt;image-combination></i></a></h3>

  <p>Combinations of the same images at different progress points can be
   smoothly animated by simply animating the progress. Theoretically, this
   produces the same visual effect as the generic &lt;image> interpolation
   would; in practice, implementations may have slight differences due to how
   they scale or rasterize images. Additionally, the generic &lt;image>
   interpolation produces nested cross-fade() functions, which is undesirable
   if it can be avoided.

  <p>If both the starting and ending images are &lt;image-combination>s with
   the same image arguments, they must be interpolated by interpolating their
   third argument, the percentage. Otherwise, they must be interpolated as
   generic &lt;image>s.</p>
  <!-- ======================================================================= -->

  <h3 id=interpolating-gradients><span class=secno>9.3. </span> Interpolating
   <a href="#ltgradient"><i>&lt;gradient></i></a></h3>

  <p>Gradient images can be interpolated directly in CSS transitions and
   animations, smoothly animating from one gradient to another. There are
   only a few restrictions on what gradients are allowed to be interpolated:

  <ol>
   <li>Both the starting and ending gradient must be expressed with the same
    function. (For example, you can transition from a linear-gradient() to a
    linear-gradient(), but not from a linear-gradient() to a
    radial-gradient() or a repeating-linear-gradient().)

   <li>Both the starting and ending gradient must have the same number of
    color-stops. For this purpose, a repeating gradient is considered to have
    infinite color-stops, and thus all repeating gradients have the same
    number of color-stops. (Note that one may pad a gradient with additional
    color-stops placed atop each other, if necessary to make two gradients
    have the same number of color-stops.)
  </ol>

  <p>If the two gradients satisfy both of those constraints, they must be
   interpolated as described below. If not, they must be interpolated as a
   generic image.

  <ol>
   <li>Convert both the start and end gradients to their explicit forms:
    <dl>
     <dt>For linear gradients:

     <dd>
      <ul>
       <li>If the direction is specified as an &lt;angle>, it is already in
        its explicit form.

       <li>Otherwise, if the direction is specified as a single keyword,
        change &lsquo;<code class=property>bottom</code>&rsquo; to
        &lsquo;<code class=css>0deg</code>&rsquo;, &lsquo;<code
        class=property>left</code>&rsquo; to &lsquo;<code
        class=css>90deg</code>&rsquo;, &lsquo;<code
        class=property>top</code>&rsquo; to &lsquo;<code
        class=css>180deg</code>&rsquo;, or &lsquo;<code
        class=property>right</code>&rsquo; to &lsquo;<code
        class=css>270deg</code>&rsquo;.

       <li>Otherwise, if the direction is specified as two keywords, change
        the direction to an &lt;angle> in the following ranges that would
        produce an equivalent gradient: for &lsquo;<code class=css>bottom
        left</code>&rsquo; or &lsquo;<code class=css>left
        bottom</code>&rsquo;, the angle must be between 0deg and 90deg; for
        &lsquo;<code class=css>top left</code>&rsquo; or &lsquo;<code
        class=css>left top</code>&rsquo;, the angle must be between 90deg and
        180deg; for &lsquo;<code class=css>top right</code>&rsquo; or
        &lsquo;<code class=css>right top</code>&rsquo;, the angle must be
        between 180deg and 270deg; for &lsquo;<code class=css>bottom
        right</code>&rsquo; or &lsquo;<code class=css>right
        bottom</code>&rsquo;, the angle must be between 270deg and 360deg.

       <li>If both the start and end gradients had their direction specified
        with keywords, and the absolute difference between the angles their
        directions mapped to is greater than 180deg, add 360deg to the
        direction of the gradient with the smaller angle. <span
        class=note>This ensures that a transition from, for example, "right"
        (270deg) to "bottom" (0deg) rotates the gradient a quarter-turn
        clockwise, as expected, rather than rotating three-quarters of a turn
        counter-clockwise.</span>
      </ul>

     <dt>For radial gradients:

     <dd>
      <ul>
       <li>If the size is specified as two &lt;length>s or &lt;percentage>s,
        it is already in its explicit form.

       <li>Otherwise, the size must be changed to a pair of &lt;length>s that
        would produce an equivalent ending-shape.
      </ul>
    </dl>

   <li>Interpolate each component and color-stop of the gradients
    independently. For linear gradients, the only component is the angle. For
    radial gradients, the components are the horizontal and vertical position
    of the center and the horizontal and vertical axis lengths.

   <li>To interpolate a color-stop, first match each color-stop in the start
    gradient to the corresponding color-stop at the same index in the end
    gradient. For repeating gradients, the first specified color-stop in the
    start and end gradients are considered to be at the same index, and all
    other color-stops following and preceding are indexed appropriately.
    Then, for each pair of color-stops, interpolate the position and color
    independently.
  </ol>
  <!-- ====================================================================== -->

  <h2 class=no-num id=changes>Changes Since the 17 February 2011 Working
   Draft</h2>

  <p>The following changes were made to this specification since the <a
   href="http://www.w3.org/TR/2011/WD-css3-images-20110217/">17 February 2011
   Working Draft</a>:

  <dl>
   <dt><a
    href="http://www.w3.org/TR/2011/WD-css3-images-20110217/#resolution-units">3.
    Resolution Units</a>

   <dd>
    <ul>
     <li>Defined the resolution unit more precisely. In particular, clarified
      what it means for a vector image.
    </ul>

   <dt><a
    href="http://www.w3.org/TR/2011/WD-css3-images-20110217/#image-notation">4.2.
    Image Fallbacks: the &lsquo;<code class=css>image()</code>&rsquo;
    notation</a>

   <dd>
    <ul>
     <li>Simplified the ultimate fallback back to just &lt;color>, as that
      was the ultimate point - when you absolutely can't display an image,
      you may still need to display a color for constrast purposes.

     <li>Dropped the &lt;url-token> production for the non-ultimate
      arguments. This was fundamentally ambiguous with the keywords, and is
      unnecessary complexity.

     <li>Added the ability to declare the directionality of an image, so it's
      automatically inline-direction flipped when placed in an
      opposite-directional context.

     <li>Added a requirement that impls must support the #xywh form of Media
      Queries as part of image() support.
    </ul>

   <dt><a
    href="http://www.w3.org/TR/2011/WD-css3-images-20110217/#cross-fade-function">4.4.
    Combining Images: The &lsquo;<code class=css>cross-fade()</code>&rsquo;
    notation</a>

   <dd>
    <ul>
     <li>Defined the algorithm formally in PD terms.

     <li>Changed the compositing operation from "over" to "plus".
    </ul>

   <dt><a
    href="http://www.w3.org/TR/2011/WD-css3-images-20110217/#linear-gradients">5.1.
    Linear Gradients</a>

   <dd>
    <ul>
     <li>Changed the meaning of angles in the first argument to being bearing
      angles.
    </ul>

   <dt><a
    href="http://www.w3.org/TR/2011/WD-css3-images-20110217/#repeating-gradients">5.3.
    Repeating Gradients</a>

   <dd>
    <ul>
     <li>Changed the results of a degenerate repeating gradient (where the
      first and last stop have the same position). Previously, it generated a
      solid-color image matching the last color-stop. Now, it moves the last
      color-stop to be 1px away from the first. This was done so that
      repeating gradients had continuous behavior.
    </ul>

   <dt><a
    href="http://www.w3.org/TR/2011/WD-css3-images-20110217/#object-fit">6.4.
    Sizing Objects: The &lsquo;<code class=property>object-fit</code>&rsquo;
    property</a>

   <dd>
    <ul>
     <li>Added &lsquo;<code class=property>none</code>&rsquo; and
      &lsquo;<code class=property>scale-down</code>&rsquo; values.

     <li>Specified that contents are always clipped, and &lsquo;<code
      class=property>overflow</code>&rsquo; on the element has no effect.
    </ul>

   <dt><a
    href="http://www.w3.org/TR/2011/WD-css3-images-20110217/#image-resolution">7.
    Overriding Image Resolutions: the &lsquo;<code
    class=property>image-resolution</code>&rsquo; property</a>

   <dd>
    <ul>
     <li>Specified that image-resolution works on *all* the images for the
      element it's specified on, both the content of replaced elements and
      the various &lt;image>-using properties.
    </ul>

   <dt><a
    href="http://www.w3.org/TR/2011/WD-css3-images-20110217/#image-rendering">9.
    Determining How to Scale an Image: The &lsquo;<code
    class=property>image-rendering</code>&rsquo; Property</a>

   <dd>
    <ul>
     <li>Changed the &lsquo;<code
      class=property>optimize-contrast</code>&rsquo; value to &lsquo;<a
      href="#crisp-edges"><code class=property>crisp-edges</code></a>&rsquo;,
      and rewrote the description slightly to reduce confusion in what it
      does.
    </ul>

   <dt><a
    href="http://www.w3.org/TR/2011/WD-css3-images-20110217/#interpolation">11.
    Interpolation</a>

   <dd>
    <ul>
     <li>Added special rules for interpolating cross-fade(), to avoid nested
      cross-fade()s when possible.
    </ul>

   <dt><a
    href="http://www.w3.org/TR/2011/WD-css3-images-20110217/#interpolating-gradients">11.2.
    Interpolating &lt;gradient></a>

   <dd>
    <ul>
     <li>Fixed a bug in interpolation so transitioning between linear
      gradients specified with keywords takes the shortest path.
    </ul>
  </dl>
  <!-- ====================================================================== -->

  <h2 class=no-num id=acknowledgments>Acknowledgments</h2>

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative-references>Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS&#160;2.1) Specification.</cite></a> 7 June
    2011. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/2011/REC-CSS2-20110607">http://www.w3.org/TR/2011/REC-CSS2-20110607</a>
    </dd>
   <!---->

   <dt id=CSS3VAL>[CSS3VAL]

   <dd>H&#229;kon Wium Lie; Chris Lilley. <a
    href="http://www.w3.org/TR/2006/WD-css3-values-20060919"><cite>CSS3
    Values and Units.</cite></a> 19 September 2006. W3C Working Draft. (Work
    in progress.) URL: <a
    href="http://www.w3.org/TR/2006/WD-css3-values-20060919">http://www.w3.org/TR/2006/WD-css3-values-20060919</a>
    </dd>
   <!---->

   <dt id=MEDIA-FRAGS>[MEDIA-FRAGS]

   <dd>Rapha&#235;l Troncy; et al. <a
    href="http://www.w3.org/TR/2011/WD-media-frags-20110317"><cite>Media
    Fragments URI 1.0.</cite></a> 17 March 2011. W3C Working Draft. (Work in
    progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-media-frags-20110317">http://www.w3.org/TR/2011/WD-media-frags-20110317</a>
    </dd>
   <!---->

   <dt id=RFC2119>[RFC2119]

   <dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key
    words for use in RFCs to Indicate Requirement Levels.</cite></a> Internet
    RFC 2119. URL: <a
    href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
    </dd>
   <!---->

   <dt id=SELECT>[SELECT]

   <dd>Tantek &#199;elik; et al. <a
    href="http://www.w3.org/TR/2009/PR-css3-selectors-20091215"><cite>Selectors
    Level 3.</cite></a> 15 December 2009. W3C Proposed Recommendation. (Work
    in progress.) URL: <a
    href="http://www.w3.org/TR/2009/PR-css3-selectors-20091215">http://www.w3.org/TR/2009/PR-css3-selectors-20091215</a>
    </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class=no-num id=informative-references>Informative references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS3BG>[CSS3BG]

   <dd>Bert Bos; Elika J. Etemad; Brad Kemper. <a
    href="http://www.w3.org/TR/2011/CR-css3-background-20110215"><cite>CSS
    Backgrounds and Borders Module Level 3.</cite></a> 15 February 2011. W3C
    Candidate Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/CR-css3-background-20110215">http://www.w3.org/TR/2011/CR-css3-background-20110215</a>
    </dd>
   <!---->

   <dt id=CSSOM>[CSSOM]

   <dd>Anne van Kesteren. <a
    href="http://www.w3.org/TR/2011/WD-cssom-20110712/"><cite>CSSOM.</cite></a>
    12 July 2011. W3C Working Draft. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2011/WD-cssom-20110712/">http://www.w3.org/TR/2011/WD-cssom-20110712/</a>
    </dd>
   <!---->

   <dt id=SMIL10>[SMIL10]

   <dd>Philipp Hoschka. <a
    href="http://www.w3.org/TR/1998/REC-smil-19980615"><cite>Synchronized
    Multimedia Integration Language (SMIL) 1.0 Specification.</cite></a> 15
    June 1998. W3C Recommendation. URL: <a
    href="http://www.w3.org/TR/1998/REC-smil-19980615">http://www.w3.org/TR/1998/REC-smil-19980615</a>
    </dd>
   <!---->
  </dl>
  <!--end-informative-->
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
