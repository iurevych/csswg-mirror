<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html lang=en>
 <head><meta content="text/html;charset=utf-8" http-equiv=Content-Type>

  <title>CSS3 Module: Fonts</title>
  <!--
      FIXME when publishing: copy the current default.css and link to
      "default.css" rather than "../default.css"
   -->
  <link href="../default.css" rel=stylesheet type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" rel=stylesheet
  type="text/css">

  <style type="text/css">
  
  body {
    padding: 2em 70px 2em 70px;
  }
  
  p + p, p.mtb {
    margin-top: 0.8em;
    text-indent: 0px;
  }
  
  #fontformats {
    margin-left: 2em;
    text-align: left;
  }
  
  #fontformats td {
    padding-right: 2em;
  }
  
  dd {
    margin-bottom: 1em;
  }
  
  pre {
  	font-size: 100%;
  }
  
  #authors dd {
    margin-bottom: 0;
  }
  
  #fontstylematchingalg {
    list-style-type: lower-alpha;
  }
  
  #fontmatchingalg ul, #fontmatchingalg ol {
    margin-top: 0.8em;
  }
  
  #fontmatchingalg li + li {
    margin-top: 0.8em;
  }
  
  div.example {
    padding: 1em;
    margin-top: 1em;
  }

  div.example + div.example {
    margin-top: 2em;
  }
  
  div.figure {
    page-break-inside: avoid;
  }
  
  </style>

 <body>
  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1>CSS Fonts Module Level 3</h1>

   <h2 class="no-num no-toc" id=editors>Editor's Draft 21 January 2009</h2>

   <dl id=authors>
    <dt>This version:

    <dd><a
     href="http://dev.w3.org/csswg/css3-fonts/">http://dev.w3.org/csswg/css3-fonts/</a>
     

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css3-fonts/">http://www.w3.org/TR/css3-fonts/</a>

    <dt>Latest editor's draft:

    <dd><a
     href="http://dev.w3.org/csswg/css3-fonts/">http://dev.w3.org/csswg/css3-fonts/</a>

    <dt>Previous version (CSS3 Fonts):

    <dd><a
     href="http://www.w3.org/TR/2002/WD-css3-fonts-20020802">http://www.w3.org/TR/2002/WD-css3-fonts-20020802</a>

    <dt>Previous version (CSS3 Web Fonts):

    <dd><a
     href="http://www.w3.org/TR/2002/WD-css3-webfonts-20020802">http://www.w3.org/TR/2002/WD-css3-webfonts-20020802</a>

    <dt>Editor:

    <dd><a href="mailto:jdaggett@mozilla.com">John Daggett (Mozilla)</a>
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> &copy; 2009 <a
    href="http://www.w3.org/"><acronym title="World Wide Web
    Consortium">W3C</acronym></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute
    of Technology">MIT</acronym></a>, <a
    href="http://www.ercim.org/"><acronym title="European Research Consortium
    for Informatics and Mathematics">ERCIM</acronym></a>, <a
    href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>
  <!--
Note: this draft is still undergoing some major editing, so portions of
it may appear quite incoherent or inconsistent at times.  Please wait a
month or so before sending out flames...
-->
  <!--
To do:
 - font matching examples
 - polish font matching algorithm, deal with bolder/lighter matching
 - clean up font-weight wording, better definition of bolder/lighter
 - same for wider/narrower
 - specifics of SVG font reference handling
 - finish examples for unicode-range
 - italic/oblique substitution issue
 - font-size
 - move font-variant into font rendering section
 - font shorthand
 - TrueType/OpenType nitty gritty
 - make intro more concise and relevant to rest of the spec, point out specific general problems
 - illustrations of localized bold, italic names?
-->

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p>This CSS3 module describes how font properties are specified and how
   font resources are loaded dynamically. The contents of this specification
   are a consolidation of content previously divided into CSS3 Fonts and CSS3
   Web Fonts modules.

  <h2 class="no-num no-toc" id=status>Status of this document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a href="mailto:www-style@w3.org">www-style@w3.org</a> (see
   <a href="http://www.w3.org/Mail/Request">instructions</a>) is preferred
   for discussion of this specification. When sending e-mail, please put the
   text &#8220;css3-fonts&#8221; in the subject, preferably like this:
   &#8220;[<!---->css3-fonts<!---->] <em>&hellip;summary of
   comment&hellip;</em>&#8221;

  <p>This document was produced by the <a href="/Style/CSS/members">CSS
   Working Group</a> (part of the <a href="/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->

  <h2 class="no-num no-toc" id=contents>Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#introduction"><span class=secno>1 </span>Introduction</a>

   <li><a href="#typography"><span class=secno>2 </span>Typography
    Background</a>

   <li><a href="#font-properties"><span class=secno>3 </span>Font
    properties</a>
    <ul class=toc>
     <li><a href="#font-family"><span class=secno>3.1 </span>Font family: the
      &lsquo;<code class=property>font-family</code>&rsquo; property</a>
      <ul class=toc>
       <li><a href="#generic"><span class=secno>3.1.1 </span>Generic font
        families</a>
      </ul>

     <li><a href="#font-weight"><span class=secno>3.2 </span>Font weight: the
      &lsquo;<code class=property>font-weight</code>&rsquo; property</a>

     <li><a href="#font-proportion"><span class=secno>3.3 </span>Font
      proportion: the &lsquo;<code class=property>font-stretch</code>&rsquo;
      property</a>

     <li><a href="#font-style"><span class=secno>3.4 </span>Font style: the
      &lsquo;<code class=property>font-style</code>&rsquo; property</a>

     <li><a href="#small"><span class=secno>3.5 </span>Small caps: the
      &lsquo;<code class=property>font-variant</code>&rsquo; property</a>

     <li><a href="#font-size"><span class=secno>3.6 </span>Font size: the
      &lsquo;<code class=property>font-size</code>&rsquo; property</a>

     <li><a href="#relative"><span class=secno>3.7 </span>Relative sizing:
      the &lsquo;<code class=property>font-size-adjust</code>&rsquo;
      property</a>

     <li><a href="#shorthand"><span class=secno>3.8 </span>Shorthand font
      property: the &lsquo;<code class=property>font</code>&rsquo;
      property</a>
    </ul>

   <li><a href="#font-resources"><span class=secno>4 </span>Font
    resources</a>
    <ul class=toc>
     <li><a href="#the-font-face"><span class=secno>4.1 </span>The @font-face
      rule</a>

     <li><a href="#font-family0"><span class=secno>4.2 </span>Font family:
      the &lsquo;<code class=property>font-family</code>&rsquo;
      descriptor</a>

     <li><a href="#font-reference"><span class=secno>4.3 </span>Font
      reference: the &lsquo;<code class=property>src</code>&rsquo;
      descriptor</a>

     <li><a href="#font-property"><span class=secno>4.4 </span>Font property
      descriptors: the &lsquo;<code class=property>font-style</code>&rsquo;,
      &lsquo;<code class=property>font-weight</code>&rsquo;, &lsquo;<code
      class=property>font-stretch</code>&rsquo; descriptors</a>

     <li><a href="#character"><span class=secno>4.5 </span>Character range:
      the &lsquo;<code class=property>unicode-range</code>&rsquo;
      descriptor</a>
    </ul>

   <li><a href="#font-matching"><span class=secno>5 </span>Font matching
    algorithm</a>
    <ul class=toc>
     <li><a href="#examples"><span class=secno>5.1 </span>Examples of font
      matching</a>
    </ul>

   <li><a href="#font-rendering"><span class=secno>6 </span>Font rendering
    properties</a>

   <li class=no-num><a href="#appendix">Appendix A: Mapping CSS properties to
    font features</a>

   <li class=no-num><a href="#appendix0">Appendix B: Font licensing
    issues</a>

   <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

   <li class=no-num><a href="#references">References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative">Normative</a>

     <li class=no-num><a href="#informative">Informative</a>
    </ul>

   <li class=no-num><a href="#index">Index</a>

   <li class=no-num><a href="#property-index">Property index</a>
  </ul>
  <!--end-toc-->

  <h2 id=introduction><span class=secno>1 </span>Introduction</h2>

  <p>Font properties in CSS determine which fonts are used when rendering
   text. Fonts represent collections of letterforms, or glyphs, that uniquely
   describe the visual appearance of the underlying characters. Fonts are
   often grouped into font families that share a common aesthetic. In CSS,
   font families are specified by name but a particular face within a family
   is selected based on the value of other font properties. To specify text
   in bold Helvetica, one could use:

  <pre>
p { font-family: Helvetica; font-weight: bold; }
</pre>

  <p>When an exact match doesn't exist for a particular combination of style
   attributes, CSS defines a specific way in which another face is chosen.
   Font properties are independent of each other, allowing text to be
   rendered similarly even in environments where the set of available fonts
   is different. In addition to the font properties defined in CSS2.1, CSS3
   defines the @font-face rule which specifies font resources that can be
   downloaded when needed, often referred to as "web fonts".

  <h2 id=typography><span class=secno>2 </span>Typography Background</h2>
  <!-- 
 - Wide variation in character forms, glyphs
 - Use of diacritics adds complications to even "simple" alphabets
 - Examples from Czech, Slovak, African romanizations
 - Vietnamese stacking example
 - General use of ligatures
 - Required for languages such as Arabic
 - Problems with creating "universal fonts"
-->

  <p><em>This section is included as background for some of the problems and
   situations that are described in other sections. It should be viewed as
   informative only.</em>

  <p> Typographic traditions vary across the globe so there is no unique way
   to classify all fonts across languages and cultures. For even common Latin
   letters, wide variations are possible:

  <div class=figure><img src=aaaaaa.png>
   <p class=caption>One character, many glyph variations
  </div>

  <p>Differences in the anatomy of letterforms is one way to distinguish
   fonts. For Latin fonts, flourishes at the ends of a character's main
   strokes, or serifs, can distinguish a font from those without. Similar
   comparisons exist in non-Latin fonts between fonts with tapered strokes
   and those using primarily uniform strokes:

  <div class=figure><img src=serifvssansserif.png>
   <p class=caption>Letterforms with and without serifs
  </div>

  <div class=figure><img src=minchovsgothic.png>
   <p class=caption>Similar groupings for Japanese typefaces
  </div>

  <p>Fonts contain letterforms and the data needed to map characters to these
   letterforms. Often this may be a simple one-to-one mapping but more
   complex mappings are also possible. The use of combining diacritic marks
   creates many variations for an underlying letterform:

  <div class=figure><img src=aaaaaa-diacritics.png>
   <p class=caption>Variations with diacritic marks
  </div>
  <!-- Include stacking diacritics?  Hmm, Vietnamese example? -->

  <p>A sequence of characters can be represented by a single glyph known as a
   ligature:

  <div class=figure><img src=final-ligature.png>
   <p class=caption>Ligature example
  </div>

  <p>Visual transformations based on textual context like this may be a
   stylistic option for European langauges but are required to correctly
   render languages like Arabic; the lam and alef characters below
   <em>must</em> be combined when they exist in sequence:

  <div class=figure><img src=lamaleflig.png>
   <p class=caption>Required Arabic ligature
  </div>

  <p>The relative complexity of these shaping transformations requires
   additional data within the font.

  <p>Sets of font faces with various stylistic variations are often grouped
   together into font families. In the simplest case a regular face is
   supplemented with bold and italic faces but much more extensive groupings
   are possible. Variations in the thickness of letterform strokes, or the
   weight, or the overall proportions of the letterform, or the width, are
   most common. In the example below, each letter uses a different font face
   within the Univers font family. The width used increases from top to
   bottom and the weight increases from left to right:

  <div class=figure><img src=weightwidthvariations.png>
   <p class=caption>Weight and width variations within a single font family
  </div>

  <p>Creating fonts that support multiple scripts is a difficult task;
   designers need to understand the cultural traditions surronding the use of
   type in different scripts and come up with letterforms that somehow share
   a common theme. Many languages often share a common script and each of
   these languages may have noticeable stylistic differences. The Arabic
   script is shared by Persian and Urdu and Cyrillic is used with many
   languages, not just Russian.

  <p>Fonts provide a character map that details the set of characters for
   they have glyphs. If a document contains characters not supported by a
   specified font, a user agent may revert to a system font fallback
   procedure to find glyphs to render these characters correctly. If no font
   can be found, some form of "missing glyph" character is rendered by the
   user agent. Often these are the result of authors failing to explicitly
   indicate the encoding used by a document.

  <h2 id=font-properties><span class=secno>3 </span>Font properties</h2>

  <p>The particular font face used to render a character is determined by the
   font family and other font properties that apply to a given element. This
   structure allows settings to be varied independent of each other.</p>
  <!-- prop: font-family -->

  <h3 id=font-family><span class=secno>3.1 </span>Font family: the
   &lsquo;<code class=property><a
   href="#font-family2">font-family</a></code>&rsquo; property</h3>

  <table class=propdef id=namefont-family>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-family1>font-family</dfn>

    <tr>
     <td>Value:

     <td>[[ &lt;family-name> | &lt;generic-family> ] [, &lt;family-name>|
      &lt;generic-family>]* ] | inherit

    <tr>
     <td>Initial:

     <td>depends on user agent

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>N/A

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>as specified
  </table>

  <p>This property specifies a prioritized list of font family names or
   generic family names. A user agent iterates through the list of family
   names until it matches an available font that contains a glyph for the
   character to be rendered. This allows for differences in available fonts
   across across platforms and for differences in the range of characters
   supported by individual fonts.

  <p>A font family name only specifies a name given to a set of font faces,
   it does not specify an individual face. Given the availability of the
   fonts below, Futura would match but Futura Medium would not:

  <div class=figure><img src=familyvsfacename.png>
   <p class=caption>Family and individual face names
  </div>

  <p>Some font formats support the use of multiple family names for different
   localizations. User agents should recognize any of these names independent
   of the underlying platform localization, system API used or document
   encoding:

  <div class=figure><img src=localizedfamilynames.png>
   <p class=caption>Localized family names
  </div>

  <p>Consider the example below:

  <div class=example>
   <pre>body { 
    font-family: Helvetica, Verdana, sans-serif; 
}</pre>
  </div>

  <p>If Helvetica is available it will be used when rendering. If neither
   Helvetica or Verdana is present, then the user agent defined sans serif
   font will be used.

  <p>There are two types of font family names:

  <dl>
   <dt>&lt;family-name&gt;

   <dd>The name of a font family of choice such as Helvetica or Verdana in
    the previous example. Font family names containing more than one word
    should be quoted. If quoting is omitted, whitespace characters before and
    after the font family name are ignored and any sequence of whitespace
    characters inside the font name is converted to a single space. Depending
    upon the font format used, font family names may be case-sensitive.

   <dt>&lt;generic-family&gt;

   <dd> The following generic family keywords are defined: &lsquo;<code
    class=property><a href="#serif">serif</a></code>&rsquo;, &lsquo;<code
    class=property><a href="#sans-serif">sans-serif</a></code>&rsquo;,
    &lsquo;<code class=property><a href="#cursive">cursive</a></code>&rsquo;,
    &lsquo;<code class=property><a href="#fantasy">fantasy</a></code>&rsquo;,
    and &lsquo;<code class=property><a
    href="#monospace">monospace</a></code>&rsquo;. These keywords can be used
    as a general fallback mechanism when an author's desired font choices are
    not available. As keywords, they should not be quoted. Authors are
    encouraged to append a generic font family as a last alternative for
    improved robustness.
  </dl>

  <h4 id=generic><span class=secno>3.1.1 </span>Generic font families</h4>

  <p>All five generic font families are defined to exist in all CSS
   implementations (they need not necessarily map to five distinct actual
   fonts). User agents should provide reasonable default choices for the
   generic font families, which express the characteristics of each family as
   well as possible within the limits allowed by the underlying technology.
   User agents are encouraged to allow users to select alternative choices
   for the generic fonts.

  <h5 class="no-num no-toc"> <span class=index-def id=serif0 title="serif,
   definition of"><a name=serif-def><dfn id=serif>serif</dfn></a></span></h5>

  <p>Glyphs of serif fonts, as the term is used in CSS, have finishing
   strokes, flared or tapering ends, or have actual serifed endings
   (including slab serifs). Serif fonts are typically proportionately-spaced.
   They often display a greater variation between thick and thin strokes than
   fonts from the &lsquo;<code class=property><a
   href="#sans-serif">sans-serif</a></code>&rsquo; generic font family. CSS
   uses the term &lsquo;<code class=property><a
   href="#serif">serif</a></code>&rsquo; to apply to a font for any script,
   although other names may be more familiar for particular scripts, such as
   Mincho (Japanese), Sung or Song (Chinese), Batang (Korean). Any font that
   is so described may be used to represent the generic &lsquo;<code
   class=property><a href="#serif">serif</a></code>&rsquo; family.

  <div class=figure><img src=serifexamples.png>
   <p class=caption>Sample serif fonts
  </div>

  <h5 class="no-num no-toc"> <span class=index-def id=sans-serif0
   title="sans-serif, definition of"> <a name=sans-serif-def><dfn
   id=sans-serif>sans-serif</dfn></a></span></h5>

  <p>Glyphs in sans-serif fonts, as the term is used in CSS, have stroke
   endings that are plain -- without any flaring, cross stroke, or other
   ornamentation. Sans-serif fonts are typically proportionately-spaced. They
   often have little variation between thick and thin strokes, compared to
   fonts from the &lsquo;<code class=property><a
   href="#serif">serif</a></code>&rsquo; family. CSS uses the term
   &lsquo;<code class=property><a
   href="#sans-serif">sans-serif</a></code>&rsquo; to apply to a font for any
   script, although other names may be more familiar for particular scripts,
   such as Gothic (Japanese), Kai (Chinese), or Gulim (Korean). Any font that
   is so described may be used to represent the generic &lsquo;<code
   class=property><a href="#sans-serif">sans-serif</a></code>&rsquo; family.

  <p class=issue>Kai for Chinese looks wrong, looks to be a serif-like face.

  <div class=figure><img src=sansserifexamples.png>
   <p class=caption>Sample sans-serif fonts
  </div>

  <h5 class="no-num no-toc"> <span class=index-def id=cursive0
   title="cursive, definition of"> <a name=cursive-def><dfn
   id=cursive>cursive</dfn></a></span></h5>

  <p>Glyphs in cursive fonts generally have either joining strokes or other
   cursive characteristics beyond those of italic typefaces. The glyphs are
   partially or completely connected, and the result looks more like
   handwritten pen or brush writing than printed letterwork. Some scripts,
   such as Arabic, are almost always cursive. CSS uses the term &lsquo;<code
   class=property><a href="#cursive">cursive</a></code>&rsquo; to apply to a
   font for any script, although other names such as Chancery, Brush, Swing
   and Script are also used in font names.

  <div class=figure><img src=cursiveexamples.png>
   <p class=caption>Sample cursive fonts
  </div>

  <h5 class="no-num no-toc"> <span class=index-def id=fantasy0
   title="fantasy, definition of"> <a name=fantasy-def><dfn
   id=fantasy>fantasy</dfn></a></span></h5>

  <p>Fantasy fonts are primarily decorative fonts that contain playful
   representations of characters. These do not include Pi or Picture fonts
   which do not represent actual characters.

  <div class=figure><img src=fantasyexamples.png>
   <p class=caption>Sample fantasy fonts
  </div>

  <h5 class="no-num no-toc"> <span class=index-def id=monospace0
   title="monospace, definition of"> <a name=monospace-def><dfn
   id=monospace>monospace</dfn></a></span></h5>

  <p>The sole criterion of a monospace font is that all glyphs have the same
   fixed width. This is often used to render samples of computer code.

  <div class=figure><img src=monospaceexamples.png>
   <p class=caption>Sample monospace fonts
  </div>
  <!-- prop: font-weight -->

  <h3 id=font-weight><span class=secno>3.2 </span>Font weight: the
   &lsquo;<code class=property><a
   href="#font-weight1">font-weight</a></code>&rsquo; property</h3>

  <table class=propdef id=namefont-weight>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-weight0>font-weight</dfn>

    <tr>
     <td>Value:

     <td>normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600
      | 700 | 800 | 900 | inherit

    <tr>
     <td>Initial:

     <td>normal

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>N/A

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>see description
  </table>

  <p>The <a class=noxref href="#font-weight"><span
   class=property>&lsquo;<code
   class=property>font-weight</code>&rsquo;</span></a> property specifies
   weight of glyphs in the font, their degree of blackness or stroke
   thickness.

  <p>Values have the following meanings:

  <dl>
   <dt>100 to 900

   <dd>These values form an ordered sequence, where each number indicates a
    weight that is at least as dark as its predecessor. These roughly
    correspond to the commonly used weight names below:
  </dl>

  <ul>
   <li>100 - Thin

   <li>200 - Extra Light (Ultra Light)

   <li>300 - Light

   <li>400 - Normal

   <li>500 - Medium

   <li>600 - Semi Bold (Demi Bold)

   <li>700 - Bold

   <li>800 - Extra Bold (Ultra Bold)

   <li>900 - Black (Heavy)
  </ul>

  <dl>
   <dt><strong>normal</strong>

   <dd>Same as &lsquo;<code class=css>400</code>&rsquo;.

   <dt><strong>bold</strong>

   <dd>Same as &lsquo;<code class=css>700</code>&rsquo;.

   <dt><strong>bolder</strong>

   <dd>Specifies the weight of the face bolder than the inherited value.

   <dt><strong>lighter</strong>

   <dd>Specifies the weight of the face lighter than the inherited value.
  </dl>

  <p>Font formats that use a scale other than a nine step scale should map
   their scale onto the CSS scale so that 400 roughly corresponds with a face
   that would be labeled as Regular, Book, Roman and 700 roughly matches a
   face that would be labeled as Bold. Or weights may be inferred from the
   style names, ones that correspond roughly with the scale above. The scale
   is relative, so a face with a larger weight should never appear lighter.
   If style names are used to infer weights, care should be taken to handle
   common variations in different locales:

  <p>Quite often there are only a few weights available for a particular font
   family. When a weight is specified for which no face exists, a face with a
   nearby weight is used. In general, bold weights map to faces with heavier
   weights and light weights map to faces with lighter weights (see the font
   matching section below for a precise definition). The examples here
   illustrate which face is used for different weights, grey indicates a face
   for that weight does not exist so a face with a nearby weight is used:

  <div class=figure><img src=optimaweights.png>
   <p class=caption>Weight mappings for a font family with 400, 700 and 900
    weight faces
  </div>

  <div class=figure><img src=hiraginoweights.png>
   <p class=caption>Weight mappings for a font family with 300 and 600 weight
    faces
  </div>

  <p>Description of how bolder and lighter work. They are relative to an
   inherited value and "accumulate". Child elements inherit the given weight
   plus the accumulated relative bolder/lighter values.

  <p>Although not well-loved by typographers, bold faces are often
   synthesized by user agents for faces that lack actual bold faces. The use
   of the lighter/bolder can lead to strange interactions with synthetic
   bolding.</p>
  <!-- prop: font-stretch -->

  <h3 id=font-proportion><span class=secno>3.3 </span>Font proportion: the
   &lsquo;<code class=property><a
   href="#font-stretch0">font-stretch</a></code>&rsquo; property</h3>

  <table class=propdef id=namefont-stretch>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-stretch>font-stretch</dfn>

    <tr>
     <td>Value:

     <td>normal | wider | narrower | ultra-condensed | extra-condensed |
      condensed | semi-condensed | semi-expanded | expanded | extra-expanded
      | ultra-expanded | inherit

    <tr>
     <td>Initial:

     <td>normal

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>N/A

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>as specified
  </table>

  <p>The <a class=noxref href="#font-stretch"><span
   class=property>&lsquo;<code
   class=property>font-stretch</code>&rsquo;</span></a> property selects a
   normal, condensed, or expanded face from a font family. Absolute keyword
   values have the following ordering, from narrowest to widest:

  <ul>
   <li>Ultra Condensed

   <li>Extra Condensed

   <li>Condensed

   <li>Semi Condensed

   <li>Normal

   <li>Semi Expanded

   <li>Expanded

   <li>Extra Expanded

   <li>Ultra Expanded
  </ul>

  <p>The relative keyword &lsquo;<code class=property>wider</code>&rsquo;
   sets the value to the next expanded value above the inherited value (while
   not increasing it above &lsquo;<code
   class=property>ultra-expanded</code>&rsquo;); the relative keyword
   &lsquo;<code class=property>narrower</code>&rsquo; sets the value to the
   next condensed value below the inherited value (while not decreasing it
   below &lsquo;<code class=property>ultra-condensed</code>&rsquo;).

  <p class=issue>Do we really need all these keywords?!? Would
   ultra-expanded, expanded, normal, condensed, ultra-condensed suffice?

  <p class=issue>What about synthesized condensed/expanded? What are the
   "filling in the holes" rules, non-normal values map away from normal?</p>
  <!-- prop: font-style -->

  <h3 id=font-style><span class=secno>3.4 </span>Font style: the &lsquo;<code
   class=property><a href="#font-style1">font-style</a></code>&rsquo;
   property</h3>

  <table class=propdef id=namefont-style>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-style0>font-style</dfn>

    <tr>
     <td>Value:

     <td>normal | italic | oblique | inherit

    <tr>
     <td>Initial:

     <td>normal

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>N/A

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>as specified
  </table>

  <p>The <a class=noxref href="#font-style"><span class=property>&lsquo;<code
   class=property>font-style</code>&rsquo;</span></a> property allows italic
   or oblique faces to be selected. Italic forms are generally cursive in
   nature while oblique faces are typically sloped versions of the regular
   face. Oblique faces can be simulated by artificially sloping the glyphs of
   the regular face. Compare the artificially sloped renderings of Palatino
   &lsquo;<code class=property>a</code>&rsquo; and Baskerville &lsquo;<code
   class=property>N</code>&rsquo; in grey with the actual italic versions:

  <div class=figure><img src=realvsfakeitalics.png>
   <p class=caption>Artificial sloping versus real italics
  </div>

  <p>A value of &lsquo;<code class=property>normal</code>&rsquo; selects a
   face that is classified as &lsquo;<code
   class=property>normal</code>&rsquo;, while &lsquo;<code
   class=property>oblique</code>&rsquo; selects a font that is labeled
   &lsquo;<code class=property>oblique</code>&rsquo;. A value of &lsquo;<code
   class=property>italic</code>&rsquo; selects a font that is labeled
   &lsquo;<code class=property>italic</code>&rsquo;, or, if that is not
   available, one labeled &lsquo;<code class=property>oblique</code>&rsquo;.
   If no italic or oblique faces is available, an oblique face can by
   synthesized by rendering the normal face with a sloping transformation
   applied.

  <div class=figure>
   <p class=caption>Common localizations of italic and oblique names
  </div>

  <p>Many scripts lack the tradition of mixing a cursive form within text
   rendered with a normal face. Chinese, Japanese and Korean fonts almost
   always lack italic or oblique faces. Fonts that support a mixture of
   scripts will sometimes omit specific scripts such as Arabic from the set
   of glyphs supported in the italic face. User agents should be careful
   about making character map assumptions across faces.

  <p class=issue>What is the existing behavior for oblique? Is it actually
   <em>ever</em> relevant, i.e. is there a font that defines both italic and
   oblique faces? Or is it effectively an alias for italic?</p>
  <!-- prop: font-variant -->

  <h3 id=small><span class=secno>3.5 </span>Small caps: the &lsquo;<code
   class=property><a href="#font-variant">font-variant</a></code>&rsquo;
   property</h3>

  <table class=propdef id=namefont-variant>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-variant>font-variant</dfn>

    <tr>
     <td>Value:

     <td>normal | small-caps | inherit

    <tr>
     <td>Initial:

     <td>normal

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>N/A

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>as specified
  </table>

  <ul>
   <li>small-caps

   <li>used to select alternate glyphs if available in font

   <li>can be simulated using sized versions of uppercase glyphs
  </ul>

  <p>In a small-caps font, the glyphs for lowercase letters look similar to
   the uppercase ones, but in a smaller size and with slightly different
   proportions. The <a class=noxref href="#font-variant"><span
   class=property>&lsquo;<code
   class=property>font-variant</code>&rsquo;</span></a> property requests
   such a font for <a name=x13><span class=index-def id=bicameral
   title="bicameral::definition of">bicameral</span></a> (having two cases,
   as with Latin script). This property has no visible effect for scripts
   that are <a name=x14><span class=index-def id=unicameral0
   title="unicameral::definition of"><dfn
   id=unicameral>unicameral</dfn></span></a> (having only one case, as with
   most of the world's writing systems). Values have the following meanings:

  <dl>
   <dt><strong>normal</strong>

   <dd>Specifies a face that is not labeled as a small-caps font.

   <dt><strong>small-caps</strong>

   <dd>Specifies a font that is labeled as a small-caps font. If a genuine
    small-caps font is not available, user agents should simulate a
    small-caps font, for example by taking a normal font and replacing the
    lowercase letters by scaled uppercase characters. As a last resort,
    unscaled uppercase letter glyphs in a normal font may replace glyphs in a
    small-caps font so that the text appears in all uppercase letters.
  </dl>

  <div class=example>
   <p style=display:none>Example(s):</p>

   <p> The following example results in an <samp>h3</samp> element in
    small-caps, with emphasized words <samp>em</samp> in oblique small-caps:</p>

   <pre>h3 { font-variant: small-caps }
em { font-style: oblique }
</pre>
  </div>

  <p>Insofar as this property causes text to be transformed to uppercase, the
   same considerations as for <span class=property>&lsquo;<code
   class=property>text-transform</code>&rsquo;</span> apply.</p>
  <!-- prop: font-size -->

  <h3 id=font-size><span class=secno>3.6 </span>Font size: the &lsquo;<code
   class=property><a href="#font-size0">font-size</a></code>&rsquo; property</h3>

  <table class=propdef id=namefont-size>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-size0>font-size</dfn>

    <tr>
     <td>Value:

     <td>&lt;absolute-size> | &lt;relative-size> | &lt;length> |
      &lt;percentage> | inherit

    <tr>
     <td>Initial:

     <td>medium

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>refer to parent element's font size

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>absolute length
  </table>

  <ul>
   <li>scale applied to outline fonts

   <li>used to select specific face for bitmap fonts
  </ul>

  <p>This property indicates the desired height of glyphs from the font. For
   scalable fonts, the font-size is a scale factor applied to the EM unit of
   the font. (Note that certain glyphs may bleed outside their EM box.) For
   non-scalable fonts, the font-size is converted into absolute units and
   matched against the declared font-size of the font, using the same
   absolute coordinate space for both of the matched values. Values have the
   following meanings:

  <dl>
   <dt><a name=x18><span class=index-def id=ltabsolute-sizegt
    title="&lt;absolute-size&gt;::definition of">
    <strong>&lt;absolute-size&gt;</strong></span></a>

   <dd> An <a class=value-def
    name=value-def-absolute-size>&lt;absolute-size&gt;</a> keyword refers to
    an entry in a table of font sizes computed and kept by the user agent.
    Possible values are:
    <p> [ xx-small | x-small | small | medium | large | x-large | xx-large ]</p>

   <dt><a name=x19><span class=index-def id=ltrelative-sizegt
    title="&lt;relative-size&gt;::definition
    of"><strong>&lt;relative-size&gt;</strong></span></a>

   <dd> A <a class=value-def
    name=value-def-relative-size>&lt;relative-size&gt;</a> keyword is
    interpreted relative to the table of font sizes and the font size of the
    parent element. Possible values are:
    <p> [ larger | smaller ]

    <p> For example, if the parent element has a font size of &lsquo;<code
     class=property>medium</code>&rsquo;, a value of &lsquo;<code
     class=property>larger</code>&rsquo; will make the font size of the
     current element be &lsquo;<code class=property>large</code>&rsquo;. If
     the parent element's size is not close to a table entry, the user agent
     is free to interpolate between table entries or round off to the closest
     one. The user agent may have to extrapolate table values if the
     numerical value goes beyond the keywords.

   <dt><span class=index-inst id=ltlengthgt
    title="&lt;length&gt;">&lt;length&gt;</span>

   <dd>A length value specifies an absolute font size (that is independent of
    the user agent's font table). Negative lengths are illegal.

   <dt><span class=index-inst id=ltpercentagegt
    title="&lt;percentage&gt;">&lt;percentage&gt; </span>

   <dd>A percentage value specifies an absolute font size relative to the
    parent element's font size. Use of percentage values, or values in
    &lsquo;<code class=property>em</code>&rsquo;s, leads to more robust and
    cascadable style sheets.
  </dl>

  <p>The following table provides user agent's guideline for the
   absolute-size scaling factor and their mapping to XHTML heading and
   absolute font-sizes. The &lsquo;<code class=property>medium</code>&rsquo;
   value is used as the reference middle value. The user agent may fine tune
   these values for different fonts or different types of display devices.

  <table border=1 id=AutoNumber2 style="border-collapse: collapse"
   width="73%">
   <tbody>
    <tr>
     <th width="16%">CSS absolute-size values

     <td align=center width="12%">xx-small

     <td align=center width="9%">x-small

     <td align=center width="10%">small

     <td align=center width="11%">medium

     <td align=center width="11%">large

     <td align=center width="12%">x-large

     <td align=center width="11%">xx-large

     <td align=center width="8%">&nbsp;

    <tr>
     <th width="16%">scaling factor

     <td align=center width="12%">3/5

     <td align=center width="9%">3/4

     <td align=center width="10%">8/9

     <td align=center width="11%">1

     <td align=center width="11%">6/5

     <td align=center width="12%">3/2

     <td align=center width="11%">2/1

     <td align=center width="8%">3/1

    <tr>
     <th width="16%">XHTML headings

     <td align=center width="12%">h6

     <td align=center width="9%">&nbsp;

     <td align=center width="10%">h5

     <td align=center width="11%">h4

     <td align=center width="11%">h3

     <td align=center width="12%">h2

     <td align=center width="11%">h1

     <td align=center width="8%">&nbsp;

    <tr>
     <th width="16%">XHTML font sizes

     <td align=center width="12%">1

     <td align=center width="9%">&nbsp;

     <td align=center width="10%">2

     <td align=center width="11%">3

     <td align=center width="11%">4

     <td align=center width="12%">5

     <td align=center width="11%">6

     <td align=center width="8%">7
  </table>

  <p class=note><em><strong>Note 1.</strong> To preserve readability, an UA
   applying these guidelines should nevertheless avoid creating font-size
   resulting in less than 9 pixels per EM unit on a computer display .</em>

  <p class=note><em><strong>Note 2.</strong> In CSS1, the suggested scaling
   factor between adjacent indexes was 1.5 which user experience proved to be
   too large. In CSS2, the suggested scaling factor for computer screen
   between adjacent indexes was 1.2 which still created issues for the small
   sizes. The new scaling factor varies between each index to provide a
   better readability.</em>

  <p>The actual value [link to Cascading module] of this property may differ
   from the computed value due a numerical value on &lsquo;<code
   class=property><a
   href="#font-size-adjust">font-size-adjust</a></code>&rsquo; and the
   unavailability of certain font sizes.

  <p>Child elements inherit the computed <a class=noxref
   href="#font-size"><span class=property>&lsquo;<code
   class=property>font-size</code>&rsquo;</span></a> value (otherwise, the
   effect of <a class=noxref href="#font-size-adjust"><span
   class=property>&lsquo;<code
   class=property>font-size-adjust</code>&rsquo;</span></a> would compound).

  <div class=example>
   <p style=display:none>Example(s):

   <p>

   <pre>p { font-size: 12pt; }
blockquote { font-size: larger }
em { font-size: 150% }
em { font-size: 1.5em }
</pre>
  </div>
  <!-- prop: font-size-adjust -->

  <h3 id=relative><span class=secno>3.7 </span>Relative sizing: the
   &lsquo;<code class=property><a
   href="#font-size-adjust">font-size-adjust</a></code>&rsquo; property</h3>

  <table class=propdef id=namefont-size-adjust>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-size-adjust>font-size-adjust</dfn>

    <tr>
     <td>Value:

     <td>&lt;number> | none | inherit

    <tr>
     <td>Initial:

     <td>none

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>N/A

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>as specified
  </table>

  <p>For any given font size, the apparent size and legibility of text varies
   across fonts. For scripts such as Latin or Cyrillic that distinguish
   between upper and lowercase letters, the relative height of lowercase
   letters compared to their uppercase counterparts is a determining factor
   of legibility. This is commonly referred to as the <a class=index-def
   href="#aspect" id=aspect0 title="aspect value"><dfn id=aspect>aspect
   value</dfn></a>. Precisely defined, it is equal to the x-height of a font
   divided by the font size.

  <p>In situations where font fallback occurs, fallback fonts may not share
   the same aspect ratio as the desired font family and will thus appear less
   readable. The font-size-adjust property is a way to preserve the
   readability of text when font fallback occurs. It does this by adjusting
   the font-size so that the x-height is the same irregardless of the font
   used.

  <div class=example>
   <p>The style defined below defines Verdana as the desired font family, but
    if Verdana is not available Futura or Times will be used.</p>

   <pre>p { 
    font-family: Verdana, Futura, Times; 
}

&lt;p>Lorem ipsum dolor sit amet, ...&lt;/p>
</pre>

   <p>Verdana has a relatively high aspect ratio, lowercase letters are
    relatively tall compared to uppercase letters, so at small sizes text
    appears legible. Times has a lower aspect ratio and so if fallback
    occurs, the text will be less legible at small sizes than Verdana.</p>
  </div>

  <p>How text rendered in each of these fonts compares is shown below, the
   columns show text rendered in Verdana, Futura and Times. The same
   font-size value is used across cells within each row and red lines are
   included to show the differences in x-height. In the upper half each row
   is rendered in the same font-size value. The same is true for the lower
   half but in this half the font-size-adjust property is also set so that
   the actual font size is adjusted to perserve the x-height across each row.
   Note how small text remains relatively legible across each row in the
   lower half.

  <div class=figure><img src=fontsizeadjust.png>
   <p class=caption>Text with and without the use of font-size-adjust
  </div>

  <p>This property allows authors to specify an aspect value for an element
   that will effectively preserve the x-height of the first choice font,
   whether it is substituted or not. Values have the following meanings:

  <dl>
   <dt><strong>none</strong>

   <dd>Do not preserve the font's x-height.

   <dt><span class=index-inst id=ltnumbergt
    title="&lt;number&gt;">&lt;number&gt;</span>

   <dd>Specifies the aspect value used in the calculation below to calculate
    the adjusted font size:
    <pre>c  =  ( a / a' ) s 
</pre>

    <p>where:</p>

    <pre>s  =  font-size value
a  =  aspect value as specified by the font-size-adjust property
a' =  aspect value of actual font
c  =  adjusted font-size to use
</pre>

    <p>This value applies to any font that is selected but in typical usage
     it should be based on the aspect value of the first font in the
     font-family list. If this is specified accurately, the <tt>(a/a')</tt>
     term in the formula above is effectively 1 for the first font and no
     adjustment occurs. If the value is specified inaccurately, text rendered
     using the first font in the family list will display differently in
     older user agents that don't support font-size-adjust.</p>
  </dl>

  <p>Authors can calculate the aspect value for a given font by comparing
   spans with the same content but different font-size-adjust properties. If
   the same font-size is used, the spans will match when the font-size-adjust
   value is accurate for the given font.

  <div class=example>
   <p>Two spans with borders are used to determine the aspect value of a
    font. The font-size is the same for both spans but the font-size-adjust
    property is specified only for the right span. Starting with a value of
    0.5, the aspect value can be adjusted until the borders around the two
    letters line up.</p>

   <pre>p {
    font-family: Futura;
    font-size: 500px;
}

span {
    border: solid 1px red;
}

.adjust {
    font-size-adjust: 0.5;
}

&lt;p>&lt;span>b&lt;/span>&lt;span class="adjust">b&lt;/span>&lt;/p>
</pre>

   <div class=figure><img src=beforefontsizeadjust.png>
    <p class=caption>Futura with an aspect value of 0.5
   </div>

   <p>The box on the right is a bit bigger than the one on the left, so the
    aspect value of this font is something less than 0.5. Adjust the value
    until the boxes align.</p>
  </div>

  <p class=issue>Hmm, so what should happen for scripts with no
   upper/lowercase distinction (e.g. CJK, Arabic, Hebrew)?</p>
  <!-- prop: font -->

  <h3 id=shorthand><span class=secno>3.8 </span>Shorthand font property: the
   &lsquo;<code class=property><a href="#font">font</a></code>&rsquo;
   property</h3>

  <table class=propdef id=namefont>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font>font</dfn>

    <tr>
     <td>Value:

     <td>[ [ &lt;&lsquo;<code class=property><a
      href="#font-style1">font-style</a></code>&rsquo;> || &lt;&lsquo;<code
      class=property><a href="#font-variant">font-variant</a></code>&rsquo;>
      || &lt;&lsquo;<code class=property><a
      href="#font-weight1">font-weight</a></code>&rsquo;> ]? &lt;&lsquo;<code
      class=property><a href="#font-size0">font-size</a></code>&rsquo;> [ /
      &lt;&lsquo;<code class=property>line-height</code>&rsquo;> ]?
      &lt;&lsquo;<code class=property><a
      href="#font-family2">font-family</a></code>&rsquo;> ] | caption | icon
      | menu | message-box | small-caption | status-bar | inherit

    <tr>
     <td>Initial:

     <td>see individual properties

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>see individual properties

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>see individual properties
  </table>

  <ul>
   <li>shorthand for all font properties

   <li>ui font names
  </ul>

  <p> The <a class=noxref href="#font"><span class=property>&lsquo;<code
   class=property>font</code>&rsquo;</span></a> property is, except as
   described <a href="#almost">below</a>, a shorthand property for setting <a
   class=noxref href="#font-style"><span class=property>&lsquo;<code
   class=property>font-style</code>&rsquo;</span></a>, <a class=noxref
   href="#font-variant"><span class=property>&lsquo;<code
   class=property>font-variant</code>&rsquo;</span></a>, <a class=noxref
   href="#font-weight"><span class=property>&lsquo;<code
   class=property>font-weight</code>&rsquo;</span></a>, <a class=noxref
   href="#font-size"><span class=property>&lsquo;<code
   class=property>font-size</code>&rsquo;</span></a>, &lsquo;<code
   class=property>line-height</code>&rsquo;, and <a class=noxref
   href="#font-family"><span class=property>&lsquo;<code
   class=property>font-family</code>&rsquo;</span></a>, at the same place in
   the style sheet. The syntax of this property is based on a traditional
   typographical shorthand notation to set multiple properties related to
   fonts.

  <p>All font-related properties are first reset to their initial values,
   including those listed in the preceding paragraph plus <a class=noxref
   href="#font-stretch"><span class=property>&lsquo;<code
   class=property>font-stretch</code>&rsquo;</span></a> and <a class=noxref
   href="#font-size-adjust"><span class=property>&lsquo;<code
   class=property>font-size-adjust</code>&rsquo;</span></a>. Then, those
   properties that are given explicit values in the <a class=noxref
   href="#font"><span class=property>&lsquo;<code
   class=property>font</code>&rsquo;</span></a> shorthand are set to those
   values. For a definition of allowed and initial values, see the previously
   defined properties. For reasons of backwards compatibility, it is not
   possible to set <a class=noxref href="#font-stretch"><span
   class=property>&lsquo;<code
   class=property>font-stretch</code>&rsquo;</span></a> and <a class=noxref
   href="#font-size-adjust"><span class=property>&lsquo;<code
   class=property>font-size-adjust</code>&rsquo;</span></a> to other than
   their initial values using the <a class=noxref href="#font"><span
   class=property>&lsquo;<code class=property>font</code>&rsquo;</span></a>
   shorthand property; instead, set the individual properties.

  <div class=example>
   <p style=display:none>Example(s):

   <p>

   <pre>p { font: 12pt/14pt sans-serif }
p { font: 80% sans-serif }
p { font: x-large/110% &quot;new century schoolbook&quot;, serif }
p { font: bold italic large Palatino, serif }
p { font: normal small-caps 120%/120% fantasy }
p { font: oblique 12pt &quot;Helvetica Nue&quot;, serif; font-stretch: condensed }
</pre>

   <p> In the second rule, the font size percentage value (&lsquo;<code
    class=css>80%</code>&rsquo;) refers to the font size of the parent
    element. In the third rule, the line height percentage (&lsquo;<code
    class=css>110%</code>&rsquo;) refers to the font size of the element
    itself.

   <p>The first three rules do not specify the <a class=noxref
    href="#font-variant"><span class=property>&lsquo;<code
    class=property>font-variant</code>&rsquo;</span></a> and <a class=noxref
    href="#font-weight"><span class=property>&lsquo;<code
    class=property>font-weight</code>&rsquo;</span></a> explicitly, so these
    properties receive their initial values so this property receives its
    initial value (&lsquo;<code class=property>normal</code>&rsquo;). Notice
    that the font family name "new century schoolbook", which contains
    spaces, is enclosed in quotes. The fourth rule sets the <a class=noxref
    href="#font-weight"><span class=property>&lsquo;<code
    class=property>font-weight</code>&rsquo;</span></a> to &lsquo;<code
    class=property>bold</code>&rsquo;, the <a class=noxref
    href="#font-style"><span class=property>&lsquo;<code
    class=property>font-style</code>&rsquo;</span></a> to &lsquo;<code
    class=property>italic</code>&rsquo;, and implicitly sets <a class=noxref
    href="#font-variant"><span class=property>&lsquo;<code
    class=property>font-variant</code>&rsquo;</span></a> to &lsquo;<code
    class=property>normal</code>&rsquo;.

   <p> The fifth rule sets the <a class=noxref href="#font-variant"><span
    class=property>&lsquo;<code
    class=property>font-variant</code>&rsquo;</span></a> (&lsquo;<code
    class=property>small-caps</code>&rsquo;), the <a class=noxref
    href="#font-size"><span class=property>&lsquo;<code
    class=property>font-size</code>&rsquo;</span></a> (120% of the parent's
    font size), the <span class=property>&lsquo;<code
    class=property>line-height</code>&rsquo;</span> (120% of the font size)
    and the <a class=noxref href="#font-family"><span
    class=property>&lsquo;<code
    class=property>font-family</code>&rsquo;</span></a> (&lsquo;<code
    class=property><a href="#fantasy">fantasy</a></code>&rsquo;). It follows
    that the keyword &lsquo;<code class=property>normal</code>&rsquo; applies
    to the two remaining properties: <a class=noxref href="#font-style"><span
    class=property>&lsquo;<code
    class=property>font-style</code>&rsquo;</span></a> and <a class=noxref
    href="#font-weight"><span class=property>&lsquo;<code
    class=property>font-weight</code>&rsquo;</span></a>.

   <p>The sixth fifth rule sets the <a class=noxref href="#font-style"><span
    class=property>&lsquo;<code
    class=property>font-style</code>&rsquo;</span></a>, <a class=noxref
    href="#font-size"><span class=property>&lsquo;<code
    class=property>font-size</code>&rsquo;</span></a>, and <a class=noxref
    href="#font-family"><span class=property>&lsquo;<code
    class=property>font-family</code>&rsquo;</span></a>, the other font
    properties being set to their initial values. It then sets <a
    class=noxref href="#font-stretch"><span class=property>&lsquo;<code
    class=property>font-stretch</code>&rsquo;</span></a> to &lsquo;<code
    class=property>condensed</code>&rsquo; since that property cannot be set
    to that value using the <a class=noxref href="#font"><span
    class=property>&lsquo;<code class=property>font</code>&rsquo;</span></a>
    shorthand property.
  </div>

  <p>The following values refer to <a name=x27><span class=index-def
   id=system title="system fonts">system fonts</span></a>:

  <dl>
   <dt><strong>caption</strong>

   <dd>The font used for captioned controls (e.g., buttons, drop-downs,
    etc.).

   <dt><strong>icon</strong>

   <dd>The font used to label icons.

   <dt><strong>menu</strong>

   <dd>The font used in menus (e.g., dropdown menus and menu lists).

   <dt><strong>message-box</strong>

   <dd>The font used in dialog boxes.

   <dt><strong>small-caption</strong>

   <dd>The font used for labeling small controls.

   <dt><strong>status-bar</strong>

   <dd>The font used in window status bars.
  </dl>

  <p>System fonts may only be set as a whole; that is, the font family, size,
   weight, style, etc. are all set at the same time.These values may then be
   altered individually if desired. If no font with the indicated
   characteristics exists on a given platform, the user agent should either
   intelligently substitute (e.g., a smaller version of the &lsquo;<code
   class=property>caption</code>&rsquo; font might be used for the
   &lsquo;<code class=property>smallcaption</code>&rsquo; font), or
   substitute a user agent default font. As for regular fonts, if, for a
   system font, any of the individual properties are not part of the
   operating system's available user preferences, those properties should be
   set to their initial values.

  <p><a name=almost>That is why</a> this property is "almost" a shorthand
   property: system fonts can only be specified with this property, not with
   <a class=noxref href="#font-family"><span class=property>&lsquo;<code
   class=property>font-family</code>&rsquo;</span></a> itself, so <a
   class=noxref href="#font"><span class=property>&lsquo;<code
   class=property>font</code>&rsquo;</span></a> allows authors to do more
   than the sum of its subproperties. However, the individual properties such
   as <a class=noxref href="#font-weight"><span class=property>&lsquo;<code
   class=property>font-weight</code>&rsquo;</span></a> are still given values
   taken from the system font, which can be independently varied.

  <div class=example>
   <p style=display:none>Example(s):

   <p>

   <pre>button { font: 300 italic 1.3em/1.7em &quot;FB Armada&quot;, sans-serif }
button p { font: menu }
button p em { font-weight: bolder }
</pre>

   <p>If the font used for dropdown menus on a particular system happened to
    be, for example, 9-point Charcoal, with a weight of 600, then P elements
    that were descendants of BUTTON would be displayed as if this rule were
    in effect:

   <pre>button p { font: 600 9pt Charcoal }
</pre>

   <p>Because the <a class=noxref href="#font"><span
    class=property>&lsquo;<code class=property>font</code>&rsquo;</span></a>
    shorthand resets to its initial value any property not explicitly given a
    value, this has the same effect as this declaration:

   <pre>button p {
  font-style: normal;
  font-variant: normal;
  font-weight: 600;
  font-size: 9pt;
  line-height: normal;
  font-family: Charcoal
} 
</pre>
  </div>

  <h2 id=font-resources><span class=secno>4 </span>Font resources</h2>

  <h3 id=the-font-face><span class=secno>4.1 </span>The @font-face rule</h3>

  <p>The @font-face rule allows for linking to fonts that are automatically
   activated when needed. This permits authors to work around the problem of
   "web-safe" fonts, allowing for consistent rendering indepedent of the
   fonts available in a given user's environment. A set of font descriptors
   define the location of a font resource, either locally or externally, and
   the style characteristics of an individual face. Multiple @font-face rules
   can be used to construct font families with a variety of faces. Using CSS
   font matching rules, a user agent can selectively download only those
   faces that are needed for a given piece of text.

  <p>The general form of a <span class=index-def id=font-face
   title="@font-face"><em>@font-face</em></span> <span class=index-inst
   id=at-rule title=at-rules>at-rule</span> is:

  <pre>
@font-face { <span class=value-inst-font-description>&lt;font-description&gt;</span> }
</pre>

  <p>where the <span class=index-def id=ltfont-descriptiongt
   title="&lt;font-description&gt;::definition of"><a
   name=value-def-font-description>&lt;font-description&gt;</a></span> has
   the form:

  <pre>
descriptor: value;
descriptor: value;
[...]
descriptor: value;
</pre>

  <p>Each <span class=index-inst id=font-face0
   title="@font-face">@font-face</span> rule specifies a value for every font
   descriptor, either implicitly or explicitly. Those not given explicit
   values in the rule take the initial value listed with each descriptor in
   this specification. These descriptors apply solely within the context of
   the @font-face rule in which they are defined, and do not apply to
   document language elements. There is no notion of which elements the
   descriptors apply to or whether the values are inherited by child
   elements. If a given descriptor occurs multiple times in a given
   @font-face rule, only the last specified value is used, all prior values
   for that descriptor are ignored.

  <div class=example>
   <p>To use a downloadable font called Gentium:</p>

   <pre>
@font-face {
  font-family: Gentium;
  src: url(http://site/fonts/Gentium.ttf);
}

p { font-family: Gentium, serif; }
</pre>

   <p>The user agent will download Gentium and use it when rendering text
    within paragraph elements. If for some reason the site serving the font
    is unavailable, the default serif font will be used.</p>
  </div>

  <p>A given set of @font-face rules define a list of fonts available to
   containing documents. Multiple rules can be used to define a family with a
   large set of faces. When font matching is done these rules are considered
   before other available fonts on a system.

  <p>Downloaded fonts are only available to documents that reference them,
   they should not be made available to other applications or other
   documents. User agent implementors might consider it convenient to use
   downloaded fonts when rendering characters in other documents for which no
   other available font exists as part of the system font fallback procedure.
   This however leads to non-deterministic rendering patterns where the
   appearance of a page effectively becomes a function of browsing history.

  <p>User agents which do not understand the @font-face rule will encounter
   the opening curly brackets and will ignore forward until the closing curly
   bracket. This at-rule conforms with the forward-compatible parsing
   requirement of CSS, parsers may ignore these rules without error. Any
   descriptors that are not recognized or implemented by a given user agent
   must be ignored. @font-face rules require a font-family and src
   descriptor, if either of these are missing the @font-face should be
   ignored.

  <h3 id=font-family0><span class=secno>4.2 </span>Font family: the
   &lsquo;<code class=property><a
   href="#font-family2">font-family</a></code>&rsquo; descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-family2>font-family</dfn>

    <tr>
     <td>Value:

     <td>&lt;family-name>

    <tr>
     <td><em>Initial:</em>

     <td>N/A
  </table>

  <p>This descriptor defines the font family name that will be used in all
   CSS font family name matching. For the purposes of font name matching it
   overrides font family names contained in the underlying font data. If the
   font family name is the same as a font family available in a given user's
   environment, it effectively hides the underlying font for documents that
   use the stylesheet.

  <h3 id=font-reference><span class=secno>4.3 </span>Font reference: the
   &lsquo;<code class=property><a href="#src">src</a></code>&rsquo;
   descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=src>src</dfn>

    <tr>
     <td>Value:

     <td>[ &lt;uri> [format(&lt;string> [, &lt;string>]*)] |
      &lt;font-face-name> ] [, &lt;uri> [format(&lt;string> [,
      &lt;string>]*)] | &lt;font-face-name> ]*

    <tr>
     <td><em>Initial:</em>

     <td>N/A
  </table>

  <p>This descriptor specifies the resource containing font data. It is
   required , whether the font is downloadable or locally installed. It's
   value is a prioritized, comma-separated list of external references or
   locally installed font face names. When a font is needed the user agent
   iterates over the set of references listed, using the first one it can
   successfully activate. Fonts containing invalid data are treated as if
   they were not found, the user agent continues to the next font in the
   list.

  <p>External references consist of a URI, followed by an optional hint
   regarding the format of font resource to be found at that URI. The format
   hint contains a comma-separated list of format strings that denote
   well-known font formats. User agents should skip downloading a font
   resource if the format hints indicate only unsupported or unknown font
   formats. If no format hints are supplied, the user agent should download
   the font resources in the order supplied.

  <p>An initial list of format strings defined by this specification and
   representing formats likely to be used by implementations on various
   platforms is:

  <table id=fontformats>
   <tbody>
    <tr>
     <th>String

     <th>Font Format

     <th>Common extensions

    <tr>
     <td>"truetype"

     <td>TrueType

     <td>.ttf

    <tr>
     <td>"opentype"

     <td>OpenType

     <td>.ttf, .otf

    <tr>
     <td>"truetype-aat"

     <td>TrueType with Apple Advanced Typography extensions

     <td>.ttf

    <tr>
     <td>"embedded-opentype"

     <td>Embedded OpenType

     <td>.eot

    <tr>
     <td>"svg"

     <td>SVG Font

     <td>.svg
  </table>

  <p>As with other URIs in CSS, the URI may be partial, in which case it is
   resolved relative to the location of the style sheet containing the <span
   class=index-inst id=font-face1 title="@font-face">@font-face</span> rule.

  <div class=example>
   <p>A full font URI with no format hint:</p>

   <pre>
  src: url(http://site/fonts/font.otf);
</pre>

   <p>Arabic font with different versions for specific platforms:</p>

   <pre>
  src: url(../fonts/LateefRegAAT.ttf) format("truetype-aat"), 
       url(../fonts/LateefRegOT.ttf) format("opentype");
</pre>

   <p>A font containing tables to support multiple advanced font formats:</p>

   <pre>
  src: url(DoulosSILR.ttf) format("opentype","truetype-aat");
</pre>
  </div>

  <p>The locally installed <span class=index-def id=ltfont-face-namegt
   title="&lt;font-face-name&gt;::definition of"><a
   name=value-def-font-face-name>&lt;font-face-name&gt;</a></span> is a
   format-specific string that uniquely identifies a single font face within
   a larger family. For TrueType and OpenType fonts, the full font name as
   defined in the font name table is used to reference a given face.
   Additionally, for TrueType and OpenType fonts user agents may optionally
   support Postscript name lookup on platforms where that is appropriate. The
   notation for a &lt;font-face-name&gt; is the unique font face name
   enclosed by "local(" and ")" and the name can optionally be enclosed in
   quotes. This also allows for the creation of aliased font names and
   referencing faces that belong to larger families that cannot otherwise be
   referenced.

  <div class=example>
   <p>Use the local copy of a font or download it if it's not:</p>

   <pre>
@font-face {
  font-family: Gentium;
  src: local(Gentium), url(/fonts/Gentium.ttf);
}
</pre>

   <p>Use a local font or reference an SVG font in another document:</p>

   <pre>
@font-face {
  font-family: Headline;
  src: local(Futura-Medium), url(fonts.svg#MyGeometricModern) format("svg");
}
</pre>

   <p>Create an alias for local Japanese fonts on different platforms:</p>

   <pre>
@font-face {
  font-family: Japanese;
  src: local(HiraKakuPro-W3), local(Meiryo), local(IPAPGothic);
}
</pre>

   <p>Reference a font face that cannot be matched within a larger family:</p>

   <pre>
@font-face {
  font-family: Hoefler Text Ornaments;
  /* has the same font properties as Hoefler Text Regular */
  src: local(HoeflerText-Ornaments); 
}
</pre>

   <p>Within a user stylesheet, specify a font family that should always be
    overriden with a different font:</p>

   <pre>
@font-face {
  font-family: Arial;
  src: local(Helvetica);
}
</pre>

   <p>If Helvetica is available locally, it will be used in place of Arial.</p>
  </div>

  <h3 id=font-property><span class=secno>4.4 </span>Font property
   descriptors: the &lsquo;<code class=property><a
   href="#font-style1">font-style</a></code>&rsquo;, &lsquo;<code
   class=property><a href="#font-weight1">font-weight</a></code>&rsquo;,
   &lsquo;<code class=property><a
   href="#font-stretch0">font-stretch</a></code>&rsquo; descriptors</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-style1>font-style</dfn>

    <tr>
     <td>Value:

     <td>normal | italic | oblique

    <tr>
     <td><em>Initial:</em>

     <td>normal
  </table>

  <table class=descdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-weight1>font-weight</dfn>

    <tr>
     <td>Value:

     <td>normal | bold | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900

    <tr>
     <td><em>Initial:</em>

     <td>normal
  </table>

  <table class=descdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-stretch0>font-stretch</dfn>

    <tr>
     <td>Value:

     <td>normal | ultra-condensed | extra-condensed | condensed |
      semi-condensed | semi-expanded | expanded | extra-expanded |
      ultra-expanded

    <tr>
     <td><em>Initial:</em>

     <td>normal
  </table>

  <p>These descriptors define the characteristics of a font face and are used
   in the process of matching styles to specific faces. For a font family
   defined with several @font-face rules, user agents can either download all
   faces in the family or use these descriptors to selectively download font
   faces that are match actual styles. The values for these descriptors are
   the same as those for the corresponding font properties except that
   relative keywords are not allowed: bolder, lighter, wider, narrower. If
   these descriptors are omitted, default values are assumed.

  <p>The value for these font face style attributes is used in place of the
   style implied by the underlying font data. This allows authors to combine
   faces in flexible combinations, even in situations where the original font
   data was arranged differently. User agents that implement synthetic
   bolding and obliqueing should only apply synthetic styling in cases where
   the font descriptors imply this is needed, rather than based on the style
   attributes implied by the font data.

  <h3 id=character><span class=secno>4.5 </span>Character range: the
   &lsquo;<code class=property><a
   href="#unicode-range">unicode-range</a></code>&rsquo; descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=unicode-range>unicode-range</dfn>

    <tr>
     <td>Value:

     <td>&lt;urange> [, &lt;urange>]*

    <tr>
     <td><em>Initial:</em>

     <td>U+0-7FFFFFFF
  </table>

  <p>This descriptor defines the range of Unicode characters supported by a
   given font. The values of <span class=index-def id=lturangegt
   title="&lt;urange&gt;::definition of"><a
   name=value-def-urange>&lt;urange&gt;</a></span> are expressed using
   hexadecimal numbers prefixed by "U+", corresponding to <a
   href="http://www.unicode.org/charts/">Unicode character code points</a>.
   The unicode-range descriptor serves as a hint for user agents when
   deciding whether or not to download a font resource.

  <p>Unicode range values are written using hexadecimal values and are case
   insensitive. Each is prefixed by "U+" and multiple, discontinuous ranges
   are separated by commas. Whitespace before or after commas is ignored. A
   single range has three basic forms:

  <ul>
   <li>a single codepoint (e.g. U+416)

   <li>an interval value range (e.g. U+400-4ff)

   <li>a range where trailing &lsquo;<code class=css>?</code>&rsquo;
    characters imply &lsquo;<code class=css>any digit value</code>&rsquo;
    (e.g. U+4??)
  </ul>

  <p>Interval ranges consisting of a single codepoint are valid, as are
   ranges specified with &lsquo;<code class=css>?</code>&rsquo; that lack an
   initial digit. Ranges can overlap but interval ranges that descend (e.g.
   U+400-32f) are invalid and omitted rather than treated as parse errors,
   they have no effect on other ranges in a list of ranges. Without any valid
   ranges, the descriptor is omitted. Ranges that do not fit any of the above
   three forms are considered to be parse errors and the descriptor is
   omitted. User agents may normalize the list of ranges into a list that is
   different but represents the equivalent set of character code points.

  <p>The character range can be a subset of the full character map of the
   underlying font. The actual character map used during font matching is the
   intersection of the unicode range specified and the underlying character
   map of the font. Although Unicode only defines character codes in the
   range U+0-10FFFF, values up to U+7FFFFFFF are allowed within unicode-range
   range lists.

  <p>Example ranges for specific languages or characters:

  <dl>
   <dt>unicode-range: U+A5;

   <dd>a single codepoint, the yen/yuan symbol

   <dt>unicode-range: U+590-5ff;

   <dd>code range for Hebrew characters

   <dt>unicode-range: U+A5, U+4E00-9FFF, U+30??, U+FF00-FF9F;

   <dd>code range for Japanese kanji, hiragana and katakana characters plus
    yen/yuan symbol
  </dl>

  <div class=example>
   <p>The BBC provides news services in a wide variety of languages, many
    that are not well supported across all platforms. Using an @font-face
    rule, the BBC could provide a font for any of these languages, as it
    already does via a manual font download.</p>

   <pre>
@font-face {
  font-family: BBCBengali;
  src: url(fonts/BBCBengali.ttf) format("opentype");
  unicode-range: U+00-FF, U+980-9FF;
}
</pre>
  </div>

  <div class=example>
   <p>Technical documents often require a wide range of symbols. The STIX
    Fonts project is one project aimed at providing fonts to support a wide
    range of technical typesetting in a standardized way. The example below
    shows the use of a font that provides glyphs for many of the mathematical
    and technical symbol ranges within Unicode:</p>

   <pre>
@font-face {
  font-family: STIXGeneral;
  src: local(STIXGeneral), url(/stixfonts/STIXGeneral.otf);
  unicode-range: U+000-49F, U+2000-27FF, U+2900-2BFF, U+1D400-1D7FF;
}
</pre>
  </div>

  <p>Multiple @font-face rules with different unicode ranges for the same
   family can be constructed to create composite fonts that mix the glyphs
   from different fonts for different scripts. If the unicode ranges overlap,
   the last rule is used.

  <div class=example>
   <p>Example mixing Latin and Greek.</p>
  </div>

  <div class=example>
   <p>Number font, defines only values for 0-9, currency symbols</p>
  </div>

  <div class=example>
   <p>This example shows how an author can override the glyphs used for Latin
    characters in a Japanese font with glyphs from a different font. The
    first rule specifies no range so it defaults to the entire range. The
    range specified in the second rule overlaps but takes precedence because
    it is defined later.</p>

   <pre>
@font-face {
  font-family: JapaneseWithGentium;
  src: local(MSMincho);
  /* no range specified, defaults to entire range */
}

@font-face {
  font-family: JapaneseWithGentium;
  src: url(../fonts/Gentium.ttf);
  unicode-range: U+0-2FF;
}
</pre>
  </div>
  <!-- Tools to create subsetted fonts a problem.  Also, combining diacritics
represent a nasty side issue here.  Need named ranges (based on Unicode defined range names), e.g. range("Basic Latin") ==> U+00-FF -->

  <h2 id=font-matching><span class=secno>5 </span>Font matching algorithm</h2>

  <p>The procedure for choosing fonts consists of iterating over the font
   families determined by the font-family property, selecting a font face
   with the appropriate style based on other font properties and then
   determining whether a glyph exists for a given character. This procedure
   is performed on each character to be rendered. Optimizations are allowed
   provided that an implementation behaves as if the algorithm had been
   followed exactly. Matching occurs in a well-defined order to insure that
   the results are as consistent as possible across user agents, given an
   identical set of available fonts and rendering technology.

  <p>To begin with, a user agent must determine the set of font families
   available on a given platform and determine the style characteristics of
   all faces for each family. If two faces have the exact same style
   characteristics, one of them is <span class=index-inst id=ignored.
   title=ignore> <a href="syndata.html#ignore">ignored.</a></span> Fonts
   available via @font-face rules are referenced per document and are not
   treated as generally available fonts.

  <ol id=fontmatchingalg>
   <li>For each character within a given element, the user agent evaluates
    the font properties applicable. The user agent starts with the first
    family name in the <span class=descinst-font-family>&lsquo;<code
    class=property><a
    href="#font-family2">font-family</a></code>&rsquo;</span> prioritized
    list.

   <li>If the family name is a generic family name, the user agent looks up
    the appropriate font family name to be used. User agents may choose the
    generic font family to use based on the language of the containing
    element or the Unicode range of the character. The user agent attempts to
    find the family name among fonts available on the system and then among
    fonts defined via @font-face rules.

   <li>If a font family match occurs, the user agent then attempts to select
    a face that matches the remaining font properties. It matches these
    properties in the order given below:
    <ol id=fontstylematchingalg>
     <li><span class=descinst-font-style>&lsquo;<code class=property><a
      href="#font-stretch0">font-stretch</a></code>&rsquo;</span> is tried
      first. &lsquo;<code class=property>normal</code>&rsquo; matches a font
      not labeled as &lsquo;<code class=property>condensed</code>&rsquo; or
      &lsquo;<code class=property>expanded</code>&rsquo;.

     <li><span class=descinst-font-style>&lsquo;<code class=property><a
      href="#font-style1">font-style</a></code>&rsquo;</span> is tried next.
      &lsquo;<code class=property>italic</code>&rsquo; will be satisfied if
      there is either a face in the UA's font database labeled with the CSS
      keyword &lsquo;<code class=property>italic</code>&rsquo; (preferred) or
      &lsquo;<code class=property>oblique</code>&rsquo;. Otherwise the values
      must be matched exactly or font-style will fail.

     <li><span class=descinst-font-variant>&lsquo;<code class=property><a
      href="#font-variant">font-variant</a></code>&rsquo;</span> is tried
      next. &lsquo;<code class=property>normal</code>&rsquo; matches a font
      not labeled as &lsquo;<code class=property>small-caps</code>&rsquo;;
      &lsquo;<code class=property>small-caps</code>&rsquo; matches (1) a font
      labeled as &lsquo;<code class=property>small-caps</code>&rsquo;, (2) a
      font in which the small caps are synthesized, or (3) a font where all
      lowercase letters are replaced by uppercase letters. A small-caps font
      may be synthesized by electronically scaling uppercase letters from a
      normal font.

     <li><span class=descinst-font-weight>&lsquo;<code class=property><a
      href="#font-weight1">font-weight</a></code>&rsquo;</span> is matched
      next, it will never fail. Given the desired weight and the set of face
      weights that match the properties above, if the desired weight is
      available that face matches. Otherwise, a weight is chosen using the
      rules below:
      <ul>
       <li>If the desired weight is less than 400, weights below the desired
        weight are checked in descending order followed by weights above the
        desired weight in ascending order until a match is found.

       <li>If the desired weight is greater than 500, weights above the
        desired weight are checked in ascending order followed by weights
        below the desired weight in descending order until a match is found.

       <li>If the desired weight is 400, 500 is checked first and then the
        rule for desired weights less than 400 is used.

       <li>If the desired weight is 500, 400 is checked first and then the
        rule for desired weights less than 400 is used.
      </ul>

     <li>If bolder/lighter relative weights are specified, look for
      bolder/lighter weight faces. If relative number of steps of boldness
      not available, use synthetic bolding.

     <li><span class=descinst-font-size>&lsquo;<code class=property><a
      href="#font-size0">font-size</a></code>&rsquo;</span> must be matched
      within a UA-dependent margin of tolerance. (Typically, sizes for
      scalable fonts are rounded to the nearest whole pixel, while the
      tolerance for bitmapped fonts could be as large as 20%.) Further
      computations, e.g., by &lsquo;<code class=property>em</code>&rsquo;
      values in other properties, are based on the <span
      class=descinst-font-size>&lsquo;<code class=property><a
      href="#font-size0">font-size</a></code>&rsquo;</span> value that is
      used, not the one that is specified.
    </ol>

   <li>If no matching face or the matched face does not contain a glyph for
    the character to be rendered, the next family name is selected and the
    previous two steps repeated. Otherwise if the matched font is defined via
    @font-face and needs to be downloaded, the user agent can either wait
    until the font is downloaded or render once with substituted font metrics
    and render again once the font is downloaded. <em>Old wording: The UA may
    choose to block on this download or may choose to proceed to the next
    step while the font downloads. UAs that do not implement font download,
    or are not connected to a network, or where the user preferences have
    disabled font download, or where the requested resource is unavailable
    for whatever reason, or where the downloaded font cannot be used for
    whatever reason, are considered to fail at this step.</em>

   <li>If there are no more font families to be evaluated and no matching
    face has been found, then the user agent performs a system font fallback
    procedure to find the best match for the character to be rendered. The
    result of this procedure may vary across user agents.

   <li>If a particular character cannot be displayed using any font, the user
    agent should indicate by some means that a character is not being
    displayed, either by displaying a symbolic representation of the missing
    glyph or using the &lsquo;<code class=css>missing character</code>&rsquo;
    glyph from another font.
  </ol>

  <p>Discuss implications of the algorithm above. Weight mapping trys to map
   non-bold weights to other non-bold weights, same for bold faces.

  <div class=issue>
   <ul></ul>

   <p>Issues:

   <ul>
    <li>Using the missing character glyph is definitely not the ideal, should
     state this more clearly.

    <li>Basically, if a font family is found, it should always match a face
     and not fall back, no?

    <li>Need more details on bolder/lighter interaction with synthetic
     bolding
   </ul>
  </div>

  <h3 id=examples><span class=secno>5.1 </span>Examples of font matching</h3>

  <p>Simple to complex examples:

  <div class=example>
   <p>bold italic</p>
  </div>

  <div class=example>
   <p>italic (synthesized)</p>
  </div>

  <div class=example>
   <p>specific weights</p>
  </div>

  <div class=example>
   <p>bolder/lighter</p>
  </div>

  <div class=example>
   <p>bolder (synthesized)</p>
  </div>

  <div class=example>
   <p>condensed</p>
  </div>

  <div class=example>
   <p>run of text containing diacritics</p>
  </div>

  <div class=example>
   <p>run of text containing mixture of Japanese/English</p>
  </div>

  <div class=example>
   <p>simple downloaded font</p>
  </div>

  <div class=example>
   <p>font-face with local/url combination</p>
  </div>

  <div class=example>
   <p>It's useful to note that the CSS selector syntax may be used to create
    language-sensitive typography. For example, some Chinese and Japanese
    characters are unified to have the same Unicode codepoint, although the
    abstract glyphs are not the same in the two languages.

   <pre>*:lang(ja-jp) { font: 900 14pt/16pt &quot;Heisei Mincho W9&quot;, serif; }
*:lang(zh-tw) { font: 800 14pt/16.5pt &quot;Li Sung&quot;, serif; }
</pre>

   <p>This selects any element that has the given language - Japanese or
    Traditional Chinese - and uses the appropriate font.
  </div>

  <p>Leftover examples, rework:

  <div class=example>
   <p>Example of a family of fonts with different weights</p>
  </div>

  <div class=example>
   <p> The following example groups three physical fonts into one virtual
    font with extended coverage. In each case, the adorned font name is given
    in the src descriptor to allow locally installed versions to be
    preferentially used if available. A fourth rule points to a font with the
    same coverage, but contained in a single resource.

   <pre>
@font-face {
  font-family: Excelsior;
  src: local(Excelsior Roman), url(http://site/er) format(intellifont);
  unicode-range: U+??; /* Latin-1 */
}
@font-face {
  font-family: Excelsior;
  src: local(Excelsior EastA Roman), url(http://site/ear) format(intellifont);
  unicode-range: U+100-220; /* Latin Extended A and B */
}
@font-face {
  font-family: Excelsior;
  src: local(Excelsior Cyrillic Upright), url(http://site/ecr) format(intellifont);
  unicode-range: U+4??; /* Cyrillic */
}
@font-face {
  font-family: Excelsior;
  src: url(http://site/excels) format(truedoc);
  unicode-range: U+??,U+100-220,U+4??;
}
</pre>
  </div>

  <h2 id=font-rendering><span class=secno>6 </span>Font rendering properties</h2>

  <ul>
   <li>these dictate how text is rendered, not which font face is used

   <li>[TBD]
  </ul>

  <h2 class=no-num id=appendix>Appendix A: Mapping CSS properties to font
   features</h2>

  <p><em>This section is included as background for some of the problems and
   situations that are described in other sections. It should be viewed as
   informative only.</em>

  <p>Font properties in CSS are designed to be independent of the underlying
   font formats used; they can be used to specify bitmap fonts, Type1 fonts,
   SVG fonts in addition to the common TrueType and OpenType fonts. But there
   are facets of TrueType and OpenType format that often cause confusion for
   authors and present challenges to implementors across platforms.

  <p>In many cases the font data used under Microsoft Windows or Linux is
   slightly different from the data used under Apple's Mac OS X because the
   TrueType format specified different data for different platforms, so a
   single font file contains duplicates for things like name information and
   character set mappings. This can lead to different results when the same
   fonts are used on a variety of platforms.

  <p>Style linking of large font families is handled differently on different
   platforms, so the font-family attribute may map to a different sets of
   font faces, even with the exact same data. Effect on fonts with a wide
   variety of weights.

  <p>To support complex script handling, Microsoft and Apple developed
   different supersets of the original TrueType format.

  <p>To aid with font fallback, Microsoft implemented font linking.

  <p>Symbol and dingbat fonts present a unique set of issues for authors
   using Unicode pages.

  <p>Originally developed at Apple, TrueType was designed as a outline font
   format for both screen and print. Microsoft joined Apple in developing the
   TrueType format and both platforms have used TrueType fonts since then.
   The format consists of a set of tables distinguished with common
   four-letter tag names. For example, names for the font, including
   copyright and license information, is contained in the &lsquo;<code
   class=property>name</code>&rsquo; table, and the character map
   (&lsquo;<code class=property>cmap</code>&rsquo;) table contains a mapping
   of character encodings to glyphs contained in the font. In both of these
   cases, the format includes a way to specify data on a per-platform basis,
   meaning the character map used under Microsoft Windows is not the same as
   the one used under Mac OS.

  <p>Style linking of font families, the way in which a set of individual
   font faces is joined together, also varies across platform. For backwards
   compatibility with older applications, Microsoft restricts fonts to using
   only four style variations per family, but Apple does not.

  <h2 class=no-num id=appendix0>Appendix B: Font licensing issues</h2>

  <p>The use of fonts on the web is often surrounded in controversy. Font
   designers expend huge amounts of effort to create their designs,
   painstakingly refining letterforms and tuning font data to assure that the
   letterforms appear as desired both in print and on the screen. As a result
   they often license their fonts very carefully, often with somewhat complex
   terms. Authors who want to use specific fonts via a downloadable font
   mechanism must always carefully verify that their intended use is within
   the scope of the font license. Many commercial fonts presently do not
   allow web downloading of their fonts in any form. Font formats often store
   references to the font license within the font data itself. When in doubt,
   it's best to verify with the font designer directly. Vendors that bundle
   fonts with their products are also strongly encouraged to carefully
   explain the license details that covers the fonts they bundle.

  <div class=example>
   <p>An author would like to use <a
    href="http://www.typography.com/fonts/font_overview.php?productLineID=100008">Gotham</a>,
    a font designed by Hoefler & Frere-Jones, as a downloadable font for
    their webpages. But the <a
    href="http://www.typography.com/home/eula.php">end-user license
    agreement</a> that covers Gotham specifically notes that usage via
    @font-face rules in CSS style sheets is not allowed. The author cannot
    use Gotham as a downloadable font for their web pages.</p>
  </div>

  <div class=example>
   <p>An author wants to use <a
    href="http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&item_id=Gentium">Gentium</a>,
    a font developed by SIL International. This font is licensed under the
    terms of the <a
    href="http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&item_id=OFL_web">Open
    Font License</a>, so as long as the author follows the relatively liberal
    terms of this license, they can use Gentium as a downloadable font for
    their web pages.</p>
  </div>

  <h2 class=no-num id=acknowledgments>Acknowledgments</h2>

  <p>A special thanks to Robert Bringhurst for the sublime mind expansion
   that is <em>The Elements of Typographic Style</em>.

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative>Normative</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=UNICODE5>[UNICODE5]

   <dd>The Unicode Consortium. <a
    href="http://www.unicode.org/versions/Unicode5.1.0/"><cite>The Unicode
    Standard, Version 5.1.0.</cite></a> Addison-Wesley. 2007. ISBN
    0-321-48091-0. URL: <a
    href="http://www.unicode.org/versions/Unicode5.1.0/">http://www.unicode.org/versions/Unicode5.1.0/</a>
    </dd>
   <!---->
  </dl>
  <!--end-normative-->
  <!--{{!UNICODE5}}-->

  <h3 class=no-num id=informative>Informative</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=ARABIC-TYPO>[ARABIC-TYPO]

   <dd>Huda Smitshuijzen AbiFares. <cite>Arabic Typography: A Comprehensive
    Sourcebook.</cite> 2001. ISBN 0-86356-347-3.</dd>
   <!---->

   <dt id=ELEMTYPO>[ELEMTYPO]

   <dd>Robert Bringhurst. <cite>The Elements of Typographic Style, Version
    3.1.</cite> 2005. ISBN 0-88179-206-3.</dd>
   <!---->

   <dt id=LANGCULTTYPE>[LANGCULTTYPE]

   <dd>John D. Berry, Ed. <cite>Language Culture Type.</cite> 2001. ISBN
    1-932026-01-0.</dd>
   <!---->
  </dl>
  <!--end-informative-->
  <!--{{ARABIC-TYPO}}-->
  <!--{{ELEMTYPO}}-->
  <!--{{LANGCULTTYPE}}-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>&lt;absolute-size&gt;
    <ul>
     <li>definition of, <a href="#ltabsolute-sizegt"
      title="&lt;absolute-size&gt; definition of"><strong>3.6</strong></a>
    </ul>

   <li>aspect value, <a href="#aspect0" title="aspect
    value"><strong>3.7</strong></a>

   <li>at-rules, <a href="#at-rule" title=at-rules>4.1</a>

   <li>bicameral
    <ul>
     <li>definition of, <a href="#bicameral" title="bicameral definition
      of"><strong>3.5</strong></a>
    </ul>

   <li>cursive, definition of, <a href="#cursive0" title="cursive, definition
    of"><strong>#</strong></a>

   <li>fantasy, definition of, <a href="#fantasy0" title="fantasy, definition
    of"><strong>#</strong></a>

   <li>font, <a href="#font" title=font><strong>3.8</strong></a>

   <li>&lt;font-description&gt;
    <ul>
     <li>definition of, <a href="#ltfont-descriptiongt"
      title="&lt;font-description&gt; definition of"><strong>4.1</strong></a>
      
    </ul>

   <li>@font-face, <a href="#font-face"
    title="@font-face"><strong>4.1</strong></a>, <a href="#font-face0"
    title="@font-face">4.1</a>, <a href="#font-face1"
    title="@font-face">4.3</a>

   <li>&lt;font-face-name&gt;
    <ul>
     <li>definition of, <a href="#ltfont-face-namegt"
      title="&lt;font-face-name&gt; definition of"><strong>4.3</strong></a>
    </ul>

   <li>font-family, <a href="#font-family1"
    title=font-family><strong>3.1</strong></a>, <a href="#font-family2"
    title=font-family><strong>4.2</strong></a>

   <li>font-size, <a href="#font-size0"
    title=font-size><strong>3.6</strong></a>

   <li>font-size-adjust, <a href="#font-size-adjust"
    title=font-size-adjust><strong>3.7</strong></a>

   <li>font-stretch, <a href="#font-stretch"
    title=font-stretch><strong>3.3</strong></a>, <a href="#font-stretch0"
    title=font-stretch><strong>4.4</strong></a>

   <li>font-style, <a href="#font-style0"
    title=font-style><strong>3.4</strong></a>, <a href="#font-style1"
    title=font-style><strong>4.4</strong></a>

   <li>font-variant, <a href="#font-variant"
    title=font-variant><strong>3.5</strong></a>

   <li>font-weight, <a href="#font-weight0"
    title=font-weight><strong>3.2</strong></a>, <a href="#font-weight1"
    title=font-weight><strong>4.4</strong></a>

   <li>ignore, <a href="#ignored." title=ignore>5</a>

   <li>&lt;length&gt;, <a href="#ltlengthgt" title="&lt;length&gt;">3.6</a>

   <li>monospace, definition of, <a href="#monospace0" title="monospace,
    definition of"><strong>#</strong></a>

   <li>&lt;number&gt;, <a href="#ltnumbergt" title="&lt;number&gt;">3.7</a>

   <li>&lt;percentage&gt;, <a href="#ltpercentagegt"
    title="&lt;percentage&gt;">3.6</a>

   <li>&lt;relative-size&gt;
    <ul>
     <li>definition of, <a href="#ltrelative-sizegt"
      title="&lt;relative-size&gt; definition of"><strong>3.6</strong></a>
    </ul>

   <li>sans-serif, definition of, <a href="#sans-serif0" title="sans-serif,
    definition of"><strong>#</strong></a>

   <li>serif, definition of, <a href="#serif0" title="serif, definition
    of"><strong>#</strong></a>

   <li>src, <a href="#src" title=src><strong>4.3</strong></a>

   <li>system fonts, <a href="#system" title="system
    fonts"><strong>3.8</strong></a>

   <li>unicameral
    <ul>
     <li>definition of, <a href="#unicameral0" title="unicameral definition
      of"><strong>3.5</strong></a>
    </ul>

   <li>unicode-range, <a href="#unicode-range"
    title=unicode-range><strong>4.5</strong></a>

   <li>&lt;urange&gt;
    <ul>
     <li>definition of, <a href="#lturangegt" title="&lt;urange&gt;
      definition of"><strong>4.5</strong></a>
    </ul>
  </ul>
  <!--end-index-->

  <h2 class=no-num id=property-index>Property index</h2>
  <!--begin-properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies&nbsp;to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
    <tr valign=baseline>
     <td><a class=property href="#font">font</a>

     <td>[ [ &lt;&lsquo;font-style&rsquo;> || &lt;&lsquo;font-variant&rsquo;>
      || &lt;&lsquo;font-weight&rsquo;> ]? &lt;&lsquo;font-size&rsquo;> [ /
      &lt;&lsquo;line-height&rsquo;> ]? &lt;&lsquo;font-family&rsquo;> ] |
      caption | icon | menu | message-box | small-caption | status-bar |
      inherit

     <td>see individual properties

     <td>all elements

     <td>yes

     <td>see individual properties

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-family2">font-family</a>

     <td>[[ &lt;family-name> | &lt;generic-family> ] [, &lt;family-name>|
      &lt;generic-family>]* ] | inherit

     <td>depends on user agent

     <td>all elements

     <td>yes

     <td>N/A

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-size0">font-size</a>

     <td>&lt;absolute-size> | &lt;relative-size> | &lt;length> |
      &lt;percentage> | inherit

     <td>medium

     <td>all elements

     <td>yes

     <td>refer to parent element's font size

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-size-adjust">font-size-adjust</a>

     <td>&lt;number> | none | inherit

     <td>none

     <td>all elements

     <td>yes

     <td>N/A

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-stretch0">font-stretch</a>

     <td>normal | wider | narrower | ultra-condensed | extra-condensed |
      condensed | semi-condensed | semi-expanded | expanded | extra-expanded
      | ultra-expanded | inherit

     <td>normal

     <td>all elements

     <td>yes

     <td>N/A

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-style1">font-style</a>

     <td>normal | italic | oblique | inherit

     <td>normal

     <td>all elements

     <td>yes

     <td>N/A

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-variant">font-variant</a>

     <td>normal | small-caps | inherit

     <td>normal

     <td>all elements

     <td>yes

     <td>N/A

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-weight1">font-weight</a>

     <td>normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600
      | 700 | 800 | 900 | inherit

     <td>normal

     <td>all elements

     <td>yes

     <td>N/A

     <td>visual
  </table>
  <!--end-properties-->
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
