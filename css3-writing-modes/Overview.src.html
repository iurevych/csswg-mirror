<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>CSS Text Layout Module Level 3</title>
  <link rel="stylesheet" type="text/css" href="../default.css">
  <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/tr/W3C-ED.css">

  <style type="text/css">
    .data, .proptable {
      margin: 1em auto;
      border-collapse: collapse;
      border: solid #005A9B;
    }
    .data caption {
      width: 100%;
      text-align: center;
    }
    .data td, .data th,
    .proptable td, .proptable th {
      border: thin solid;
      padding: 0.2em;
      text-align: center;
    }
    .data thead th[scope="row"],
    .proptable thead th[scope="row"] {
      text-align: right;
      background: #A4C8E2;
      color: inherit;
    }
    .data thead,
    .proptable thead {
      background: #EEEEEE;
      color: inherit;
    }
    .data tbody th:first-child,
    .proptable tbody th:first-child {
      text-align: right;
      background: #EEEEEE;
      color: inherit;
    }
    .data thead,
    .data tbody,
    .data tfoot,
    .data colgroup {
      border: solid;
    }

    table.propdef {
      table-layout: auto;
    }
    .propdef th {
      font-style: italic;
      font-weight: normal;
      text-align: left;
      width: 3em;
    }
    dt dfn code {
      font-size: inherit;
    }
    .egbidiwsaA,.egbidiwsbB,.egbidiwsaB,.egbidiwsbC
      { white-space:pre;font-size:80%;font-family:monospace; vertical-align:2px; margin:1px }
    .egbidiwsaA { background:lime;padding:2px; }
    .egbidiwsbB { border:2px solid blue }
    .egbidiwsaB { background:yellow;border:2px dotted white }
    .egbidiwsbC { border:2px dotted red }
  </style>
</head>

<body>

<div class="head">

<!--logo-->

<h1>CSS Text Layout Module Level 3</h1>

<h2 class="no-num no-toc">[LONGSTATUS] [DATE]</h2>
<dl>
  <dt>This version:</dt>
    <dd><a href="http://dev.w3.org/csswg/css3-text-layout/">http://dev.w3.org/csswg/css3-text-layout/</a>
  <dt>Latest version:</dt>
    <dd><a
      href="http://www.w3.org/TR/css3-text-layout/">http://www.w3.org/TR/css3-text-layout/</a></dd>
  <dt>Previous version:</dt>
    <dd><a
      href="http://www.w3.org/tr/2003/CR-css3-text-20030514/">http://www.w3.org/tr/2003/CR-css3-text-20030514/</a></dd>
  <dt>Editors:</dt>
    <dd><a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a></dd>
    <dd><a href="mailto:murakami@antenna.co.jp">Shinyu Murakami</a> (<a href="http://www.antennahouse.com/">Antenna House</a>)</dd>
  <dt>Previous Editors:</dt>
    <dd><a href="mailto:paulnel@microsoft.com">Paul Nelson</a> (<a href="http://www.microsoft.com/">Microsoft</a>)</dd>
    <dd><a href="mailto:michelsu@microsoft.com">Michel Suignard</a> (<a href="http://www.microsoft.com/">Microsoft</a>)</dd>
</dl>

<!--begin-copyright-->
<p>[Here will be included the file "../copyright.inc"]</p>
<!--end-copyright-->

<hr title="Separator for header">
</div>

<h2 class="no-num no-toc" id="abstract">Abstract</h2>

  <p>This module specifies the text layout model in CSS and the properties
    that control it. It covers bidirectionality and vertical text.</p>

<h2 class="no-num no-toc" id="status">Status of this document</h2>

<!--status-->

<h2 class="no-num no-toc" id="Contents">Contents</h2>

<!--toc-->

<h2 id="intro">Introduction</h2>

  <p>This module describes the text layout features supported by CSS, which 
    includes support for various international writing directions, such as 
    left-to-right (e.g., Latin scripts), right-to-left (e.g., Hebrew or Arabic), 
    bidirectional (e.g., mixing Latin with Arabic) and vertical (e.g., Asian 
    scripts). In addition, this module defines a set of writing-mode relative 
    (logical) properties, such as margin-before/after/start/end.</p>

<h2 id="text-flow">Writing Modes and Terminology</h2>

  <p>A <dfn>writing mode</dfn> is defined in terms of its <dfn>inline direction</dfn>
    (<dfn>inline progression</dfn>) and its block flow (<dfn>block progression</dfn>).
    The <dfn>inline direction</dfn> is the primary direction in which content
    is ordered on a line and defines on which sides of a box the "start" and
    "end" are. The 'direction' and 'unicode-bidi' properties determine the
    direction of inline flow. The <dfn>block flow</dfn> direction is the
    direction in which block-level boxes stack and the direction in which line
    boxes stack within a block box. The 'block-flow' property determines the
    block flow direction. The term "writing mode" is chosen because these
    properties are strongly associated with the layout of text.</p>

  <p>Writing systems typically have one or two standard writing modes. Some
    examples are:
  <ul>
    <li>Latin scripts are typically written using a left-to-right inline
      direction with a downward (top-to-bottom) block flow.</li>
    <li>Mongolian script languages are typically written using a top-to-bottom
      inline direction with a rightward (left-to-right) block flow.</li>
    <li>Japanese is commonly written using both a left-to-right inline direction
      with a downard (top-to-bottom) block flow, <strong>and</strong> a
      top-to-bottom inline progression with a leftward (right-to-left) block
      flow. Many magazines and newspapers will mix these two writing modes
      on the same page.</li>
  </ul>

  <p>A <dfn>horizontal writing mode</dfn> is one with horizontal lines of
    text, i.e. a downward or upward block flow. A <dfn>vertical writing
    mode</dfn> is one with vertical lines of text, i.e. a leftward or
    rightward block flow. <span class="note">These terms should not be
    confused with <dfn>vertical block flow</dfn> (which is a downard or
    upward block flow) and <dfn>horizontal block flow</dfn> (which is
    leftward or rightward block flow). To avoid confusion, this
    specification avoids the latter set.

<h2 id="text-direction">Inline Direction and Bidirectionality</h2>

  <p>While the characters in most scripts are written from left to right,
    certain scripts are written from right to left. In some documents,
    in particular those written with the Arabic  or Hebrew script, and in
    some mixed-language contexts, text in a single (visually displayed)
    block may appear with mixed directionality. This phenomenon is called
    <span class="index-def" title="bidirectionality (bidi)"><dfn>bidirectionality</dfn></span>, or
    "bidi" for short.</p>

  <p>The Unicode standard (<a href="http://www.unicode.org/reports/tr9/">Unicode Standard Annex #9</a>) defines a complex
    algorithm for determining the proper directionality of text. The
    algorithm consists of an implicit part based on character properties,
    as well as explicit controls for embeddings and overrides. CSS relies
    on this algorithm to achieve proper bidirectional rendering. The <span
    class="propinst-direction">'direction'</span> and <span
    class="propinst-unicode-bidi">'unicode-bidi'</span> properties allow
    authors to specify how the elements and attributes of a document
    language map to this algorithm.</p>

  <p>User agents that support bidirectional text must apply the Unicode
    bidirectional algorithm to every sequence of inline boxes uninterrupted
    by a forced line break or block boundary. This sequence forms the
    "paragraph" unit in the bidirectional algorithm. The paragraph embedding
    level is set according to the value of the <span
    class="propinst-direction">'direction'</span> property of the containing
    block rather than by the heuristic given in steps P2 and P3 of the Unicode
    algorithm.</p>

  <p>Because the directionality of a text depends on the structure and
    semantics of the document language, these properties should in most
    cases be used only by designers of document type descriptions (Dtds),
    or authors of special documents. If a default style sheet specifies
    these properties, authors and users should not specify rules to
    override them.</p>

  <p>The HTML 4 specification ([[HTML401]], section 8.2) defines
    bidirectionality behavior for HTML elements. The style sheet
    rules that would achieve the bidi behaviors specified in [[HTML401]] are
    given below. The HTML 4 specification also contains more information on
    bidirectionality issues.</p>

  <pre>
*[dir="ltr"]    { direction: ltr; unicode-bidi: embed; }
*[dir="rtl"]    { direction: rtl; unicode-bidi: embed; }

bdo[dir="ltr"]  { direction: ltr; unicode-bidi: bidi-override; }
bdo[dir="rtl"]  { direction: rtl; unicode-bidi: bidi-override; }
  </pre>

  <p class="note">Because HTML UAs can turn off CSS styling, we advise HTML 
    authors to use the HTML 'dir' property and &lt;bdo&gt; element to 
    ensure correct bidirectional layout in the absence of a style sheet.</p>  

<h3 id="direction">Specifying Directionality: the 'direction' property</h3>

  <table class="propdef">
    <tbody>
      <tr>
        <th>Name:</th>
        <td><dfn>direction</dfn></td>
      </tr>
      <tr>
        <th>Value:</th>
        <td>ltr | rtl </td>
      </tr>
      <tr>
        <th>Initial:</th>
        <td>ltr</td>
      </tr>
      <tr>
        <th>Applies to:</th>
        <td>all elements</td>
      </tr>
      <tr>
        <th>Inherited:</th>
        <td>yes</td>
      </tr>
      <tr>
        <th>Percentages:</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>Media:</th>
        <td>visual</td>
      </tr>
      <tr>
        <th>Computed&#160;value:</th>
        <td>specified value</td>
      </tr>
    </tbody>
  </table>

  <p>This property specifies the inline progression of text and elements 
    on a line, and the direction of embeddings and overrides (see <span
    class="propinst-unicode-bidi">'unicode-bidi'</span>) for the Unicode
    bidirectional algorithm. In addition, it specifies the direction of <a
    href="http://www.w3.org/TR/CSS21/tables.html">table</a> column layout, the direction of
    horizontal <a href="http://www.w3.org/TR/CSS21/visufx.html#overflow">overflow</a>, and the
    position of an incomplete last line in a block in case of 'text-align:
    justify'.</p>

  <p>Values for this property have the following meanings:</p>

  <dl>
   <dt><strong>ltr</strong></dt>
   <dd>Left-to-right direction.</dd>
   <dt><strong>rtl</strong></dt>
   <dd> Right-to-left direction.</dd>
  </dl>

  <p>For the <span class="propinst-direction">'direction'</span>
    property to affect reordering in inline-level elements, the <span
    class="propinst-unicode-bidi">'unicode-bidi'</span> property's value
    must be 'embed' or 'override'.</p>

  <p class="note">The <span class="propinst-direction">'direction'</span>
      property, when specified for table column elements, is not inherited by
      cells in the column since columns are not the ancestors of the cells in
     the document tree. Thus, CSS cannot easily capture the "dir" attribute
     inheritance rules described in [[HTML401]], section 11.3.2.1.

<h3 id="unicode-bidi">Embeddings and Overrides: the 'uncode-bidi' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>unicode-bidi</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>normal | embed | ( bidi-override || isolate )</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements, but see prose</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>no</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

  <p>Values for this property have the following meanings:</p>

  <dl>
    <dt><strong>normal</strong></dt>
    <dd>The element does not open an additional level of embedding with
      respect to the bidirectional algorithm. For inline-level elements,
      implicit reordering works across element boundaries.</dd>
    <dt><strong>embed</strong></dt>
    <dd>If the element is inline-level, this value
      opens an additional level of embedding with respect to the
      bidirectional algorithm. The direction of this embedding level is
      given by the <span class="propinst-direction">'direction'</span>
      property. Inside the element, reordering is done implicitly. This
      corresponds to adding a LRE (U+202A; for 'direction: ltr') or RLE
      (U+202B; for 'direction: rtl') at the start of the element and a PDF
      (U+202C) at the end of the element.</dd>
    <dt><strong>bidi-override</strong></dt>
    <dd>For inline-level elements this creates an override. 
      For block-level, table-cell, table-caption, or inline-block elements 
      this creates an override for inline-level descendants not within 
      another block-level, table-cell, table-caption, or inline-block 
      element. This means that inside the element, reordering is strictly in sequence
      according to the <span class="propinst-direction">'direction'</span>
      property; the implicit part of the bidirectional algorithm is
      ignored. This corresponds to adding a LRO (U+202D; for 'direction:
      ltr') or RLO (U+202E; for 'direction: rtl') at the start of the
      element and a PDF (U+202C) at the end of the element.</dd>
    <dt><strong>isolate</strong></dt>
    <dd>For the purposes of the Unicode bidirectional algorithm, the
      contents of the element are considered to be inside a separate,
      independent paragraph, and for the purpose of bidi resolution
      in its containing paragraph (if any), the element itself is
      treated as if it were an Object Replacement Character (U+FFFC).
      (If the element is broken across multiple lines, then each box
      of the element is treated as an Object Replacement Character.)</dd>
  </dl>

  <p>The final order of characters in each block-level element is the
    same as if the bidi control codes had been added as described above,
    markup had been stripped, and the resulting character sequence had
    been passed to an implementation of the Unicode bidirectional
    algorithm for plain text that produced the same line-breaks as the
    styled text. In this process, non-textual entities such as images are
    treated as neutral characters, unless their <span
    class="propinst-unicode-bidi">'unicode-bidi'</span> property has a
    value other than 'normal', in which case they are treated as strong
    characters in the <span class="propinst-direction">'direction'</span>
    specified for the element.</p>

  <p>Please note that in order to be able to flow inline boxes in a
    uniform direction (either entirely left-to-right or entirely
    right-to-left), more inline boxes (including anonymous inline boxes)
    may have to be created, and some inline boxes may have to be split up
    and reordered before flowing.</p>

  <p>Because the Unicode algorithm has a limit of 
    <em title="According to unicode 3.0, chapter 3, section 12, definition BD2. 
    Specifically, page 58 here: http://www.unicode.org/unicode/uni2book/ch03.pdf">
    61 levels</em> of embedding, care should be taken not to use <span
    class="propinst-unicode-bidi">'unicode-bidi'</span> with a value other
    than 'normal' unless appropriate. In particular, a value of 'inherit'
    should be used with extreme caution. However, for elements that are,
    in general, intended to be displayed as blocks, a setting of
    'unicode-bidi: embed' is preferred to keep the element together in
    case display is changed to inline (see example below).</p>

  <p>The following example shows an XML document with bidirectional
    text. It illustrates an important design principle: <span
    class="index-inst" title="Dtd">Dtd</span> designers should take bidi
    into account both in the language proper (elements and attributes) and
    in any accompanying style sheets. The style sheets should be designed
    so that bidi rules are separate from other style rules. The bidi rules
    should not be overridden by other style sheets so that the document
    language's or Dtd's bidi behavior is preserved.</p>

<h3 id="bidi-example">Example of Bidirectional Text</h3>

  <div class="example">
    <p>In this example, lowercase letters stand for inherently left-to-right
      characters and uppercase letters represent inherently right-to-left
      characters. The text stream is shown in logical backing store order.</p>

    <pre class="xml-example"><code class="xml">
&lt;HEBREW&gt;
  &lt;PAR&gt;HEBREW1 HEBREW2 english3 HEBREW4 HEBREW5&lt;/PAR&gt;
  &lt;PAR&gt;HEBREW6 &lt;EMPH&gt;HEBREW7&lt;/EMPH&gt; HEBREW8&lt;/PAR&gt;
&lt;/HEBREW&gt;
&lt;ENGLISH&gt;
  &lt;PAR&gt;english9 english10 english11 HEBREW12 HEBREW13&lt;/PAR&gt;
  &lt;PAR&gt;english14 english15 english16&lt;/PAR&gt;
  &lt;PAR&gt;english17 &lt;HE-QUO&gt;HEBREW18 english19 HEBREW20&lt;/HE-QUO&gt;&lt;/PAR&gt;
&lt;/ENGLISH&gt;
    </code></pre>

    <p>Since this is XML, the style sheet is responsible for setting the
      writing direction. This is the style sheet:</p>

    <pre class="example">
/* Rules for bidi */
HEBREW, HE-QUO  {direction: rtl; unicode-bidi: embed;}
ENGLISH         {direction: ltr; unicode-bidi: embed;} 

/* Rules for presentation */
HEBREW, ENGLISH, PAR  {display: block;}
EMPH                  {font-weight: bold;}
    </pre>

    <p>The HEBREW element is a block with a right-to-left base direction,
      the ENGLISH element is a block with a left-to-right base
      direction. The PARs are blocks that inherit the base direction from
      their parents. Thus, the first two PARs are read starting at the top
      right, the final three are read starting at the top left.  Please note
      that HEBREW and ENGLISH are chosen as element names for explicitness
      only; in general, element names should convey structure without
      reference to language.</p>

    <p>The EMPH element is inline-level, and since its value for <span
      class="propinst-unicode-bidi">'unicode-bidi'</span> is 'normal' (the
      initial value), it has no effect on the ordering of the text. The
      HE-QUO element, on the other hand, creates an embedding.</p>

    <p>The formatting of this text might look like this if the line length
      is long:</p>

    <pre class="ascii-art">
               5WERBEH 4WERBEH english3 2WERBEH 1WERBEH

                                8WERBEH <b>7WERBEH</b> 6WERBEH

english9 english10 english11 13WERBEH 12WERBEH

english14 english15 english16

english17 20WERBEH english19 18WERBEH
    </pre>

    <p>Note that the HE-QUO embedding causes HEBREW18 to be to the right
      of english19.</p>

    <p>If lines have to be broken, it might be more like this:</p>

    <pre class="ascii-art">
       2WERBEH 1WERBEH
  -EH 4WERBEH english3
                 5WERB

   -EH <b>7WERBEH</b> 6WERBEH
                 8WERB

english9 english10 en-
glish11 12WERBEH
13WERBEH

english14 english15
english16

english17 18WERBEH
20WERBEH english19
    </pre>

    <p>Because HEBREW18 must be read before english19, it is on the line
      above english19. Just breaking the long line from the earlier
      formatting would not have worked. Note also that the first syllable
      from english19 might have fit on the previous line, but hyphenation of
      left-to-right words in a right-to-left context, and vice versa, is
      usually suppressed to avoid having to display a hyphen in the middle
      of a line.</p>

  </div><!-- example -->


<h2 id="block-flow">Block Flow Direction: the 'block-flow' property</h2>

  <table class="propdef">
    <tbody>
      <tr>
        <th>Name:</th>
        <td><dfn>block-flow</dfn></td>
      </tr>
      <tr>
        <th>Value:</th>
        <td>tb | rl | lr | bt</td>
      </tr>
      <tr>
        <th>Initial:</th>
        <td>tb</td>
      </tr>
      <tr>
        <th>Applies to:</th>
        <td><span class="issue">??</span></td>
      </tr>
      <tr>
        <th>Inherited:</th>
        <td>yes</td>
      </tr>
      <tr>
        <th>Percentages:</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>Media:</th>
        <td>visual</td>
      </tr>
      <tr>
        <th>Computed&#160;value:</th>
        <td>specified value</td>
      </tr>
    </tbody>
  </table>

  <!--<p class="issue">Should we change the name to something more understandable?
    "block-flow"? "block-direction"? We need to make sure terminology for
    inline progression and block progression ("layout" vs "flow" vs "orientation"
    vs "direction", "horizontal" vs "vertical") is consistent throughout the
    document as well.)</p>-->

  <p>This property sets the block-flow direction. Possible values:</p>

  <dl>
    <dt>tb</dt>
    <dd>Top-to-bottom block flow. The writing mode is horizontal.</dd>
    <dt>rl</dt>
    <dd>Right-to-left block flow. The writing mode is vertical.</dd>
    <dt>lr</dt>
    <dd>Left-to-right block flow. The writing mode is vertical.</dd>
    <dt>bt</dt>
    <dd>Bottom-to-top block flow. The writing mode is horizontal.</dd>
  </dl>

  <p class="issue">Would <code>downward</code>/<code>leftward</code>/<code>rightward</code>/<code>upward</code>
    be better value names?</p>

  <p>An inline element that has a different 'block-flow' from
    its containing block becomes an 'inline-block' element <a href="#CSS3-box" rel="biblioentry">[CSS3-box]</a>.
    <span class="issue">switch to CSS2.1</span></p>

<h3>Details</h3>

  <p>Box layout in vertical writing modes is exactly analogous to layout in
    the horizontal writing modes.</p>
  <ul>
    <li>Calculations that refer to 'width' use 'height' instead, and vice
        versa.</li>
    <li>Calculations that refer to the '*-left' and '*-right' box properties
        (border, margin, padding, outline) use '*-top' and '*-bottom'
        instead, and vice versa. In RL layout '*-right' is analogous to
        TB's '*-top'; in LR layout '*-left' is analogous to TB's '*-top'.
        The logic for this is clear if you lock an arrow representing the
        TB block flow to a compass of the four directions and rotate it to
        represent RL and LR flow.</li>
    <li>Layout effects that depend on the directionality to choose between
        left and right (e.g. overflow, overconstraint resolution, 'start'
        values for 'text-align' and other properties, table column ordering)
        depend instead on the effective physical directionality
        (top-to-bottom or bottom-to-top) to choose between top and bottom.</li>
  </ul> 

  <p>When an element has a different 'block-flow' from its
    containing block two cases are possible:
  <em class="issue">These descriptions need work</em>
  <ul>
    <li>The two block flows are perpendicular to each other. (For
      example, 'tb' and 'lr'). In such cases, <span class="issue">detail
      calculation of width/height and determination of containing block dim</span></li>
    <li>The two block-flows are parallel to each other. (For example,
      'rl' and 'lr').</li>
  </ul>

<h3>Example</h3>

  <div class="example">
    <p>In the following example, two blocks elements (1 and 3) separated
      by an image (2) are presented in various flow writing modes.</p>

    <p>Here is a diagram of horizontal writing mode (<code>block-flow: tb</code>):</p>

    <p><img alt="Diagram of horizontal layout: blocks 1, 2, and 3 are stacked top-to-bottom"
            src="horizontal.png" width="219" height="300" /></p>

    <p>Here is a diagram for the right-to-left vertical writing mode commonly
      used in East Asia (<code>block-flow: rl</code>):</p>

    <p><img alt="Diagram of a right-to-left vertical layout: blocks 1, 2,
                  and 3 are arranged side by side from right to left"
              src="vertical-rl.png" height="191" width="297" /></p>

    <p>And finally, here is a diagram for the left-to-right vertical
      writing mode used for Uighur and Mongolian (<code>block-flow: lr</code>):</p>

    <p><img alt="Diagram of left-to-right vertical layout: blocks 1, 2,
                  and 3 are arranged side by side from left to right"
            src="vertical-lr.png" height="191" width="300" /></p>
  </div>

<h3 id="writing-mode">The 'writing-mode' shorthand property</h3>

  <table class="propdef" id="name-">
    <tr>
      <td><em>Name:</em></td>
      <td><dfn>writing-mode</dfn></td>
    </tr>
    <tr>
      <td><em>Value:</em></td>
      <td>lr-tb | rl-tb | tb-rl | bt-rl | tb-lr | bt-lr</td>
    </tr>
    <tr>
      <td><em>Initial:</em></td>
      <td>not defined for shorthand properties</td>
    </tr>
    <tr>
      <td><em>Applies to:</em></td>
      <td>all elements and generated content</td>
    </tr>
    <tr>
      <td><em>Inherited:</em></td>
      <td>yes</td>
    </tr>
    <tr>
      <td><em>Percentages:</em></td>
      <td>N/A</td>
    </tr>
    <tr>
      <td><em>Media:</em></td>
      <td>visual</td>
    </tr>
    <tr>
      <td><em>Computed value:</em></td>
      <td>see individual properties</td>
    </tr>
  </table>

  <p>The <span class="property"><a
    href="#writing-mode">'writing-mode'</a></span> property is a shorthand 
    property for the <span class="property"><a
    href="#direction">'direction'</a></span> property and the <span class="property">  <a
    href="#block-flow">'block-flow'</a></span> property. Although
    strictly speaking, the property has no initial value, it is equivalent to 'lr-tb'. 
    The definition of the property values are established by the following table, 
    which shows the setting of the constituent properties and example of common 
    usage.</p>

  <div class="figure">
    <table border="1" style="border-collapse: collapse" cellpadding="0" cellspacing="0" width="100%">
      <tr>
        <th>writing-mode:</th>
        <th>direction:</th>
        <th>block-flow:</th>
        <th>Common Usage:</th>
      </tr>
      <tr>
        <td>lr-tb</td>
        <td>ltr</td>
        <td>tb</td>
        <td>Latin-based, Greek, Cyrillic writing systems (and many others)</td>
      </tr>
      <tr>
        <td>rl-tb</td>
        <td>rtl</td>
        <td>tb</td>
        <td>Arabic, Hebrew writing systems</td>
      </tr>
      <tr>
        <td>tb-rl</td>
        <td>ltr</td>
        <td>rl</td>
        <td>East Asian writing systems in vertical mode</td>
      </tr>
      <tr>
        <td>bt-rl</td>
        <td>rtl</td>
        <td>rl</td>
        <td>Arabic script block quote embedded in East Asian vertical text</td>
      </tr>
      <tr>
        <td>tb-lr</td>
        <td>ltr</td>
        <td>lr</td>
        <td>Mongolian script writing system</td>
      </tr>
      <tr>
        <td>bt-lr</td>
        <td>rtl</td>
        <td>lr</td>
        <td>Arabic script block quote embedded in Mongolian script document</td>
      </tr>
    </table>
  </div>

<h3 id="writing-mode-mixed">Mixing the 'writing-mode' in normal usage</h3>

      <p>In East Asian documents, it is often preferred to display certain
        Latin-based strings, such as numerals in a year, always in a horizontal
        layout orientation regardless of the flow orientation of the line of
        text these strings appear in, as in:</p>

      <div class="figure">
        <p><img alt="Diagram of Tate Naka Yoko, showing a group of glyphs
                     appearing horizontally in a vertical column of text"
                class="example" src="lf-tny.gif" height="170" width="90">
          <img alt="Example of Tate Naka Yoko, showing the year 1996
                    appearing horizontally in a column of vertical text"
                class="example" src="tny.gif" height="132" width="37">

        <p>Horizontal in vertical ("<span lang="ja">Tate-chu-yoko</span>")
      </div>

      <p>In Japanese, this effect is known as
        <a href="#tatechuyoko" lang="ja">"Tate-chu-yoko"</a>. In order to
        achieve it in a CSS document, the Latin string should be enclosed
        in an inline element with a horizontal writing mode, as in:

      <pre>.date {block-flow: tb;}
<!--    -->&lt;span class=&quot;date&quot;&gt;1996&lt;/span&gt;</pre>




<h2 id="logical-directional">Logical directional properties and values</h2>

<h3 id="logical-terminology">Terminology</h3>

  <p>In this section we use the following terminology about directional properties:</p>
  <dl>
    <dt>logical properties</dt><dd>the properties regarding the direction relative to the writing-mode (e.g., margin-before)</dd>
    <dt>physical properties</dt><dd>the properties regarding the physical direction (e.g., margin-top)</dd>
    <dt>corresponding properties</dt><dd>the pair of a logical property and its corresponding physical property.</dd>
  </dl>

  <p>The sides of a box are designated as follows:</p>
  <dl>
    <dt>before side</dt><dd>the side occurring first in the block direction (=top side in lr-tb writing-mode)</dd>
    <dt>after side</dt><dd>the side opposite the before side (=bottom side in lr-tb writing-mode)</dd>
    <dt>start side</dt><dd>the side occurring first in the inline direction (=left side in lr-tb writing-mode)</dd>
    <dt>end side</dt><dd>the side opposite the start side (=right side in lr-tb writing-mode)</dd>
  </dl>
  
  <p>The dimensions of a box are designated as follows:</p>
  <dl>
    <dt>logical width<dt><dd>the dimension in the inline direction
      (=width in horizontal writing-mode; height in vertical writing-mode)</dd>
    <dt>logical height<dt><dd>the dimension in the block direction
      (=height in horizontal writing-mode; width in vertical writing-mode)</dd>
  </dl>

  <div class="example">
    <p>An English (LTR-TB) block:</p>
    <pre class="ascii-art">
                  &lt;---- width / logical width ---&gt;

                             top side/
                            before side
                  +------------------------------+                  A
      left side/  |   ---inline direction --->   |  right side/     |
      start side  |  |                           |  end side        |
                  |  | block      * horizontal * |                height/
                  |  | direction  *writing mode* |            logical height
                  |  V                           |                  |
                  +------------------------------+                  V
                             bottom side/
                              after side
    </pre>
  </div>
  <div class="example">
    <p>A vertical Japanese block (TTB-RL):</p>
    <pre class="ascii-art">
                  &lt;--- width / logical height ---&gt;

                             top side/
                            start side
                  +------------------------------+                  A
      left side/  |    &lt;---block direction---    |  right side/     |
      after side  |                           |  |  before side     |
                  |  *  vertical  *     inline|  |                height/
                  |  *writing mode*  direction|  |             logical width
                  |                           V  |                  |
                  +------------------------------+                  V
                            bottom side/
                             end side
    </pre>
  </div>

<h3 id="logical-prop">Logical properties: 'margin-before', 'logical-width', etc.</h3>

  <table class="propdef">
    <tbody>
      <tr>
        <th>Name:</th>
        <td><dfn>margin-before</dfn>, <dfn>margin-after</dfn>, <dfn>margin-start</dfn>, <dfn>margin-end</dfn></td>
      </tr>
      <tr>
        <th>Value:</th>
        <td><var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var> | auto</td>
      </tr>
      <tr>
        <th>Initial:</th>
        <td>0</td>
      </tr>
      <tr>
        <th>Applies to:</th>
        <td>same as 'margin'</td>
      </tr>
      <tr>
        <th>Inherited:</th>
        <td>no</td>
      </tr>
      <tr>
        <th>Percentages:</th>
        <td>logical-width of containing block</td>
      </tr>
      <tr>
        <th>Media:</th>
        <td>visual</td>
      </tr>
      <tr>
        <th>Computed&#160;value:</th>
        <td>the percentage as specified or the absolute length or 'auto' (see text)</td>
      </tr>
    </tbody>
  </table>

  <table class="propdef">
    <tbody>
      <tr>
        <th>Name:</th>
        <td><dfn>padding-before</dfn>, <dfn>padding-after</dfn>, <dfn>padding-start</dfn>, <dfn>padding-end</dfn></td>
      </tr>
      <tr>
        <th>Value:</th>
        <td><var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var></td>
      </tr>
      <tr>
        <th>Initial:</th>
        <td>0</td>
      </tr>
      <tr>
        <th>Applies to:</th>
        <td>all elements </td>
      </tr>
      <tr>
        <th>Inherited:</th>
        <td>no</td>
      </tr>
      <tr>
        <th>Percentages:</th>
        <td>logical-width of containing block</td>
      </tr>
      <tr>
        <th>Media:</th>
        <td>visual</td>
      </tr>
      <tr>
        <th>Computed&#160;value:</th>
        <td>&lt;length&gt; (see text)</td>
      </tr>
    </tbody>
  </table>

  <table class="propdef">
    <tbody>
      <tr>
        <th>Name:</th>
        <td><dfn>border-before-width</dfn>, <dfn>border-after-width</dfn>, <dfn>border-start-width</dfn>, <dfn>border-end-width</dfn></td>
      </tr>
      <tr>
        <th>Value:</th>
        <td><var>&lt;border-width&gt;</var></td>
      </tr>
      <tr>
        <th>Initial:</th>
        <td>medium</td>
      </tr>
      <tr>
        <th>Applies to:</th>
        <td>all elements</td>
      </tr>
      <tr>
        <th>Inherited:</th>
        <td>no</td>
      </tr>
      <tr>
        <th>Percentages:</th>
        <td>logical-width of containing block</td>
      </tr>
      <tr>
        <th>Media:</th>
        <td>visual</td>
      </tr>
      <tr>
        <th>Computed&#160;value:</th>
        <td>absolute length; '0' if the border style is 'none' or 'hidden' (see text)</td>
      </tr>
    </tbody>
  </table>

  <table class="propdef">
    <tbody>
      <tr>
        <th>Name:</th>
        <td><dfn>border-before-style</dfn>, <dfn>border-after-style</dfn>, <dfn>border-start-style</dfn>, <dfn>border-end-style</dfn></td>
      </tr>
      <tr>
        <th>Value:</th>
        <td><var>&lt;border-style&gt;</var></td>
      </tr>
      <tr>
        <th>Initial:</th>
        <td>none</td>
      </tr>
      <tr>
        <th>Applies to:</th>
        <td>all elements</td>
      </tr>
      <tr>
        <th>Inherited:</th>
        <td>no</td>
      </tr>
      <tr>
        <th>Percentages:</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>Media:</th>
        <td>visual</td>
      </tr>
      <tr>
        <th>Computed&#160;value:</th>
        <td>specified value (see text)</td>
      </tr>
    </tbody>
  </table>

  <table class="propdef">
    <tbody>
      <tr>
        <th>Name:</th>
        <td><dfn>border-before-color</dfn>, <dfn>border-after-color</dfn>, <dfn>border-start-color</dfn>, <dfn>border-end-color</dfn></td>
      </tr>
      <tr>
        <th>Value:</th>
        <td><var>&lt;color&gt;</var></td>
      </tr>
      <tr>
        <th>Initial:</th>
        <td>currentcolor</td>
      </tr>
      <tr>
        <th>Applies to:</th>
        <td>all elements</td>
      </tr>
      <tr>
        <th>Inherited:</th>
        <td>no</td>
      </tr>
      <tr>
        <th>Percentages:</th>
        <td>N/A</td>
      </tr>
      <tr>
        <th>Media:</th>
        <td>visual</td>
      </tr>
      <tr>
        <th>Computed&#160;value:</th>
        <td>the computed color (see text)</td>
      </tr>
    </tbody>
  </table>

  <table class="propdef">
    <tbody>
      <tr>
        <th>Name:</th>
        <td><dfn>border-before</dfn>, <dfn>border-after</dfn>, <dfn>border-start</dfn>, <dfn>border-end</dfn></td>
      </tr>
      <tr>
        <th>Value:</th>
        <td><var>&lt;border-width&gt;</var> || <var>&lt;border-style&gt;</var> || <var>&lt;color&gt;</var></td>
      </tr>
      <tr>
        <th>Initial:</th>
        <td>(see individual properties)</td>
      </tr>
      <tr>
        <th>Applies to:</th>
        <td>all elements</td>
      </tr>
      <tr>
        <th>Inherited:</th>
        <td>no</td>
      </tr>
      <tr>
        <th>Percentages:</th>
        <td>see individual properties</td>
      </tr>
      <tr>
        <th>Media:</th>
        <td>visual</td>
      </tr>
      <tr>
        <th>Computed&#160;value:</th>
        <td>see individual properties </td>
      </tr>
    </tbody>
  </table>

  <table class="propdef">
    <tbody>
      <tr>
        <th>Name:</th>
        <td><dfn>logical-width</dfn>, <dfn>logical-height</dfn></td>
      </tr>
      <tr>
        <th>Value:</th>
        <td><var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var> | auto</td>
      </tr>
      <tr>
        <th>Initial:</th>
        <td>auto</td>
      </tr>
      <tr>
        <th>Applies to:</th>
        <td>same as 'width' and 'height'</td>
      </tr>
      <tr>
        <th>Inherited:</th>
        <td>no</td>
      </tr>
      <tr>
        <th>Percentages:</th>
        <td>logical-width, resp. logical-height of containing block</td>
      </tr>
      <tr>
        <th>Media:</th>
        <td>visual</td>
      </tr>
      <tr>
        <th>Computed&#160;value:</th>
        <td>the percentage as specified or the absolute length or 'auto' (see text)</td>
      </tr>
    </tbody>
  </table>

  <table class="propdef">
    <tbody>
      <tr>
        <th>Name:</th>
        <td><dfn>min-logical-width</dfn>, <dfn>min-logical-height</dfn></td>
      </tr>
      <tr>
        <th>Value:</th>
        <td><var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var></td>
      </tr>
      <tr>
        <th>Initial:</th>
        <td>0</td>
      </tr>
      <tr>
        <th>Applies to:</th>
        <td>same as 'width' and 'height'</td>
      </tr>
      <tr>
        <th>Inherited:</th>
        <td>no</td>
      </tr>
      <tr>
        <th>Percentages:</th>
        <td>logical-width, resp. logical-height of containing block</td>
      </tr>
      <tr>
        <th>Media:</th>
        <td>visual</td>
      </tr>
      <tr>
        <th>Computed&#160;value:</th>
        <td>the percentage as specified or the absolute length (see text)</td>
      </tr>
    </tbody>
  </table>

  <table class="propdef">
    <tbody>
      <tr>
        <th>Name:</th>
        <td><dfn>max-logical-width</dfn>, <dfn>max-logical-height</dfn></td>
      </tr>
      <tr>
        <th>Value:</th>
        <td><var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var> | none</td>
      </tr>
      <tr>
        <th>Initial:</th>
        <td>none</td>
      </tr>
      <tr>
        <th>Applies to:</th>
        <td>same as 'width' and 'height'</td>
      </tr>
      <tr>
        <th>Inherited:</th>
        <td>no</td>
      </tr>
      <tr>
        <th>Percentages:</th>
        <td>logical-width, resp. logical-height of containing block</td>
      </tr>
      <tr>
        <th>Media:</th>
        <td>visual</td>
      </tr>
      <tr>
        <th>Computed&#160;value:</th>
        <td>the percentage as specified or the absolute length or 'none' (see text)</td>
      </tr>
    </tbody>
  </table>

  <p>These properties are writing-mode relative (logical) equivalents of the corresponding physical properties.</p>
  <p>The mappings of logical properties into physical properties are as follows:<p>

  <div class="figure">
    <table border="1" style="border-collapse: collapse" cellpadding="0" cellspacing="0" width="100%">
      <tr>
        <th rowspan="2">logical properties</th>
        <th colspan="6">corresponding physical properties for each writing-mode</th>
      </tr>
      <tr>
        <th>lr-tb</th>
        <th>rl-tb</th>
        <th>tb-rl</th>
        <th>bt-rl</th>
        <th>tb-lr</th>
        <th>bt-lr</th>
      </tr>
      <tr>
        <td>margin-before</td>
        <td>margin-top</td>
        <td>margin-top</td>
        <td>margin-right</td>
        <td>margin-right</td>
        <td>margin-left</td>
        <td>margin-left</td>
      </tr>
      <tr>
        <td>margin-after</td>
        <td>margin-bottom</td>
        <td>margin-bottom</td>
        <td>margin-left</td>
        <td>margin-left</td>
        <td>margin-right</td>
        <td>margin-right</td>
      </tr>
      <tr>
        <td>margin-start</td>
        <td>margin-left</td>
        <td>margin-right</td>
        <td>margin-top</td>
        <td>margin-bottom</td>
        <td>margin-top</td>
        <td>margin-bottom</td>
      </tr>
      <tr>
        <td>margin-end</td>
        <td>margin-right</td>
        <td>margin-left</td>
        <td>margin-bottom</td>
        <td>margin-top</td>
        <td>margin-bottom</td>
        <td>margin-top</td>
      </tr>
      <tr>
        <td>padding-*, border-*</td>
        <td colspan="6">(similar with margin-*)</td>
      </tr>
      <tr>
        <td>logical-width</td>
        <td colspan="2">width</td>
        <td colspan="4">height</td>
      </tr>
      <tr>
        <td>logical-height</td>
        <td colspan="2">height</td>
        <td colspan="4">width</td>
      </tr>
      <tr>
        <td>min-logical-width</td>
        <td colspan="2">min-width</td>
        <td colspan="4">min-height</td>
      </tr>
      <tr>
        <td>min-logical-height</td>
        <td colspan="2">min-height</td>
        <td colspan="4">min-width</td>
      </tr>
      <tr>
        <td>max-logical-width</td>
        <td colspan="2">max-width</td>
        <td colspan="4">max-height</td>
      </tr>
      <tr>
        <td>max-logical-height</td>
        <td colspan="2">max-height</td>
        <td colspan="4">max-width</td>
      </tr>
    </table>
  </div>

  <p>The computed value of a logical property affects the computed value of the corresponding physical property, and vice versa.</p>
  <p>For example, if the writing-mode of the element is lr-tb, the computed value of the 'margin-before' overrides the 'margin-top'.</p>
  <p>If both logical and physical properties are specified on the same element, these corresponding properties are treated as same property and then normal cascading rules are applied.</p>
  <p>The writing-mode value of the element is used for the mapping of corresponding properties and therefore must be evaluated first.</p>

<h3 id="logical-value">Logical property values: before, after, start, end</h3>

  <p>Properties that accept physical directional values (top, bottom, left, right), should also accept logical directional values (before, after, start, end). In such case, the logical values are treated as corresponding physical values. The writing-mode value of the element is used for the the mapping of logical into physical values and therefore must be evaluated first.</p>

  <p>The following properties (but not limited to) are applicable to this case:</p>
  
  <ul>
    <li>'float'</li>
    <li>'clear'</li>
    <li>'background-position'</li>
    <li>'text-align'</li>
  </ul>

</body>
</html>
