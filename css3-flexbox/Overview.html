<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>
 <head>
  <title>Flexible Box Layout Module</title>
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel=stylesheet
  type="text/css">
  <!-- TODO: remove before build -->
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel=stylesheet
  type="text/css">
  <link href="../default.css" rel=stylesheet type="text/css">

  <style type="text/css">
.style1 {
	background-color: #FFFF00;
}
</style>

 <body>
  <div class=head>
   <h1 id=head-box-flexible>Flexible Box Layout Module</h1>

   <h2 class="no-num no-toc" id=w3c-working>Editor's Draft, 15 January 2011</h2>

   <dl>
    <dt>This version:

    <dd><!-- <a href="http://www.w3.org/TR/2011/WD-css3-flexbox-20110115/">http://www.w3.org/TR/2011/WD-css3-flexbox-20110115/</a></dd> -->
     <a
     href="http://dev.w3.org/csswg/css3-flexbox/">http://dev.w3.org/csswg/css3-flexbox/</a>
     

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css3-flexbox/">http://www.w3.org/TR/css3-flexbox/</a>
     

    <dt>Editors:

    <dd>Tab Atkins Jr. <a
     href="mailto:jackalmage@gmail.com">jackalmage@gmail.com</a>

    <dd>Alex Mogilevsky <a
     href="mailto:alexmog@microsoft.com">alexmog@microsoft.com</a>

    <dd>L. David Baron, Mozilla Corporation, <a
     href="mailto:dbaron@dbaron.org">dbaron@dbaron.org</a>

    <dt>Authors and former editors:

    <dd>Neil Deakin, Mozilla Corporation, <a
     href="mailto:enndeakin@gmail.com">enndeakin@gmail.com</a>

    <dd>Ian Hickson, formerly of Opera Software, <a
     href="mailto:ian@hixie.ch">ian@hixie.ch</a>

    <dd>David Hyatt, Apple, <a
     href="mailto:hyatt@apple.com">hyatt@apple.com</a>
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> &copy; 2011 <a
    href="http://www.w3.org/"><acronym title="World Wide Web
    Consortium">W3C</acronym></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute
    of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym
    title="European Research Consortium for Informatics and
    Mathematics">ERCIM</acronym></a>, <a
    href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright--></div>

  <hr>

  <div>
   <h2 class="no-num no-toc" id=abstract>Abstract</h2>

   <p>The draft describes a CSS box model optimized for interface design. It
    provides an additional layout system alongside the ones already in CSS.
    <a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a> In this new
    box model, the children of a box are laid out either horizontally or
    vertically, and unused space can be assigned to a particular child or
    distributed among the children by assignment of "flex" to the children
    that should expand. Nesting of these boxes (horizontal inside vertical,
    or vertical inside horizontal) can be used to build layouts in two
    dimensions. This model is based on the box model in the XUL
    user-interface language used for the user interface of many Mozilla-based
    applications (such as Firefox).</p>
  </div>

  <div>
   <h2 class="no-num no-toc" id=table>Table of contents</h2>
   <!--begin-toc-->
   <ul class=toc>
    <li><a href="#overview"><span class=secno>1. </span>Overview</a>

    <li><a href="#display-flexbox"><span class=secno>2. </span>New values for
     &lsquo;<code class=property>display</code>&rsquo; property</a>

    <li><a href="#flex-direction"><span class=secno>3. </span>Flexbox
     Direction: the &lsquo;<code class=property>flex-direction</code>&rsquo;
     property</a>

    <li><a href="#flex-order"><span class=secno>4. </span>Display Order: the
     &lsquo;<code class=property>flex-order</code>&rsquo; property</a>

    <li><a href="#flex"><span class=secno>5. </span>Flexibility: the
     &lsquo;<code class=property>flex</code>&rsquo; property</a>

    <li><a href="#flex-align"><span class=secno>6. </span>Alignment: the
     &lsquo;<code class=property>flex-align</code>&rsquo; property</a>

    <li><a href="#packing-along-the-box-axis"><span class=secno>7.
     </span>Packing along the box axis</a>

    <li><a href="#free-space-algorithm"><span class=secno>8. </span>Free
     Space Calculation and Distribution</a>

    <li><a href="#inlinesAndBlocks"><span class=secno>9. </span>Relationship
     to Inlines and blocks</a>

    <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

    <li class=no-num><a href="#references">References</a>
     <ul class=toc>
      <li class=no-num><a href="#normative">Normative references</a>
     </ul>

    <li class=no-num><a href="#index">Index</a>

    <li class=no-num><a href="#property">Property index</a>
   </ul>
   <!--end-toc--></div>

  <hr>

  <div>
   <h2 id=overview><span class=secno>1. </span>Overview</h2>

   <p>CSS 2.1 defined three layout modes, algorithms which determine the size
    and position of boxes based on their relationships with their sibling and
    ancestor boxes: normal layout, designed for laying out documents and
    simple applications, table layout, designed for laying out information in
    a tabular format, and positioned layout, designed for very explicit
    positioning without much regard for other elements in the document. This
    module introduces a new layout mode, flexbox layout, which is designed
    for laying out more complex applications and webpages.</p>

   <p>In CSS, flexboxes may be created by setting the &lsquo;<code
    class=property>display</code>&rsquo; property. A block-level flexbox can
    be specified with a value of &lsquo;<code class=css>flexbox</code>&rsquo;
    and an inline flexbox can be specified using a value of &lsquo;<code
    class=css>inline-flexbox</code>&rsquo;. A block-level flexbox placed
    inside a block level element is positioned and sized as if it were any
    other block. An inline-level flexbox placed inside another element is
    positioned and sized like an inline-block.</p>

   <p class=issue>It's expected that the &lsquo;<code
    class=property>display</code>&rsquo; property will be split into
    &lsquo;<code class=property>display-inside</code>&rsquo; and &lsquo;<code
    class=property>display-outside</code>&rsquo; subproperties to specify,
    respectively, how elements layout themselves and their children, and how
    they are laid out by their parents. Once this happens, we can cut this
    down to merely &lsquo;<code
    class=css>display-inside:flexbox</code>&rsquo;, and let people set
    &lsquo;<code class=property>display-outside</code>&rsquo; to &lsquo;<code
    class=css>block</code>&rsquo; or &lsquo;<code
    class=css>inline</code>&rsquo; as they wish, or even &lsquo;<code
    class=css>table-cell</code>&rsquo;.</p>

   <p>Inline children of a flexbox are wrapped in anonymous blocks. All other
    children are block-level. These anonymous blocks or block-level boxes are
    referred to as &lsquo;<code class=css>flexbox children</code>&rsquo; in
    this specification.</p>

   <p>Flexbox children may specify their width and height using the
    &lsquo;<code class=property>width</code>&rsquo; and &lsquo;<code
    class=property>height</code>&rsquo; properties. The width and height of
    replaced elements is computed as with replaced elements in inline
    contexts. Otherwise, if the width is set to &lsquo;<code
    class=css>auto</code>&rsquo;, then the used value is the intrinsic size,
    which may be calculated using a shrink-to-fit algorithm, as with
    inline-block elements, i.e., it will be given the minimum amount of space
    required to lay out the element without unnecessary line breaks.
    Similarly, if the height is set to &lsquo;<code
    class=css>auto</code>&rsquo;, then the used value in a similar manner.</p>

   <p>An unnested flexbox placed inside an enclosing block will obey all the
    usual sizing rules of the block. For example, setting the width of an
    unnested flexbox to 100% ensures that the flexbox is the maximum width
    permitted by the enclosing block (ignoring any margins, border and
    padding on that box).</p>

   <p>The difference between flexboxes and blocks is in how the children of
    the element are laid out. Flexbox children are all block-level
    (inline-level contents get wrapped in anonymous blocks). These blocks
    then get stacked in the direction specified by the &lsquo;<a
    href="#flex-direction0"><code
    class=property>flex-direction</code></a>&rsquo; property and order
    specified by the &lsquo;<a href="#flex-order0"><code
    class=property>flex-order</code></a>&rsquo; property. They are aligned
    within the box according to their margins and the &lsquo;<a
    href="#flex-align0"><code class=property>flex-align</code></a>&rsquo;
    property. The flexbox children may then flex or be distributed as
    specified by their margins, the &lsquo;<a href="#flex0"><code
    class=property>flex</code></a>&rsquo; property, and the &lsquo;<code
    class=property>flex-pack</code>&rsquo; property.</p>

   <p>

   <p>The &lsquo;<code class=property>float</code>&rsquo; and &lsquo;<code
    class=property>clear</code>&rsquo; properties do not apply to flexbox
    children, so the used value of these properties is &lsquo;<code
    class=css>none</code>&rsquo;. Similarly, none of the properties defined
    in the CSS Multicol module apply to flexboxes or flexbox children, so the
    used value of all such properties is the initial value.</p>

   <div class=example>
    <p>For example:</p>

    <pre class=html>
&lt;p style="width: 400px; display: flexbox;">
	&lt;button style="width: 200px;">Child 1&lt;/button>
	&lt;button style="width: 100px;">Child 2&lt;/button>
&lt;/p>
		</pre>

    <p>In this example, the first button is 200 pixels wide and the second
     button is 100 pixels wide. As the flexbox is 400 pixels wide, there is
     extra space left over which is placed after the two buttons but inside
     the flexbox. The placement of this extra space may be modified using the
     various flex properties described in the next sections. Neither the
     height of the buttons nor the height of the flexbox are specified, so
     the height is computed intrinsically from the content. In this case, the
     buttons will be the height needed to display the label and button
     border, and the flexbox will also be this height plus any margins around
     the buttons.</p>
   </div>

   <p>Elements within a box may use the &lsquo;<code
    class=property>overflow</code>&rsquo; property to control whether a
    scrolling mechanism appears when the children of a box overflow. A
    scrolling mechanism may be displayed when flexible elements are reduced
    below their minimum intrinsic size when the overflow property is set to
    &lsquo;<code class=css>auto</code>&rsquo; or &lsquo;<code
    class=css>scroll</code>&rsquo;. If &lsquo;<code
    class=property>overflow</code>&rsquo; is &lsquo;<code
    class=css>hidden</code>&rsquo;, the element will be clipped instead.
    <em>Note that the initial value is &lsquo;<code
    class=css>visible</code>&rsquo;, which is typically not the preferred
    effect in user interfaces.</em></p>
  </div>
  <!-- ====================================================================== -->

  <div>
   <h2 id=display-flexbox><span class=secno>2. </span>New values for
    &lsquo;<code class=property>display</code>&rsquo; property</h2>

   <table class=propdef>
    <tbody>
     <tr>
      <th>Name:

      <td>display

     <tr>
      <th>New value:

      <td>flexbox
   </table>

   <p>You can declare that an element is a flexbox, and thus should use
    flexbox layout, by setting the &lsquo;<code
    class=property>display</code>&rsquo; property on the element to the value
    &lsquo;<code class=css>flexbox</code>&rsquo;.</p>

   <p>All children of a flexbox must be block-level or atomic inline-level
    elements. Contiguous runs of non-replaced inline elements are wrapped in
    an anonymous block-level box. Out-of-flow elements (such as absolutely
    positioned elements - floats are also out-of-flow but can't exist as
    flexbox children) leave behind a "placeholder" in their original source
    location which is treated like a non-replaced inline element for the
    purpose of this wrapping. (This can, for example, create an empty flexbox
    child, if all the children are block-level elements and one is absolutely
    positioned.) It is recommended that authors avoid putting in elements
    which are auto-wrapped with anonymous boxes, as the anonymous boxes
    cannot be targetted and controlled with the various flexbox properties
    defined in later sections.</p>

   <p>A flexbox child creates a new BFC. The margins of a flexbox child do
    not collapse with any other margin.</p>

   <p>Setting &lsquo;<code class=css>display:flexbox</code>&rsquo; on an
    element forces it to use a new layout algorithm, and so some properties
    that were designed with the assumption of "normal" flow don't make sense
    in a flexbox context. In particular:</p>

   <ul>
    <li>all of the &lsquo;<code class=css>column-*</code>&rsquo; properties
     in the Multicol module compute to their initial values on a flexbox
     (&lsquo;<code class=property>break-before</code>&rsquo;, &lsquo;<code
     class=property>break-inside</code>&rsquo;, and &lsquo;<code
     class=property>break-after</code>&rsquo; are still valid on a flexbox).

    <li>&lsquo;<code class=property>float</code>&rsquo; and &lsquo;<code
     class=property>clear</code>&rsquo; compute to their initial values on a
     flexbox child

    <li class=issue>[Others?]
   </ul>
  </div>
  <!-- ====================================================================== -->

  <div>
   <h2 id=flex-direction><span class=secno>3. </span>Flexbox Direction: the
    &lsquo;<a href="#flex-direction0"><code
    class=property>flex-direction</code></a>&rsquo; property</h2>

   <table class=propdef>
    <tbody>
     <tr>
      <th>Name:

      <td><dfn id=flex-direction0>flex-direction</dfn>

     <tr>
      <th>Values:

      <td>lr | rl | tb | bt | inline | inline-reverse | block | block-reverse
       

     <tr>
      <th>Initial:

      <td>inline

     <tr>
      <th>Applies To:

      <td>flexboxes

     <tr>
      <th>Inherited:

      <td>no

     <tr>
      <th>Computed Value:

      <td>See text

     <tr>
      <th>Media:

      <td>visual
   </table>

   <p>The &lsquo;<code class=property>flexbox-direction</code>&rsquo;
    property specifies how flexbox children are placed on each line of the
    flexbox. A value of &lsquo;<code class=css>lr</code>&rsquo; means that
    the first flexbox child is placed against the left edge of the flexbox,
    with later children placed immediately to the right of the preceding
    flexbox child. A value of &lsquo;<code class=css>rl</code>&rsquo; is the
    same, but with the initial flexbox child placed against the right edge of
    the flexbox and later children placed to the left. Both of these values
    mean that the flexbox is a <dfn id=horizontal-flexbox>horizontal
    flexbox</dfn>. A value of &lsquo;<code class=css>tb</code>&rsquo; means
    that the first flexbox child is placed against the top edge of the
    flexbox, with later children placed immediately below it, while
    &lsquo;<code class=css>bt</code>&rsquo; means the first child is placed
    against the bottom edge of the flexbox, with later children placed
    immediately above it. Both of these values mean that the flexbox is a
    <dfn id=vertical-flexbox>vertical flexbox</dfn>.</p>

   <p>A value of &lsquo;<code class=css>inline</code>&rsquo; computes to one
    of &lsquo;<code class=css>lr</code>&rsquo;, &lsquo;<code
    class=css>rl</code>&rsquo;, &lsquo;<code class=css>tb</code>&rsquo;, or
    &lsquo;<code class=css>bt</code>&rsquo;, depending on the direction and
    block-flow of the flexbox: if the start side of the flexbox is the left
    side, &lsquo;<code class=css>inline</code>&rsquo; must compute to
    &lsquo;<code class=css>lr</code>&rsquo;; similarly, if the start side of
    the flexbox is the right, top, or bottom side, &lsquo;<code
    class=css>inline</code>&rsquo; must compute to &lsquo;<code
    class=css>rl</code>&rsquo;, &lsquo;<code class=css>tb</code>&rsquo;, or
    &lsquo;<code class=css>bt</code>&rsquo; respectively. &lsquo;<code
    class=css>inline-reverse</code>&rsquo;, &lsquo;<code
    class=css>block</code>&rsquo;, and &lsquo;<code
    class=css>block-reverse</code>&rsquo; determine their computed value
    identically to &lsquo;<code class=css>inline</code>&rsquo;, but use the
    location of the end side, before side, and after side of the flexbox,
    respectively.</p>

   <div class=example>
    <p>A vertical flexbox can be used to emulate the functionality of HTML's
     &lsquo;<code class=css>&lt;center></code>&rsquo; element:</p>

    <pre>
&lt;div>
	&lt;span>foo foo foo foo&lt;/span>
	&lt;span>bar bar&lt;br>bar bar&lt;/span>
	&lt;span>foo foo foo foo foo foo foo foo foo foo foo foo&lt;/span>
&lt;/div>
&lt;style>
	div {
		display: flexbox;
		flex-direction: tb;
		width: 200px;
	}
	span {
		margin: 0 auto;
	}
&lt;/style>
		</pre>

    <p><img alt="" src="images/basic-vertical-flexbox.png"></p>
   </div>

   <p>In the rest of this specification, the direction in which new flexbox
    children are laid out will be referred to as the <dfn
    id=layout-direction>layout direction</dfn> (if a precise direction is
    required) or the <dfn id=layout-axis>layout axis</dfn> (if only the axis
    orientiation is required).</p>

   <p>The axis perpendicular to the &lsquo;<a href="#layout-axis"><code
    class=css>layout axis</code></a>&rsquo; will be refered to as the <dfn
    id=transverse-axis>transverse axis</dfn>, with the <dfn
    id=transverse-direction>transverse direction</dfn> being either a line
    extending from the &lsquo;<code class=css>before</code>&rsquo; side of
    the flexbox to the &lsquo;<code class=css>after</code>&rsquo; side, or
    from the &lsquo;<code class=css>start</code>&rsquo; side of the flexbox
    to the &lsquo;<code class=css>end</code>&rsquo; side, whichever would
    produce a direction parallel to the &lsquo;<a
    href="#transverse-axis"><code class=css>transverse
    axis</code></a>&rsquo;.</p>

   <p>Similarly, the <dfn id=layout-size>layout size</dfn> is the width of
    the flexbox child in a horizontal flexbox, or the height in a vertical
    flexbox. The <dfn id=transverse-size>transverse size</dfn> is the height
    of the flexbox child in a horizontal flexbox, or the width in a vertical
    flexbox.</p>
  </div>
  <!-- ====================================================================== -->

  <div>
   <h2 id=flex-order><span class=secno>4. </span>Display Order: the &lsquo;<a
    href="#flex-order0"><code class=property>flex-order</code></a>&rsquo;
    property</h2>

   <p>Flexbox children are, by default, displayed and laid out in the same
    order as they appear in the source document. The &lsquo;<a
    href="#flex-order0"><code class=property>flex-order</code></a>&rsquo;
    property may be used to change this ordering.</p>

   <table class=propdef>
    <tbody>
     <tr>
      <th>Name:

      <td><dfn id=flex-order0>flex-order</dfn>

     <tr>
      <th>Value:

      <td>&lt;integer>

     <tr>
      <th>Initial:

      <td>1

     <tr>
      <th>Applies to:

      <td>flexbox children

     <tr>
      <th>Inherited:

      <td>no

     <tr>
      <th>Computed value:

      <td>specified value

     <tr>
      <th>Media:

      <td>visual
   </table>

   <p class=issue>Maybe name this &lsquo;<code
    class=property>flex-index</code>&rsquo; instead, to be consistent with
    &lsquo;<code class=property>z-index</code>&rsquo;.</p>

   <p>Flexbox children may be assigned to &lsquo;<code class=css>ordinal
    groups</code>&rsquo; using the &lsquo;<a href="#flex-order0"><code
    class=property>flex-order</code></a>&rsquo; property. This property is an
    integer with an initial value of 1.</p>

   <p>Ordinal groups control the order in which flexbox children appear. A
    flexbox will lay out its children starting from the lowest numbered
    ordinal group and going up. Elements with the same ordinal group are laid
    out in the order they appear in the source document.

   <div class=example>
    <p>This example shows how ordinal groups might be used.</p>

    <pre><code>
	div { display: flexbox; }
	#span1 { flex-order: 2; }
	#span3 { flex-order: 2; }
	#span4 { flex-order: 1; }

	&lt;div>
		&lt;span id="span1">span1&lt;/span>
		&lt;span id="span2">span2&lt;/span>
		&lt;span id="span3">span3&lt;/span>
		&lt;span id="span4">span4&lt;/span>
	&lt;/div></code></pre>

    <p>The first ordinal group, 1, contains span2 and span4. As span2 does
     not specify an ordinal group, it will default to 1. The elements will be
     displayed in document order, so span2 will be displayed before span4.
     The second ordinal group, 2, contains the remaining two spans. The
     resulting display order will be:</p>

    <pre><code>span2 span4 span1 span3</code></pre>
   </div>
  </div>
  <!-- ====================================================================== -->

  <div>
   <h2 id=flex><span class=secno>5. </span>Flexibility: the &lsquo;<a
    href="#flex0"><code class=property>flex</code></a>&rsquo; property</h2>

   <p>Each flexbox child may be made either &lsquo;<a href="#flexible"><code
    class=css>flexible</code></a>&rsquo; or &lsquo;<code
    class=css>inflexible</code>&rsquo;. Flexible elements may grow when the
    flexbox has extra space available after the size of all the flexbox
    children have been computed, or shrink if the combined size of all the
    flexbox children would cause the flexbox to overflow. Inflexible elements
    do not change size, even when there it too much or too little space left
    over in the flexbox.</p>

   <p>When figuring out how large a flexible flexbox child is, CSS starts
    with the flexbox child's <dfn id=preferred-size>preferred size</dfn>,
    which is simply the size specified in the &lsquo;<code
    class=property>width</code>&rsquo; or &lsquo;<code
    class=property>height</code>&rsquo; property. It then grows or shrinks
    that size based on the available free space and the flexbox child's
    relative flexibility.</p>

   <p>The flexibility defined in this section only affects the size of
    flexbox child in the &lsquo;<a href="#layout-axis"><code class=css>layout
    axis</code></a>&rsquo;. (That is, it only affects the width of a flexbox
    child in a horizontal flexbox, or the height in a vertical flexbox.)</p>

   <table class=propdef>
    <tbody>
     <tr>
      <th>Name:

      <td><dfn id=flex-grow>flex-grow</dfn>

     <tr>
      <th>Value:

      <td>&lt;number>

     <tr>
      <th>Initial:

      <td>0.0

     <tr>
      <th>Applies to:

      <td>flexbox children

     <tr>
      <th>Inherited:

      <td>no

     <tr>
      <th>Computed Value:

      <td>specified value

     <tr>
      <th>Media:

      <td>visual
   </table>

   <table class=propdef>
    <tbody>
     <tr>
      <th>Name:

      <td><dfn id=flex-shrink>flex-shrink</dfn>

     <tr>
      <th>Value:

      <td>&lt;number>

     <tr>
      <th>Initial:

      <td>0.0

     <tr>
      <th>Applies to:

      <td>flexbox children

     <tr>
      <th>Inherited:

      <td>no

     <tr>
      <th>Computed Value:

      <td>specified value

     <tr>
      <th>Media:

      <td>visual
   </table>

   <p>An element is <dfn id=flexible>flexible</dfn> when the &lsquo;<a
    href="#flex-grow"><code class=property>flex-grow</code></a>&rsquo; or
    &lsquo;<a href="#flex-shrink"><code
    class=property>flex-shrink</code></a>&rsquo; property is non-zero. These
    properties are floating point values representing the flexibility of the
    flexbox child when the flexbox children are too small or too large,
    respectively, for the flexbox. When there is extra space left over in a
    flexbox, the flexible elements with a non-zero &lsquo;<a
    href="#flex-grow"><code class=property>flex-grow</code></a>&rsquo; are
    expanded to fill that space. When a flexbox's contents would overflow the
    flexbox, the flexible elements with a non-zero &lsquo;<a
    href="#flex-shrink"><code class=property>flex-shrink</code></a>&rsquo;
    are shrunk to keep the contents from overflowing.</p>

   <p>All flexibility is relative. For example, a flexbox child with a
    &lsquo;<a href="#flex-grow"><code
    class=property>flex-grow</code></a>&rsquo; of 2 is twice as flexible (and
    thus will absorb twice as much free space) as a flexbox child with a
    &lsquo;<a href="#flex-grow"><code
    class=property>flex-grow</code></a>&rsquo; of 1.</p>

   <p>Both &lsquo;<a href="#flex-grow"><code
    class=property>flex-grow</code></a>&rsquo; and &lsquo;<a
    href="#flex-shrink"><code class=property>flex-shrink</code></a>&rsquo;
    must be non-negative. A negative value for either property is a syntax
    error.</p>

   <p>The precise details of how flexibility is treated are defined in a
    later section of this specification. Generally, flexbox children compute
    their &lsquo;<a href="#preferred-size"><code class=css>preferred
    size</code></a>&rsquo; in the &lsquo;<a href="#layout-axis"><code
    class=css>layout axis</code></a>&rsquo;, which is then summed between all
    the flexbox children and subtracted from the size of the flexbox in the
    &lsquo;<a href="#layout-axis"><code class=css>layout
    axis</code></a>&rsquo;. If the resultant value is positive, there is free
    space left over, and it is apportioned out to each flexbox child relative
    to their &lsquo;<a href="#flex-grow"><code
    class=property>flex-grow</code></a>&rsquo; value, so that their actual
    size is their &lsquo;<a href="#preferred-size"><code class=css>preferred
    size</code></a>&rsquo; plus their portion of the free space. If the
    resultant value is negative, the flexbox's contents would overflow, and
    so each flexbox child has its size reduced relative to its &lsquo;<a
    href="#flex-shrink"><code class=property>flex-shrink</code></a>&rsquo;
    value so that the flexbox's contents fit in the flexbox without
    overflowing.</p>

   <p>Margins and paddings can take up the free space as well. If a margin or
    padding in the &lsquo;<a href="#layout-axis"><code class=css>layout
    axis</code></a>&rsquo; is &lsquo;<code class=css>auto</code>&rsquo;,
    they'll take up free space as if they had a flexibility of 1 and started
    from a size of 0. Because their size starts at 0, they don't participate
    in shrinking calculations.

   <table class=propdef>
    <tbody>
     <tr>
      <th>Name:

      <th><dfn id=flex0>flex</dfn>

     <tr>

     <tr>
   </table>

   <p>Value:

   <table>
    <tbody>
     <tr>
      <td>&lt;number> &lt;number>?

     <tr>
      <th>Initial:

      <td>0.0

     <tr>
      <th>Inherited:

      <td>no

     <tr>
      <th>Computed Value:

      <td>specified value

     <tr>
      <th>Media:

      <td>visual
   </table>

   <p>The &lsquo;<a href="#flex0"><code class=property>flex</code></a>&rsquo;
    property is a shorthand that can set both &lsquo;<a
    href="#flex-grow"><code class=property>flex-grow</code></a>&rsquo; and
    &lsquo;<a href="#flex-shrink"><code
    class=property>flex-shrink</code></a>&rsquo; at the same time. It accepts
    one or two numbers, which must be non-negative. Negative numbers are a
    syntax error.</p>

   <p>If a single number is given, both &lsquo;<a href="#flex-grow"><code
    class=property>flex-grow</code></a>&rsquo; and &lsquo;<a
    href="#flex-shrink"><code class=property>flex-shrink</code></a>&rsquo;
    are set to that value. If two numbers are given, &lsquo;<a
    href="#flex-grow"><code class=property>flex-grow</code></a>&rsquo; is set
    to the first value and &lsquo;<a href="#flex-shrink"><code
    class=property>flex-shrink</code></a>&rsquo; is set to the second.</p>

   <div class=example>
    <p class=issue>TODO: Add examples.</p>
   </div>
   <!--
If the size in the layout axis is computed first, then 'auto' resolves as 'fit-content'.
Do the flexing calculations, set real size, then calculate the size in the transverse
axis using this size.  Do flexing calcs in the transverse axis.

If the size in the layout axis is computed second, then resolve the size in the 
transverse axis with as 'fit-content', and using this, determine the size in the layout
axis.  Do the flexing calculations, set real size.  Continue using the same value
previously determined to do flexing in the transverse axis.
-->
   
   <div class=issue>
    <p>Somewhat concerned here. The way it works right now is that
     &lsquo;<code class=property>width</code>&rsquo; sets the preferred
     width, and &lsquo;<a href="#flex0"><code
     class=property>flex</code></a>&rsquo; determines how the preferred width
     changes in response to free space.</p>

    <p>Many people seem to find this unintuitive, though. We can prevent this
     from being a problem in common cases by, frex, making &lsquo;<code
     class=css>width:auto</code>&rsquo; give a preferred width of
     &lsquo;<code class=css>min-content</code>&rsquo;, but should we solve
     this more directly? It appears that forcing absolute flex through
     setting "width:0" is also unintuitive.</p>

    <p>"Fixing" this would probably involve using flex units or perhaps a
     flex() function in &lsquo;<code class=property>width</code>&rsquo; and
     &lsquo;<code class=property>height</code>&rsquo;, so that you specify
     the flexibility and the preferred width at the same time, in the
     seemingly-logical place: the &lsquo;<code
     class=property>width</code>&rsquo; property.</p>
   </div>
  </div>
  <!-- ====================================================================== -->

  <div>
   <h2 id=flex-align><span class=secno>6. </span>Alignment: the &lsquo;<a
    href="#flex-align0"><code class=property>flex-align</code></a>&rsquo;
    property</h2>

   <p>When the size of the flexbox is larger than the size of a child, extra
    space will be available. The &lsquo;<code
    class=property>margin</code>&rsquo;, &lsquo;<code
    class=property>padding</code>&rsquo;, &lsquo;<code
    class=property>width</code>&rsquo;, &lsquo;<code
    class=property>height</code>&rsquo;, and &lsquo;<a
    href="#flex-align0"><code class=property>flex-align</code></a>&rsquo;
    properties specify how a flexbox's children are placed and aligned along
    the &lsquo;<a href="#transverse-axis"><code class=css>transverse
    axis</code></a>&rsquo;, and where the extra space, if any, is positioned.</p>

   <p>The amount of extra space may be different for each flexbox child. For
    example, if a horizontal flexbox has a height of 200px and contains two
    children at heights of 100px and 150px, there will be 100px of extra
    space for the first child and 50px of extra space for the second child.</p>

   <p>As in the previous section, the precise details of the free space
    distribution are detailed in a later section. This section merely gives
    an informative overview of the process.</p>

   <p>The amount of free space is determined by subtracting the &lsquo;<a
    href="#transverse-size"><code class=css>transverse size</code></a>&rsquo;
    of the flexbox child from the size of the flexbox in the same axis. If
    either of the flexbox child's margins are &lsquo;<code
    class=css>auto</code>&rsquo;, they take all of the available free space,
    splitting it equally between them if they are both &lsquo;<code
    class=css>auto</code>&rsquo;. If neither margin is &lsquo;<code
    class=css>auto</code>&rsquo;, but at least one of the &lsquo;<code
    class=property>padding</code>&rsquo; values in the &lsquo;<a
    href="#transverse-axis"><code class=css>transverse axis</code></a>&rsquo;
    are, then the free space is apportioned to the auto padding, again
    splitting the free space equally if both paddings are &lsquo;<code
    class=css>auto</code>&rsquo;. If none of the margins or paddings in the
    &lsquo;<a href="#transverse-axis"><code class=css>transverse
    axis</code></a>&rsquo; are &lsquo;<code class=css>auto</code>&rsquo;, but
    the &lsquo;<code class=property>width</code>&rsquo; or &lsquo;<code
    class=property>height</code>&rsquo; (whichever is in the &lsquo;<a
    href="#transverse-axis"><code class=css>transverse
    axis</code></a>&rsquo;) are, then that size is given all of the free
    space. Finally, if nothing in the &lsquo;<a href="#transverse-axis"><code
    class=css>transverse axis</code></a>&rsquo; is &lsquo;<code
    class=css>auto</code>&rsquo; for the flexbox child, the free space is
    placed after the margin box in the &lsquo;<a
    href="#transverse-direction"><code class=css>transverse
    direction</code></a>&rsquo;.</p>

   <div class=example>
    <p class=issue>Examples go here.</p>
   </div>

   <table class=propdef>
    <tbody>
     <tr>
      <th>Name:

      <td><dfn id=flex-align0>flex-align</dfn>

     <tr>
      <th>Value:

      <td>auto | baseline

     <tr>
      <th>Initial:

      <td>auto

     <tr>
      <th>Applies to:

      <td>flexbox children

     <tr>
      <th>Inherited:

      <td>no

     <tr>
      <th>Computed Value:

      <td>specified value

     <tr>
      <th>Media:

      <td>visual
   </table>

   <p>The &lsquo;<a href="#flex-align0"><code
    class=property>flex-align</code></a>&rsquo; property changes how free
    space is distributed in the &lsquo;<a href="#transverse-axis"><code
    class=css>transverse axis</code></a>&rsquo;. If set to &lsquo;<code
    class=css>auto</code>&rsquo;, this property does nothing special - free
    space distribution proceeds as outlined above.</p>

   <p>However, if &lsquo;<a href="#flex-align0"><code
    class=property>flex-align</code></a>&rsquo; is set to &lsquo;<code
    class=css>baseline</code>&rsquo;, then the distribution of free space is
    changed to try and align the baselines of all flexbox children with
    &lsquo;<code class=css>flex-align: baseline</code>&rsquo;.</p>

   <div class=issue>
    <p>So, I'm not sure what I want to do here. Possibilities include:</p>

    <ol>
     <li>Specify how things changes the resolution of auto
      margin/padding/height

     <li>Move this property up onto the flexbox, where it makes
      <em>everyone</em> baseline-align no matter what, with some switches to
      determine whether the flexbox children stretch or shrink as well.

     <li>Magic?
    </ol>

    <p>I think I like #2. #1 seems complex and tricky. #3 is more difficult
     unless I become a wizard, which isn't in my career plan at the moment.</p>

    <p>I just need more use-case data on exactly what we need baseline
     alignment for.</p>
   </div>
  </div>

  <div>
   <h2 id=packing-along-the-box-axis><span class=secno>7. </span>Packing
    along the box axis</h2>

   <p class=issue>TODO: rewrite this section. The property won't change, it
    just needs reformatting and refreshing.</p>

   <dl>
    <dt>new property

    <dd><code>flex-pack</code>

    <dt>values

    <dd><code>start | end | center | justify</code>

    <dt>default value

    <dd><code>start</code>

    <dt>applies to

    <dd>flexboxes
   </dl>

   <p>The <code>flex-pack</code> property specifies what to do with leftover
    free space if there are no flexible widths or margins, or if all flexible
    widths have grown to their maximum size and there is still space left
    over.</p>

   <p>The <code>start</code> value specifies that flexbox children will be
    packed toward the start of the flexbox (this is not necessarily the
    &lsquo;<code class=property>start</code>&rsquo; logical edge - it's the
    edge of the flexbox that flexbox children are first placed against). That
    is, any leftover free space must be placed at the end of the flexbox.</p>

   <p>Similarly, the <code>end</code> value specifies that flexbox children
    will be packed toward the end of the flexbox (same caveat as above
    applies). That is, leftover free space is placed at the start of the
    flexbox.</p>

   <p>The <code>center</code> value specifies that flexbox children will be
    placed in the center of the flexbox; leftover free space is split equally
    between being placed at the start and end of the flexbox.</p>

   <p>The <code>justify</code> value specifies that flexbox children will be
    spaced evenly in the flexbox; if there are N flexbox children, leftover
    free space is split into N-1 equal parts and inserted between each
    flexbox child. There is no free space placed at the start or the end of
    the flexbox; the first and last flexbox child will be flush with the
    edges of the flexbox.</p>
  </div>

  <div>
   <h2 id=free-space-algorithm><span class=secno>8. </span>Free Space
    Calculation and Distribution</h2>

   <p class=issue>TODO: to be completed. I've done it once before, I just
    need to make the necessary modifications to accomodate the changes, once
    we've decided on what changes to make.</p>
  </div>

  <div>
   <h2 id=inlinesAndBlocks><span class=secno>9. </span>Relationship to
    Inlines and blocks</h2>

   <div class=issue>
    <p>This section seems necessary, but not the precise way it's written. I
     need to identify precisely what data needs to be exposed both by the
     containing layout model (for the flexbox to use) and by the flexbox (for
     the containing layout model to use), and then write that up. Then the
     other layout models we produce can re-use the same template.</p>
   </div>

   <p> A box placed in a block is considered a block level element and will
    be positioned and sized according to the rules for CSS 2.1 (section 10.3
    for widths). Specifically, the following equation applies for calculating
    the width:</p>

   <blockquote>
    <p>&lsquo;<code class=property>margin-left</code>&rsquo; + &lsquo;<code
     class=property>border-left-width</code>&rsquo; + &lsquo;<code
     class=property>padding-left</code>&rsquo; + &lsquo;<code
     class=property>width</code>&rsquo; + &lsquo;<code
     class=property>padding-right</code>&rsquo; + &lsquo;<code
     class=property>border-right-width</code>&rsquo; + &lsquo;<code
     class=property>margin-right</code>&rsquo; + scrollbar width (if any) =
     width of containing block
   </blockquote>

   <p>All children of &lsquo;<code class=property>box</code>&rsquo; elements
    are block-level. If inline-level elements are nested inside boxes, they
    get wrapped in an anonymous block which then takes part in the box
    layout.

   <p> If the width of a child of a flexible box is computed as &lsquo;<code
    class=property>auto</code>&rsquo;, then the used value is the
    shrink-to-fit width. This calculation is done similarly to how the width
    of a floating element is determined. Otherwise if the width has a
    computed value, then that value is used as the width.

   <p> In a horizontally oriented box, the flexibility is then applied which
    may increase or decrease the used width. In a vertically oriented box,
    the position and size of the child may be adjusted by the value of the
    container's <span class=property>&lsquo;<code
    class=property>box-align</code>&rsquo;</span> property.

   <p> The <span class=property>&lsquo;<code
    class=property>min-width</code>&rsquo;</span>, <span
    class=property>&lsquo;<code
    class=property>min-height</code>&rsquo;</span>, <span
    class=property>&lsquo;<code
    class=property>max-width</code>&rsquo;</span>, and <span
    class=property>&lsquo;<code
    class=property>max-height</code>&rsquo;</span> CSS properties act the
    same on boxes as on blocks.

   <p> The height of a child of a flexible box is determined in the same
    manner as specified in the CSS specification. The used height may further
    be adjusted by the container's <span class=property>&lsquo;<code
    class=property>box-align</code>&rsquo;</span> property in a horizontally
    oriented box, or the flexibility in a vertically oriented box.

   <p> Note that it is possible for a horizontally oriented box that the
    height of a flexible child containing an inline descendant will change
    when the flexibility is applied. Similarly, in a vertically oriented box,
    the height of a child may change based on the <span
    class=property>&lsquo;<code class=property>box-align</code>&rsquo;</span>
    property of the box.</p>
  </div>

  <hr title="Separator from footer">

  <h2 class=no-num id=acknowledgments><a
   name=acknowledgments>Acknowledgments</a></h2>

  <p>[This section will contain further acknowledgments.]

  <p>Thanks for feedback from James Elmore and Shinichiro Hamaji.

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative>Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2009/CR-CSS2-20090908"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS 2.1) Specification.</cite></a> 8 September
    2009. W3C Candidate Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2009/CR-CSS2-20090908">http://www.w3.org/TR/2009/CR-CSS2-20090908</a>
    </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>flex, <a href="#flex0" title=flex><strong>5.</strong></a>

   <li>flex-align, <a href="#flex-align0"
    title=flex-align><strong>6.</strong></a>

   <li>flex-direction, <a href="#flex-direction0"
    title=flex-direction><strong>3.</strong></a>

   <li>flex-grow, <a href="#flex-grow"
    title=flex-grow><strong>5.</strong></a>

   <li>flexible, <a href="#flexible" title=flexible><strong>5.</strong></a>

   <li>flex-order, <a href="#flex-order0"
    title=flex-order><strong>4.</strong></a>

   <li>flex-shrink, <a href="#flex-shrink"
    title=flex-shrink><strong>5.</strong></a>

   <li>horizontal flexbox, <a href="#horizontal-flexbox" title="horizontal
    flexbox"><strong>3.</strong></a>

   <li>layout axis, <a href="#layout-axis" title="layout
    axis"><strong>3.</strong></a>

   <li>layout direction, <a href="#layout-direction" title="layout
    direction"><strong>3.</strong></a>

   <li>layout size, <a href="#layout-size" title="layout
    size"><strong>3.</strong></a>

   <li>preferred size, <a href="#preferred-size" title="preferred
    size"><strong>5.</strong></a>

   <li>transverse axis, <a href="#transverse-axis" title="transverse
    axis"><strong>3.</strong></a>

   <li>transverse direction, <a href="#transverse-direction"
    title="transverse direction"><strong>3.</strong></a>

   <li>transverse size, <a href="#transverse-size" title="transverse
    size"><strong>3.</strong></a>

   <li>vertical flexbox, <a href="#vertical-flexbox" title="vertical
    flexbox"><strong>3.</strong></a>
  </ul>
  <!--end-index-->

  <h2 class=no-num id=property>Property index</h2>
  <!--begin-properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies&nbsp;to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
    <tr valign=baseline>
     <td><span class=property>display</span>

     <td>flexbox

    <tr valign=baseline>
     <td><a class=property href="#flex0">flex</a>

    <tr valign=baseline>
     <td><a class=property href="#flex-align0">flex-align</a>

     <td>auto | baseline

     <td>auto

     <td>flexbox children

     <td>no

     <td>specified value

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#flex-direction0">flex-direction</a>

     <td>lr | rl | tb | bt | inline | inline-reverse | block | block-reverse

     <td>inline

     <td>flexboxes

     <td>no

     <td>See text

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#flex-grow">flex-grow</a>

     <td>&lt;number>

     <td>0.0

     <td>flexbox children

     <td>no

     <td>specified value

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#flex-order0">flex-order</a>

     <td>&lt;integer>

     <td>1

     <td>flexbox children

     <td>no

     <td>specified value

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#flex-shrink">flex-shrink</a>

     <td>&lt;number>

     <td>0.0

     <td>flexbox children

     <td>no

     <td>specified value

     <td>visual
  </table>
  <!--end-properties-->
  <!-- Keep this comment at the end of the file
    Local variables:
    mode: sgml
    sgml-declaration:"~/SGML/HTML4.decl"
    sgml-default-doctype-name:"html"
    sgml-minimize-attributes:t
    sgml-nofill-elements:("pre" "style" "br")
    sgml-live-element-indicator:t
    End:
    -->
