<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>CSS3 Module: Namespace Declarations</title>
    <style type="text/css">
  div.illegal-example:before {
    content: "Illegal Example";
    content: "Illegal Example " counter(exampleno, upper-roman);
    counter-increment: exampleno;
    font: bold small sans-serif;
    /*float: left;*/
    position: absolute;
    top: -0.6em;
    left: -2.5em;
    width: 7.5em;
    text-align: center;
    line-height: 1em;
    color: #FFF8DD;
    background: #600;
    padding: 0.1em;
    border: thin solid #999;
    /*margin: -1.3em 0 0.3em -2.5em;*/
}
  </style>
  <link rel="stylesheet" type="text/css" href="../default.css"/>
  <link rel="stylesheet" type="text/css"
  href="http://www.w3.org/StyleSheets/TR/W3C-ED.css"/>
</head>

<body>

<div class="head">
<p><a rel="home" href="http://www.w3.org/" class="logo"><img height="48"
width="72" alt="W3C" src="http://www.w3.org/Icons/w3c_home"/></a><a
rel="in-activity" href="../../" class="logo"><img
src="../../../Woolly/woolly-icon.png" alt="CSS WG"/></a></p>

<h1>CSS3 Module: Namespaces</h1>

<h2 class="no-num no-toc">W3C Working Draft [DATE: 28 May 2006]</h2>
<dl>
  <dt>This version:</dt>
    <dd><a href="http://www.w3.org/TR/[YEAR]/WD-css3-ns-[ISODATE]">http://www.w3.org/TR/[YEAR]/WD-css3-ns-[ISODATE]</a></dd>
  <dt>Latest version:</dt>
    <dd><a href="http://www.w3.org/TR/css3-ns">http://www.w3.org/TR/css3-ns</a></dd>
  <dt>Previous version:</dt>
    <dd><a href="[http://www.w3.org/PreviousVersionURI]">[http://www.w3.org/PreviousVersionURI]</a></dd>
  <dt>Editors:</dt>
    <dd><a href="">Anne van Kesteren</a></dd>
    <dd><a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a></dd>
  <dt>Previous Editors:</dt>
    <dd>Peter Linss, Netscape Communications</dd>
    <dd>David Baron, Mozilla Corporation</dd>
    <dd>Chris Lilley, W3C</dd>
</dl>
<!--begin-copyright-->
<p>[Here will be included the file "../copyright.inc"]</p>
<!--end-copyright-->

<hr title="Separator for header"/>
</div>

<h2 class="no-num no-toc" id="abstract">Abstract</h2>

  <p>This CSS3 module defines the syntax for declaring a namespace prefix in
    CSS syntax. The terminology used in this specification is that of
    [[!XML-NAMES11]].</p>

  <p>It should be noted that a down-level CSS client will (if it properly
    conforms to CSS forward compatible parsing rules) ignore all @namespace
    rules, as well as all style rules that make use of namespace qualified
    element type or attribute selectors. The syntax of delimiting namespace
    prefixes in CSS was deliberately chosen so that down-level CSS clients
    would ignore the style rules rather than possibly match them
    incorrectly.</p>

<h2 class="no-num no-toc" id="status">Status of this document</h2>

<p>This is a draft of a module of CSS level&nbsp;3 (CSS3). It is derived
 with minimal change from the
 <a href="http://www.w3.org/1999/06/25/WD-css3-namespace-19990625/">CSS3 Namespace Enhancements</a>
 syntax proposal from 1999 with which the CSS WG has been in agreemen
 for many years and which is already implemented in user agents. The material
 from that proposal found its way into drafts of [[SELECT]], [[CSS3SYN]]
 and [[CSS3VAL]]. [[SELECT]] is currently a Candidate Recommendation.
 Unfortunately, [[CSS3SYN]] has dependencies on (potentially) all other
 CSS3 modules and this, plus work on CSS2.1, has delayed the availability
 of this specification. To break the chain of dependencies and allow faster
 progress on the Recommendation track, the present module has been split out.
 It is primarily intended as a CSS3 module, though it could also be referenced
 by [[SVG12]] or indeed [[CSS21]].</p>

<p>This document is a working draft of the CSS working group which is part of
the <a href="http://www.w3.org/Style/">style activity</a> (see <a
href="http://www.w3.org/Style/Activity">summary</a>).</p>

<p>Comments on and discussions of this draft can be sent on the (<a
href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
mailing list <a href="mailto:www-style@w3.org">www-style@w3.org</a> (see <a
href="http://www.w3.org/Mail/Request">instructions</a>). W3C Members can also
send comments directly to the CSS working group.</p>

<p>This is a working draft and may therefore be updated, replaced or rendered
obsolete by other W3C documents at any time. It is inappropriate to use W3C
Working Drafts as reference material or to cite them as other than "work in
progress". Its publication does not imply endorsement by the W3C membership
or the <a href="http://www.w3.org/Style/Group">CSS Working Group</a> (<a
href="http://cgi.w3.org/MemberAccess/AccessRequest">members only</a>).</p>

<p>Patent disclosures relevant to CSS may be found on the Working Group's
public <a href="http://www.w3.org/Style/CSS/Disclosures">patent disclosure
page.</a></p>

<p>To find the latest version of this working draft, please follow the
"Latest version" link above, or visit the list of W3C <a
href="http://www.w3.org/TR/">Technical Reports</a>.</p>

<h2 class="no-num no-toc" id="contents">Table of contents</h2>
<!--toc-->

<div>
<h2 id="conformance">Conformance</h2>

  <p>Implementations cannot not conform to this specification directly.
    Specifications for host languages which normatively reference this
    specification are expected to define their own conformance criteria.</p>
</div>

<div>
<h2 id="declaration">Declaring namespaces: the <code>@namespace</code> rule</h2>

<p>The @namespace rule allows the style sheet author to declare a namespace
prefix and associate it with a given namespace (a string or uri). This namespace
prefix can then be used to qualify names as described in other modules,
for example the Selectors Module [[!SELECT]] or the Values and Units module
[[CSS3VAL]].</p>

<p>In CSS Namespaces, as in XML Namespaces [[!REC-XML-NAMES]],
the local prefix is merely a syntactic construct; it is the <em>expanded
name</em> (the tuple of local name and namespace) that is significant.
Thus the actual prefixes used in a CSS style sheet, and whether they are
defaulted or not, are independent of the namespace prefixes used in the
markup and whether these are defaulted or not.</p>

<p>Note that relative URIs are discouraged by [[!REC-XML-NAMES]]. If used
relative URIs are <em>not</em> absolutized but are compared as-is.</p>

<h3 id="syntax">Syntax</h3>

<p>The syntax for the @namespace rule is as follows (using the notation from
the Grammar appendix of CSS2.1 [[!CSS21]]):</p>

<pre><!--
     -->namespace
<!-- -->  : NAMESPACE_SYM S* [namespace_prefix S*]? [STRING|URI] S* ';' S*
<!-- -->  ;
<!-- -->namespace_prefix
<!-- -->  : IDENT
<!-- -->  ;<!--
--></pre>

<p>with the new token:</p>

<pre>"@namespace"              {return NAMESPACE_SYM;}</pre>

<p>Any @namespace rules must follow all @import and @charset rules and precede
  all other non-ignored at-rules and rule sets in a style sheet. This is to
  avoid any confusion or issues regarding the scope of the declared namespace.
  For CSS syntax this adds <code>[ namespace [S|CDO|CDC]* ]*</code> immediately
  after <code>[ import [S|CDO|CDC]* ]*</code> in the <code>stylesheet<code>
  grammar.</p>

<p>A URI string parsed from the <code>url()</code> syntax is treated as a
  literal string: no URI-specific normalization is applied.</p>

<h3 id="scope">Scope</h3>

<p>The namespace prefix applies only to the style sheet in which it is
  declared, and not any style sheets imported by that style sheet, style
  sheets that import that stylesheet, or any other style sheets applying
  to the document.</p>

<h3 id="prefixes">Declaring Prefixes</h3>

<p>A prefix, once declared, represents the namespace for which it was declared
  and may be used to indicate the namespace of a namespace-qualified name.</p>

<p>If in the namespace declaration the namespace prefix is omitted, then the
  namespace is considered to be the default namespace. The default namespace
  can apply to names that have no explicit namespace prefix. Modules that
  employ namespace prefixes must define in which contexts the default namespace
  applies. For example, following [[REC-XML-NAMES]], in Selectors [[!SELECT]]
  the default namespace applies to type selectors&#8212;but it does not apply
  to attribute selectors.</p>

<p>If a namespace prefix is declared more than once only the last declaration
  shall be used.</p>

<div>
<h2 id="css-qnames">CSS Qualified Names</h2>

<p>To form a qualified name, a namespace prefix that has been previously
  declared is prepended to the local name (such as an element or attribute
  name), separated by a "vertical bar" (<code>|</code>, U+007C). The prefix
  may be left empty to indicate that the name belongs to no namespace. Some
  contexts may allow the use of an asterisk (<code>*</code>, U+002A) as a
  wildcard prefix to indicate a name in any namespace, including no
  namespace.</p>

<p>CSS qualified names can be used in (for example) selectors and property
  values as described in other modules. Those modules should define the use
  of a namespace prefix that has not been properly declared as a parsing error
  that will cause the selector or declaration (etc.) to be considered invalid
  and ignored.</p>

<div class="example"><pre>@namespace toto url(http://toto.example.org);
@namespace url(http://example.com/foo);

toto|A
|B
*|C
D
</pre>

<p>The first three examples A, B and C are all valid CSS qualified names. D is not a valid CSS qualified name.</p></div>

<div class="illegal-example">
<pre>foo|E</pre>
<p>The namespace prefix foo has not been declared.</p>
</div>

</div>

<h2 id="examples">Examples</h2>

<div class="example">
  <p>Examples:</p>
  <pre>@namespace url(http://www.w3.org/1999/xhtml);
@namespace svg url(http://www.w3.org/2000/svg);</pre>

  <p>The first rule declares a default namespace
  <code>http://www.w3.org/1999/xhtml</code> to be applied only to type
  selectors that have no explicit namespace component.</p>

  <p>The second rule declares a namespace prefix <code>svg</code> that
  is used to apply the namespace <code>http://www.w3.org/2000/svg</code>
  where the <code>svg</code> namespace prefix is used.</p>
</div>

</div>

<div class="informative">
<h2 id="examples">Examples with Selectors</h2>
<p>This section is informative.</p>

<p>Once declared, a CSS namespace may be used as defined in [[!SELECT]]</p>

<div class="example"><pre>
@namespace foo url(http://www.example.com);

foo|h1 { color: blue }
foo|* { color: yellow }
|h1 { color: red }
*|h1 { color: green }
h1 { color: green }</pre>
<p>The first rule will match only h1 elements in the "http://www.example.com" namespace.<br class="xhtml"/>
The second rule will match all elements in the "http://www.example.com" namespace.<br class="xhtml"/>
The third rule will match only h1 elements without any declared namespace.<br class="xhtml"/>
The fourth rule will match h1 elements in <em>any</em> namespace (including those without any declared namespace).<br class="xhtml"/>
The last rule is equivalent to the fourth rule because no default namespace has been defined.</p>
</div>

<p>To conform to current authoring practice, it is recommended that a default namespace be declared. This
prevents inadvertant clashes with elements in
other namespaces that happen to have the same local name. It is an easy way to upgrade existing style sheets
designed for a single namespace (for example, the XHTML namespace) so that they can be used in a
multiple namespace, compound document context.</p>

<div class="example"><pre>
@namespace url(http://www.w3.org/1999/xhtml)
@namespace s url (http://www.w3.org/2000/svg)

h1 { color: green}
div.figure {color: black}
div.figure s|text {fill: currentColor }
</pre>
<p>The first rule matches only h1 elements in the XHTML namespace. <br class="xhtml"/>
The second rule matches only div elements in the XHTML namespace that are of class figure<br class="xhtml"/>
The third rule matches text elements in the SVG namespace that have an ancestor div element in
the XHTML namespace that is of class figure</p>
</div>

 <p>Showing that the default CSS Namespace does not apply to attribute names (and thus attribute selectors):</p>

 <div class="illegal-example">
 <p>This will not work as expected:</p><pre>
 @namespace  url(http://www.w3.org/1999/xlink)

 [type=simple] { color: green }
  </pre>
  <p>The type attribute in the XLINK namespace will <em>not</em> be matched.</p></div>

  <div class="example"><pre>
 @namespace x url(http://www.w3.org/1999/xlink)

 [x|type=simple] { color: green }
 </pre></div>
</div>

<h2 class="no-num" id="acknowledgments">Acknowledgments</h2>

<p>This draft borrows heavily from earlier drafts on CSS namespace support by Peter Linss [[CSS3NAMESPACE]] and early (unpublished) drafts on CSS and XML by Håkon Lie and Bert Bos, and XML Namespaces and CSS by Bert Bos and Steven Pemberton. Many current and former members of the CSS working group have contributed to this document. Discussions on www-style@w3.org and in other places have also contributed ideas to this specification.</p>

<h2 class="no-num" id="references">References</h2>


<h3 class="no-num" id="normative-references">Normative references</h3>
<!--begin-normative-->


<p>[Here will be inserted the file "normative.inc"]</p>
<!--end-normative-->


<h3 class="no-num" id="other-references">Other references</h3>
<!--begin-informative-->


<p>[Here will be inserted the file "informative.inc"]</p>
<!--end-informative-->


<h2 class="no-num" id="index">Index</h2>
<!--index-->


<!-- no properties are defined i this specification
<h2 class="no-num" id="property-index">Property index</h2>
-->
<!-- properties -->
</body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
