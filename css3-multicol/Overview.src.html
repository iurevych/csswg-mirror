<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<meta content="text/html" http-equiv="Content-Type">

<title>CSS3 module: Multi-column layout</title>

<link rel="stylesheet" type="text/css" href="../default.css">
<link href="http://www.w3.org/StyleSheets/TR/W3C-[STATUS].css" rel=stylesheet type="text/css">

<style type="text/css">
.cols { width: 500px; height: 200px; background: #fff; position: relative; border: solid 5px blue; margin: 0.5em 2em 1em 0; font: bold 14px/19px Arial, sans-serif }
.cols p { padding: 3px; margin: 0 }
.col { position: absolute; left: 0px; top: 0; z-index: 6; width: 170px }
.gap { position: absolute; background: green; width: 5px; bottom: 0px; top: 0px; border: 10px solid yellow; border-top-width: 0; border-bottom-width: 0;  }
.rep { position: absolute; top: 45px; background: black; height: 110px; width: 100px;  color: white; z-index: 4 }
</style>

</head>
<body>

<div class="head">

<!--logo-->

<h1>CSS3 module: Multi-column layout</h1>

<h2 class="no-num no-toc" id="w3c-working">[LONGSTATUS] [DATE]</h2>

<dl>
<dt>This version:</dt>
<dd><a href="[VERSION]">[VERSION]</a></dd>

<dt>Latest version:

<dd><a href="http://www.w3.org/TR/css3-multicol">
http://www.w3.org/TR/css3-multicol</a>

<dt>Previous version:

<dd><a href="http://www.w3.org/TR/2005/WD-css3-multicol-20051215">http://www.w3.org/TR/2005/WD-css3-multicol-20051215</a>

<dt>Editors:

<dd>H&aring;kon Wium Lie, Opera Software, howcome@opera.com
</dl>

<!--begin-copyright-->
<p>[If you keep the &lt;!--comment-->, the copyright will be included
here automatically]</p>
<!--end-copyright-->

<hr title="Separator for header">
</div>


<h2 class="no-num no-toc" id=abstract>Abstract</h2>

<p>This module describes multi-column layout in CSS. It builds on the
CSS3 Box model module and adds functionality to flow the content of an
element into multiple columns.

<h2 class="no-num no-toc">Status of this document</h2>

<!--begin-status-->
<p>[If you keep the &lt;!--comment-->, the status boilerplate will be
included here automatically.]</p>
<!--end-status-->

<p>This document has been a Working Draft in the CSS Working Group for
several years. Multi-column layouts are traditionally used in print.
On screen, multi-column layouts have been considered experimental, and
implementation and use experience was deemed necessary in order to
proceed. Several implementations have occurred over the past years, and
this draft incorporates useful feedback from implementors as well as
authors and users.

<h2 class="no-num no-toc"><a name="contents">Table of contents</a></h2>

<!--begin-toc-->
<p>[If you keep the &lt;!--comment--> the table of contents will be
included here automatically.]</p>
<!--end-toc-->

<h2 id=dependencies>Dependencies on other modules</h2>

<p>This CSS3 module depends on the following other CSS3 modules:</p>
<ul>
  <li><cite>CSS3 Box Model</cite> [[!CSS3BOX]]</li>
  <li><cite>CSS3 Backgrounds and Borders Module</cite> [[!CSS3BG]]</li>
  <li><cite>CSS3 Color Module</cite> [[!CSS3COLOR]]</li>
  <li><cite>CSS3 Paged Media</cite> [[!CSS3PAGE]]</li>
</ul>


<h2>Introduction</h2>

<p>(This section is not normative.)

<p>This module describes multi-column layout in CSS. By using
functionality described in this document, style sheets can declare
that the content of an element is to be laid out in multiple
columns.

<p>On the Web, tables have also been used to describe multi-column
layouts. The main benefit of using CSS-based columns is flexibility;
content can flow from one column to another, and the number of columns
can vary depending on the size of the viewport. Removing presentation
table markup from documents allows them to more easily be presented on
various output devices including speech synthesizers and small mobile
devices.

<p>Multi-column layouts are easy to describe in CSS. Here is a simple example:

<div class=example>
<pre>body { column-width: 12em }</pre>

<p>In this example, the <code class=html>body</code> element is
set to have columns at least ''12em'' wide. The exact number of
columns will depend on the available space. 

</div>

<p>The number of columns can also be set explicitly in the style sheet:

<div class=example>
<pre>body { column-count: 2 }</pre>

<p>In this case, the number of columns is fixed and the column widths
will vary depending on the available width.

</div>

<p>The shorthand 'columns' property can be used to set either,
or both, properties in one declaration.

<div class=example>
<p>In this example, but the number and widths of columns is set:

<pre>
body { columns: 2 }
body { columns: 12em }
body { columns: 2 12em }
</pre>

<p>Setting both properties rarely makes sense, as described below.
</div>

<p>Another group of properties introduced in this module describe
gaps and rules between columns.

<div class=example>
<pre>
body { 
  column-gap: 1em;
  column-rule: thin solid black;
}
</pre>

<p>The first declaration in the example above sets the gap between two
adjacent columns to be 1em. Column gaps are similar to padding areas.
In the middle of the gap there will be a rule which is described by
the 'column-rule' property. 
</div>

<p>The values of the 'column-rule' property are similar to those of
the CSS border properties. Like 'border', 'column-rule' is also a
compound property.

<div class=example>
<p>In this example, the shorthand 'column-rule' declaration from the
above example has been expanded:

<pre>
body { 
  column-gap: 1em;
  column-rule-width: thin;
  column-rule-style: solid;
  column-rule-color: black;
}
</pre>
</div>

<!--
<p>The 'column-rule-image' property allows an image to be shown
between columns:

<div class=example>
<pre>
body { 
  column-gap: 20px;
  column-rule-width: 10px;
  column-rule-image: url(http://www.example.com/10px-border.png);
}
</pre>
</div>
-->


<p>A third group of properties indicate where column breaks should
occur:

<div class=example>

<p>In this example, <code>h1</code> elements will always have a column break before them, while column breaks are avoided after <code>h2</code> elements.

<pre>
h1 { column-break-before: always }
h2 { column-break-after: avoid }
</pre>
</div>

<p>Finally, 'column-fill' and 'column-span' give style sheets a wider
range of visual expressions in multi-column layouts.

<div class=example>
<p>In this example, columns are set to be balanced, i.e., to have
approximately the same length. Also, <code>h2</code> elements are set
to span across all columns.

<pre>
div { column-fill: balance }
h2 { column-span: all }
</pre>
</div>

<p>This specification introduces twelve new properties, all of which
are used in the examples above.

<p>If all column properties have their initial value, the layout of
an element will be identical to a multi-column layout with only one
column.


<h2>The multi-column model</h2>

<p>A <dfn>multi-column element</dfn> (or <em>multicol element</em>
for short) is an element whose 'column-width' or 'column-count'
property is not 'auto' and therefore acts as a container for
multi-column layout.

<p>In the traditional CSS box model, the content of an element is
flowed into the content box of the corresponding element. Multi-column
layout introduces a new type of container between the content box and
the content, namely the <dfn>column box</dfn> (or <em>column</em> for
short). The content of a multicol element is flowed into its column
boxes.

<p>Column boxes in a multi-column element are arranged
into <em>rows</em>. Like table cells, the column boxes in a row are
ordered in the inline direction of the multicol element. The
<em>column width</em> is the length of the column box in the inline
direction. The <em>column height</em> is the length of the column box
in the block direction. All column boxes in a multi-column element
have the same column width, and all column boxes in a row have the
same column height. Within each row in the multi-column element,
adjacent column boxes are separated by a <em>column gap</em>, which may
contain a <em>column rule</em>. All column gaps and column rules in the
same row are equal.

<p>In the simplest case a multicol element will contain only one row
of columns, and the height of each column will be equivalent to the
used height of the multi-column element's content box. If the
multi-column element is paginated, then the height of each row is
constrained by the page, and the content continues in a new row of
column boxes on the next page; a column box never splits across pages.
The same effect occurs when a <em>spanning element</em> divides the
multi-column element: the columns before the spanning element are
balanced and shortened to fit their content. Content after the
spanning element then flows into a new row of column boxes.

<p>It is not possible to set properties/values on column boxes. For
example, the background of a certain column box cannot be set and a
column box has no concept of padding, margin or borders.

<p class="note">Future specifications may add additional
functionality. For example, columns of different widths and different
backgrounds may be supported.</p>


<div class="example">

<p>Column gaps (yellow) and column rules (green) are shown in this
sample rendition of a multi-column element with padding (blue). The
blue and yellow is present for illustrational purposes only. In actual
implementations these ares will be determined by the background.

<div class=cols>

<div class="col" style="">

<p>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br> 
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>
M nop qrst uv wx yz.<br>

Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs

</div>

<div class="col" style="left: 175px">
<p>
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>
M nop qrst uv wx yz.<br>

Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>


</div>


<div class="col" style="left: 350px">
<p>
M nop qrst uv wx yz.<br>

Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>

M nop qrst uv wx yz.<br>
Ab cde fgh i jkl. Mno<br> 
Pqr stu vw xyz.
</div>

<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>

<p>To illustrate the effects of the various properties described in
this specification, variations on a sample document will be used. Here
is the source code of the sample document:

<pre class="html">
&lt;html>
&lt;style>
div {
  column-width: 15em;
  column-gap: 2em;   /* shown in yellow */            
  column-rule: 4px solid green;
  padding: 5px;      /* shown in blue */
}
img { display: none }
&lt;/style>
&lt;body>
&lt;div>
Ab cde fgh i jkl. Mno
pqr stu vw xyz. A bc
&lt;img src=...>
def g hij
...
&lt;/div>
&lt;/body>
&lt;/html>
</pre>

<p>The nonsensical text in the example is the English alphabet which
shows how text flows from one column to another. To simplify the
visualization, the textual content of the different examples vary
slightly. 
</div>


<p>Column boxes act as the containing block for their content. That
is, column boxes behave like block-level, table cell, and inline-block
boxes as per CSS 2.1, section 10.1, item 2 [[!CSS21]]. However, column
boxes do not establish containing blocks for elements with ''position:
fixed'' or ''position: absolute''. Percentage values that are calculated
relative to the containing block height are calculated based on the
multicol element's height, not the column box's height.


<div class=example>

<p>In this example, the width of the image is set with these rules:

<pre class=css>
img { display: block; width: 100% }
</pre>

<p>Given that the width is calculated relative to the column box, the
image will be as wide as the column box:

<div class=cols>

<p>Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>

<br><br><br><br><br><br>

def g hij klm nopqrs<br> 
tuv wxy z. Abc de fg<br>



<div class="col" style="left: 175px">
<p>hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>
M nop qrst uv wx yz.<br>

Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>
M nop qrst uv wx yz.<br>

</div>

<div class="col" style="left: 350px">
<p>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>

M nop qrst uv wx yz.<br>

Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz.

</div>


<div class=rep style="width: 150px"></div>
<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>

</div>


<p>Floats that appear inside multi-column layouts are positioned with
regard to the column box where the float appears.

<div class="example">

<p>In this example, this CSS fragment describes the presentation of the image:

<pre class="css">
img { display: block; float: right }
</pre>

<div class=cols>

<div class="col" style="">

<p>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g<br> 
hij klm<br>
nopq<br>
rs tuv<br>
wxy x<br>
yz. Ab <br>
cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc

</div>

<div class="col" style="left: 175px">
<p>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>
M nop qrst uv wx yz.<br>

Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>



</div>


<div class="col" style="left: 350px">
<p>
x yz. Abc def ghi jkl.<br>
M nop qrst uv wx yz.<br>

Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>

M nop qrst uv wx yz.<br>

</div>

<div class=rep style="left: 50px"></div>

<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>

<p>The black box represents the image. 

</div>

<p>A multi-column element establishes a new block formatting context,
as per CSS 2.1 section 9.4.1. However, the top margin of the first
element and the bottom margin of the last element collapse with
the margins of the multi-column element as per the normal rules for
collapsing.

<p>Nested multi-column elements are allowed, but there may be
implementation-specific limits.


<h2>The number and width of columns</h2>

<p>Finding the number and width of columns is fundamental when
laying out multi-column content. When the block direction
is unconstrained and no column breaks are added through style sheets,
these two properties determine the outcome:

<ul>
<li>'column-count'
<li>'column-width'
</ul>

<p>A third property, 'columns', is a shorthand property which sets both
'column-width' and 'column-count'.


<h3 id='cw'>'column-width'</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>column-width</dfn>
    <tr>
      <td><em>Value:</em>
      <td>&lt;length&gt; | auto 
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>non-replaced block-level elements (except table elements), table cells, and inline-block elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>the absolute length
</table>

<p>This property describes the width of columns in multicol elements.

<dl>

<dt>auto

<dd>means that the column width will be determined by other properties
(e.g., 'column-count', if it has a non-auto value).

<dt>&lt;length>

<dd>describes the optimal column width. The actual column width may be
wider (to fill the available space), or narrower (only if the
available space is smaller than the specified column width). Values
must be greater than 0.

</dl>



<div class=example>
<p>For example, consider this style sheet:</p>
<pre>
div {
  width: 100px;
  column-width: 45px;
  column-gap: 0;
  column-rule: none;
}
</pre>

<p>There is room for two 45px wide columns inside the 100px wide element. In
order to fill the available space the actual column width will be
increased to 50px.</p>

</div>

<div class=example>
<p>Also, consider this style sheet:</p>

<pre>
div {
  width: 40px;
  column-width: 45px;
  column-gap: 0;
  column-rule: none;
}
</pre>

<p>The available space is smaller than the specified column width and
the actual column width will therefore be decreased.</p>

</div>

<p>To ensure that 'column-width' can be used with vertical text,
column width means the length of the line boxes inside the columns.

<p class=note>The reason for making 'column-width' somewhat flexible
is to achieve scalable designs that can fit many screen sizes. To set
an exact column width, all length values (in horizontal text these
are: 'width', 'column-width', column-gap', and 'column-rule-width')
must be specified.</p>


<h3 id='cc'>'column-count'</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>column-count</dfn>
    <tr>
      <td><em>Value:</em>
      <td>&lt;integer&gt; | auto
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>non-replaced block-level elements (except table elements), table cells, and inline-block elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>This property describes the number of columns of a multicol element. 

<dl>

<dt>auto

<dd>means that the number of columns will be determined by other properties
(e.g., 'column-width', if it has a non-auto value).

<dt>&lt;integer>

<dd>describes the optimal number of columns into which the content of
the element will be flowed. Values must be greater than 0. If both
'column-width' and 'column-count' have non-auto values, the integer
value describes the maximum number of columns.

</dl>


<div class=example>
<p>Example:</p>
<pre>body { column-count: 3 }</pre>
</div>


<h3>'columns'</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>columns</dfn>
    <tr>
      <td><em>Value:</em>
      <td><a href='#cw'>&lt;'column-width'> || <a href='#cc'>&lt;'column-count'>
    <tr>
      <td><em>Initial:</em>
      <td>see individual properties
    <tr>
      <td><em>Applies to:</em>
      <td>non-replaced block-level elements (except table elements), table cells, and inline-block elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>see individual properties
</table>

<p>This is a shorthand property for setting 'column-width' and
'column-count'. Omitted values are set to their initial values.

<div class="example">
<p>Here are some valid declarations using the 'columns' property:
<pre>
columns: 12em;      /* column-width: 12em; column-count: auto */
columns: auto 12em; /* column-width: 12em; column-count: auto */
columns: 2;         /* column-width: auto; column-count: 2 */
columns: 2 auto;    /* column-width: auto; column-count: 2 */
columns: auto;      /* column-width: auto; column-count: auto */
columns: auto auto; /* column-width: auto; column-count: auto */
</pre>
</div>

<h3>Pseudo-algorithm</h3>

<P>The pseudo-algorithm below determines the used values for
'column-count' (N) and 'column-width' (W). There are two other
variables in the pseudo-algorithm:

<ul>

<li><code>available-width</code>: if the used width of the
multi-column element has not been determined when the 'column-count'
and 'column-width' must be determined (e.g., if it is floating with a
'width' of 'auto' as per CSS 2.1 section 10.3.5) this variable is
<code>unknown</code>, otherwise it is the same as the used width of
the multi-column element. In vertical text, the used height replaces used width in this calculation.

<li><code>shrink-to-fit</code>: this variable represents the result of
a <em>shrink-to-fit</em> computation. CSS does not define the exact
algorithm. 

</ul>

<p>Two assumptions are being made by the pseudo-algorithm:

<ul>
<li>that the block direction is unconstrained
<li>that no column breaks are added through style sheets
</ul>

<p>The <code>floor()</code> function rounds a number to the next smaller integer.

<pre>
if ((column-width = auto) and (column-count = auto)) or
   ((available-width = unknown) and (column-count = auto)) then
  exit; /* no columns */
fi

if (available-width = unknown) and (column-count != auto) and (column-width != auto) then
  N := column-count;
  W := column-width;
  exit;
fi

if (available-width = unknown) then
  available-width := shrink-to-fit;
fi

if (column-width = auto) then
  if ((column-count - 1) * column-gap &lt; available-width) then
    N := column-count;
    W := (available-width - ((N - 1) * column-gap))/N;
  elsif (column-gap >= available-width) then
    N := 1;
    W := available-width;
  else
    N := floor(available-width/column-gap);
    W := (available-width - ((N - 1) * column-gap))/N;
  fi
elsif (column-count = auto) then
  if (column-width >= available-width) then
    N := 1
    W := column-width;
  else
    N := floor((available-width + column-gap) / (column-width + column-gap));
    W := ((available-width + column-gap) / N) - column-gap;
  fi
elsif ((column-count * column-width) + ((column-count - 1 ) * column-gap) &lt;= available-width) then
  N := column-count;
  W := column-width;
elsif (column-width >= available-width) then
  N := 1
  W := column-width;
else
  N := floor((available-width + column-gap) / (column-width + column-gap));
  W := ((available-width + column-gap) / N) - column-gap;
fi
</pre>


<p>In paged media, user agents may perform this calculation on a
per-page basis.

<p class=note>Note that, in most cases, only one of 'column-width' and
'column-count' affect the layout. If 'column-width' has a value other
than ''auto'', 'column-count' will be ignored. The only case when both
'column-width' and 'column-count' can affect the layout is for element
where the width of the element has not been determined. This can,
e.g., be the case for table cells and floats.


<h3>Stacking context</h3>

<p>All column boxes in a multi-column element are in the same stacking
context and the drawing order of their contents is as specified in
CSS 2.1.


<h2>Column gaps and rules</h2>

<p>Column gaps and rules are placed between columns of the same
multi-column element. The length of the column gaps and column rules
is equal to the length of the columns. Column gaps take up space. That
is, column gaps will push apart content in adjacent columns (within
the same multi-column element). 

<p>A column rule is placed in the middle of the column gap. Column
rules do not take up space. That is, the presence or thickness of a
column rule will not alter the placement of anything else. If a column
rule is wider than its gap, the column rule will overlap adjacent
column boxes. Column rules are painted just above the background of
the multicol element. This allows child elements with 'z-index' values
to be on top of column rules. Column rules are only drawn between
columns that have content.


<h3>'column-gap'</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>column-gap</dfn>
    <tr>
      <td><em>Value:</em>
      <td>&lt;length&gt; | normal 
    <tr>
      <td><em>Initial:</em>
      <td>normal
    <tr>
      <td><em>Applies to:</em>
      <td>multicol elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>absolute length or 'normal'
</table>


<p>The <span class="property">'column-gap'</span> property sets the
gap between columns. If there is a column rule between columns, it
will appear in the middle of the gap.

<p>The ''normal'' value is UA-specific. A value of ''1em'' is suggested.

<p>Column gaps cannot be negative. 

<h3 id='crc'>'column-rule-color'</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>column-rule-color</dfn>
    <tr>
      <td><em>Value:</em>
      <td>&lt;color&gt; 
    <tr>
      <td><em>Initial:</em>
      <td>currentColor
    <tr>
      <td><em>Applies to:</em>
      <td>multicol elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>the same as the computed value for the 'color' property [[!CSS3COLOR]]
</table>

<p>This property sets the color of the column rule. The &lt;color&gt;
values are defined in [[!CSS3COLOR]].

<p>Conforming user agents are only required to support the subset of
color values defined in [[!CSS21]].

<h3 id='crs'>'column-rule-style'</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>column-rule-style</dfn>
    <tr>
      <td><em>Value:</em>
      <td><a href="http://www.w3.org/TR/CSS21/box.html#value-def-border-style">&lt;'border-style'&gt;</a> 
    <tr>
      <td><em>Initial:</em>
      <td>none
    <tr>
      <td><em>Applies to:</em>
      <td>multicol elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>specified value
</table>

<p>The 'column-rule-style' property sets the style of the rule between
columns of an element. The &lt;border-style&gt; values are defined in [[!CSS21]].

<p>The ''inset'' keyword value is shown like the ''ridge'' value. The
''outset'' value is shown like ''groove''.

<p>Note that the 'none' value forces the computed value of <span
class="property">'column-rule-width'</span> to be '0'.


<h3 id='crw'>'column-rule-width'</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>column-rule-width</dfn>
    <tr>
      <td><em>Value:</em>
      <td><a href="http://www.w3.org/TR/CSS21/box.html#value-def-border-width">&lt;'border-width'&gt;</a>
    <tr>
      <td><em>Initial:</em>
      <td>medium
    <tr>
      <td><em>Applies to:</em>
      <td>multicol elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>absolute length; '0' if the column rule style is 'none' or 'hidden'
</table>

<p>This property sets the width of the rule between columns. Negative values are not allowed.


<h3>'column-rule'</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>column-rule</dfn>
    <tr>
      <td><em>Value:</em>
      <td><a href='#crw'>&lt;column-rule-width&gt;</a> || <a href='#crs'>&lt;border-style&gt;</a> || [ <a href='#crc'>&lt;color&gt;</a> | transparent ]  
    <tr>
      <td><em>Initial:</em>
      <td>see individual properties
    <tr>
      <td><em>Applies to:</em>
      <td>multicol elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>see individual properties
</table>

<p>This property is a shorthand property for setting
'column-rule-width', 'column-rule-style', and 'column-rule-color' at
the same place in the style sheet. Omitted values are set to their
initial values.



<h2>Column breaks</h2>

<p>When content is laid out in multiple columns, the user agent must
determine where column breaks are placed. The problem of breaking
content into columns is similar to breaking content into pages. CSS3
Paged Media [[!CSS3PAGE]] describes rules for breaking content into
pages. This specification prescribes the same rules for column breaks,
with the following differences:

<ul>

<li>The properties for indicating column breaks are
'column-break-before' and 'column-break-after' (instead of
'page-break-before' and 'page-break-after'). The 'page-break-inside'
property can be used to indicate that a column break should be avoided
inside the element.

<li>A page break will always cause a column break; the opposite is not
the case. Consequently, when both a page break and a column break is
specified, a page break will occur.

</ul>

<p class="issue">Should we reuse 'page-break-before' and
'page-break-after' instead of creating two new properties? A new
keyword ''column'' would be added to these properties to force column
breaks.

<p>Also, margins will be set to zero around column breaks, just like
for page breaks.


<h3>'column-break-before'</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>column-break-before</dfn>
    <tr>
      <td><em>Value:</em>
      <td>auto | always | avoid
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>block-level elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>as specified
</table>


<h3>'column-break-after'</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>column-break-after</dfn>
    <tr>
      <td><em>Value:</em>
      <td>auto | always | avoid
    <tr>
      <td><em>Initial:</em>
      <td>auto
    <tr>
      <td><em>Applies to:</em>
      <td>block-level elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>as specified
</table>

<p>Values for these properties have the following meanings:

<dl>
<dt>auto
<dd>Neither force nor forbid a column break before / after / inside the generated box. 
<dt>always 
<dd>Always force a column break before / after the generated box. 
<dt>avoid 
<dd>Avoid a column break before / after / inside the generated box. 
</dl>


<h2>Spanning columns</h2>

<p>The 'column-span' property makes it possible for an element to span
across several columns.


<h3>'column-span'</h3>

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>column-span</dfn>
    <tr>
      <td><em>Value:</em>
      <td>1 | all 
    <tr>
      <td><em>Initial:</em>
      <td>1
    <tr>
      <td><em>Applies to:</em>
      <td>static, non-floating elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>visual
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>as specified
</table>

<p>This property describes how many columns an element spans across. Values are:

<dl>

<dt>1
<dd>The element does not span multiple columns.

<dt>all

<dd>The element spans across all columns. Content in the normal flow
that appears before the element is automatically balanced across all
columns before the element appears.

</dl>

<p>An element that spans more than one column is called a
<dfn>spanning element</dfn>.


<div class="example">

<p>In this example, an <code>h2</code> element has been added to the
sample document after the first sentence in the fourth alphabet (i.e.,
after the word "jkl."). This styling applies:

<pre class="css">
h2 { column-span: all; background: silver } 
img { display: none }
</pre>

<p>By setting 'column-span' to ''all'', all content that appear before
the <code>h2</code> element is shown before the <code>h2</code>
element.

<div class=cols>

<p>Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>

<br><br>

M nop qrst uv wx yz.<br>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>



<div class="col" style="left: 175px">
<p>def g hij klm nopqrs<br> 
tuv wxy z. Abc de fg<br>
<br><br>
x yz. Abc def ghi jkl.<br>
M nop qrst uv wx yz.<br>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>


</div>

<div class="col" style="left: 350px">
<p>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>
<br><br>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>
M nop qrst uv wx yz.<br>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz.

</div>


<div class=rep style="width: 490px; height: 20px; background: silver; font-size: 1.5em; padding: 5px">An H2 element</div>
<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>
</div>

</div>


<h2>Filling columns</h2>

<p>There are two strategies for filling columns: columns can either be
balanced, or not. If columns are balanced, UAs should minimize the
variation in column length. Otherwise, columns are filled sequentially
and will therefore end up having different lengths. In any case, the
user agent should try to honor the 'widows' and 'orphans' properties.

<table class=propdef>
    <tr>
      <td><em>Name:</em>
      <td><dfn>column-fill</dfn>
    <tr>
      <td><em>Value:</em>
      <td>auto | balance
    <tr>
      <td><em>Initial:</em>
      <td>balance
    <tr>
      <td><em>Applies to:</em>
      <td>multi-column elements
    <tr>
      <td><em>Inherited:</em>
      <td>no
    <tr>
      <td><em>Percentages:</em>
      <td>N/A
    <tr>
      <td><em>Media:</em>
      <td>see below
    <tr>
      <td><em>Computed&nbsp;value:</em>
      <td>as specified
</table>

<p>The values are:

<dl>
<dt>balance
<dd>Balance content equally between columns, if possible.
<dt>auto
<dd>Fills columns sequentially.
</dl>

<p>In continuous media, this property will only be consulted
if the length of columns has been constrained. Otherwise, columns will
automatically be balanced.


<h2>Overflow and multicol elements</h2>

<h3>Overflow inside multicol elements</h3>

<p>Content in the normal flow that extends into column gaps (e.g.,
long words) is clipped in the middle of the column gap.

<p>Floats that are wider than the column box intrude into neighboring columns. 

<div class=example>

<pre class=css>
img { float: left; width: 120% }
</pre>

<p>In this example, the image is wider than the column and will
therefore intrude into the neighboring column. At the bottom of the
middle column is a long word that is clipped in the middle of the
column gap.

<div class=cols>

<p>Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>

<br><br><br><br><br><br>

def g hij klm nopqrs<br> 
tuv wxy z. Abc de fg<br>



<div class="col" style="left: 175px">
<p>hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>
<span style="padding-left: 30px">M nop qrst uvw</span><br>
<span style="padding-left: 30px">x yz. Ab cde fgh</span><br> 
<span style="padding-left: 30px">i jkl. Mnopqr stu</span><br>
<span style="padding-left: 30px">vw xyz. A bcdef</span><br>
<span style="padding-left: 30px">ghij klm nopqrs</span><br>
<span style="padding-left: 30px">tuv wxy z. Abc</span><br>
de fghi jk klmop qrst<br>
uvwxyzabcdefghijklmn<br>

</div>

<div class="col" style="left: 350px">
<p>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>

M nop qrst uv wx yz.<br>

Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz.

</div>


<div class=rep style="width: 200px"></div>
<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>

</div>

<h3>Overflow outside multicol elements</h3>

<p>Content that extend outside column boxes at
the edges of the multi-column element is clipped according to the
'overflow' property.

<p>A multi-column element can have more columns than it has room for due to:

<ul>
<li>Constrained column height. The height can be constrained by a
rule on the multi-column element. In paged media, the height can also
be constrained by the size of the page.

<li>Explicit column breaks. Explicit column breaks may create more columns than there is room for inside the multicol element. 
</ul>

<p>In paged media, columns that do not fit within the page
are moved to the next page.

<p>In continuous media, the columns that do not fit within
the multicol element are added in the inline direction.

<div class="example">

<p>In this example, the height of the multi-column element has been
constrained to a maximum height. Also, the style sheet specifies that
overflowing content should be visible:

<pre class=css>
div { 
  max-height: 5em;
  overflow: visible;
}
</pre>

<p>As a result, the number of columns is increased. 

<div class=cols style="height: 100px">

<div class="col" style="">

<p>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br> 
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>
</div>

<div class="col" style="left: 175px">
<p>
x yz. Abc def ghi jkl.<br>
M nop qrst uv wx yz.<br>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs
</div>

<div class="col" style="left: 350px">
<p>
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>
M nop qrst uv wx yz.<br>
Ab cde fgh i jkl. Mno<br> 
</div>

<div class="col" style="left: 525px">
<p>
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>
hi jklmno. Pqrstu vw<br>
x yz. Abc def ghi jkl.<br>
</div>

<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
<div class=gap style="left: 500px"></div>
</div>

</div>
</div>


<div class="example">

<p>In this example, explicit column breaks are generated after paragraphs:

<pre class=css>
p { 
  column-break-after: always;
}
</pre>

<p>As a result, the number of columns is increased:

<div class=cols style="height: 100px">

<div class="col" style="">

<p>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. 
</div>

<div class="col" style="left: 175px">
<p>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z.
</div>

<div class="col" style="left: 350px">
<p>
Ab cde fgh i jkl mno.<br> 
</div>

<div class="col" style="left: 525px">
<p>
Pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>
hi jklmno pqr stu v<br>
wx yz.
</div>

<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
<div class=gap style="left: 500px"></div>
</div>

</div>
</div>



<div class="example">

<p>In this example, explicit column breaks are generated after paragraphs:

<pre class=css>
p { 
  column-break-after: always;
}
</pre>

<p>As a result, the number of columns is increased and another page is generated. This would appear on the first page:

<div class=cols style="height: 80px; border-bottom: none">

<div class="col" style="">

<p>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. 
</div>

<div class="col" style="left: 175px">
<p>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z.
</div>

<div class="col" style="left: 350px">
<p>
Ab cde fgh i jkl.<br> 
</div>


<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>

<p>This would appear on the second page:

<div class=cols style="height: 100px; border-top: none">

<div class="col" style="">
<p>
Ab cde fgh i jkl. Mno<br> 
pqr stu vw xyz. A bc<br>
def g hij klm nopqrs<br>
tuv wxy z. Abc de fg<br>
hi jklmno.<br>

</div>


<div class=gap style="left: 150px"></div>
<div class=gap style="left: 325px"></div>
</div>


</div>
</div>

<h2>Conformance</h2>

<p>Conforming UAs must flow the content of an element into several
columns according to this specification.

<p>User agents that support CSS3 Backgrounds and Borders
[[!CSS3BACKGROUND]] must support 'column-gap-image'; for other
UAs this property is optional.

<p>The conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words "MUST",
    "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
    "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. All of the text of this specification is
    normative except sections explicitly marked as non-normative, examples,
    and notes. [[!RFC2119]]</p>


<h2 class=no-num id=acknowledgments>Acknowledgments</h2>

<p>This document is based on several older proposals and comments on
older proposals. Contributors include David Hyatt, David Singer, David
Woolley, Elika Etemad, Bj&ouml;rn H&ouml;hrmann, Joost de Valk,
Peter-Paul Koch, Till Halbach, C&eacute;dric Savarese, Andy Clarke,
Robert O'Callahan, Markus Mielke, Alex Mogilevsky, Sergey Genkin,
Michael Day, Melinda Grant, Kevin Lawver, David Baron, Bert Bos, Dave
Raggett, Chris Wilson, Robert Stevahn, Peter Linss, Chris Lilley,
Steve Zilles, Tantek &Ccedil;elik, Daniel Glazman and Ian Hickson.</p>


<h2 class=no-num id=references>References</h2>


<h3 class="no-num" id="normative-references">Normative references</h3>
<!--begin-normative-->

<p>[Here will be inserted the file "normative.inc"]</p>
<!--end-normative-->

<h3 class="no-num" id="other-references">Other references</h3>
<!--begin-informative-->


<p>[Here will be inserted the file "informative.inc"]</p>
<!--end-informative-->


<h2 class="no-num" id="index">Index</h2>
<!--index-->


<h2 class="no-num" id="property-index">Property index</h2>
<!-- properties -->
</body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
