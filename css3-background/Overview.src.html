<!DOCTYPE html PUBLIC '-//W3C//DTD HTML 4.01//EN'
  'http://www.w3.org/TR/html4/strict.dtd'>

<html lang="en">
<head>
  <title>CSS Backgrounds and Borders Module Level 3</title>
  <link rel="stylesheet" type="text/css" href="default.css">
  <style type="text/css">
    .prod { font-family: inherit; font-size: inherit }
    pre.prod { white-space: pre-wrap; margin: 1em 0 1em 2em }
    code { font-size: inherit; }
    #box-shadow-samples td { background: white; color: black; }
  </style>
  <link rel="stylesheet" type="text/css"
  href="http://www.w3.org/StyleSheets/TR/W3C-WD.css">
</head>

<body>

<div class="head">
<!--logo-->

<h1>CSS Backgrounds and Borders Module Level 3</h1>

<h2 class="no-num no-toc">[LONGSTATUS] [DATE]</h2>
<dl>
  <dt>This version:
    <dd><!-- <a href="http://www.w3.org/TR/[YEAR]/WD-[SHORTNAME]-[CDATE]">http://www.w3.org/TR/[YEAR]/WD-[SHORTNAME]-[CDATE]</a></dd> -->
    <a href="http://dev.w3.org/csswg/css3-background">http://dev.w3.org/csswg/css3-background</a>
  <dt>Latest version:
    <dd><a
      href="http://www.w3.org/TR/css3-background">[LATEST]</a>
  <dt>Previous versions:
    <dd><a
      href="http://www.w3.org/TR/2005/WD-css3-background-20050216">http://www.w3.org/TR/2005/WD-css3-background-20050216</a>
    <dd><a href="http://www.w3.org/TR/2002/WD-css3-border-20021107">http://www.w3.org/TR/2002/WD-css3-border-20021107</a>
  <dt id="editors-list">Editors:
    <dd><a href="mailto:bert@w3.org">Bert Bos</a> (<a
      href="http://www.w3.org/">W3C</a>)
    <dd><a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a>
</dl>

<!--copyright-->

<hr title="Separator for header">
</div>



<h2 class="no-num no-toc" id="abstract">Abstract</h2>

<p>CSS is a language for describing the rendering of structured
<span>documents</span> (such as HTML
and XML) on screen, on paper, in speech, etc.
This draft contains the features of CSS level&nbsp;3 relating to
borders and backgrounds. It includes and extends the functionality of
CSS level&nbsp;2 [[!CSS21]], which builds on CSS level&nbsp;1
[[CSS1]]. The main extensions compared to level&nbsp;2 are borders
consisting of images, boxes with multiple backgrounds, boxes with
rounded corners and boxes with shadows.

<p>This module replaces two earlier drafts: CSS3 Backgrounds and CSS3
Border.



<h2 class="no-num no-toc" id="status">Status of this document</h2>
<!--status-->

<p class=issue>The CSS WG maintains an <a
href="http://www.w3.org/Style/CSS/Tracker/products/11">issues
list</a> for this module. <strong>If there's a conflict between
CSS Backgrounds and Borders Level 3 and CSS 2.1, please report
it to the CSS Working Group. Since these specs are intended to
be consistent with each other, conflicts indicate an error in one
or both specs.</strong>

<p>The following features are at-risk and may be dropped at the
end of the CR period if there has not been enough interest from
implementors: inner shadows for 'box-shadow', 'border-break',
'background-break'.

<h2 class="no-num no-toc" id="contents">Table of contents</h2>
<!--toc-->



<h2>Introduction</h2>

<p><em>This section is not normative.</em>

<p>When elements are rendered according to the
<a href="http://www.w3.org/TR/CSS21/box.html">CSS box model</a> [[!CSS21]],
each element is either not displayed at all, or formatted as one
or more rectangular boxes. Each box has a rectangular content
area, a band of padding around the content, a border around the
padding, and a margin outside the border. (The margin may actually be
negative, but margins have no influence on the background and border.)

<div class="figure">
  <p><img src="box" alt="Diagram of a typical box, showing the
  content, padding, border and margin areas">

  <p class="caption">The various areas and edges of a typical box.
  (This diagram is explained in the CSS2.1 Box Model chapter [[!CSS21]].)
</div>

<p>The properties of this module deal with the decoration of the border
area and with the background of the content, padding and border areas.
Additionally the box may be given a "drop-shadow" effect with the
'box-shadow' property.

<p>If an element is broken into multiple boxes, 'border-break' and
'background-break' define how the borders and background are divided
over the various boxes. (An element can result in more than one box if
it is broken at the end of a line, at the end of a column or at the
end of a page; and continued in the next line, column or page.)

<p>The relative stacking order of backgrounds, borders, and shadows
is given in this module. For how these layers interact with other
rendered content, see Appendix E “Elaborate description of Stacking
Contexts” in [[!CSS21]].



<h2>Values</h2>

<p>This specification follows the
<a href="http://www.w3.org/TR/CSS21/about.html#property-defs">CSS property
definition conventions</a> from [[!CSS21]].</p>

<p><dfn><var>&lt;color&gt;</var></dfn> values are defined in CSS Color
Level 3 [[!CSS3COLOR]].</p>

<p><dfn><var>&lt;image&gt;</var></dfn> values are defined by this
specification as <code class=prod><var>&lt;image&gt;</var> =
<var>&lt;uri&gt;</var></code>.</p>

<p class="note">A future specification may expand the definition of
<var>&lt;image&gt;</var> to allow other values, e.g. to define image
slices.</p>

<p>All other values are defined in CSS Level 2 Revision 1 [[!CSS21]].</p>

<p>All properties defined in this specification also accept the
<a href="http://www.w3.org/TR/CSS21/cascade.html#value-def-inherit">inherit</a>
keyword as their value, but for readability it has not been listed explicitly.

<h2 id="backgrounds">Background properties</h2>

<p>Each box has a background layer that may be fully transparent (the
default), or filled with a color and/or one or more images. The background
properties specify what color ('background-color')
and images ('background-image') to use,
and how they are sized, positioned, tiled, etc.

<p>The background properties are not inherited, but the parent box's
background will shine through by default because of the initial
'transparent' value on 'background-color'.

<h3 id="layering">Layering multiple background images</h3>

<p>The background of a box can have multiple <span
class=index>layers</span> in CSS3. The number
of layers is determined by the number of comma-separated values in the
'background-image' property. Note that a value of 'none' still creates
a layer.

<p>Each of the images is sized, positioned, and tiled according to
the corresponding value in the other background properties. The lists
are matched up from the first value: excess values at the end are not
used. If a property doesn't have enough comma-separated values to match
the number of layers, the <span>UA</span> must calculate its used
value by repeating
the list of values until there are enough.

<div class="example">
<p>For example, this set of declarations:
<pre>
background-image: url(flower.png), url(ball.png), url(grass.png);
background-position: center center, 20% 80%, top left, bottom right;
background-origin: border-box, content-box;
background-repeat: no-repeat;
</pre>
<p>has exactly the same effect as this set with the extra position
dropped and the missing values for 'background-origin' and
'background-repeat' filled in (emphasized for clarity):
<pre>
background-image: url(flower.png), url(ball.png), url(grass1.png);
background-position: center center, 20% 80%, top left;
background-origin: border-box, content-box<strong>, border-box</strong>;
background-repeat: no-repeat<strong>, no-repeat, no-repeat</strong>;
</pre>
</div>

<p>The first image in the list is the layer closest to the user,
the next one is painted behind the first, and so on. The background
color, if present, is painted below all of the other layers.

<p class="note">Note that the <a href="#border-images">border-image properties
can also define a background image, which, if present, is painted on top of
the background created by the background properties.

<h3>The 'background-color' property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>background-color</dfn>
    <tr>
      <th>Value:
      <td><var>&lt;color&gt;</var>
    <tr>
      <th>Initial:
      <td>transparent
    <tr>
      <th>Applies to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>the computed color(s)
</table>

<p>This property sets the <span class=index
title="color!!background">background color</span> of an element. The
color is drawn behind any background images.

<div class="example">
<p>Example:
<pre>h1 { background-color: #F00 } /* Sets background to red. */</pre>
</div>

<p>The background color is clipped according to the 'background-clip'
value associated with the bottom-most background image.

<h3>The 'background-image' property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>background-image</dfn>
    <tr>
      <th>Value:
      <td><var>&lt;bg-image&gt;</var>
	[ , <var>&lt;bg-image&gt;</var> ]*
    <tr>
      <th>Initial:
      <td>none
    <tr>
      <th>Applies to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>as specified, but with URIs made absolute
</table>

<p>This property sets the background image(s) of an element. Images
are drawn with the first specified one on top (closest to the user)
and each subsequent image behind the previous one.
Where

<pre class=prod><dfn><var>&lt;bg-image&gt;</var></dfn> = <var>&lt;image&gt;</var> | none</pre>

<p>A value of ''none'' counts as an image layer but draws
nothing. An image that is empty (zero width or zero height), that
fails to download, or that cannot be displayed (e.g., because it is
not in a supported image format) likewise counts as a layer but
draws nothing.

<p>See the section <a href="#layering">“Layering multiple background
images”</a> for how 'background-image' interacts with other
comma-separated background properties to form each background image
layer.

<p>When setting a background image, authors should also specify a
''background-color'' that will preserve contrast with the text for
when the image is unavailable.

<div class="example">
<p>Some examples specifying background images:</p>
<pre>
body { background-image: url("marble.svg") }
p { background-image: none }
div { background-image: url(tl.png), url(tr.png) }
</pre>
</div>

<p class=note>Implementations may optimize by not downloading and
drawing images that are not visible (e.g., because they are behind
other, fully opaque images).



<h3>The 'background-repeat' property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>background-repeat</dfn>
    <tr>
      <th>Value:
      <td><var>&lt;repeat&gt;</var> [ , <var>&lt;repeat&gt;</var> ]*
    <tr>
      <th>Initial:
      <td>repeat
    <tr>
      <th>Applies to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>as specified
</table>

<p>Specifies how background images are tiled after they have been
<a href="#the-background-size">sized</a> and <a href="#the-background-position">positioned</a>.
Where
<pre class=prod><dfn><var>&lt;repeat&gt;</var></dfn> = repeat-x | repeat-y | [repeat | space | round | no-repeat]{1,2}</pre>

<p>Single values for <var>&lt;repeat&gt;</var> have the following
meanings:

<dl>
  <dt><dfn>repeat-x</dfn>
  <dd>
  Equivalent to ''repeat no-repeat''.

  <dt><dfn>repeat-y</dfn>
  <dd>
  Equivalent to ''no-repeat repeat''.

  <dt><dfn id="repeat-repeat">repeat</dfn>
  <dd>
  Equivalent to ''repeat repeat''.

  <dt><dfn id="no-repeat-no-repeat">no-repeat</dfn>
  <dd>
  Equivalent to ''no-repeat no-repeat''

  <dt><dfn id="space-space">space</dfn>
  <dd>
  Equivalent to ''space space''

  <dt><dfn id="round-round">round</dfn>
  <dd>
  Equivalent to ''round round''
</dl>

<p>If a <var>&lt;repeat&gt;</var> value has two keywords, the first
one is for the horizontal direction, the second for the vertical one,
as follows:

<dl>
  <dt><dfn>repeat</dfn>
  <dd>
  The image is repeated in this direction as often as needed to cover
  the <span class=index>background painting area.</span>

  <dt><dfn>no-repeat</dfn>
  <dd>
  The image is placed once and not repeated in this direction.

  <dt><dfn>space</dfn>
  <dd>
  The image is repeated as often as will fit within the
  <span class=index>background positioning area</span> without being
  clipped and then the images are spaced out to fill the area. The
  first and last images touch the edges of the area. If the background
  painting area is larger than the background positioning area, then
  the pattern repeats to fill the background painting area.
  The value of 'background-position' for this direction
  is ignored, unless there is not enough space for two copies of the
  image in this direction, in which case only one image is placed and
  'background-position' determines its position in this
  direction.

  <dt><dfn>round</dfn>
  <dd>
  The image is repeated as often as will fit within the
  <span>background positioning area.</span> If it doesn't
  fit a whole number of times, it is reduced in size until it does.
  See explanation under 'background-size'. If the background
  painting area is larger than the background positioning area, then
  the pattern repeats to fill the background painting area.
</dl>

<p>Unless one of the two keywords is ''no-repeat'', the
whole background painting area will be tiled, i.e., not just one
vertical strip and one horizontal strip.

<div class="example">
<p style="display:none">Example(s):
<pre>
body {
  background: white url("pendant.png");
  background-repeat: repeat-y;
  background-position: center;
}
</pre>

<div class="figure">
  <p><img src="bg-repeat" alt="A centered background image, with
  copies repeated up and down the border, padding and content
  areas."><!--<SPAN class="dlink">&nbsp;&nbsp;&nbsp;<A
  name="img-bg-repeat" href="images/longdesc/bg-repeat-desc.html"
  title="Long description for background pattern">[D]</A></SPAN>-->

  <p class="caption">The effect of ''repeat-y'': One copy
  of the background image is centered, and other copies are put above
  and below it to make a vertical band behind the element.
</div>
</div>

<div class=example>
  <p style="display:none">Example(s):
  <pre>
body {
  background-image: url(dot.png) white;
  background-repeat: space
}
</pre>

  <div class=figure>
    <p><img src="bg-space" alt="Image of an element with a dotted background">

    <p class=caption>The effect of 'space': the image of a dot is
    tiled to cover the whole background and the images are equally
    spaced.
  </div>
</div>

<p>See the section <a href="#layering">“Layering multiple background
images”</a> for how 'background-repeat' interacts with other
comma-separated background properties to form each background image
layer.



<h3>The 'background-attachment' property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>background-attachment</dfn>
    <tr>
      <th>Value:
      <td><var>&lt;attachment&gt;</var>	[ , <var>&lt;attachment&gt;</var> ]*
    <tr>
      <th>Initial:
      <td>scroll
    <tr>
      <th>Applies to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>as specified
</table>

<p>If background images are specified, this property specifies whether
they are fixed with regard to the <em class="index">viewport</em>
(''fixed'') scroll along with the element (''scroll''
and ''local'').
Where

<pre class=prod><dfn><var>&lt;attachment&gt;</var></dfn> = scroll | fixed | local</pre>

<p>Note that there is only one viewport per view. If an element has a
scrolling mechanism (see  the 'overflow' property [[!CSS21]]), a
''fixed'' background doesn't move with the element, and a ''scroll''
background doesn't move with the scrolling mechanism.

<p>The difference between ''scroll'' and ''local'' is only visible
when the element has a scrolling mechanism: in the case of
''scroll'', the background does not scroll with the element's
content. (It is attached to the element's border, effectively.) In the
case of ''local'', the background scrolls along with the element's
content. In this case, the background behind the element's border (if any)
scrolls as well, even though the border itself does not scroll with the
contents. The UA may, however, treat the ''border-box'' value of
'background-clip' as ''padding-box'' in cases where 'background-attachment'
is ''local'' and the contents of the element scroll.

<p>In paged media where there is no viewport, a ''fixed'' background
is fixed with respect to the <a href="http://www.w3.org/TR/CSS21/page.html#page-box">page
box</a>.

<p>Even if the image is fixed, it is still only visible when it is in
the <em>background painting area</em> of the element
or otherwise unclipped. Thus, unless the image is tiled, it may be
invisible.

<div class="example">
<p>This example creates an infinite vertical band that remains
“glued” to the viewport when the element is scrolled.

<pre>
body {
  background: red url("pendant.gif");
  background-repeat: repeat-y;
  background-attachment: fixed;
}
</pre>
</div>

<p>User agents that do not support ''fixed'' backgrounds (for
example due to limitations of the hardware platform) should ignore
declarations with the keyword ''fixed''. For example:

<pre class=example>
body {
   /* For all UAs: */
   background: white url(paper.png) scroll;
   /* For UAs that do fixed backgrounds: */
   background: white url(ledger.png) fixed;
}
h1 {
   /* For all UAs: */
   background: silver;
   /* For UAs that do fixed backgrounds: */
   background: url(stripe.png) fixed, white url(ledger.png) fixed;
}
</pre>

<p>See the section <a href="#layering">“Layering multiple background
images”</a> for how 'background-attachment' interacts with other
comma-separated background properties to form each background image
layer.



<h3>The 'background-position' property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>background-position</dfn>
    <tr>
      <th>Value:

      <td><var>&lt;bg-position&gt;</var>
        [ , <var>&lt;bg-position&gt;</var> ]*
    <tr>
      <th>Initial:
      <td>0% 0%
    <tr>
      <th>Applies to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>refer to size of <span class=index>background positioning
      area</span> <em>minus</em> size of background image; see text
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>If one or two values are specified, for a &lt;length&gt; the
        absolute value, otherwise a percentage. If three or four values
        are specified, two pairs of a keyword plus a length or percentage.
</table>

<p>If background images have been specified, this property specifies
their initial position (after any <a href="#the-background-size">resizing</a>)
within their corresponding <span>background positioning area.</span>

<p>Where
<pre class=prod><dfn><var>&lt;bg-position&gt;</var></dfn> = [
  [ [ <var>&lt;percentage&gt;</var> | <var>&lt;length&gt;</var> | left | center | right ] ]
  [ [ <var>&lt;percentage&gt;</var> | <var>&lt;length&gt;</var> | top | center | bottom ] ]?
|
  [ center | [ left | right ] [ <var>&lt;percentage&gt;</var> | <var>&lt;length&gt;</var> ]? ] ||
  [ center | [ top | bottom ] [ <var>&lt;percentage&gt;</var> | <var>&lt;length&gt;</var> ]? ]
]</pre>

<p>If only one value is specified, the second value is assumed to be
'center'. If two values are given and at least one value is not a keyword,
then the first value represents the horizontal position (or offset) and
the second represents the vertical position (or offset). &lt;percentage&gt;
and &lt;length&gt; values here represent an offset of the top left corner
of the background image from the top left corner of the background
positioning area.

<p>If three or four values are given, then each &lt;percentage&gt; or
&lt;length&gt; represents an offset and must be preceded by a keyword,
which specifies from which edge the offset is given. For example,
''background-position: bottom 10px right 20px'' represents a
''10px'' vertical offset up from the bottom edge and a
''20px'' horizontal offset leftward from the right edge. If
three values are given, the missing offset is assumed to be zero.

<p>Positive values represent an offset <em>inward</em> from the edge of
the background positioning area. Negative values represent an offset
<em>outward</em> from the edge of the background positioning area.

<div class="example">
  <p>The following declarations give the stated (horizontal, vertical)
    offsets from the top left corner:</p>
  <pre>
   background-position: left 10px top 15px;   /* 10px, 15px */
   background-position: left      top     ;   /*  0px,  0px */
   background-position:      10px     15px;   /* 10px, 15px */
   background-position: left          15px;   /*  0px, 15px */
   background-position:      10px top     ;   /* 10px,  0px */
   background-position: left      top 15px;   /*  0px, 15px */
   background-position: left 10px top     ;   /* 10px,  0px */</pre>
</div>

<dl>
  <dt>&lt;percentage&gt;

  <dd><p>A percentage for the horizontal offset is relative to (<var>width
    background positioning area</var> - <var>width of background image</var>).
    A percentage for the vertical offset is relative to (<var>height background
    positioning area</var> - <var>height of background image</var>), where the
    size of the image is the size given by 'background-size'.
    <div class=example>
      <p>For example, with a value pair of ''0% 0%'', the upper left
      corner of the image is aligned with the upper left corner of, usually,
      the box's padding edge. A value pair of ''100% 100%'' places
      the lower right corner of the image in the lower right corner of the
      area. With a value pair of ''75% 50%'', the point 75% across
      and 50% down the image is to be placed at the point 75% across and 50%
      down the area.
      <div class="figure">
      <p><img alt="Diagram of image position within element" src="bg-pos.png">
      <p class="caption">Diagram of the meaning of ''background-position: 75% 50%''.
      </div>
    </div>

  <dt>&lt;length&gt;

  <dd>A length value gives a fixed length as the offset. For example, with a
    value pair of ''2cm 1cm'', the upper left corner of the image
    is placed 2cm to the right and 1cm below the upper left corner of the
    background positioning area.

  <dt><dfn id="position-top">top</dfn>

  <dd>Equivalent to ''0%'' for the vertical position if one or two
    values are given, otherwise specifies the top edge as the origin for the
    next offset.

  <dt><dfn id="position-right">right</dfn>

  <dd>Equivalent to ''100%'' for the horizontal position if one or two
    values are given, otherwise specifies the right edge as the origin
    for the next offset.

  <dt><dfn id="position-bottom">bottom</dfn>

  <dd>Equivalent to ''100%'' for the vertical position if one or two
    values are given, otherwise specifies the bottom edge as the origin
    for the next offset.

  <dt><dfn id="position-left">left</dfn>

  <dd>Equivalent to ''0%'' for the horizontal position if one or two
    values are given, otherwise specifies the left edge as the origin
    for the next offset.

  <dt><dfn id="position-center">center</dfn>

  <dd>Equivalent to ''50%'' (''left 50%'') for the
    horizontal position if it is not otherwise given, or ''50%''
    (''top 50%'') for the vertical position if it is.
</dl>

<div class="example">
  <p>The following 'background' shorthand declarations use keywords
  to set 'background-position' to the stated percentage values.</p>
  <pre>
  body { background: url("banner.jpeg") right top }    /* 100%   0% */
  body { background: url("banner.jpeg") top center }   /*  50%   0% */
  body { background: url("banner.jpeg") center }       /*  50%  50% */
  body { background: url("banner.jpeg") bottom }       /*  50% 100% */
  </pre>
</div>

<div class="example">
  <p>In the example below, the (single) image is placed in the lower-right
  corner of the viewport.
  <pre>
  body {
    background-image: url("logo.png");
    background-attachment: fixed;
    background-position: 100% 100%;
    background-repeat: no-repeat;
  }
  </pre>
</div>

<div class=example>
<p>Background positions can also be relative to other corners than the
top left. E.g., the following puts the background image 10px from the
bottom and 3em from the right:

<pre>background-position: right 3em bottom 10px</pre>
</div>

<p>See the section <a href="#layering">“Layering multiple background
images”</a> for how 'background-position' interacts with
other comma-separated background properties to form each background
image layer.



<h3>The 'background-clip' property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>background-clip</dfn>
    <tr>
      <th>Value:
      <td>[border-box | padding-box ]
      [ , [border-box | padding-box ] ]*
    <tr>
      <th>Initial:
      <td>border-box
    <tr>
      <th>Applies to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>same as specified value
</table>

<p>Determines the <dfn id="background-painting-area">background painting
area</dfn>. Values have the following meanings:

<dl>
  <dt><dfn id="clip-padding-box">padding-box</dfn></dt>
  <dd>The background is painted within (clipped to) the
    <span>padding box.</span>
  <dt><dfn id="clip-border-box">border-box</dfn></dt>
  <dd>The background is painted within (clipped to) the
    <span>border box.</span>
</dl>

<p class=note>Note that the background is always drawn <em>behind</em>
the border, if any. See “Elaborate description of Stacking Contexts” in
[[!CSS21]].

<p>See the section <a href="#layering">“Layering multiple background
images”</a> for how ''background-clip'' interacts with other
comma-separated background properties to form each background image
layer.



<h3>The 'background-origin' property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>background-origin</dfn>
    <tr>
      <th>Value:
      <td><var>&lt;bg-origin&gt;</var>
        [ , <var>&lt;bg-origin&gt;</var> ]*
    <tr>
      <th>Initial:
      <td>padding-box
    <tr>
      <th>Applies to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>same as specified value
</table>

<p>For elements rendered as a single box, specifies the
<dfn id="background-positioning-area">background positioning area</dfn>.
For elements rendered as multiple boxes (e.g., inline boxes on several
lines, boxes on several pages) specifies which boxes the 'background-break'
operates on to determine the background positioning area(s). Where

<pre class=prod><dfn><var>&lt;bg-origin&gt;</var></dfn> = border-box | padding-box | content-box</pre>

<dl>
  <dt><dfn>padding-box</dfn>
  <dd>The position is relative to the padding box. (For single boxes
    ''0 0'' is the upper left corner of the padding edge,
    ''100% 100%'' is the lower right corner.)
  <dt><dfn>border-box</dfn>
  <dd>The position is relative to the border box.
  <dt><dfn>content-box</dfn>
  <dd>The position is relative to the content box.
</dl>

<p>If the 'background-attachment' value for this image is
''fixed'', then this property has no effect: in this case the
background positioning area is the
<a href="http://www.w3.org/TR/CSS21/visudet.html#containing-block-details">initial containing block</a> [[!CSS21]].

<p class="note">Note that if 'background-clip' is ''padding-box'',
'background-origin' is ''border-box'', and 'background-position' is
<code>top left</code> (the initial value), then the top left of the
background image will be clipped.

<p>See the section <a href="#layering">“Layering multiple background
images”</a> for how ''background-clip'' interacts with other
comma-separated background properties to form each background image
layer.



<h3>The 'background-size' property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>background-size</dfn>
    <tr>
      <th>Value:
      <td><var>&lt;bg-size&gt;</var> [ , <var>&lt;bg-size&gt;</var> ]*
    <tr>
      <th>Initial:
      <td>auto
    <tr>
      <th>Applies to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>see text
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>for &lt;length&gt; the absolute value, otherwise as specified
</table>

<p>Specifies the size of the background images. Where

<pre class=prod><dfn><var>&lt;bg-size&gt;</var></dfn> = [ <var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var> | auto ]{1,2} | cover | contain</pre>

<p>Values have the following meanings:

<dl>
  <dt><dfn>contain</dfn></dt>
  <dd>Scale the image, while preserving its intrinsic aspect ratio
    (if any), to the largest size such that both its width and its
    height can fit inside the <span class=index>background
    positioning area.</span></dd>

  <dt><dfn>cover</dfn></dt>
  <dd>Scale the image, while preserving its intrinsic aspect ratio
    (if any), to the largest size such that both its width and its
    height can completely cover the background positioning area.</dd>

  <dt><dfn id="size-width-height">[ <var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var> | auto ]{1,2}</dfn></dt>
  <dd>
    <p>The first value gives the width of the corresponding image,
    the second value its height. If only one value is given the second
    is assumed to be ''auto''.

    <p>A percentage is relative to the background positioning area.

    <p>An ''auto'' value for one dimension is resolved by using the
    image's intrinsic ratio and the size of the other dimension, or
    failing that, using the image's intrinsic size, or failing that,
    treating it as 100%.

    <p>If both values are ''auto'' then the intrinsic width and/or
    height of the image should be used, if any, the missing dimension
    (if any) behaving as ''auto'' as described above. If the image has
    neither an intrinsic width nor an intrinsic height, its size is
    determined as for ''contain''.

    <p>Negative values are not allowed.
  </dd>
</dl>

<div class="example">
<p>Here are some examples. The first example stretches the background
image independently in both directions to completely cover the content
area:

<pre>
div {
    background-image: url(plasma.png);
    background-size: 100% 100%;
    background-origin: content-box }
</pre>

<p>The second example stretches the image so that exactly two copies
fit horizontally. The aspect ratio is preserved:

<pre>
p {
    background-image: url(tubes.png);
    background-size: 50% auto;
    background-origin: border-box }
</pre>

<p>This example forces the background image to be 15 by 15 pixels:

<pre>
para {
    background-size: 15px 15px;
    background-image: url(tile.png)}
</pre>

<p>This example uses the image's intrinsic size. Note that this is the
only possible behavior in CSS level&nbsp;1 and 2.

<pre>
body {
    background-size: auto;            /* default */
    background-image: url(flower.png) }
</pre>

<p>The following example rounds the height of the image to 25%, down
from the specified value of 30%. At 30%, three images would fit
entirely and a fourth only partially. After rounding, four images
fit. The width of the image is 20% of the background area width and is
not rounded.

<pre>
p {
    background-image: url(chain.png);
    background-repeat: no-repeat round;
    background-size: 20% 30% }
</pre>
</div>

<p>If 'background-repeat' is ''round'' for one (or both) directions,
there is a second step. The UA must reduce the size in that direction
(or both directions) so that the image fits a whole number of times in
the background area. In the case of the width:

<blockquote>
  <p>If <var>X</var> &ne; 0 is the width of the image after step one
  and <var>W</var> is the width of the background area, then the
  rounded width <var>X'</var> = <var>W</var> / ceil(<var>W</var> /
  <var>X</var>)
</blockquote>

<p>The height is analogous. ceil() is a function that returns its
argument if it is a whole number, otherwise the next bigger whole
number.

<p>If 'background-repeat' is
''round'' for one direction only and if
'background-size' is
''auto'' for the other direction, then there is a third
step: that other direction is scaled so that the original aspect ratio
is restored.

<div class=example>
<p>In this example the background image is shown at its intrinsic size:

<pre>
div {
  background-image: url(image1.png);
  background-repeat: repeat;         /* default */
  background-size: auto }            /* default */
</pre>

<p>In the following example, the background is shown with a width of
3em and its height is scaled proportionally to keep the original
aspect ratio:

<pre>
div {
  background-image: url(image2.png);
  background-repeat: repeat;         /* default */
  background-size: 3em }             /* = '3em auto' */
</pre>

<p>In the following example, the background is shown with a width of
3em or slightly smaller, so that it fits a whole number of times in
the width of the background. The height is scaled proportionally to
keep the original aspect ratio:

<pre>
div {
  background-image: url(image3.png);
  background-repeat: round repeat;
  background-size: 3em auto }
</pre>

<p>In the following example, the background image is shown with a
width of 3em and a height that is either the height corresponding to
that width at the original aspect ratio or slightly less:

<pre>
div {
  background-image: url(image4.png);
  background-repeat: repeat round;
  background-size: 3em auto }
</pre>
<p>In the following example, the background image is shown with a
height of 4em or slightly less, so that it fits a whole number of
times in the background height. The width is the width that correspond
to a 4em height at the original aspect ratio or slightly less:

<pre>
div {
  background-image: url(image5.png);
  background-repeat: round;
  background-size: auto 4em }
</pre>
</div>

<p>If the background image's width or height resolves to zero, this
causes the image not to be displayed. (The effect is the same as
if it had been a transparent image.)

<p>See the section <a href="#layering">“Layering multiple background
images”</a> for how 'background-clip' interacts with other
comma-separated background properties to form each background image
layer.



<h3>The 'background-break' property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>background-break</dfn>
    <tr>
      <th>Value:
      <td>bounding-box | each-box | continuous
    <tr>
      <th>Initial:
      <td>continuous
    <tr>
      <th>Applies to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>N/A
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>same as specified value
</table>

<p>This property applies to elements when they are broken into several
boxes (for example, across lines or across pages). It specifies how the
<span class=index>background positioning area</span> is derived from
these multiple boxes and how the element's background is drawn within
them.

<p>Values have the following meanings:

<dl>
  <dt><dfn>bounding-box</dfn>

    <dd>The background positioning area is the smallest rectangle that
    encloses all broken boxes of the element.
    If the boxes are on different pages, the pages are treated as one
    continuous page&#8212;as if their page content areas were glued
    together in the block progression direction of the root element (i.e.
    glued together top to bottom for horizontal text mode)&#8212;and
    the rectangle drawn on this continuous page. If the page content
    areas have different widths, then they are aligned on the start edge
    (as defined by the properties applied to the root element). The
    background is only painted where indicated by 'background-clip'.

  <dt><dfn>each-box</dfn>

    <dd>The background is drawn independently in each box of the element.
    A no-repeat background image will thus be rendered once in each
    box of the element.

  <dt><dfn>continuous</dfn>

    <dd><p>The effect is as if, after the element has been laid out
    (including any justification, bidi reordering, page breaks, etc.),
    all the element's boxes are taken and put one after the other in
    visual order. The background is applied to the bounding box of
    this composite box and then the boxes are put back, with their
    share of the background.</p>

    <p>For boxes broken across lines, first boxes on the same line are
    connected in visual order. Then boxes on subsequent lines are
    ordered according to the element's inline progression direction and
    aligned on the baseline.
    For example in a left-to-right containing block ('direction' is
    ''ltr''), the first box is the leftmost box on the first line and
    boxes from subsequent lines are put to the right of it. In a
    right-to-left containing block, the first box is the rightmost on
    the first line and subsequent boxes are put to the left of it.</p>

    <p>For boxes broken across columns, the the columns are treated as
    one continuous element, as if the column boxes were glued together
    in the block progression direction of the multi-column element.
    For boxes broken across pages, the page content areas are glued
    together in the block progression direction of the root element.
    In these cases, if the pieces have different widths (heights, if
    the root element / multi-column element is in vertical text mode),
    then each piece draws its background assuming that the
    whole element has the same width (height) as this piece. This
    ensures that right-aligned images stay aligned to the right edge,
    left-aligned images stay aligned to the left edge, and centered
    images stay centered.
</dl>



<h3>The 'background' shorthand property</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn id="background">background</dfn>
    <tr>
      <th>Value:
      <td>[ <var>&lt;bg-layer&gt;</var> , ]* <var>&lt;final-bg-layer&gt;</var>
    <tr>
      <th>Initial:
      <td>see individual properties
    <tr>
      <th>Applies to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>see individual properties
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed value:
      <td>see individual properties
</table>

<p>Where

<pre class=prod><dfn><var>&lt;bg-layer&gt;</var></dfn> = <var>&lt;bg-image&gt;</var> || <var>&lt;bg-position&gt;</var> || / <var>&lt;bg-size&gt;</var> || <var>&lt;repeat&gt;</var> || <var>&lt;attachment&gt;</var> || <var>&lt;bg-origin&gt;</var> </pre>

<p>where ''<var>&lt;bg-position&gt;</var>'' must not occur before
''/ <var>&lt;bg-size&gt;</var>'' if both are present.

<pre class=prod><dfn><var>&lt;final-bg-layer&gt;</var></dfn> = <var>&lt;bg-image&gt;</var> || <var>&lt;bg-position&gt;</var> || / <var>&lt;bg-size&gt;</var> || <var>&lt;repeat&gt;</var> || <var>&lt;attachment&gt;</var> || <var>&lt;bg-origin&gt;</var> || <var>&lt;'background-color'&gt;</var></pre>

<p>where ''<var>&lt;bg-position&gt;</var>'' must not occur before
''/ <var>&lt;bg-size&gt;</var>'' if both are present.

<p class=note>Note that a color is permitted in
<var>&lt;final-bg-layer&gt;</var>, but not in <var>&lt;bg-layer&gt;</var>.

<p>The 'background' property is a
shorthand property for setting most background properties at the same
place in the style sheet. Given a valid declaration, the shorthand first
sets each of
'background-color',
'background-position',
'background-size',
'background-repeat',
'background-origin',
'background-clip',
'background-attachment' and
'background-image' to its initial value, then assigns explicit values
given in the declaration.

<p>If 'background-origin' is present and its value matches a possible
value for 'background-clip' then it also sets 'background-clip' to
that value. For example, ''background: border-box'' sets both
'background-origin' and 'background-clip' to ''border-box''.

<p>The 'background' shorthand does not set 'background-break'.

<div class="example">
<p style="display:none">Examples:

<p>In the first rule of the following example, only a value for
'background-color' has been given and the
other individual properties are set to their initial values. In the
second rule, many individual properties have been specified.

<pre>
body { background: red }
p { background: url("chess.png") / 10em gray
       40% round fixed border border}
</pre>

<p>The first rule is equivalent to:

<pre>
body {
    background-color: red;
    background-position: 0% 0%;
    background-size: auto auto;
    background-repeat: repeat repeat;
    background-clip: border-box;
    background-origin: padding-box;
    background-attachment: scroll;
    background-image: none }
</pre>

<p>The second is equivalent to:

<pre>
p {
    background-color: gray;
    background-position: 40% 50%;
    background-size: 10em 10em;
    background-repeat: round round;
    background-clip: border-box;
    background-origin: border-box;
    background-attachment: fixed;
    background-image: url(chess.png) }
</pre>
</div>

<div class=example>
<p>The following example shows how a both a background color (<span
class=css>#CCC</span>) and a background image (<span
class=css>url(metal.jpg)</span>) are set. The image is stretched to
the full width of the element:

<pre>
E { background: #CCC url("metal.jpg") /100% auto no-repeat top left }
</pre>
</div>

<div class=example>
<p>Another example shows equivalence:

<pre>
div { background: padding url(paper.jpg) white center }
div {
    background-color: white;
    background-image: url(paper.jpg);
    background-repeat: repeat;
    background-attachment: scroll;
    background-position: center;
    background-clip: padding-box;
    background-origin: padding-box;
    background-size: auto auto }
</pre>
</div>

<div class=example>
<p>The following declaration with multiple, comma-separated values

<pre>
background: url(a.png) top left no-repeat,
            url(b.png) center / 100% 100% no-repeat,
            url(c.png) white;
</pre>

<p>is equivalent to

<pre>
background-image:      url(a.png),  url(b.png),        url(c.png);
background-position:   top left,    center,            top left;
background-repeat:     no-repeat,   stretch no-repeat, repeat;
background-clip:       border-box,  border-box,        border-box;
background-origin:     padding-box, padding-box,       padding-box;
background-size:       auto auto,   100% 100%,         auto auto;
background-attachment: scroll,      scroll,            scroll;
background-color:      white;
</pre>
</div>

<p class=note>Note that ''background: url(foo)
white'' and ''background: url(foo), white''
have the same effect.



<h3 id="special-backgrounds">The backgrounds of special elements</h3>

<p>The background of the root element becomes the background of the
<a href="http://www.w3.org/TR/CSS21/intro.html#the-canvas">canvas</a>
and its background painting area extends to
cover the entire canvas, although any images are sized and positioned
relative to the root element as if they were painted for that element
alone. (In other words, the background <em>positioning</em> area is
determined as for the root element.) If the root's 'background-color'
value is ''transparent'', the canvas's background color is UA dependent.
The root element does not paint this background again, i.e. the used
value of its background is transparent.

<p>For documents whose root element is an HTML <code class="html">HTML</code>
element or an XHTML <code class="html">html</code> element: if the computed
value of 'background-image' on the root element is ''none'' and its
'background-color' is ''transparent'', user agents must instead propagate
the computed values of the background properties from that element's first
HTML <code class="html">BODY</code> or <code class="html">body</code> child
element. The used values of that <code class="html">BODY</code> element's
background properties are their initial values, and the propagated values
are treated as if they were specified on the root element.
It is recommended that authors of HTML documents specify the canvas background
for the <code class=html>BODY</code> element rather than the
<code class=html>HTML</code> element.

<div class="example">
<p>According to these rules, the canvas underlying the following HTML
document will have a “marble” background:

<pre>
&lt;!DOCTYPE html PUBLIC '-//W3C//DTD HTML 4.0//EN'
  &gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Setting the canvas background&lt;/title&gt;
    &lt;style type="text/css"&gt;
       body { background: url("http://example.org/marble.png") }
    &lt;/style&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;p&gt;My background is marble.&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>
</div>

<p>The ''::first-line'' pseudo-element is like an inline-level element
for the purposes of the background (see section 5.12.1 of [[!CSS21]]). 
That means, e.g., that in a left-justified first line, the background
does not necessarily extend all the way to the right margin.

<h2 id="borders">Border properties</h2>

<p>The border can either be a predefined style (solid line, double
line, dotted line, pseudo-3D border, etc.) or it can be an image. In
the former case, various properties define the style ('border-style'),
color ('border-color'), and thickness ('border-width') of the border.

<h3 id="the-border-color">The 'border-color' properties</h3>

<table class="propdef">
  <tr>
    <th>Name:
    <td><dfn>border-top-color</dfn> ,
        <dfn>border-right-color</dfn>,
        <dfn>border-bottom-color</dfn>,
        <dfn>border-left-color</dfn>
  <tr>
    <th>Value:
    <td><var>&lt;color&gt;</var>
  <tr>
    <th>Initial:
    <td>currentcolor
  <tr>
    <th>Applies to:
    <td>all elements
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>the computed color
</table>

<table class="propdef">
  <tr>
    <th>Name:
    <td><dfn id="border-color">border-color</dfn>
  <tr>
    <th>Value:
    <td><var>&lt;color&gt;</var>{1,4}
  <tr>
    <th>Initial:
    <td>(see individual properties)
  <tr>
    <th>Applies to:
    <td>all elements
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>see individual properties
</table>

<p>These properties set the foreground color of the border specified
by the <span class=property>border-style</span> properties.

<p>'Border-color' is a shorthand for the
four 'border-*-color' properties. The four values set the top, right,
bottom and left border, respectively. A missing left is the same as
right, a missing bottom is the same as top, and a missing right is
also the same as top.



<h3 id="the-border-style">The 'border-style' properties</h3>

<table class="propdef">
  <tr>
    <th>Name:
    <td><dfn>border-top-style</dfn>,
        <dfn>border-right-style</dfn>,
        <dfn>border-bottom-style</dfn>,
        <dfn>border-left-style</dfn>
  <tr>
    <th>Value:
    <td><var>&lt;border-style&gt;</var>
  <tr>
    <th>Initial:
    <td>none
  <tr>
    <th>Applies to:
    <td>all elements
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>specified value
</table>

<table class="propdef">
  <tr>
    <th>Name:
    <td><dfn>border-style</dfn>
  <tr>
    <th>Value:
    <td><var>&lt;border-style&gt;</var>{1,4}
  <tr>
    <th>Initial:
    <td>(see individual properties)
  <tr>
    <th>Applies to:
    <td>all elements
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>see individual properties
</table>

<p>These properties set the style of the border, unless there is a
<a href="#border-images">border image</a>

<p>'Border-style' is a shorthand for the
other four. Its four values set the top, right, bottom and left border
respectively. A missing left is the same as right, a missing bottom is
the same as top, and a missing right is also the same as top.

<p>Where
<pre class=prod><dfn><var>&lt;border-style&gt;</var></dfn> = none | hidden | dotted | dashed | solid | double | groove | ridge | inset | outset</pre>

<p>Values have the following meanings:

<dl>
  <dt><dfn title="border-style-none">none</dfn>
  <dd>
  No border. Color and width are ignored (i.e., the border has width
  0, unless the border is an image, see
  'background-image'

  <dt><dfn>hidden</dfn>
  <dd>
  Same as 'none', but has different behavior in the border conflict
  resolution rules for border-collapsed tables [[!CSS21]].

  <dt><dfn>dotted</dfn>
  <dd>
  A series of round dots.

  <dt><dfn>dashed</dfn>
  <dd>
  A series of square-ended dashes.

  <dt><dfn>solid</dfn>
  <dd>
  A single line segment.

  <dt><dfn>double</dfn>
  <dd>
  Two parallel solid lines with some space between them. (The
  thickness of the lines is not specified, but the sum of the lines
  and the space must equal
  'border-width'.)

  <dt><dfn>groove</dfn>
  <dd>
  Looks as if it were carved in the canvas. (This is typically
  achieved by creating a “shadow” from two colors that are
  slightly lighter and darker than the
  'border-color'.)

  <dt><dfn>ridge</dfn>
  <dd>
  Looks as if it were coming out of the canvas.

  <dt><dfn>inset</dfn>
  <dd>
  Looks as if the content on inside of the border is sunken into the
  canvas. Treated as 'ridge' in border-collapsed tables. [[!CSS21]]

  <dt><dfn>outset</dfn>
  <dd>
  Looks as if the content on the inside of the border is coming out of
  the canvas. Treated as 'groove' in border-collapsed tables. [[!CSS21]]
</dl>

<p>Borders are drawn in front of the element's background, but behind
the element's content (in case it overlaps).

<div class="figure">
  <p><img alt="Examples of border styles" src="borderstyles.png">

  <p class=caption>Example renderings of the predefined border styles.
</div>

<p class="note">Note: There is no control over the spacing of the dots
and dashes, nor over the length of the dashes. Implementations are
encouraged to choose a spacing that makes the corners symmetrical.

<p class="note">Note: This specification does not define how borders
of different styles should be joined in the corner. Also note that
rounded corners may cause the corners and the contents to overlap, if
the padding is less than the radius of the corner.



<h3>The 'border-width' properties</h3>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>border-top-width</dfn>, <dfn>border-right-width</dfn>,
        <dfn>border-bottom-width</dfn>, <dfn>border-left-width</dfn>
    <tr>
      <th>Value:
      <td><var>&lt;border-width&gt;</var>
    <tr>
      <th>Initial:
      <td>medium
    <tr>
      <th>Applies&nbsp;to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>width* of containing block
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed&nbsp;value:
      <td>absolute length; '0' if the border style is 'none' or 'hidden'
    <tr>
      <td colspan="2" class="footnote">*) if the containing block has
        a horizontal text mode, otherwise the height
</table>

<table class="propdef">
    <tr>
      <th>Name:
      <td><dfn>border-width</dfn>
    <tr>
      <th>Value:
      <td><var>&lt;border-width&gt;</var>{1,4}
    <tr>
      <th>Initial:
      <td>(see individual properties)
    <tr>
      <th>Applies&nbsp;to:
      <td>all elements
    <tr>
      <th>Inherited:
      <td>no
    <tr>
      <th>Percentages:
      <td>see individual properties
    <tr>
      <th>Media:
      <td>visual
    <tr>
      <th>Computed&nbsp;value:
      <td>see individual properties
</table>

<p>These properties set the thickness of the border.
Where

<pre class=prod><dfn><var>&lt;border-width&gt;</var></dfn> = <var>&lt;length&gt;</var> | thin | medium | thick</pre>

<p>The <var>&lt;length&gt;</var> may not be
negative. The lengths corresponding to ''thin'', ''medium'' and
''thick'' are not specified, but the values are constant throughout a
<span>document</span> and thin &le; medium &le; thick. A UA could,
e.g., make the thickness depend on the ''medium'' font size: one
choice might be 1, 3 &amp; 5px when the 'medium' font size is 17px or
less.

<p>'Border-width' is a shorthand that sets the
four 'border-*-width' properties. If it has four values, they set top, right,
bottom and left in that order. If left is missing, it is the same as right;
if bottom is missing, it is the same as top; if right is missing, it is the
same as top.

<p class="note">Note that the initial width is 'medium', but the initial
style is 'none' and therefore the used width is 0.

<p>When the used width of the border is 0, we say that the border is
absent.

<h3 id="the-border-radius">The 'border-radius' properties</h3>

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>border-top-right-radius</dfn>,
        <dfn>border-bottom-right-radius</dfn>,
        <dfn>border-bottom-left-radius</dfn>,
        <dfn>border-top-left-radius</dfn>
  <tr>
    <th>Value: 
    <td><var>&lt;length&gt;</var> <var>&lt;length&gt;</var>?
  <tr>
    <th>Initial:
    <td>0
  <tr>
    <th>Applies to:
    <td>all elements (but see prose)
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>two absolute &lt;length&gt;s
</table>

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>border-radius</dfn>
  <tr>
    <th>Value:
    <td><var>&lt;length&gt;</var>{1,4}
        [ / <var>&lt;length&gt;</var>{1,4} ]?
  <tr>
    <th>Initial:
    <td>0
  <tr>
    <th>Applies to:
     <td>all elements, except table element when 'border-collapse' is
       ''collapse''
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>see individual properties
</table>

<p>The two length values of the 'border-*-radius' properties define
the radii of a quarter ellipse that defines the shape of the corner
of the outer border edge (see the diagram below).
The first value is the horizontal radius. If the
second length is omitted it is equal to the first (and the corner is
thus a quarter circle). If either length is zero, the corner is
square, not rounded.

<p>The 'border-radius' shorthand sets all four 'border-*-radius'
properties. If values are given before and after the slash, then
the values before the slash set the horizontal radius and the values
after the slash set the vertical radius. If there is no slash, then the
values set both radii equally. The four values for each radii are
given in the order top-left, top-right, bottom-right, bottom-left.
If bottom-left is omitted it is the same as top-right. If
bottom-right is omitted it is the same as top-left. If top-right is
omitted it is the same as top-left.

<div class="example">
<pre>
border-radius: 4em;
</pre>
would be equivalent to
<pre>
border-top-left-radius:     4em;
border-top-right-radius:    4em;
border-bottom-right-radius: 4em;
border-bottom-left-radius:  4em;
</pre>
and
<pre>
border-radius: 2em 1em 4em / 0.5em 3em;
</pre>
would be equivalent to
<pre>
border-top-left-radius:     2em 0.5em;
border-top-right-radius:    1em 3em;
border-bottom-right-radius: 4em 0.5em;
border-bottom-left-radius:  1em 3em;
</pre>
</div>

<p>The padding edge (inner border) radius is the outer border radius
minus the corresponding border thickness. In the case where this results
in a negative value, the inner radius is zero. (In such cases its center
might not coincide with that of the outer border curve.) Likewise the
content edge radius is the padding edge radius minus the corresponding
padding, or if that is negative, zero. Thus when two adjoining borders
are of different thicknesses the corner will show a smooth transition
between the thicker and thinner borders.

<p>If the curve interferes with UI elements such as scrollbars, the UA
may reduce the used value of the affected border radii as necessary,
but no more.

<p>Backgrounds, but not the <a href="#the-border-image">border-image</a>,
are clipped to the appropriate curve (as determined by 'background-clip').
Other effects that clip to the border or padding edge (such as 'overflow'
other than ''visible'') also must clip to the curve. The content of
replaced elements is always trimmed to the border edge curve.

<p>The center of color and style transitions between adjoining borders
is at the point on the curve that is at an angle that is proportional
to the ratio of the border widths. For example, if the two widths are
equal, that point is at a 45&deg; angle, and if one is twice the width
of the other the point is at a 30&deg; angle. The line demarcating this
transition is drawn between the point at that angle on the outer curve
and the point at that angle on the inner curve. The transition must be
contained within the segment of the border where the tangent of the
inner curve either not defined or is not parallel with the sides of the
box. It is not defined what the transition looks like, but a gradient
is recommended for color transitions that don't involve dotted or dashed
borders.

<div class="figure">
  <p><img alt="Diagram of the inscribed ellips" src="corner.png">

  <p class=caption>The two values of
  ''border-top-left-radius: 55pt 25pt'' define the
  curvature of the corner.
</div>

<div class="figure">
  <p><img alt="The effect of rounded corners on unequal borders"
  src="smooth-radius.png">

  <p class=caption>The effect of a rounded corner when the two borders
  it connects are of unequal thickness (left) and the effect of a
  rounded corner on borders that are thicker than the radius of the
  corner (right).
</div>

<p>All border styles (''solid'', ''dotted'',  ''inset'', etc.)
follow the curve of the border.

<p>Corners do not overlap: When the sum of two adjacent corner radii
exceeds the size of the border box, UAs must reduce one or more of the
radii. The algorithm for reducing radii is as follows:

<p>The sum of two adjacent radii may not be more than the width or
height (whichever is relevant) of the box. If any sum exceeds that
value, the used values of all radii are reduced according to the
following formula:
Let <var>f</var> = min(<var>L<sub>i</sub></var>/<var>S<sub>i</sub></var>),
where <var>i</var> ∈ {top, right, bottom, left},
<var>S<sub>i</sub></var> is the sum of the radii of the corners on
side <var>i</var>, and <var>L<sub>top</sub></var> =
<var>L<sub>bottom</sub></var> = the width of the box, and
<var>L<sub>left</sub></var> = <var>L<sub>right</sub></var> = the
height of the box. If <var>f</var> < 1, then all corner radii are
reduced by multiplying them by <var>f</var>.

<p class=note>Note that this formula ensures that quarter circles
remain quarter circles and large radii remain larger than smaller
ones, but it may reduce corners that were already small enough, which
may make borders of nearby elements that should look the same look
different.

<div class=example>
<p>For example, the borders A and D of the <a
href="#reduced-radius">figure below</a> might be the
result of
<pre>
box-width: border-box;
width: 6em;
height: 2.5em;
border-radius: 0.5em 2em 0.5em 2em
</pre>
<p>The height (2.5em) is enough for the specified radii (0.5em plus
2.5em). However, if the height is only 2em,
<pre>
box-width: border-box;
width: 6em;
height: 2em;
border-radius: 0.5em 2em 0.5em 2em
</pre>
<p>all corners need to be reduced by a factor 0.8 to make
them fit. The used border radii thus are 0.4em (instead of 0.5em) and
1.6em (instead of 2em). See borders B and C in the figure.

<div class=figure id=reduced-radius>
  <p><img src="corner-large-mix" alt="[image: rectangle with two tiny
  rounded corners and two very large ones, on opposite corners]">

  <p class=caption>These rounded corner might be the result of 'width:
  6em; height: 2.5em; border-radius: 0.5em 2em 0.5em 2em' for A and
  D; and ditto but with 'height: 2em' for B and C.
</div>
</div>

<p>The UA may apply the border-radius properties to ''table'' and
''inline-table'' elements when 'border-collapse' is ''collapse'' but is
not required to. In this case not only must the border radii of adjacent
corners not intersect, but the horizontal and vertical radii of a single
corner may not extend past the boundaries of the cell at that corner
(i.e. the cell's other corners must not be affected by this corner's
border-radius). If the computed values of the border radii would cause
this effect, then the used values of all the border radii of the table
must be reduced by the same factor so that the radii neither intersect
nor extend past the boundaries of their respective corner cells.

<p>The CSS3 UAs should ignore border-radius properties applied to internal
table elements when 'border-collapse' is ''collapse''.
The effect of border-radius on internal table elements is undefined in
CSS3 Backgrounds and Borders, but may be defined in a future specification.

<div class=example>
<p>This example draws ovals of 15em wide and 10em high:

<pre>
DIV.standout {
    width: 13em;
    height: 8em;
    border: solid black 1em;
    border-radius: 7.5em 5em }
</pre>
</div>

<div class=example>
<p>This example adds appropriate padding, so that the
contents do not overflow the corners. Note that there is no border,
but the background will still have rounded corners.

<pre>
DIV {
    background: black;
    color: white;
    border-radius: 1em;
    padding: 1em }
</pre>
</div>



<h3 id="the-border-break">The 'border-break' property</h3>

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>border-break</dfn>
  <tr>
    <th>Value:
    <td>close | [ <var>&lt;border-width&gt;</var> ||
                  <var>&lt;border-style&gt;</var> ||
                  <var>&lt;color&gt;</var> ]
  <tr>
    <th>Initial:
    <td>none
  <tr>
    <th>Applies to:
    <td>elements with a border
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>any &lt;length;&gt; made absolute; any color computed;
      otherwise as specified
</table>

<p>When a box that has a border is broken at a page break, column
break, or, for inline elements, at a line break, a border and some
padding can be inserted at the break, or the border can be left open.

<p>If the value of 'border-break' is ''close'', then each box is
independently wrapped with the border and padding. The 'border-radius',
'border-image', and 'box-shadow', if any, are applied to each box
independently.

<p>Otherwise, if the style is set to ''none'', no border and no padding
are inserted at the break. If some other border style is given, padding
is added as wide as the corresponding side of the 'padding' property,
and a border is added with the specified style, width, and color.
In either case, no box-shadow is drawn at the broken edge;
'border-radius' has no effect at its corners; and the 'border-image' is
rendered for the whole box as if it were unbroken. The effect is as
though the element were rendered with no break present, and then sliced
by the break afterward.

<p class="note">Note this means that padding is added if the border
style is ''hidden'', but not if the border style is ''none''.

<div class="figure">
  <p><img alt="Illustration of border-break" src="border-break.png">

  <p class=caption>Two possibilities for
  'border-break': on the left, the value
  ''none'', on the right the value
  ''solid''.
</div>

<p>For inline elements side of the box that breaks is determined
by the element's inline progression direction, not that of the
containing block. For example, the first part of an inline element
with ''direction: rtl'' inside a block with ''direction: ltr''
will break on the left side.

<h3 id="the-border-shorthands">The
'border-top', 'border-bottom', 'border-right', 'border-left', and
'border' properties</h3>

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>border-top</dfn>,
        <dfn>border-right</dfn>,
        <dfn>border-bottom</dfn>,
        <dfn>border-left</dfn>
  <tr>
    <th>Value:
    <td><var>&lt;border-width&gt;</var> ||
        <var>&lt;border-style&gt;</var> ||
        <var>&lt;color&gt;</var>
  <tr>
    <th>Initial:
    <td>See individual properties
  <tr>
    <th>Applies to:
    <td>all elements
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>see individual properties
</table>

<p>This is a shorthand property for setting the width, style, and
color of the top, right, bottom, and left border of a box. Omitted
values are set to their initial values.

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>border</dfn>
  <tr>
    <th>Value:
    <td><var>&lt;border-width&gt;</var> ||
        <var>&lt;border-style&gt;</var> ||
        <var>&lt;color&gt;</var>
  <tr>
    <th>Initial:
    <td>See individual properties
  <tr>
    <th>Applies to:
    <td>all elements
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>see individual properties
</table>

<p>The 'border' property is a shorthand property for setting the same width,
color, and style for all four borders of a box. Unlike the shorthand 'margin'
and 'padding' properties, the 'border' property cannot set different values
on the four borders. To do so, one or more of the other border properties must
be used.

<p>The 'border' shorthand also resets 'border-image' to its initial value.
It is therefore recommended that authors use the 'border' shorthand, rather
than other shorthands or the individual properties, to override any border
settings earlier in the cascade. This will ensure that 'border-image' has
also been reset to allow the new styles to take effect.

<p class="note">The CSS Working Group intends for the 'border' shorthand to
reset all border properties in future levels of CSS as well. For example, if a
'border-characters' property is introduced in the future to allow glyphs as
borders, it will also be reset by the 'border' shorthand. By using the 'border'
shorthand to reset borders, authors can be guaranteed a "blank canvas" no
matter what properties are introduced in the future.</p>

<div class="example">
<p>For example, the first rule below is equivalent to the set of four
rules shown after it:

<pre>
p { border: solid red }
p {
  border-top: solid red;
  border-right: solid red;
  border-bottom: solid red;
  border-left: solid red;
  border-image: none;
}
</pre>
</div>

<p>Since, to some extent, the properties have overlapping
functionality, the order in which the rules are specified is
important.

<div class="example">
<p>Consider this example:
<pre>
blockquote {
  border-color: red;
  border-left: double;
  color: black
}
</pre>

<p>In the above example, the color of the left border is black, while
the other borders are red. This is due to
'border-left' setting the width, style, and
color. Since the color value is not given by the
'border-left' property, it will be taken from
the 'color' property. The fact that the
'color' property is set after the
'border-left' property is not relevant.
</div>

<h3 id="the-box-shadow">The 'box-shadow' property</h3>

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>box-shadow</dfn>
  <tr>
    <th>Value:
    <td>none | <var>&lt;shadow&gt;</var> [ , <var>&lt;shadow&gt;</var> ]*
  <tr>
    <th>Initial:
    <td>none
  <tr>
    <th>Applies to:
    <td>all elements
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>any &lt;length&gt; made absolute; any color computed; otherwise as specified
</table>

<p>The 'box-shadow' property attaches one or more drop-shadows
to the box. The property is a comma-separated list of shadows, each specified
by 2-4 length values, an optional color, and an optional ''inset''
keyword. Omitted lengths are 0, omitted colors are a UA-chosen color.

<p>Where
<pre class=prod>
<dfn><var>&lt;shadow&gt;</var></dfn> = inset? &amp;&amp; [ <var>&lt;length&gt;</var>{2,4} &amp;&amp; <var>&lt;color&gt;</var>? ]</pre>
<p>The components of each <var>&lt;shadow&gt;</var> are interpreted as follows:

<ul>
  <li>The first length is the horizontal offset of the shadow. A
  positive value draws a shadow that is offset to the right of the
  box, a negative length to the left.

  <li>The second length is the vertical offset. A positive value
  offsets the shadow down, a negative one up.

  <li>The third length is a blur radius. Negative values are not
  allowed. If it is 0, the shadow is sharp, otherwise the larger the
  value, the more the shadow is blurred. The exact algorithm is not
  specified.

  <li>The fourth length is a spread radius. Positive values cause
  the shadow to grow in all directions by the specified radius.
  Negative values cause the shadow to shrink. The shadow should not
  change shape when a spread radius is applied: sharp corners should
  remain sharp.

  <li>The color is the color of the shadow.

  <li>The ''inset'' keyword, if present, changes the drop
  shadow from an outer shadow (one that shadows the box onto the
  canvas, as if it were lifted above the canvas) to an inner shadow
  (one that shadows the canvas onto the box, as if the box were cut
  out of the canvas and shifted behind it).
</ul>

<p>An outer box-shadow casts a shadow as if the border-box of the element
were opaque. The shadow is drawn outside the border edge only: it is
not drawn inside the border-box of the element.

<p>An inner box-shadow casts a shadow as if everything outside the padding
edge were opaque. The inner shadow is drawn inside the padding edge only:
it is not drawn outside the padding box of the element.

<p>If the box has a nonzero <span class="property">'border-radius'</span>,
the shadow is rounded in the same way. If an element has multiple boxes,
all of them get drop shadows, but shadows are only drawn where borders
would also be drawn, see 'border-break'.

<p>The shadow effects are applied front-to-back: the first shadow is
on top and the others are layered behind. Shadows do not influence
layout and may overlap other boxes or their shadows. In terms of stacking
contexts and the painting order, the outer shadows of an element are drawn
immediately below the background of that element, and the inner shadows of
an element are drawn immediately above the background of that element
(below the borders and border image, if any).

<div class="example">
<p>Below are some examples of an orange box with a blue border being
  being given a drop shadow.</p>

<table class="data" id="box-shadow-samples">
  <tr>
    <th scope="rowgroup">
      <pre><code><!--
     -->border:5px solid blue; 
<!-- -->background-color:orange;
<!-- -->width: 144px;
<!-- -->height: 144px;<!--
   --></code></pre>
    <th>
      <pre><code>border-radius: 20px;</code></pre>
    <th>
      <pre><code>border-radius: 0;</code></pre>
  <tr>
    <th>
      <pre><code><!--
     -->box-shadow: 
<!-- -->  rgba(0,0,0,0.4) 
<!-- -->  10px 10px;<!--
   --></code></pre>
    <td>
      <img src="shadow-outer-round.png" width="175" height="175"
           alt="A round-cornered box with a light gray shadow the same shape
                as the border box offset 10px to the right and 10px down
                from directly underneath the box.">
    <td>
      <img src="shadow-outer-square.png" width="175" height="175"
           alt="A square-cornered box with a light gray shadow the same shape
                as the border box offset 10px to the right and 10px down
                from directly underneath the box.">
  <tr>
    <th>
      <pre><code><!--
     -->box-shadow: 
<!-- -->  rgba(0,0,0,0.4) 
<!-- -->  10px 10px
<!-- -->  inset<!--
   --></code></pre>
    <td>
      <img src="shadow-inner-round.png" width="175" height="175"
           alt="A round-cornered box with a light gray shadow the inverse shape
                of the padding box filling 10px in from the top and left edges
                (just inside the border).">
    <td>
      <img src="shadow-inner-square.png" width="175" height="175"
           alt="A square-cornered box with a light gray shadow the inverse shape
                of the padding box filling 10px in from the top and left edges
                (just inside the border).">
  <tr>
    <th>
      <pre><code><!--
     -->box-shadow: 
<!-- -->  rgba(0,0,0,0.4) 
<!-- -->  10px 10px 0
<!-- -->  10px /* spread */<!--
   --></code></pre>
    <td>
      <img src="shadow-outer-spread-round.png" width="175" height="175"
           alt="A round-cornered box with a light gray shadow the same shape
                as the box but 20px taller and wider and offset so that the
                top and left edges of the shadow are directly underneath the
                top and left edges of the box.">
    <td>
      <img src="shadow-outer-spread-square.png" width="175" height="175"
           alt="A square-cornered box with a light gray shadow the same shape
                as the box but 20px taller and wider and offset so that the
                top and left edges of the shadow are directly underneath the
                top and left edges of the box.">
  <tr>
    <th>
      <pre><code><!--
     -->box-shadow: 
<!-- -->  rgba(0,0,0,0.4) 
<!-- -->  10px 10px 0
<!-- -->  10px /* spread */
<!-- -->  inset<!--
   --></code></pre>
    <td>
      <img src="shadow-inner-spread-round.png" width="175" height="175"
           alt="A round-cornered box with a light gray shadow the inverse shape
                of the box but 20px narrower and shorter filling 20px in from
                the top and left edges (just inside the border).">
    <td>
      <img src="shadow-inner-spread-square.png" width="175" height="175"
           alt="A round-cornered box with a light gray shadow the inverse shape
                of the box but 20px narrower and shorter filling 20px in from
                the top and left edges (just inside the border).">
  </tr>
</table>
</div>

<p>The ''box-shadow'' property applies to the ''::first-letter'' pseudo-element,
but not the ''::first-line'' pseudo-element. Outer shadows have no effect on
internal table elements in the collapsing border model. If a shadow is defined
for single border edge in the collapsing border model has multiple border
thicknesses (e.g. an outer shadow on a table where one row has thicker borders
than the others, or an inner shadow on a rowspanning table cell that adjoins
cells with different border thicknesses), the exact position and rendering its
shadows are undefined.

<h2 id="border-images">Border Images</h2>

Authors can specify an image to be used in place of the border styles.
In this case, the border's design is taken from the sides and corners
of an image specified with 'border-image-source', whose pieces may be
sliced, scaled and stretched in various ways to fit the size of the
border area.

<h3>The 'border-image-source' property</h3>

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>border-image-source</dfn>
  <tr>
    <th>Value:
    <td>none | <var>&lt;image&gt;</var>
  <tr>
    <th>Initial:
    <td>none
  <tr>
    <th>Applies to:
    <td>All elements, except internal table elements when 'border-collapse' is
    ''collapse''
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>''none'' or the image with its URI made absolute
</table>

<p>Specifies an image to use instead of the border styles given by the
'border-style' properties and as an additional background layer for the
element. If the value is ''none'' or if the image cannot be displayed,
the border styles will be used.

<h3>The 'border-image-slice' property

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>border-image-slice</dfn>
  <tr>
    <th>Value:
    <td><var>&lt;number&gt;</var> | <var>&lt;percentage&gt;</var>]{1,4} &amp;&amp; fill?
  <tr>
    <th>Initial:
    <td>100%
  <tr>
    <th>Applies to:
    <td>All elements, except internal table elements when 'border-collapse' is
    ''collapse''
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>refer to size of the border image
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>as specified
</table>

<p>The four 'border-image-slice' values represent inward offsets from
the top, right, bottom, and left edges of the image (respectively),
dividing it into nine regions: four corners, four edges and a middle.
The middle image part is discarded (treated as fully transparent)
unless the ''fill'' keyword is present.

<p>If the fourth number/percentage is absent, it is the same as the
second. If the third one is also absent, it is the same as the first.
If the second one is also absent, it is the same as the first.

<p>Percentages are relative to the size of the image. Numbers
represent pixels in the image (if the image is a raster image) or
vector coordinates (if the image is a vector image).
Negative values are not allowed and values bigger than the size of
the image are interpreted as 100%.

<p>The regions given by the 'border-image-slice' values may overlap.
However if the sum of the right and left widths is equal to or
greater than the width of the image, the images for the top and
bottom edge and the middle part are empty, which has the same effect
as if a nonempty transparent image had been specified for those
parts. Analogously for the top and bottom values.

<div class=figure>
  <p><img src="slice" alt="Diagram: two horizontal cuts and two
  vertical cuts through an image">

  <p class=caption>Diagram illustrating the cuts corresponding to the
  value ''url("foo") 25% 30% 12% 20%''
</div>

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>border-image-width</dfn>
  <tr>
    <th>Value:
    <td>[ <var>&lt;length&gt;</var> | <var>&lt;percentage&gt;</var> | <var>&lt;number&gt;</var> | from-image ]{1,4}
  <tr>
    <th>Initial:
    <td>1
  <tr>
    <th>Applies to:
    <td>All elements, except table elements when 'border-collapse' is
    ''collapse''
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>all &lt;length&gt;s made absolute, otherwise as specified
</table>

<p>The border image is drawn inside an area called the
<dfn>border image area</dfn>. This is a nine-part area whose boundaries
by default correspond to the border box.

<p>The four numeric, percentage, or length values of 'border-image-width'
specify offsets that are used to divide the border-image area into nine
parts. The four values represent inward distances from the the top, right,
bottom, and left sides of the border-image area, respectively. If the
fourth value is absent, it is the same as the second. If the third one
is also absent, it is the same as the first. If the second one is also
absent, it is the same as the first. Percentages refer to the size of
the border-image area. Numbers represent multiples of the corresponding
<a href="#the-border-width-properties">border-width</a>.

<p class="issue">Should percentages be used instead of numbers for ratios?</p>

<p>If ''intrinsic'' is specified then the border image widths are found
from the intrinsic sizes of the image slices. If the image does not have
the required intrinsic dimensions then the corresponding
<a href="#the-border-width-properties">border-width</a> is used instead.

<p>If two opposite 'border-image-width' offsets are large enough that
they overlap, then their used values are proportionally reduced until
they no longer overlap.

<h3>The 'border-image-outset' property</h3>

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>border-image-outset</dfn>
  <tr>
    <th>Value:
    <td><var>&lt;length&gt;</var> | <var>&lt;number&gt;</var>]{1,4}
  <tr>
    <th>Initial:
    <td>0
  <tr>
    <th>Applies to:
    <td>All elements, except internal table elements when 'border-collapse' is
    ''collapse''
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>all &lt;length&gt;s made absolute, otherwise as specified
</table>


<p>The <dfn id="border-image-outset">border-image-outset</dfn> values
specify the amount by which the border image area extends beyond the
border box on the top, right, bottom, and left sides respectively.
If the fourth length is absent, it is the same as the second. If the
third one is also absent, it is the same as the first. If the second
one is also absent, it is the same as the first. Numbers represent
multiples of the corresponding
<a href="#the-border-width-properties">border-width</a>.

<p>Negative values are not allowed for any of the border-image values.

<h3>The 'border-image-repeat' property

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>border-image-repeat</dfn>
  <tr>
    <th>Value:
    <td>[ stretch | repeat | round ]{1,2}
  <tr>
    <th>Initial:
    <td>stretch
  <tr>
    <th>Applies to:
    <td>All elements, except internal table elements when 'border-collapse' is
    ''collapse''
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>as specified
</table>

<p>This property specifies how the images for the sides and the middle
part of the border image are scaled and tiled. If the second keyword is
absent, it is assumed to be the same as the first.

<p class="issue">The WG wanted to solicit ideas for an alternative name
to this property.</p>

<p>The nine images are scaled and tiled in four steps:

<dl>
<dt>step&nbsp;1
<dd>
  <ul>
  <li><p>The two images for the top and bottom edges are made as tall
  as the top and bottom border-image area parts, respectively, and
  their width is scaled proportionally.

  <li><p>The images for the left and right edge are made as wide as the
  left and right border-image area parts, respectively, and their
  height is scaled proportionally.

  <li><p>The corner images are scaled to be as wide and as tall as the
  two border-image edges they are part of.

  <li><p>The middle image's width is scaled by the same factor as the top
  image unless that factor is zero or infinity, in which case the scaling
  factor of the bottom is substituted, and failing that, the width is not
  scaled. The height of the middle image is scaled by the same factor as
  the left image unless that factor is zero or infinity, in which case the
  scaling factor of the right image is substituted, and failing that, the
  height is not scaled.</p>
  </ul>
<dt>step&nbsp;2
<dd>
  <ul>
  <li><p>If the first keyword is ''stretch'', the top, middle and bottom
  images are further scaled to be as wide as the middle part of the
  border-image area. The height is not changed any further.

  <li><p>If the first keyword is ''round'', the top, middle and bottom
  images are reduced in width, so that exactly a whole number of them
  fit in the middle part of the border-image area, as follows:

  <blockquote>
    <p>If <var>X</var> &ne; 0 is the width of the image and
    <var>W</var> is the width of the padding area, then the rounded
    width <var>X'</var> = <var>W</var> / ceil(<var>W</var> /
    <var>X</var>)
  </blockquote>

  <li><p>If the first keyword is 'repeat', the top, middle, and bottom
    images are not changed any further.


  <li><p>The effects of ''stretch'', ''round'', and ''repeat'' for the
    second keyword are analogous, acting on the height of the left,
    middle and right images.
  </ul>

<dt>step&nbsp;3
<dd>
  <ul>
  <li><p>If the first keyword is ''round'', the top, middle, and bottom
    images are placed at the left edge of their respective parts of the
    border-image area. Otherwise the images are centered horizontally
    in their respective areas.
  <li><p>If the second keyword is ''round'', the left, middle, and right
    images are placed at the top edge of their respective parts of the
    border-image area. Otherwise the images are centered vertically in
    their respective areas.
  </ul>

<dt>step&nbsp;4
<dd>
  <ul>
  <li><p>The images are then tiled within their respective areas. All
    images are drawn at the same stacking level as normal borders:
    immediately in front of the background layers.
  </ul>
</dl>

<div class=example>
<p>This example creates a top and bottom border consisting of a whole
number of orange diamonds and a left and right border of a single,
stretched diamond. The corners are diamonds of a different color. The
image to tile is as follows. Apart from the diamonds, it is
transparent:

<p><img src="border.png" alt="Tile for border">

<p>The image is 81 by 81 pixels and has to be divided into 9 equal
parts. The style rules could thus be as follows:

<pre>
DIV {
  border-image: url("border.png") 27 round stretch;
  border: double orange 1em }
</pre>

<p>The result, when applied to a DIV of 12 by 5em, will be similar to
this:

<p><img src="borderresult.png" alt="element with a diamond border">
</div>

<h3>The 'border-image' shorthand</h3>

<table class=propdef>
  <tr>
    <th>Name:
    <td><dfn>border-image</dfn>
  <tr>
    <th>Value:
    <td>&lt;'border-image-source'&gt;
        || &lt;'border-image-slice;&gt;
           [ / &lt;'border-image-width'&gt;? [ / &lt;'border-image-outset'&gt; ]?
           || / / &lt;'border-image-outset'&gt;
           ]
        || &lt;'border-image-repeat'&gt;
  <tr>
    <th>Initial:
    <td>See individual properties
  <tr>
    <th>Applies to:
    <td>See individual properties
  <tr>
    <th>Inherited:
    <td>no
  <tr>
    <th>Percentages:
    <td>N/A
  <tr>
    <th>Media:
    <td>visual
  <tr>
    <th>Computed value:
    <td>See individual properties
</table>

<p>This is a shorthand property for setting 'border-image-source',
'border-image-slice', 'border-image-width', 'border-image-outset' and
'border-image-repeat'. Omitted values are set to their initial values.

<h2>Definitions</h2>


<h3>Glossary</h3>

<p>The following terms and abbreviations are used in this
module.

<dl>
<dt><dfn>UA</dfn>
<dt><dfn id="user-agent">User Agent</dfn>
<dd>
<p>A program that reads and/or writes CSS style sheets on behalf of a
user in either or both of these categories: programs whose purpose is
to render <span>documents</span> (e.g., browsers) and
programs whose purpose is to create style sheets (e.g., editors). A UA
may fall into both categories. (There are other programs that read or
write style sheets, but this module gives no rules for them.)

<dt><dfn title="document|documents">document</dfn>
<dt><dfn id="source-document">source document</dfn>
<dd>
<p>A tree-structured document with elements and attributes, such as an
SGML or XML document [[XML11]].

<dt><dfn id="html-document" title="HTML document|HTML documents">HTML
document</dfn>
<dd>
<p>A document that has the MIME type text/html [[RFC2854]] and
conforms to that type.

<dt><dfn id="xhtml-document">XHTML document</dfn>
<dd>
<p>A document that has the MIME type text/xhtml+xml or
application/xhtml+xml [[RFC3236]] and conforms to either type. <span
class=issue>The term XHTML seems not to be used in this spec
currently; should we remove this gloss?</span>

<dt><dfn id="style-sheet">style sheet</dfn>
<dd>
<p>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS style sheet</a>.
</dl>


<h3 id=conformance>Conformance</h3>

<p>Conformance requirements are expressed with a combination of
descriptive assertions and RFC 2119 terminology. The key words "MUST",
"MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
"RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
document are to be interpreted as described in RFC 2119.
However, for readability, these words do not appear in all uppercase
letters in this specification. All of the text of this specification is
normative except sections explicitly marked as non-normative, examples,
and notes. [[!RFC2119]]</p>

<p>Examples in this specification are introduced with the words "for example"
or are set apart from the normative text with <code>class="example"</code>,
like this:

<div class="example">
  <p>This is an example of an informative example.</p>
</div>

<p>Informative notes begin with the word "Note" and are set apart from the
normative text with <code>class="note"</code>, like this:

<p class="note">Note, this is an informative note.</p>

<p>Conformance to CSS Backgrounds and Borders Level 3 is defined
for three classes:
<dl>
  <dt><dfn id="style-sheet-conform">style sheet</dfn></dt>
    <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS
    style sheet</a>.
  <dt><dfn>renderer</dfn></dt>
    <dd>A UA that interprets the semantics of a style sheet and renders
    <span>documents</span> that use them.
  <dt><dfn id="authoring-tool">authoring tool</dfn></dt>
    <dd>A UA that writes a style sheet.
</dl>

<p>A style sheet is conformant to CSS Backgrounds and Borders Level 3
if all of its declarations that use properties defined in this module
have values that are valid according to the generic CSS grammar and the
individual grammars of each property as given in this module.

<p>A renderer is conformant to CSS Backgrounds and Borders Level 3
if, in addition to interpreting the style sheet as defined by the
appropriate specifications, it supports all the properties defined
by CSS Backgrounds and Borders Level 3 by parsing them correctly
and rendering the document accordingly. However the inability of a
UA to correctly render a document due to limitations of the device
does not make the UA non-conformant. (For example, a UA is not
required to render color on a monochrome monitor.)

<p>An authoring tool is conformant to CSS Backgrounds and Borders
Level 3 if it writes syntactically correct style sheets, according
to the generic CSS grammar and the individual grammars of each
property in this module.

<h3>Levels</h3>

<p><em>This section is informative.</em> CSS has different levels of
features, each a subset of the other. (See [[CSSBEIJING]] for a full
explanation.) The lists below describe which features from this
specification are in each level.

<h4>CSS Level 1</h4>
<ul>
  <li>'background-color'
  <li>'background-image' only one image (no layers)
  <li>'background-repeat': only 'repeat' | 'repeat-x' | 'repeat-y' | 'no-repeat'
  <li>'background-attachment': only 'scroll' | 'fixed'
  <li>'background-position': only one or two values allowed
  <li>'background' shorthand: only color, image, repeat, attachment and position
  <li>'border-color' properties
  <li>'border-style' properties
  <li>'border-width' properties
  <li>'border-top', 'border-bottom', 'border-right', 'border-left', and 'border' shorthands
</ul>

<h4>CSS Level 2</h4>
<ul>
  <li>'background-color'
  <li>'background-image': only one image (no layers)
  <li>'background-repeat': only 'repeat' | 'repeat-x' | 'repeat-y' | 'no-repeat'
  <li>'background-attachment': only 'scroll' | 'fixed'
  <li>'background-position': only one or two values allowed
  <li>'background': only color, image, repeat, attachment and position
  <li>'border-color' properties
  <li>'border-style' properties
  <li>'border-width' properties
  <li>'border-top', 'border-bottom', 'border-right', 'border-left', and 'border' shorthands
</ul>

<h4>CSS Level 3</h4>
<ul>
  <li>All features described in the CSS Backgrounds and Borders Module Level 3
</ul>


<h3 id="exit">CR exit criteria</h3>

<p>As described in the W3C process document, a <a
href="http://www.w3.org/2005/10/Process-20051014/tr.html#cfi">Candidate
Recommendation</a> (CR) is a specification that W3C recommends for use
on the Web. The next stage is “Recommendation,” when the
specification is sufficiently implemented.

<p>For this specification to be proposed as a W3C Recommendation, the
following conditions shall be met. There must be at least two
independent, interoperable implementations of each feature. Each
feature may be implemented by a different set of products, there is no
requirement that all features be implemented by a single product. For
the purposes of this criterion, we define the following terms:

<dl>
  <dt>independent <dd>each implementation must be developed by a
  different party and cannot share, reuse, or derive from code
  used by another qualifying implementation. Sections of code that
  have no bearing on the implementation of this specification are
  exempt from this requirement.

  <dt>interoperable <dd>passing the respective test case(s) in the
  official CSS test suite, or, if the implementation is not a Web
  browser, an equivalent test. Every relevant test in the test
  suite should have an equivalent test created if such a user
  agent (UA) is to be used to claim interoperability. In addition
  if such a UA is to be used to claim interoperability, then there
  must one or more additional UAs which can also pass those
  equivalent tests in the same way for the purpose of
  interoperability. The equivalent tests must be made publicly
  available for the purposes of peer review.

  <dt>implementation <dd>a user agent which:

  <ol class="inline">
    <li>implements the specification.

    <li>is available to the general public. The implementation may
    be a shipping product or other publicly available version
    (i.e., beta version, preview release, or “nightly build”). 
    Non-shipping product releases must have implemented the
    feature(s) for a period of at least one month in order to
    demonstrate stability.

    <li>is not experimental (i.e., a version specifically designed
    to pass the test suite and is not intended for normal usage
    going forward).
  </ol>
</dl>

<p>A minimum of sixth months of the CR period must have elapsed. This
is to ensure that enough time is given for any remaining major errors
to be caught.

<p>Features will be dropped if two or more interoperable
implementations are not found by the end of the CR period.

<p>Features may/will also be dropped if adequate/sufficient (by
judgment of CSS WG) tests have not been produced for those feature(s)
by the end of the CR period.



<h2>Acknowledgments</h2>

<p>Tapas Roy was editor of the Border Module, before it was merged
with the Background Module.

<p>A set of properties for border images was initially proposed by
<em>fantasai.</em> The current simplification (one image cut into nine
parts) is due to Ian Hickson. (Though the original idea seems to
originate with some anonymous Microsoft engineers.)

<p>Thanks to Ben Stucki for defining what happens with rounded corners
if the two adjoining borders are of unequal thickness or one of them
is zero; to Arjan Eising and Anne van Kesteren for the 'border-radius'
syntax.

<p>Emrah Baskaya and <a
href="http://lists.w3.org/Archives/Public/www-style/2006Aug/0001.html">
Simon Pieters</a> were among the people who argued for a fallback
color (see 'background-color'), which is only shown when any specified
image(s) cannot be loaded.

<p>Finally, special thanks go to Brad Kemper for his feedback and
suggestions for many of the features in the draft, for drawing all
the box-shadow examples, and for proposing some
<a href="http://www.bradclicks.com/cssplay/border-image/Thinking_Outside_The_Box.html">radical changes</a>
to the 'border-image' property that solved a number of problems with
the earlier definition.</p>

<!--
<p class=issue>Editor's Note: This list needs to be updated (or
dropped).

<p>This specification is the product of the W3C Working Group on
Cascading Style Sheets and Formatting Properties. In addition to the
editor of this specification, the members of the Working Group
are:
<ul>
  <li>Marc Attinasi (Netscape/AOL)
  <li>Bert Bos (W3C)
  <li>Tantek &Ccedil;elik (Microsoft Corp.)
  <li>Don Day (IBM)
  <li>Martin D&uuml;rst (W3C)
  <li>Angel Diaz (IBM)
  <li>Daniel Glazman (Netscape/AOL from nov. 2000, and Electricit&eacute; de France
    until feb. 2000)
  <li>H&aring;kon W. Lie (Opera Software from April 1999, and W3C until April
  1999)
  <li>Chris Lilley (W3C)
  <li>Dave Raggett (W3C/Openwave Systems Inc.)
  <li>Pierre Saslawsky (Netscape/AOL)
  <li>Michel Suignard (Microsoft Corp.)
  <li>Ted Wugofski (Openwave Systems Inc.)
  <li>Steve Zilles (Adobe)
</ul>

<p>A number of invited experts to the Working Group have significantly
contributed to CSS 3 : David. L Baron, Todd Fahrner, Daniel Glazman,
Ian Hickson, Eric Meyer (The OPAL Group), Jeff Veen.

<p>Former members of the Working Group:
<ul>
  <li>Chris Brichford (Adobe)
  <li>Troy Chevalier (Netscape/AOL)
  <li>Dwayne Dicks (Softquad)
  <li>Ian Jacobs (W3C)
  <li>Lorin Jurow (Quark)
  <li>Sho Kuwamoto (Macromedia)
  <li>Peter Linss (Netscape/AOL)
  <li>Steven Pemberton (W3C/CWI)
  <li>Robert Pernett (Lotus)
  <li>Douglas Rand (SGI)
  <li>Nisheeth Ranjan (Netscape/AOL)
  <li>Ed Tecot (Microsoft Corp.)
  <li>Jared Sorensen (Novell)
  <li>Robert Stevahn (Hewlett-Packard)
  <li>Mike Wexler (Adobe)
  <li>John Williams (Quark)
  <li>Chris Wilson (Microsoft Corp.)
</ul>
-->


<h2>References</h2>

<h3 class="no-num">Normative references</h3>
<!--normative-->

<h3 class="no-num">Other references</h3>
<!--informative-->



<h2 class="no-num">Property index</h2>
<!-- properties -->



<h2 class="no-num" id="index">Index</h2>
<!--index-->

</body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
End:
-->
