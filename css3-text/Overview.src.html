<!DOCTYPE html public '-//W3C//DTD HTML 4.01//EN'
  'http://www.w3.org/TR/html4/strict.dtd'>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>CSS Text Level 3</title>
  <link rel="stylesheet" type="text/css" href="default.css">

  <style type="text/css">
    .data, .proptable {
      margin: 1em auto;
      border-collapse: collapse;
      border: solid #005A9B;
    }
    .data caption {
      width: 100%;
      text-align: center;
    }
    .data td, .data th,
    .proptable td, .proptable th {
      border: thin solid;
      padding: 0.2em;
      text-align: center;
    }
    .data thead th[scope="row"],
    .proptable thead th[scope="row"] {
      text-align: right;
      background: #A4C8E2;
      color: inherit;
    }
    .data thead,
    .proptable thead {
      background: #EEEEEE;
      color: inherit;
    }
    .data tbody th:first-child,
    .proptable tbody th:first-child {
      text-align: right;
      background: #EEEEEE;
      color: inherit;
    }
    .data thead,
    .data tbody,
    .data tfoot,
    .data colgroup {
      border: solid;
    }

    table.propdef {
      table-layout: auto;
    }
    .propdef th {
      font-style: italic;
      font-weight: normal;
      text-align: left;
      width: 3em;
    }
    dt dfn code {
      font-size: inherit;
    }

  </style>

  <style type="text/css">
    .egbidiwsaA,.egbidiwsbB,.egbidiwsaB,.egbidiwsbC
      { white-space:pre;font-size:80%;font-family:monospace; vertical-align:2px; margin:1px }
    .egbidiwsaA { background:lime;padding:2px; }
    .egbidiwsbB { border:2px solid blue }
    .egbidiwsaB { background:yellow;border:2px dotted white }
    .egbidiwsbC { border:2px dotted red }

    .char { border: 1px dotted gray; }
    tt[lang="ja"] { font-family: "MS Gothic", "Osaka", monospace }
  </style>

  <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-WD.css">
</head>

<body>

<div class="head">

<p><a href="http://www.w3.org/"><img height="48" width="72" alt="W3C" src="http://www.w3.org/Icons/w3c_home"/></a></p>

<h1>CSS Text Level 3</h1>

<h2 class="no-num no-toc">Editor's Draft $Date: 2007-07-27 16:53:42 $<!--6 March 2007--></h2>
<dl>
  <dt>This version:</dt>
    <dd><a
      href="http://dev.w3.org/cvsweb/~checkout~/csswg/css3-text/Overview.html?rev=$Revision: 1.8 $&amp;content-type=text/html;%20charset=utf-8">$Date: 2007-07-27 16:53:42 $ (CVS $Revision: 1.8 $)</a>
    <!--<dd><a
      href="http://www.w3.org/TR/2007/WD-css3-text-20070306/">http://www.w3.org/TR/2007/WD-css3-text-20070306/</a></dd>-->
  <dt>Latest version:</dt>
    <dd><a
      href="http://www.w3.org/TR/css3-text/">http://www.w3.org/TR/css3-text/</a></dd>
  <dt>Previous version:</dt>
    <dd><a
      href="http://www.w3.org/TR/2007/WD-css3-text-20070306/">http://www.w3.org/TR/2007/WD-css3-text-20070306/</a></dd>
  <dt>Editors:</dt>
    <dd><a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a></dd>
    <dd><a href="mailto:paulnel@microsoft.com">Paul Nelson</a> (<a href="http://www.microsoft.com/">Microsoft</a>)</dd>
</dl>

   <p class="copyright"><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">
    Copyright</a> &copy; 2007 <a href="http://www.w3.org/"><abbr title="World
    Wide Web Consortium">W3C</abbr></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of
    Technology">MIT</abbr></a>, <a href="http://www.ercim.org/"><acronym
    title="European Research Consortium for Informatics and
    Mathematics">ERCIM</acronym></a>, <a
    href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>

<hr title="Separator for header">
</div>

<h2 class="no-num no-toc" id="abstract">Abstract</h2>

  <p>This CSS3 module defines properties for text manipulation and
    specifies their processing model. It covers line breaking, justification
    and alignment, white space handling, text decoration and text
    transformation.</p>

<h2 class="no-num no-toc" id="status">
  <a name="TextLayout"></a>
  <a name="text-layout"></a>
  <a name="Progression"></a>
  <a name="direction"></a>
  <a name="block-progression"></a>
  <a name="writing-mode"></a>
  <a name="GlyphOrientation"></a>
  <a name="glyph-orientation-vertical"></a>
  <a name="glyph-orientation-horizontal"></a>
  <a name="embedding"></a>
  <a name="unicode-bidi"></a>
  <a name="dtd"></a>
  <a name="text-script-prop"></a>
  <a name="conforming"></a>
  <a name="min-max-font-size-prop"></a>
  <a name="min-font-size"></a>
  <a name="max-font-size"></a>
  <a name="text-justify-trim-prop"></a>
  <a name="text-justify-trim"></a>
  <a name="kashida-prop"></a>
  <a name="text-kashida-space"></a>
  <a name="text-overflow-props"></a>
  <a name="text-overflow-mode"></a>
  <a name="text-overflow-ellipsis"></a>
  <a name="ellipsis-def"></a>
  <a name="text-autospace-prop"></a>
  <a name="text-autospace"></a>
  <a name="kerning-props"></a>
  <a name="kerning-mode"></a>
  <a name="kerning-pair-threshold"></a>
  <a name="document-grid"></a>
  <a name="grid-introduction"></a>
  <a name="line-grid-mode-prop"></a>
  <a name="line-grid-mode"></a>
  <a name="line-grid-progression-prop"></a>
  <a name="line-grid-progression"></a>
  <a name="line-grid-prop"></a>
  <a name="line-grid"></a>
  <a name="misc-text-formatting"></a>
  <a name="caps-prop"></a>
  <a name="text-transform"></a>
  <a name="text-combine-prop"></a>
  <a name="text-combine"></a>
  Status of This Document</h2>

  <p><em>This section describes the status of this document at the time
    of its publication. Other documents may supersede this document. A
    list of current W3C publications and the latest revision of this
    technical report can be found in the <a href="http://www.w3.org/TR/">W3C
    technical reports index</a> at http://www.w3.org/TR/.</em></p>

  <p>This Text module and a separate (upcoming) Text Layout module
    replace and obsolete the <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/">May
    2003 CSS3 Text Module Candidate Recommendation</a>. Since this is a
    thorough overhaul of the previous version, a <a href="#changes">list
    of changes</a> has been provided instead of a diff.</p>

  <p>This document is a <strong>Working Draft</strong>, and it is still
    very incomplete. In fact, <em>many of its sections have not
    been added in</em>. <!--This draft has not been approved or endorsed by
    the W3C or the CSS Working Group in any way and you may not use it
    as a reference or cite it other than as a work in progress. It may
    be updated, replaced or rendered obsolete at any time by subsequent
    publications. --></p>
    <p>Publication as a Working Draft does not imply endorsement by the W3C
    Membership. This is a draft document and may be updated, replaced or
    obsoleted by other documents at any time. It is inappropriate to cite
    this document as other than a work in progress.</p>

  <p><strong>Feedback on this draft should be posted to the
    (<a href="http://lists.w3.org/Archives/Public/www-style/">archived</a>)
    public mailing list <a href="mailto:www-style@w3.org">www-style@w3.org</a>
    (see <a href="http://www.w3.org/Mail/Request">instructions</a>) with
    <kbd>[CSS3 Text]</kbd> in the subject line.</strong>
    You are strongly encouraged to complain if you see something stupid
    in this draft. I will do my best to respond to all feedback.</p>

  <p><strong>If you have implemented properties from CSS3 Text CR</strong>
    <em>please</em> let me know so I can take that into account as
    I redraft the spec. You can post to
    <a href="http://lists.w3.org/Archives/Public/www-style/">www-style</a> (public),
    post to the <a href="http://lists.w3.org/Archives/Member/w3c-css-wg/">CSS WG mailing list</a>
    (<a href="http://cgi.w3.org/MemberAccess/AccessRequest">Member-restricted</a>),
    or <a href="http://fantasai.inkedblade.net/contact">email fantasai directly</a> (personal).</p>

  <p>This CSS module has been produced as a combined effort of the <a
    href="http://www.w3.org/International/Activity">W3C Internationalization Activity</a>,
    and the <a href="http://www.w3.org/Style/Activity">Style Activity</a> and is maintained
    by the <a href="http://www.w3.org/Style/CSS/">CSS Working Group</a>. It also
    includes contributions made by participants in the <a
    href="http://www.w3.org/Style/XSL/Group/">XSL Working Group</a> (<a
    href="http://cgi.w3.org/MemberAccess/AccessRequest">members
    only</a>). This document was produced by a group operating under the <a
    href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February
    2004 W3C Patent Policy</a>. W3C maintains a <a
    href="http://www.w3.org/Style/CSS/Disclosures" rel=disclosure>public list of any patent
    disclosures</a> made in connection with the deliverables of the group;
    that page also includes instructions for disclosing a patent. An
    individual who has actual knowledge of a patent which the individual
    believes contains <a
    href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
    Claim(s)</a> must disclose the information in accordance with <a
    href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
    W3C Patent Policy</a>.</p>

  <p>The following features are at risk and may be cut from the spec during
    its CR period: multiple text shadows, the 'text-outline' property, the
    'break-strict' value of 'word-break'</p>

<h2 class="no-num no-toc" id="contents">Table of Contents</h2>

<!--begin-toc-->
<ul class="toc">
  <li><a href="#intro"><span class="secno">1.</span> Introduction</a>

  <li><a href="#conformance"><span class="secno">2.</span> Conformance</a>
    <ul class="toc">
      <li><a href="#partial-impl"><span class="secno">2.1.</span>
        Partial and Experimental Implementations</a>
    </ul>

  <li><a href="#white-space-processing"><span class="secno">3.</span> White
    Space Processing</a>
    <ul class="toc">
      <li><a href="#white-space-collapsing"><span class="secno">3.1.</span>
        White Space Collapsing: the 'white-space-collapsing' property</a>

      <li><a href="#white-space-rules"><span class="secno">3.2.</span> The
        White Space Processing Rules</a>
        <ul class="toc">
          <li><a href="#egbidiwscollapse"><span class="secno">3.2.1.</span>
            Example of bidirectionality with white space collapsing</a>

          <li><a href="#line-break-transform"><span class="secno">3.2.2.</span>
            Line Break Transformation Rules</a>

          <li><a href="#white-space-summary"><span class="secno">3.2.3.</span>
            Informative Summary of White Space Collapsing Effects</a>
        </ul>

      <li><a href="#white-space"><span class="secno">3.3.</span> White Space
        and Text Wrapping Shorthand: the 'white-space' property</a>
    </ul>

  <li><a href="#line-breaking"><span class="secno">4.</span> Line Breaking
    and Word Boundaries</a>
    <ul class="toc">
      <li><a href="#word-break"><span class="secno">4.1.</span> Line Breaking
        Restrictions: the 'word-break' property</a>

      <li><a href="#hyphenate"><span class="secno">4.2.</span> Hyphenation</a>
    </ul>

  <li><a href="#wrapping"><span class="secno">5.</span> Text Wrapping</a>
    <ul class="toc">
      <li><a href="#text-wrap"><span class="secno">5.1.</span> Text Wrap
        Settings: the 'text-wrap' property</a>
        <ul class="toc">
          <li><a href="#example-suppress"><span class="secno">5.1.1.</span>
            Example of using 'text-wrap: suppress' in presenting a
            footer</a>
        </ul>

      <li><a href="#word-wrap"><span class="secno">5.2.</span> Force Wrapping:
        the 'word-wrap' property</a>
    </ul>

  <li><a href="#justification"><span class="secno">6.</span> Alignment and
    Justification</a>
    <ul class="toc">
      <li><a href="#text-align"><span class="secno">6.1.</span> Text
        Alignment: the 'text-align' property</a>

      <li><a href="#text-align-last"><span class="secno">6.2.</span> Last Line
        Alignment: the 'text-align-last' property</a>

      <li><a href="#text-justify"><span class="secno">6.3.</span>
        Justification Method: the 'text-justify' property</a>
    </ul>

  <li><a href="#spacing"><span class="secno">7.</span> Spacing</a>
    <ul class="toc">
      <li><a href="#word-spacing"><span class="secno">7.1.</span> Word
        Spacing: the 'word-spacing' property</a>

      <li><a href="#letter-spacing"><span class="secno">7.2.</span> Tracking:
        the 'letter-spacing' property</a>

      <li><a href="#punctuation-trim"><span class="secno">7.3.</span>
        Fullwidth Punctuation Kerning: the 'punctuation-trim' property</a>
    </ul>

  <li><a href="#decoration"><span class="secno">8.</span> Text Decoration</a>
    <ul class="toc">
      <li><a href="#text-emphasis"><span class="secno">8.2.</span>
        Emphasis Marks: the 'text-emphasis' property</a>

      <li><a href="#text-shadow"><span class="secno">8.3.</span> Text Shadows:
        the 'text-shadow' property</a>

      <li><a href="#text-outline"><span class="secno">8.4.</span> Text Outlines:
        the 'text-outline' property</a>
    </ul>

  <li><a href="#edge-effects"><span class="secno">9.</span> Edge Effects</a>
    <ul class="toc">
      <li><a href="#text-indent"><span class="secno">9.1</span> First Line
        Indentation: the 'text-indent' property</a>
      <li><a href="#hanging-punctuation"><span class="secno">9.2</span>
        Hanging Punctuation: the 'hanging-punctuation' property</a><!--
      <li><a href="#text-overflow"></a> -->
    </ul>

  <li><a href="#changes"><span class="secno">10</span>
    Changes from the May 2003 CSS3 Text CR</a>

  <li><a href="#recent-changes"><span class="secno">11</span>
    Changes from the June 2005 CSS3 Text WD</a>

  <li><a href="#acknowledgements"><span class="secno">12</span>
    Acknowledgements</a>

  <li><a href="#references"><span class="secno">13.</span> References</a>
    <ul class="toc">
      <li><a href="#normative-ref"><span class="secno">13.1.</span> Normative
        References</a>

      <li><a href="#informative-ref"><span class="secno">13.2.</span>
        Informative References</a>
    </ul>
</ul>
<!--end-toc-->

<h2 id="intro"><span class="secno">1.</span>
  Introduction</h2>

<p>[document here]</p>

<h2 id="conformance"><span class="secno">2.</span>
  Conformance</h2>

  <p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
    "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
    document are to be interpreted as described in RFC 2119 (see
    <a href="#RFC2119">[RFC2119]</a>). However, for readability, these words
    do not typically appear in all uppercase letters in this specification.</p>

  <p>Additional key words, e.g. "User agent (UA)", are defined by CSS 2.1
    (<a href="#CSS21">[CSS21]</a>, section 3.1).
    

  <h3 id="partial-impl"><span class="secno">2.1.</span> Partial and Experimental Implementations</h3>

  <p>UAs must treat as invalid any properties or values they do not support.
    Experimental implementations of a feature should support only a
    vendor-prefixed syntax for the property/value.</p>

<h2 id="white-space-processing"><span class="secno">3.</span>
  White Space Processing</h2>

  <p>White space processing in CSS interprets white space characters
    for rendering: it has no effect on the underlying document data.
    In the context of CSS, the document white space set is defined to be
    any space characters (Unicode value U+0020), tab characters (U+0009),
    or line break characters (defined by the document format: typically
    line feed, U+000A). Control characters besides the white space
    characters and the bidi formatting characters (U+202x) are treated as
    normal characters and rendered according to the same rules.

  <p>The document parser must normalize line break character sequences
    according to its own format rules before CSS processing takes effect.
    However, in generated content strings the line feed character (U+000A)
    and only the line feed character is considered a line break sequence.
    For CSS white space processing all line breaks must be normalized to a
    single character representation&#8212;usually the line feed character
    (U+000A)&#8212;here called a "line break". This way, all recognized
    line breaks are treated the same and style rules behave consistently
    across systems.</p>

  <p class="note">Note that the document parser may have not only normalized
    line break characters, but also collapsed other space characters or
    otherwise processed white space according to markup rules. Because CSS
    processing occurs <em>after</em> the parsing stage, it is not possible
    to restore these characters for styling. Therefore, some of the
    behavior specified below can be affected by these limitations and
    may be user agent dependent.</p>

  <h3 id="white-space-collapsing"><span class="secno">3.1.</span>
    White Space Collapsing: the 'white-space-collapsing' property</h3>

    <p class="issue">This section is still under discussion and may change in future drafts.</p>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>white-space-collapsing</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>collapse | discard | [ [preserve | preserve-breaks] && trim-inner ]</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>collapse</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property declares whether and how
      <a href="#white-space-processing">white space</a> inside the element is
      collapsed. Values have the following meanings, which must be interpreted
      according to the <a href="#white-space-rules">white space processing
      rules</a>:</p>

    <dl>
      <dt><dfn title="white-space-collapsing:collapse"><code>collapse</code></dfn></dt>
      <dd>This value directs user agents to collapse sequences of white space
        into a single character (or <a href="#line-break-transform">in some
        cases</a>, no character).</dd>
      <dt><dfn title="white-space-collapsing:preserve"><code>preserve</code></dfn></dt>
      <dd>This value prevents user agents from collapsing sequences
      of white space. Line breaks are preserved.</dd>
      <dt><dfn title="white-space-collapsing:preserve-breaks"><code>preserve-breaks</code></dfn></dt>
      <dd>This value collapses white space as for 'collapse', but preserves
        line breaks.</dd>
      <dt><dfn title="white-space-collapsing:discard"><code>discard</code></dfn></dt>
      <dd>This value directs user agents to "discard" all white space in the
        element.
      <dt><dfn title="white-space-collapsing:trim-inner"><code>trim-inner</code></dfn></dt>
      <dd>This value directs UAs to discard all whitespace at the beginning of
        a block up to and including the last line break before the first
        non-white-space character in the block as well as to discard all white
        space at the end of a block starting with the first line break after
        the last non-white-space character in the block.</dd>
    </dl>

  <h3 id="white-space-rules"><span class="secno">3.2.</span>
    The White Space Processing Rules</h3>

    <p>Any text that is directly contained inside a block (not inside
      an inline) is treated as being inside an anonymous inline element.</p>

    <p>For each inline (including anonymous inlines), white space
      characters are handled as follows, ignoring bidi formatting
      characters as if they were not there:</p>

    <ul>
    <li id="collapse"><p>If <span class="property">'white-space-collapsing'</span>
      is set to 'collapse' or 'preserve-breaks', white space characters
      are considered <dfn>collapsible</dfn> and are processed by
      performing the following steps:</p>
      <ol>
        <li>All non-line-break white space characters immediately following
          a line break character are removed. (This has the effect of
          discarding all white space at the start of a line but preserving
          a trailing space if one exists at the end.)</li>
        <li>If <span class="property">'white-space-collapsing'</span> is not
          'preserve-breaks', line break characters are transformed for
          rendering according to the <a href="#line-break-transform">line
          break transformation rules</a>.
        </li>
        <li>Every tab (U+0009) is converted to a space (U+0020)</li>
        <li>Any space (U+0020) following another space (U+0020)&mdash;even
          a space before the inline, if that space is also collapsible&mdash;is
          removed.</li>
      </ol>
    </li>
    <li><p>If <span class="property">'white-space-collapsing'</span> is set to
      'preserve', any sequence of spaces (U+0020) unbroken by an element
      boundary is treated as a sequence of non-breaking spaces. However,
      a line breaking opportunity exists at the end of the sequence.</p></li>
    <li><p>If <span class="property">'white-space-collapsing'</span> is set to
      'discard', the first white space character in every white space
      sequence is converted to a zero width non-joiner (U+200C) and
      the rest of the sequence is removed.</p>
    </ul>

    <p>Then, the entire block is rendered. Inlines are laid out, taking bidi
      reordering into account, and wrapping as specified by the
      <span class="property">'text-wrap'</span> property.</p>

    <p>As each line is laid out,</p>
    <ol>
      <li>A sequence of collapsible spaces (U+0020) at the beginning of a
        line is removed.</li>
      <li>A tab (U+0009) is rendered as a horizontal shift that lines up
        the start edge of the next glyph with the next tab stop.
        Tab stops occur at points that are multiples of 8 times the width
        of a space (U+0020) rendered in the block's font from the block's
        starting content edge.</li>
      <li>A sequence of collapsible spaces (U+0020) at the end of a line
        is removed.</li>
    </ol>

    <div class="example">
    <h4 id="egbidiwscollapse"><span class="secno">3.2.1.</span>
      Example of bidirectionality with white space collapsing</h4>

      <p>Consider the following markup fragment, taking special note of spaces
        (with varied backgrounds and borders for emphasis and identification):
        </p>
      <pre><code>&lt;ltr&gt;A<span class="egbidiwsaA">&#160;</span>&lt;rtl&gt;<span class="egbidiwsbB">&#160;</span>B<span class="egbidiwsaB">&#160;</span>&lt;/rtl&gt;<span class="egbidiwsbC">&#160;</span>C&lt;/ltr&gt;</code></pre>

      <p>where the <code>&lt;ltr&gt;</code> element represents a left-to-right
        embedding and the <code>&lt;rtl&gt;</code> element represents a
        right-to-left embedding. If the 'white-space-collapsing' property is set
        to 'collapse', the above processing model would result in the
        following:</p>

      <ul style="line-height:1.3">
        <li>The space before the B (<span class="egbidiwsbB">&#160;</span>)
          would collapse with the space after the A (<span
          class="egbidiwsaA">&#160;</span>).</li>
        <li>The space before the C (<span class="egbidiwsbC">&#160;</span>)
          would collapse with the space after the B (<span
          class="egbidiwsaB">&#160;</span>).</li>
      </ul>

      <p>This would leave two spaces, one after the A in the left-to-right
        embedding level, and one after the B in the right-to-left embedding
        level. This is then ordered according to the Unicode bidirectional
        algorithm, with the end result being:</p>

      <pre>A<span class="egbidiwsaA">&#160;</span><span class="egbidiwsaB">&#160;</span>BC</pre>

      <p>Note that there are two spaces between A and B, and none between B
        and C. This is best avoided by putting spaces outside the element
        instead of just inside the opening and closing tags and, where
        practical, by relying on implicit bidirectionality instead of explicit
        embedding levels.</p>
    </div>

    <h4 id="line-break-transform"><span class="secno">3.2.2.</span>
      Line Break Transformation Rules</h4>

      <p>When line breaks are <a href="#collapse">collapsible</a>, they are
        either transformed into a space (U+0020) or removed depending on the
        script context before and after the line break.</p>

      <p>The script context is determined by the Unicode-given script value
        [UAX24] of the first character that side of the line break. However,
        characters such as punctuation that belong to the COMMON and INHERITED
        scripts are ignored in this check; the next character is examined
        instead. The UA must not examine characters outside the block and may
        limit its examination to as few as four characters on each side of the
        line break. If the check fails to find an acceptable script value
        (i.e. it has hit the check limits), then the script context is neutral.</p>

      <ul>
        <li>If the character immediately before or immediately after the line
          break is the zero width space character (U+200B), then the line break
          is removed.
        <li>Otherwise, if the script context on one side of the line break is
          Han, Yi, Hiragana, or Katakana and the context on the other side is
          Han, Yi, Hiragana, Katakana, or neutral, then the line break is removed.
        <li>Otherwise, the line break is converted to a space (U+0020).
      </ul>

      <p class="issue">Comments on how well this would work in practice would
        be very much appreciated, particularly from people who work with
        Thai and similar scripts.</p>

    <h4 id="white-space-summary"><span class="secno">3.2.3.</span>
      Informative Summary of White Space Collapsing Effects</h4>

      <ul>
        <li>Consecutive white space collapses into a single space.
        <li>A sequence of line breaks and other white space between
          two ideographic characters collapses into nothing unless
          there is a space before the first line break in the sequence.
        <li>A zero width space immediately before or anywhere after
          a line break causes the entire sequence of white space
          beginning with the line break to collapse into a zero width
          space.
      </ul>

  <h3 id="white-space"><span class="secno">3.3.</span>
    White Space and Text Wrapping Shorthand: the 'white-space' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>white-space</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>normal | pre | nowrap | pre-wrap | pre-line</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>not defined for shorthand properties</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>see individual properties</td>
        </tr>
      </tbody>
    </table>

    <p>The 'white-space' property is a shorthand for the
      <a href="#white-space-collapsing">'white-space-collapsing'</a>
      and <a href="#text-wrap">'text-wrap'</a> properties.
      Not all combinations are represented.
      Values have the following meanings:</p>

    <dl>
      <dt><dfn title="white-space:normal"><code>normal</code></dfn></dt>
      <dd>Sets 'white-space-collapsing' to 'collapse' and
        'text-wrap' to 'normal'</dd>
      <dt><dfn title="white-space:pre"><code>pre</code></dfn></dt>
      <dd>Sets 'white-space-collapsing' to 'preserve' and
        'text-wrap' to 'none'</dd>
      <dt><dfn title="white-space:nowrap"><code>nowrap</code></dfn></dt>
      <dd>Sets 'white-space-collapsing' to 'collapse' and
        'text-wrap' to 'none'</dd>
      <dt><dfn title="white-space:pre-wrap"><code>pre-wrap</code></dfn></dt>
      <dd>Sets 'white-space-collapsing' to 'preserve' and
        'text-wrap' to 'normal'</dd>
      <dt><dfn title="white-space:pre-line"><code>pre-line</code></dfn></dt>
      <dd>Sets 'white-space-collapsing' to 'preserve-breaks' and
        'text-wrap' to 'normal'</dd>
    </dl>

    <p>The following informative table summarizes the behavior of various
      'white-space' values:</p>

    <table class="data">
      <thead>
        <tr>
          <th></th>
          <th>New Lines</th>
          <th>Spaces and Tabs</th> 
          <th>Text Wrapping</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>normal</th>
          <td>Collapse</td>
          <td>Collapse</td>
          <td>Wrap</td>
        </tr>
        <tr>
          <th>pre</th>
          <td>Preserve</td>
          <td>Preserve</td>
          <td>No wrap</td>
        </tr>
        <tr>
          <th>nowrap</th>
          <td>Collapse</td>
          <td>Collapse</td>
          <td>No wrap</td>
        </tr>
        <tr>
          <th>pre-wrap</th>
          <td>Preserve</td>
          <td>Preserve</td>
          <td>Wrap</td>
        </tr>
        <tr>
          <th>pre-line</th>
          <td>Preserve</td>
          <td>Collapse</td>
          <td>Wrap</td>
      </tbody>
    </table>

<h2 id="line-breaking"><span class="secno">4.</span>
  Line Breaking and Word Boundaries</h2>

  <p>For most scripts, in the absence of hyphenation a line break occurs
    only at word boundaries. Many writing systems use spaces or
    punctuation to explicitly separate words, and line break opportunities
    can be identified by these characters. Scripts such as Thai, Lao, and
    Khmer, however, do not use spaces or punctuation to separate words.
    Although the zero width space (U+200B) can be used as an explicit word
    delimiter in these scripts, this practice is not common. As a result,
    a lexical resource is needed to correctly identify break points in such
    texts.

  <p>In several other writing systems, (including Chinese, Japanese, Yi,
    and sometimes also Korean) a line break opportunities are based on
    syllable boundaries, not words. In these systems a line can break
    anywhere <em>except</em> between certain character combinations.
    Additionally the level of strictness in these restrictions can vary
    with the typesetting style.</p>

  <h3 id="word-break"><span class="secno">4.1.</span>
    Line Breaking Restrictions: the 'word-break' property</h3>

    <p>CSS distinguishes between two levels of strictness in the rules for
      implicit line breaking in CJK text. The precise set of rules in effect
      for the strict and loose levels is up to the UA and should follow
      language conventions. However, this specification does recommend that
      the following breaks be forbidden in strict line breaking and allowed
      in loose:</p>

    <ul>
      <li>breaks before Japanese small kana
      <li>breaks before Japanese iteration marks (U+3005, U+303B, U+309D, U+309E, U+30FD, U+30FE)
      <li>breaks before the katakana lengthening mark (U+30FC)
      <li class="issue">???
    </ul>

    <p>Breaks between Hangul syllable blocks are allowed in both strict and
      loose rules: to restrict breaks in Korean to spaces, the 'keep-all'
      value of 'word-break' can be specified.</p>

    <p class="note">Information on line breaking conventions can be found in
      [<a href="#JIS4051">JIS4051</a>] for Japanese,
      [<a href="#ZHMARK">标点符号</a>] for Chinese, and [?] for Korean, and
      in [<a href="#UAX14">UAX14</a>] for all scripts in Unicode.
      <!-- The CSS Working Group notes that although UAX 14 contains a wealth of
      information about line breaking conventions, a literal implementation
      of its algorithm has been found to be inadequate in multiple situations. --></p>

    <p class="issue">Any guidance for appropriate references here would be
      much appreciated.</p>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>word-break</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>normal | keep-all | loose | break-strict | break-all</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies what set of line breaking restrictions are in
      effect within the element.
      Values have the following meanings:</p>

    <dl>
      <dt><dfn title="word-break:normal"><code>normal</code></dfn></dt>
      <dd>Breaks non-CJK scripts according to their own rules while using a
        strict set of line breaking restrictions for CJK scripts (Hangul,
        Japanese Kana, and CJK ideographs).</dd>
      <dt><dfn title="word-break:keep-all"><code>keep-all</code></dfn></dt>
      <dd>Same as 'normal' for all non-CJK scripts. However, sequences of
        CJK characters can no longer break on implied break points.
        This option should only be used where the presence of white space
        characters still creates line-breaking opportunities, as in Korean.</dd>
      <dt><dfn title="word-break:loose"><code>loose</code></dfn></dt>
      <dd>As for 'normal', but CJK scripts use a less restrictive set of
        line-breaking restrictions.</dd>
      <dt><dfn title="word-break:break-strict"><code>break-strict</code></dfn></dt>
      <dd>Same as 'normal' for CJK scripts, but non-CJK scripts can break
        anywhere. This option is used mostly when the text is predominantly
        CJK characters with few non-CJK excerpts and it is desired that
        the text be more evenly distributed on each line.</dd>
      <dt><dfn title="word-break:break-all"><code>break-all</code></dfn></dt>
      <dd>As for 'break-strict', except CJK scripts break according to the
        rules for 'loose'.</dd>
    </dl>

    <p>When shaping scripts such as Arabic are allowed to break within words
      due to 'break-all' or 'break-strict', the characters must still be
      shaped as if the word were not broken.</p>

  <h3 id="hyphenate"><span class="secno">4.2.</span>
    Hyphenation</h3>

    <div class="issue">
      <p>The definition of the hyphenation feature is very much up-in-the-air
        at the moment. The WG plans to discuss it at our next face-to-face
        meeting at the end of March. Comments and suggestions for consideration
        are welcome.</p>

      <p>Some of the syntax proposals so far are to
        <ul>
        <li>Have a boolean 'hyphenate' property that turns hyphenation on or
          off, and have separate properties for advanced controls such as
          limits on the number of characters before/after the break and the
          number of consecutive hyphens allowed.
        <li>Add a 'hyphenate' value to the 'word-break' property that turns
          hyphenation on, and have separate properties for the advanced
          controls.
        <li>Make 'hyphenate' a shorthand for the advanced controls, such that
          either 'hyphenate: auto' or 'hyphenate: 2 2 3' and similar would
          turn hyphenation on.
        </ul>

      <p>A current proposal for advanced hyphenation controls is published
        in the <a href="http://www.w3.org/TR/2007/WD-css3-gcpm-20070205/#hyphenation">Generated
        Content for Paged Media</a> draft.</p>
    </div>

    <dl>
    <dt><var>insert value name here</var></dt>
    <dd>Words may be broken at an appropriate hyphenation point. This requires
      that the user agent have an hyphenation resource appropriate to the
      language of the text being broken.
    </dl>

    <p>If hyphenation is applied to a shaped script such as Arabic then the
      shaping process must ignore the hyphenation break and shape as if the
      word were still whole and unhyphenated.</p>

<h2 id="wrapping"><span class="secno">5.</span>
  Text Wrapping</h2>

  <p>Text wrapping is controlled by the 'text-wrap' and 'word-wrap' properties:</p>

  <h3 id="text-wrap"><span class="secno">5.1.</span>
    Text Wrap Settings: the 'text-wrap' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-wrap</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>normal | unrestricted | none | suppress</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies the mode for text wrapping. Possible values:</p>

    <dl>
    <dt><dfn title="text-wrap:normal"><code>normal</code></dfn></dt>
    <dd>Lines may break at allowed break points, as determined by the
      line-breaking rules in effect. Line breaking behavior defined
      for the WJ, ZW, and GL line-breaking classes in
      [<a href="#UAX14-norm">UAX14</a>] must be honored.
    <dt><dfn title="text-wrap:none"><code>none</code></dfn></dt>
    <dd>Lines may not break; text that does not fit within the block box
      overflows it.</dd>
    <dt><dfn title="text-wrap:unrestricted"><code>unrestricted</code></dfn></dt>
    <dd>Lines may break between any two grapheme clusters. Line-breaking
      restrictions have no effect and hyphenation does not take place.
      Character shaping is performed on each side of the break as if
      the break had not occurred.</dd>
    <dt><dfn title="text-wrap:suppress"><code>suppress</code></dfn></dt>
    <dd>Line breaking is suppressed within the element: the UA may only break
      within the element if there are no other valid break points in the
      line. If the text breaks, line-breaking restrictions are honored as for
      'normal'.
    </dl>

    <p>For all values, line-breaking behavior defined for the BK, CR, LF, CM
     NL, and SG line breaking classes in [<a href="#UAX14-norm">UAX14</a>] must
     be honored.</p>

    <p>When <span class="property">'text-wrap'</span> is set to 'normal' or
      'suppress', UAs that allow breaks at punctuation other than spaces
      should prioritize breakpoints.
      For example, if breaks after slashes have a lower priority than spaces,
      the sequence "check /etc" will never break between the '/' and the 'e'.
      The UA may use the width of the containing block, the text's language,
      and other factors in assigning priorities.
      As long as care is taken to avoid such awkward breaks, allowing breaks at
      appropriate punctuation other than spaces is recommended, as it results
      in more even-looking margins, particularly in narrow measures.</p>

    <!-- add a sample prioritization algorithm -->

    <div class="example">
      <h4 id="example-suppress">Example of using 'text-wrap: suppress' in presenting a footer</h4>
      <p>The priority of breakpoints can be set to reflect the intended
        grouping of text.</p>

      <p>Given the rules
      <pre>
<!-- -->footer { text-wrap: suppress; /* inherits to all descendants */ }
      </pre>
      <p>and the following markup:</p>
      <pre>
<!-- -->&lt;footer>
<!-- -->  &lt;venue>27th Internationalization and Unicode Conference&lt;/venue>
<!-- -->  &amp;#8226; &lt;date>April 7, 2005&lt;/date> &amp;#8226;
<!-- -->  &lt;place>Berlin, Germany&lt;/place>
<!-- -->&lt;/footer>
      </pre>

      <p>In a narrow window the footer could be broken as</p>
      <pre>
<!-- -->27th Internationalization and Unicode Conference &#8226;
<!-- -->April 7, 2005 &#8226; Berlin, Germany
      </pre>
      <p>or in a narrower window as</p>
      <pre>
<!-- -->27th Internationalization and Unicode
<!-- -->Conference &#8226; April 7, 2005 &#8226;
<!-- -->Berlin, Germany
      </pre>
      <p>but not as</p>
      <pre>
<!-- -->27th Internationalization and Unicode Conference &#8226; April
<!-- -->7, 2005 &#8226; Berlin, Germany
      </pre>
    </div>

  <h3 id="word-wrap"><span class="secno">5.2.</span>
    Force Wrapping: the 'word-wrap' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>word-wrap</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>normal | break-word</td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies whether the UA may break within a word
      to prevent overflow when an otherwise-unbreakable string is too
      long to fit within the line box. It only has an effect when
      'text-wrap' is either 'normal' or 'suppress'. Possible values:</p>

    <dl>
    <dt><dfn title="word-wrap:normal"><code>normal</code></dfn></dt>
    <dd>Lines may break only at allowed break points.</dd>
    <dt><dfn title="word-wrap:break-word"><code>break-word</code></dfn></dt>
    <dd>An unbreakable "word" may be broken at an arbitrary point if
      there are no otherwise-acceptable break points in the line.
      Shaping characters are still shaped as if the word were not
      broken, and grapheme clusters must together stay as one unit.</dd>
    </dl>

<h2 id="justification"><span class="secno">6.</span>
  Alignment and Justification</h2>

  <h3 id="text-align"><span class="secno">6.1.</span>
    Text Alignment: the 'text-align' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-align</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>start | end | left | right | center | justify |
            <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-string"><span class="value-inst-string">&lt;string&gt;</span></a>
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>start</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property describes how inline contents of a block are horizontally aligned
      if the contents do not completely fill the line box. Values have the following
      meanings:

    <dl>
    <dt><dfn title="text-align:start"><code>start</code></dfn></dt>
      <dd>The inline contents are aligned to the start edge of the line box.
    <dt><dfn title="text-align:end"><code>end</code></dfn></dt>
      <dd>The inline contents are aligned to the end edge of the line box.
    <dt><dfn title="text-align:left"><code>left</code></dfn></dt>
      <dd>The inline contents are aligned to the left edge of the line box.
        In vertical text, 'left' aligns to the edge of the line box that
        would be the start edge for left-to-right text.</dd>
    <dt><dfn title="text-align:right"><code>right</code></dfn></dt>
      <dd>The inline contents are aligned to the right edge of the line box.
        In vertical text, 'right' aligns to the edge of the line box that
        would be the end edge for left-to-right text.</dd>
    <dt><dfn title="text-align:center"><code>center</code></dfn></dt>
      <dd>The inline contents are centered within the line box.
    <dt><dfn title="text-align:justify"><code>justify</code></dfn></dt>
      <dd>The text is justified according to the method specified by the
      <a href="#text-justify" class="property">'text-justify'</a> property.
    <dt><dfn title="text-align:<string>"><code><span title="&lt;string&gt;"><a
      class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-string"
      ><span class="value-inst-string">&lt;string&gt;</span></a></span></code></dfn></dt>
      <dd>When applied to a table cell, specifies a character on which all
        cells in its table column that also have a character value for 'text-align'
        will align (see the section on <a href="http://www.w3.org/TR/CSS21/tables.html#column-alignment">horizontal
        alignment in a column</a> for details and an example). When applied
        to any other element, it is treated as 'start'. The string must be
        a single character; otherwise the declaration must be
        <a href="http://www.w3.org/TR/CSS21/conform.html#ignore">ignored</a>.</dd>
    </dl>

    <p>A block of text is a stack of
      <a href="http://www.w3.org/TR/CSS21/visuren.html#line-box">line boxes</a>.
      In the case of 'start', 'end', 'left', 'right' and 'center', this
      property specifies how the inline boxes within each line box align
      within the line box: alignment is not with respect to the
      <a href="http://www.w3.org/TR/CSS21/visuren.html#viewport">viewport</a>
      or containing block. In the case of 'justify', the UA may stretch
      the inline boxes in addition to adjusting their positions. (See also
      the <a href="#text-justify" class="property">'text-justify'</a>,
      <a class="property">'text-justify-trim'</a>,
      <a href="#text-kashida-space" class="property">'text-kashida-space'</a>,
      <a href="#letter-spacing" class="property">'letter-spacing'</a>
      and <a href="#word-spacing" class="property">'word-spacing'</a>.)

  <h3 id="text-align-last"><span class="secno">6.2.</span>
    Last Line Alignment: the 'text-align-last' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-align-last</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>start | end | left | right | center | justify
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>start</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property describes how the last line of a block or a line right before
      a forced line break is aligned when
      <a href="#text-align" class="property">'text-align'</a> is set to 'justify'.
      Values have the same meaning as for
      <a href="#text-align" class="property">'text-align'</a>.</p>

  <h3 id="text-justify"><span class="secno">6.3.</span>
    Justification Method: the 'text-justify' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-justify</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>auto | inter-word | inter-ideograph | inter-cluster | distribute | kashida | tibetan
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>auto</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property selects the justification method used when
      <a href="#text-align" class="property">'text-align'</a>
      is set to <span class="css">'justify'</span>. It takes the following
      values:</p>

    <dl>
      <dt><dfn title="text-justify:auto"><code>auto</code></dfn></dt>
        <dd>The UA determines the justification algorithm to follow, based
          on a balance between performance and adequate presentation quality.</dd>
      <dt><dfn title="text-justify:inter-word"><code>inter-word</code></dfn></dt>
        <dd>Justification primarily changes spacing at word separators</dd>
      <dt><dfn title="text-justify:inter-ideographic"><code>inter-ideograph</code></dfn></dt>
        <dd>Justification primarily changes spacing at word separators and
          at inter-graphemic boundaries in scripts that use no word spaces</dd>
      <dt><dfn title="text-justify:inter-cluster"><code>inter-cluster</code></dfn></dt>
        <dd>Justification primarily changes spacing at word separators and at
          grapheme cluster boundaries in cluster scripts.</dd>
      <dt><dfn title="text-justify:distribute"><code>distribute</code></dfn></dt>
        <dd>Justification primarily changes spacing both at word separators
          and at grapheme cluster boundaries in all scripts except those in
          the connected and cursive groups.</dd>
      <dt><dfn title="text-justify:kashida"><code>kashida</code></dfn></dt>
        <dd>Justification primarily stretches Arabic and related scripts
          through the use of kashida or other calligraphic elongation.</dd>
      <dt><dfn title="text-justify:tibetan"><code>tibetan</code></dfn></dt>
        <dd>Justification primarily stretches spaces after shad if the line
          contains any and/or pads the end of the line with tsek marks if
          the line already ends in one.</dd>
    </dl>

    <p class="issue">The 'tibetan' value of 'text-justify' will most likely be
      removed in the next draft, as inter-word justification is preferred in
      modern typesetting.</p>

    <p>When justifying text, the user agent takes the remaining space between
      the ends of a line's contents and the edges of its line box, and
      distributes that space throughout its contents so that the contents
      exactly fill the line box. If the 'letter-spacing' and 'word-spacing'
      property values allow it, the user agent may also distribute negative
      space, putting more content on the line than would otherwise fit under
      normal spacing conditions. The exact justification algorithm is
      UA-dependent; however, CSS provides some general guidelines which should
      be followed when any justification method other than 'auto' is
      specified.</p>

    <p>Justification affects different types of writing systems in different ways.
      For justification purposes, writing systems are grouped as follows:</p>

    <dl>
      <dt id="block-scripts">block</dt>
        <dd>CJK (including Hangul and half-width kana) and by extension all
          "wide" characters. (See <a href="#UAX11">[UAX11]</a>)</dd>
      <dt id="clustered-scripts">clustered</dt>
        <dd>South-East Asian scripts that have discrete units but do not
          use space between words (such as Thai, Lao, Khmer, Myanmar)</dd>
      <dt id="connected-scripts">connected</dt>
        <dd>Devanagari and other scripts such as such as Bengali and Gurmukhi,
          that use spaces between words and baseline connectors within words.
          The Ogham script also falls into this category.</dd>
      <dt id="cursive-scripts">cursive</dt>
        <dd>Arabic and similar cursive scripts</dd>
      <dt id="discrete-scripts">discrete</dt>
        <dd>Scripts that use spaces between words and have discrete,
          unconnected (in print) units within words, such as Latin,
          Greek, Cyrillic, Hebrew; this category also includes symbols
          and punctuation.</dd>
      <dt id="tibetan-scripts">tibetan</dt>
        <dd>Tibetan has clusters similar to South and South Asian scripts but
          also has its own punctuation system. Its traditional justification
          does not match any of the other scripts, so this category represents
          the Tibetan script.</dd>
    </dl>

    <p class="issue">Where do scripts like Tamil fit in?</p>

    <p>The UA may enable or break optional ligatures or use other font
      features such as alternate glyphs to help justify the text under
      any method. This behavior is not defined by CSS.</p>

    <p id="expansion-opportunity">CSS defines <dfn>expansion opportunities</dfn>
      as points where the justification algorithm may alter spacing within
      the text. Expansion opportunities occur at <a href="#word-separator">word
      separators</a> and between <a href="#grapheme-cluster">grapheme
      clusters</a>. These expansion opportunities fall into priority
      levels as defined by the justification method.
      Within a line, higher priority expansion opportunities must be
      expanded or compressed to their limits before lower priority
      expansion opportunities may be adjusted. These limits are given by
      the <a href="#letter-spacing">letter-spacing</a> and
      <a href="#word-spacing">word spacing</a> properties. How any remaining
      space is distributed once all expansion opportunities reach their
      limits is up to the UA. If the inline contents of a line cannot be
      stretched to the full width of the line box, then they must be
      aligned as specified by the
      <span class="property"><a href="#text-align-last">'text-align-last'</a></span>
      property (or as 'start' if 'text-align-last' is 'justify').</p>

    <p>The expansion opportunity priorities for values of 'text-justify'
      are given in the table below. Space must be distributed evenly
      among all types of expansion opportunities in a given prioritization
      group, but may vary within a line due to changes in the font or
      letter-spacing and word-spacing values.
      The different types of expansion opportunities are defined as follows:

    <dl>
      <dt>spaces</dt>
         <dd>An expansion opportunity exists at spaces and other word
           separators.
           Expand as for <a href="#word-spacing">'word-spacing'</a>.</dd>
      <dt>block</dt>
      <dt>clustered</dt>
      <dt>connected</dt>
      <dt>discrete</dt>
      <dt>tibetan</dt>
         <dd>An expansion opportunity exists between two
           <a href="#grapheme-cluster">grapheme clusters</a>, when at least
           one of them belongs to the affected script group and the spacing
           that point has not already been altered at a higher priority.
           <p class="issue">I'm not sure grapheme clusters are the right unit
           to use for some of these complex scripts...</p>
         </dd>
      <dt>cursive</dt>
         <dd>If the UA is capable of extending the graphical connection between
           cursively connected grapheme clusters, an expansion opportunity
           exists between any two cursively connected grapheme clusters
           belonging to cursive scripts, but not between disjoint grapheme
           clusters. The UA must not break the graphical connection when
           changing the spacing between cursively connected grapheme clusters.
           </dd>
    </dl>

    <table class="data">
      <colgroup></colgroup>
      <colgroup span=2></colgroup>
      <colgroup span=2></colgroup>
      <colgroup span=2></colgroup>
      <colgroup span=2></colgroup>
      <colgroup span=3></colgroup>
      <colgroup span=3></colgroup>
      <colgroup span=1></colgroup>
      <thead>
        <tr>
          <th scope="row">method:</th>
          <th colspan="2">inter-word</th>
          <th colspan="2">inter-ideograph</th>
          <th colspan="2">distribute</th>
          <th colspan="2">inter-cluster</th>
          <th colspan="3">kashida</th>
          <th colspan="3">tibetan</th>
          <th colspan="1">auto</th>
        </tr>
        <tr>
          <th scope="row">priority:</th>

          <th>1st</th>
          <th>2nd</th>

          <th>1st</th>
          <th>2nd</th>

          <th>1st</th>
          <th>2nd</th>

          <th>1st</th>
          <th>2nd</th>

          <th>1st</th>
          <th>2nd</th>
          <th>3rd</th>

          <th>1st</th>
          <th>2nd</th>
          <th>3rd</th>

          <th>-</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th scope="row"><em>special</em></th>

          <td></td>
          <td></td>

          <td></td>
          <td></td>

          <td></td>
          <td></td>

          <td></td>
          <td></td>

          <td>&#8226;</td>
          <td></td>
          <td></td>

          <td>&#8226;</td>
          <td></td>
          <td></td>

          <td rowspan="8"><abbr title="UA-dependent">?</abbr></td>
        </tr>

        <tr>
          <th scope="row">spaces</th>
          <td>&#8226;</td>
          <td></td>

          <td>&#8226;</td>
          <td></td>

          <td>&#8226;</td>
          <td></td>

          <td>&#8226;</td>
          <td></td>

          <td></td>
          <td>&#8226;</td>
          <td></td>

          <td></td>
          <td>&#8226;</td>
          <td></td>
        </tr>

        <tr>
          <th scope="row">discrete</th>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td>&#8226;</td>
          <td></td>

          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td></td>
          <td>&#8226;</td>
        </tr>

        <tr>
          <th scope="row">block</th>
          <td></td>
          <td>&#8226;</td>

          <td>&#8226;</td>
          <td></td>

          <td>&#8226;</td>
          <td></td>

          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>
          <td></td>
        </tr>

        <tr>
          <th scope="row">clustered</th>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td>&#8226;</td>
          <td></td>

          <td>&#8226;</td>
          <td></td>

          <td></td>
          <td>&#8226;</td>
          <td></td>

          <td></td>
          <td>&#8226;</td>
          <td></td>
        </tr>

        <tr>
          <th scope="row">connected</th>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td></td>
          <td>&#8226;</td>
        </tr>

        <tr>
          <th scope="row">cursive</th>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td> </td>
          <td></td>
          <td></td>

          <td></td>
          <td></td>
          <td>&#8226;</td>
        </tr>

        <tr>
          <th scope="row">tibetan</th>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td>&#8226;</td>

          <td>&#8226;</td>
          <td></td>

          <td>&#8226;</td>
          <td></td>

          <td></td>
          <td></td>
          <td>&#8226;</td>

          <td></td>
          <td></td>
          <td>&#8226;</td>
        </tr>
      </tbody>
    </table>

   <p>The two values <code>kashida</code> and <code>tibetan</code> trigger
     special justification behavior as specified below. This special behavior
     takes priority over the expansion opportunity adjustments described
     above.</p>

    <dl>
      <dt>kashida</dt>
         <dd>apply kashida elongation. This may be done in discrete kashida
           units, and the prioritization of kashida points is UA-dependent:
           for example, the UA may apply more at the end of the line. The
           UA should not apply kashida to fonts for which it is inappropriate.
           It may instead rely on other justification methods that lengthen
           or shorten Arabic segments (e.g. by substituting in swash forms or
           optional ligatures). Because elongation rules depend on the typeface
           style, the UA should rely on on the font whenever possible rather
           than inserting kashida based on a font-independent ruleset. The UA
           should limit elongation so that in multi-script lines a short
           stretch of Arabic will not be forced to soak up too much of the
           extra space by itself.</dd>
      <dt>tibetan</dt>
        <dd>apply Tibetan justification. Tibetan justification stretches the
           spaces after shads (TIBETAN MARK SHAD U+0F0D, TIBETAN MARK NYIS
           SHAD U+0F0E, TIBETAN MARK TSHEG SHAD U+0F0F, TIBETAN MARK NYIS
           TSHEG SHAD U+0F10, TIBETAN MARK RIN CHEN SPUNGS SHAD U+0F11,
           TIBETAN MARK RGYA GRAM SHAD U+0F12) and spaces after the letters
           KA (U+0F40) and GA (U+0F42)&#8212;with or without combining
           vowels&#8212;if the line contains any. Otherwise, if the line ends
           in a tsek mark (TIBETAN MARK INTERSYLLABIC TSHEG U+0F0B, TIBETAN
           MARK DELIMITER TSHEG BSTAR U+0F0C) it pads the end of the line with
           tsek (U+0F0B) to fill the remaining space. The UA may use a more
           sophisticated algorithm than the simple two-step one above, but
           must still prioritize flexing a space after a shad over padding
           the line with tseks. For example, one possible algorithm stretches
           spaces up to twice their width, then falls back to padding the line
           with up to six tseks. If there is still more space to soak up, it
           goes back to stretching the spaces beyond that limit, or, if there
           are none, adding tseks past the six-tsek limit. Balancing the two
           methods in such a way results in more even-looking justified text.
           <span class="note">Note that this method was used to justify text
           in hand-written documents and primitive typesetting systems. Modern
           practice prefers inter-word justification, and therefore this
           method is only useful for recreating historical layouts.</span>
    </dl>



<h2 id="spacing"><span class="secno">7.</span>
  Spacing</h2>

  <p id="spacing-limit">The next two properties refer to the &lt;spacing-limit&gt;
    value type, which is defined as follows:</p>

    <dl>
      <dt><dfn title="<spacing-limit>"><code>&lt;spacing-limit&gt;</code></dfn></dt>
      <dd>
        [ normal | <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span
                 class="value-inst-length">&lt;length&gt;</span></a>
               | <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-percentage"><span
                 class="value-inst-percentage">&lt;percentage&gt;</span></a> ]
      </dd>
      <dt><dfn title="<spacing-limit>:normal"><code>normal</code></dfn></dt>
        <dd>Specifies the normal optimum/minimum/maximum spacing, as defined
          by the current font and/or the user agent. Normal spacing should be
          percentage-based. Normal minimum and maximum spacing must be based
          on the optimum spacing so that the minimum and maximum limits
          increase and decrease with changes to the optimum spacing.
          Normal minimum and maximum spacing may also vary according to some
          measure of the amount of text on a line (e.g. block width divided by
          font size): larger measures can accommodate tighter spacing constraints.
          Normal optimum/minimum/maximum spacing may also vary based on the
          value of the <a href="#text-justify">'text-justify'</a> property,
          the element's language, and other factors.
        </dd>
      <dt><dfn title="<spacing-limit>:<length>|<percentage>"><code><a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span
          class="value-inst-length">&lt;length&gt;</span></a> or
          <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-percentage"><span
          class="value-inst-percentage">&lt;percentage&gt;</span></a></code></dfn></dt>
        <dd>Specifies extra spacing <em>in addition to</em> the normal spacing.
          Percentages are with respect to the width of a space (U+0020). Values
          may be negative, but there may be implementation-dependent limits.
        </dd>
    </dl>

  <h3 id="word-spacing"><span class="secno">7.1.</span>
    Word Spacing: the 'word-spacing' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>word-spacing</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td><a href="#spacing-limit">&lt;spacing-limit&gt;</a> {1,3}
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>refers to width of space (U+0020) glyph</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>'normal' or computed value or percentage</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies the minimum, maximum, and optimal spacing
      between words. If only one value is specified, then it represents
      the optimal spacing and the minimum and maximum are both 'normal'.
      If two values are specified, then the first represents both the
      optimal spacing and the minimum spacing, and the second represents
      the maximum spacing. If three values are specified, they represent
      the optimum, minimum, and maximum respectively.</p>

    <p>If the value of the optimum or maximum spacing is less than the
      value of the minimum spacing, then its used value is the minimum
      spacing. If the optimum spacing is greater than the maximum spacing
      then its used value is the maximum spacing. (This substitution
      occurs after inheritance.)</p>

     <p>In the absence of justification the optimal spacing must be used.
      The text justification process may alter the spacing
      from its optimum (see the <a href="#text-justify">'text-justify'</a>
      property, above) but must not violate the minimum spacing limit
      and should also avoid exceeding the maximum.</p>

    <p id="word-separator">Spacing is applied to each word-separator character
      left in the text after the <a href="#white-space-rules">white space
      processing rules</a> have been applied and should be applied half on
      each side of the character.
    <span class="issue">This is correct for Ethiopian and doesn't matter for invisible spaces, but is it correct for Tibetan? Most publications seem to add space <em>after</em> the tsek mark during justification.</span>
      Word-separator characters include the space (U+0020), the no-break space
      (U+00A0), the Ethiopic word space (U+1361), the ideographic space (U+3000),
      the Aegean word separators (U+10100,U+10101), the Ugaritic word divider
      (U+1039F), and the Tibetan tsek (U+0F0B, U+0F0C).
      <span class="issue">Is this list correct?</span>

      If there are no word-separator characters, or if the word-separating
      character has a zero advance width (such as the zero width space U+200B)
      then the user agent must not create an additional spacing between words.

      General punctuation and fixed-width spaces (such as U+2000 through U+200A)
      are not considered word-separators.</p>

  <h3 id="letter-spacing"><span class="secno">7.2.</span>
    Tracking: the 'letter-spacing' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>letter-spacing</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td><a href="#spacing-limit">&lt;spacing-limit&gt;</a>{1,3}
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>normal</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>refers to width of space (U+0020) glyph</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>'normal' or computed value or percentage</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies the minimum, maximum, and optimal spacing
      between grapheme clusters. If only one value is specified, then it
      represents all three values. If two values are specified, then the
      first represents both the optimal spacing and the minimum spacing,
      and the second represents the maximum spacing. If three values are
      specified, they represent the optimum, minimum, and maximum
      respectively.</p>

    <p>If the value of the optimum or maximum spacing is less than the
      value of the minimum spacing, then its used value is the minimum
      spacing. If the optimum spacing is greater than the maximum spacing
      then its used value is the maximum spacing. (This substitution
      occurs after inheritance.)</p>

    <p>In the absence of justification the optimal spacing must be used.
      The text justification process may alter the spacing from its
      optimum (see the <a href="#text-justify">'text-justify'</a> property,
      above) but must not violate the minimum spacing limit and should
      also avoid exceeding the maximum. Letter-spacing is applied in
      addition to any word-spacing. 'normal' optimum letter-spacing is
      typically zero.</p>

    <p id="grapheme-cluster">A <dfn>grapheme cluster</dfn> is what
      a language user considers to be a character or a basic unit of the
      script. The term is described in detail in the Unicode Technical Report:
      Text Boundaries <a href="#UAX29" rel="biblioentry">[UAX29]</a>. This
      specification relies on the default (not tailored) rules <em>only</em>.</p>

    <p>Letter-spacing must not be applied at the beginning or at the end
       of a line. At element boundaries, the letter spacing is given by
       and rendered within the innermost element that <em>contains</em>
       the boundary.

    <div class="example">
      <p>For example, given the markup</p>

      <pre>&lt;P&gt;a&lt;LS&gt;b&lt;Z&gt;cd&lt;/Z&gt;&lt;Y&gt;ef&lt;/Y&gt;&lt;/LS&gt;g&lt;/P&gt;</pre>

      <p>and the style sheet</p>

      <pre><!--
     -->LS { letter-spacing: 1em; }
<!-- -->Z { letter-spacing: 0.3em; }
<!-- -->Y { letter-spacing: 0.4em; }</pre>

      <p>the spacing would be</p>

      <pre>a[0]b[1em]c[0.3em]d[1em]e[0.4em]f[0]g</pre>
    </div>

    <p>UAs may apply letter-spacing to cursive scripts. In this case, UAs
      should extend the space between disjoint graphemes as specified above
      <em>and</em> extend the visible connection between cursively connected
      graphemes by the same amount (rather than leaving a gap). The UA may
      use glyph substitution or other font capabilities to spread out the
      letters. If the UA  cannot expand a cursive script without breaking
      the cursive connections, it should not apply letter-spacing between
      grapheme clusters of that script at all.</p>

    <p>When the resulting space between two characters is not the same as the
      default space, user agents should not use optional ligatures.</p>

  <h3 id="punctuation-trim"><span class="secno">7.3.</span>
    Fullwidth Punctuation Kerning: the 'punctuation-trim' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>punctuation-trim</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>none | [start || end || adjacent]
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements and generated content</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <p>This property determines whether or not a fullwidth punctuation
      character should be trimmed (kerned) if it appears at the start
      or end of a line, or adjacent to another fullwidth punctuation
      character. Values are defined as follows:</p>

    <dl>
      <dt><dfn title="punctuation-trim:none">none</dfn></dt>
      <dd>Do not trim or kern the blank half of fullwidth opening or closing
        punctuation glyphs.</dd>
      <dt><dfn title="punctuation-trim:start">start</dfn></dt>
      <dd>Trim (kern) the blank half of fullwidth opening punctuation at
        the beginning of each line.</dd>
      <dt><dfn title="punctuation-trim:end">end</dfn></dt>
      <dd>Trim (kern) the blank half of fullwidth closing punctuation at
        the end of each line.</dd>
      <dt><dfn title="punctuation-trim:adjacent">adjacent</dfn></dt>
      <dd>Trim (kern) the blank half of fullwidth opening punctuation if its
        previous adjacent character is a fullwidth opening punctuation,
        fullwidth middle dot punctuation, fullwidth closing punctuation, or
        ideographic space (U+3000).
        Trim (kern) the blank half of fullwidth closing punctuation if its
        next adjacent character is a fullwidth closing punctuation, fullwidth
        middle dot punctuation, or ideographic space (U+3000).</dd>
    </dl>

    <div class="example">
      <p>The following example table lists the punctuation pairs affected by
        the 'adjacent' value. It uses halfwidth equivalents to approximate
        the trimming effect.
      <table class="data">
        <caption>Demonstration of 'adjacent' punctuation trimming</caption>
        <thead>
          <tr><th>Combination</th> <th>Sample Pair</th> <th>Looks Like</th>
        </thead>

        <tbody>
          <tr><th>Opening&#8212;Opening</th>
              <td><tt lang="ja" class="char">〔</tt>+<tt lang="ja" class="char">（</tt>
              <td><tt lang="ja" class="char">〔</tt><tt lang="ja" class="char">(</tt>
          <tr><th>Middle Dot&#8212;Opening</th>

              <td><tt lang="ja" class="char">・</tt>+<tt lang="ja" class="char">（</tt>
              <td><tt lang="ja" class="char">・</tt><tt lang="ja" class="char">(</tt>
          <tr><th>Closing&#8212;Opening</th>
              <td><tt lang="ja" class="char">〕</tt>+<tt lang="ja" class="char">（</tt>

              <td><tt lang="ja" class="char">〕</tt><tt lang="ja" class="char">(</tt>
          <tr><th>Ideographic Space&#8212;Opening</th>
              <td><tt lang="ja" class="char">　</tt>+<tt lang="ja" class="char">（</tt>
              <td><tt lang="ja" class="char">　</tt><tt lang="ja" class="char">(</tt>

          <tr><th>Closing&#8212;Closing</th>
              <td><tt lang="ja" class="char">）</tt>+<tt lang="ja" class="char">〕</tt>
              <td><tt lang="ja" class="char">)</tt><tt lang="ja" class="char">〕</tt>
          <tr><th>Closing&#8212;Middle Dot</th>

              <td><tt lang="ja" class="char">）</tt>+<tt lang="ja" class="char">・</tt>
              <td><tt lang="ja" class="char">)</tt><tt lang="ja" class="char">・</tt>
          <tr><th>Closing&#8212;Ideographic Space</th>
              <td><tt lang="ja" class="char">）</tt>+<tt lang="ja" class="char">　</tt>

              <td><tt lang="ja" class="char">)</tt><tt lang="ja" class="char">　</tt>
        </tbody>
      </table>
    </div>
    <p>In the context of this property the following definitions apply:

    <dl>
      <dt id="fullwidth-opening-punctuation"><dfn>fullwidth opening punctuation</dfn></dt>
      <dd>Includes any opening punctuation character (Unicode category
        <code>Ps</code>) that belongs to the <i>CJK Symbols and Punctuation</i>
        block (U+3000&#8211;U+303F) or is categorized as <i>East Asian
        Fullwidth (F)</i> by <a href="#UAX11">[UAX11]</a>. Also includes
        LEFT SINGLE QUOTATION MARK (U+2018) and LEFT DOUBLE QUOTATION MARK
        (U+201C).
        When trimmed, the left (for horizontal text) or top (for vertical
        text) half is kerned.</dd>
      <dt id="fullwidth-closing-punctuation"><dfn>fullwidth closing punctuation</dfn></dt>
      <dd>Includes any closing punctuation character (Unicode category
        <code>Pe</code>) that belongs to the <i>CJK Symbols and Punctuation</i>
        block (U+3000&#8211;U+303F) or is categorized as <i>East Asian Fullwidth
        (F)</i> by <a href="#UAX11">[UAX11]</a>. Also includes RIGHT SINGLE
        QUOTATION MARK (U+2019) and RIGHT DOUBLE QUOTATION MARK (U+201D). May
        also include fullwidth colon punctuation and/or fullwidth dot
        punctuation (see below).
        When trimmed, the right (for horizontal text) or bottom (for vertical
        text) half is kerned.</dd>
      <dt id="fullwidth-middle-dot-punctuation"><dfn>fullwidth middle dot punctuation</dfn></dt>
      <dd>Includes MIDDLE DOT (U+00B7), HYPHENATION POINT (U+2027), and
        KATAKANA MIDDLE DOT (U+30FB). May also include fullwidth colon
        punctuation and/or fullwidth dot punctuation (see below).</dd>
      <dt id="fullwidth-colon-punctuation"><dfn>fullwidth colon punctuation</dfn></dt>
      <dd>Includes FULLWIDTH COLON (U+FF1A) and FULLWIDTH SEMICOLON (U+FF1B).</dd>
      <dt id="fullwidth-dot-punctuation"><dfn>fullwidth dot punctuation</dfn></dt>
      <dd>Includes IDEOGRAPHIC COMMA (U+3001), IDEOGRAPHIC FULL STOP (U+3002),
        FULLWIDTH COMMA (U+FF0C), FULLWIDTH FULL STOP (U+FF0E).</dd>
    </dl>

    <p>Fullwidth opening and closing punctuation must not be trimmed if the
      glyph is not actually fullwidth. A fullwidth glyph is one that has the
      same advance width as a typical Han character in the same font.</p>

    <p>Whether fullwidth colon punctuation and fullwidth dot punctuation should
      be considered fullwidth closing punctuation or fullwidth middle dot
      punctuation depends on where in the glyph's box the punctuation is drawn.
      If the punctuation is centered, then it should be considered middle dot
      punctuation. If the punctuation is drawn to one side (left in horizontal
      text, top in vertical text) and the other half is therefore blank then
      the punctuation should be considered closing punctuation and trimmed
      accordingly.</p>

    <p>The UA must classify fullwidth colon punctuation and fullwidth dot
      punctuation under either the fullwidth closing punctuation category or
      the fullwidth middle dot punctuation category as appropriate. The UA
      may rely on language conventions and the layout orientation (horizontal
      vs. vertical), and/or font information to determine this categorization.
      The UA may also add additional characters to any category as appropriate.</p>

    <div class="note">
      <p>The following informative table summarizes language conventions for
      classifying fullwidth colon and dot punctuation:</p>

      <table class="data">
        <thead>
          <tr><td></td> <th>colon punctuation</th> <th>dot punctuation</th>
        </thead>
        <tbody>
          <tr><th>Simplified Chinese (horizontal)</th> <td>closing</td> <td>closing</td>
          <tr><th>Simplified Chinese (vertical)</th> <td>closing</td> <td>closing</td>
          <tr><th>Traditional Chinese</th> <td>middle dot</td> <td>middle dot</td>
          <tr><th>Korean</th> <td>middle dot</td> <td>closing</td>
          <tr><th>Japanese</th> <td>middle dot</td> <td>closing</td>
        </tbody>
      </table>

      <p>Note, that for Chinese fonts at least, the author observes that the
        standard convention is often not followed.</p>
    </div>

<h2 id="decoration"><span class="secno">8.</span>
  <a name="text-decoration">Text Decoration</a></h2>

  <h3 id="line-decoration"><span class="secno">8.1</span>
    Line Decoration</h3>

    <h4 id="text-decoration-line"><span class="secno">8.1.1</span>
      Text Decoration Lines</h4>

      <table class="propdef">
        <tbody>
          <tr>
            <th>Name:</th>
            <td><dfn>text-decoration-line</dfn></td>
          </tr>
          <tr>
            <th>Value:</th>
            <td>none | [ underline || overline || line-through ]
            </td>
          </tr>
          <tr>
            <th>Initial:</th>
            <td>none</td>
          </tr>
          <tr>
            <th>Applies to:</th>
            <td>all elements and generated content</td>
          </tr>
          <tr>
            <th>Inherited:</th>
            <td>no (see prose)</td>
          </tr>
          <tr>
            <th>Percentages:</th>
            <td>N/A</td>
          </tr>
          <tr>
            <th>Media:</th>
            <td>visual</td>
          </tr>
          <tr>
            <th>Computed&#160;value:</th>
            <td>as specified</td>
          </tr>
        </tbody>
      </table>

    <h4 id="text-decoration-color"><span class="secno">8.1.2</span>
      Text Decoration Color</h4>

      <table class="propdef">
        <tbody>
          <tr>
            <th>Name:</th>
            <td><dfn>text-decoration-color</dfn></td>
          </tr>
          <tr>
            <th>Value:</th>
            <td><a href="http://www.w3.org/TR/css3-color/#color0"><span class="value-inst-color">&lt;color&gt;</span></a>
            </td>
          </tr>
          <tr>
            <th>Initial:</th>
            <td>currentColor</td>
          </tr>
          <tr>
            <th>Applies to:</th>
            <td>all elements and generated content</td>
          </tr>
          <tr>
            <th>Inherited:</th>
            <td>no</td>
          </tr>
          <tr>
            <th>Percentages:</th>
            <td>N/A</td>
          </tr>
          <tr>
            <th>Media:</th>
            <td>visual</td>
          </tr>
          <tr>
            <th>Computed&#160;value:</th>
            <td>as specified</td>
          </tr>
        </tbody>
      </table>

      <p>This property specifies the color of text decoration (underlines
        overlines, and line-throughs) set on the element with
        'text-decoration-line'.

    <h4 id="text-decoration-style"><span class="secno">8.1.3</span>
      Text Decoration Style</h4>

      <table class="propdef">
        <tbody>
          <tr>
            <th>Name:</th>
            <td><dfn>text-decoration-style</dfn></td>
          </tr>
          <tr>
            <th>Value:</th>
            <td>solid | double | dotted | dashed | dot-dash | dot-dot-dash | wave
            </td>
          </tr>
          <tr>
            <th>Initial:</th>
            <td>solid</td>
          </tr>
          <tr>
            <th>Applies to:</th>
            <td>all elements and generated content</td>
          </tr>
          <tr>
            <th>Inherited:</th>
            <td>no</td>
          </tr>
          <tr>
            <th>Percentages:</th>
            <td>N/A</td>
          </tr>
          <tr>
            <th>Media:</th>
            <td>visual</td>
          </tr>
          <tr>
            <th>Computed&#160;value:</th>
            <td>as specified</td>
          </tr>
        </tbody>
      </table>

      <p>This property specifies the style of the line(s) drawn for
        text decoration specified on the element. Values have the
        same meaning as for the 'border-style' properties. The
        'wave' value specifies a wavy line.</p>

    <h4 id="text-decoration"><span class="secno">8.1.4</span>
      Text Decoration Shorthand</h4>

      <table class="propdef">
        <tbody>
          <tr>
            <th>Name:</th>
            <td><dfn>text-decoration</dfn></td>
          </tr>
          <tr>
            <th>Value:</th>
            <td><var><a href="#text-decoration-line">&lt;text-decoration-line&gt;</a></var> ||
                <var><a href="#text-decoration-color">&lt;text-decoration-color&gt;</a></var> ||
                <var><a href="#text-decoration-style">&lt;text-decoration-style&gt;</a></var>
            </td>
          </tr>
          <tr>
            <th>Initial:</th>
            <td>solid</td>
          </tr>
          <tr>
            <th>Applies to:</th>
            <td>all elements and generated content</td>
          </tr>
          <tr>
            <th>Inherited:</th>
            <td>no</td>
          </tr>
          <tr>
            <th>Percentages:</th>
            <td>N/A</td>
          </tr>
          <tr>
            <th>Media:</th>
            <td>visual</td>
          </tr>
          <tr>
            <th>Computed&#160;value:</th>
            <td>as specified</td>
          </tr>
        </tbody>
      </table>

      <p>This property is a shorthand for setting 'text-decoration-line',
        'text-decoration-color', and 'text-decoration-style' in one
        declaration. Omitted values are set to their initial values.</p>

    <h4 id="text-decoration-skip"><span class="secno">8.1.3</span>
      Text Decoration Line Continuity</h4>

      <table class="propdef">
        <tbody>
          <tr>
            <th>Name:</th>
            <td><dfn>text-decoration-skip</dfn></td>
          </tr>
          <tr>
            <th>Value:</th>
            <td>none | [ images || spaces || ink ] | all
            </td>
          </tr>
          <tr>
            <th>Initial:</th>
            <td>images</td>
          </tr>
          <tr>
            <th>Applies to:</th>
            <td>all elements and generated content</td>
          </tr>
          <tr>
            <th>Inherited:</th>
            <td>yes</td>
          </tr>
          <tr>
            <th>Percentages:</th>
            <td>N/A</td>
          </tr>
          <tr>
            <th>Media:</th>
            <td>visual</td>
          </tr>
          <tr>
            <th>Computed&#160;value:</th>
            <td>as specified</td>
          </tr>
        </tbody>
      </table>

      <p>This value specifies what content text decoration applied to the
        element should skip over. Values have the following meanings:

      <dl>
        <dt><dfn title="text-decoration-skip:none">none</dfn></dt>
        <dd>Skip nothing: text-decoration is drawn for all content,
          including white space and replaced elements.</dd>
        <dt><dfn title="text-decoration-skip:images">images</dfn></dt>
        <dd>Skip this element if it is a replaced element.</dd>
        <dt><dfn title="text-decoration-skip:spaces">spaces</dfn></dt>
        <dd>Skip white space: this includes regular spaces (U+0020) and
          tabs (U+0009), as well as nbsp (U+....), ideographic space
          (U+...) and all fixed width spaces (such as U+...&ndash;U+....).</dd>
        <dt><dfn title="text-decoration-skip:ink">ink</dfn></dt>
        <dd>Skip over where glyphs are drawn: interrupt the decoration
          line to let text show through where the text decoration would
          otherwise cross over a glyph. The UA may also skip a small
          distance to either side of the glyph outline.</dd>
        <dt><dfn>title="text-decoration-skip:all">all</dfn></dt>
        <dd>Skip over all content in this element: no ancestor text decoration
          is drawn within this element.</dd>
      </dl>

  <div class="issue">

    <p>Paul and I have agreed that we want to simplify the set of properties
      introduced in the previous
      <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#text-decoration-overview">CSS3
      Text Candidate Recommendation</a>. We're not sure how yet, though, and would
      like to solicit input from the www-style community.</p>

    <p>So far, we think that the following capabilities should be sufficient:</p>

    <ul>
      <li>Ability to set a line style (solid, dashed, wavy, etc), but to
        set that style for all three decorations, not necessarily for each
        individually.
      <li>Ability to set a line color, which also applies to all three
        decorations. The color must be an independent property.
      <li>Ability to set a line mode (continuous/skip-spaces/cross-images/etc).
      <li>Ability to change the underline position. This property must be
        independent and inheritable; the existing 'text-underline-position'
        property should be fine.
      <li>We don't think it will be necessary to set thicknesses to a specific length
        value, but a control for switching between normal and thicker lines might be
        useful. (Comments?)
    </ul>

     <p>Here's one proposal:
     <dl>
       <dt>text-line-decoration</dt>
       <dd>
          <table>
            <tr><th>Values: <td>none | [ underline || overline || line-through ]
            <tr><th>Initial: <td>none
            <tr><th>Inherit: <td>no (but see prose)
          </table>
       <dt>text-line-color</dt>
         <dd>
           <table>
             <tr><th>Values: <td>&lt;color&gt;
             <tr><th>Initial: <td>currentcolor
             <tr><th>Inherit: <td>?
           </table>
       <dt>text-line-style</dt>
         <dd>
           <table>
             <tr><th>Values: <td>[ solid | double | dotted | dashed | dot-dash | dot-dot-dash | wave ] || thick
             <tr><th>Initial: <td>solid
             <tr><th>Inherit: <td>?
           </table>
       <dt>text-line-skip</dt>
         <dd>
           <table>
             <tr><th>Values: <td>none | [ images | spaces | ink ]
             <tr><th>Initial: <td>images
             <tr><th>Inherit: <td>yes
           </table>
       <dt>text-decoration (shorthand)</dt>
         <dd>
           <table>
             <tr><th>values <td>&lt;'text-line-decoration'&gt; || &lt;'text-line-color'&gt; || &lt;'text-line-style'&gt; || blink
           </table>
       <dt>text-underline-position</dt>
         <dd>
           <table>
             <tr><th>Values: <td>auto | before-edge | alphabetic | after-edge
             <tr><th>Initial: <td>auto
             <tr><th>Inherit: <td>yes
           </table>
     </dl>

     <p>Comments? Alternatives? Post them to <a href="mailto:www-style@w3.org">www-style@w3.org</a>
       with <kbd>[CSS3 Text]</kbd> in the subject line.</p>
  </div>

  <h3 id="text-emphasis"><span class="secno">8.2</span>
    Emphasis Marks: the 'text-emphasis' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-emphasis</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>none | [ [ accent | dot | circle | disc] [ before | after ]? ]
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements and generated content</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>as specified</td>
        </tr>
      </tbody>
    </table>

    <p>East Asian documents use small symbols on top of each glyph to emphasize
      a run of text. For example:</p>

    <div class="figure">
      <p>
        <img alt="Example of emphasis in Japanese appearing above the text"
             class="example" src="text-emphasis-ja.gif" height="28" width="225"></p>
      <p>Accent emphasis (shown in blue for clarity) applied to Japanese text</p>
    </div>

    <p>This property applies emphasis formatting applied to text. Unlike
      '<a href="#text-decoration">text-decoration</a>', emphasis marks can
      affect the line height. Values have the following meanings:</p>

    <dl>
      <dt><dfn title="text-emphasis:none"><code>none</code></dfn></dt>
        <dd>No emphasis marks.</dd>
      <dt><dfn title="text-emphasis:accent"><code>accent</code></dfn></dt>
        <dd>Draw calligraphic accent strokes as marks.</dd>
      <dt><dfn title="text-emphasis:dot"><code>dot</code></dfn></dt>
        <dd>Draw calligraphic dots as marks.</dd>
      <dt><dfn title="text-emphasis:circle"><code>circle</code></dfn></dt>
        <dd>Draw hollow circles as marks.</dd>
      <dt><dfn title="text-emphasis:disc"><code>disc</code></dfn></dt>
        <dd>Draw filled circles as marks.</dd>
      <dt><dfn title="text-emphasis:before"><code>before</code></dfn></dt>
        <dd>Draw marks above the text in horizontal layout, to the right in
          vertical layout. This is the default position.</dd>
      <dt><dfn title="text-emphasis:after"><code>after</code></dfn></dt>
        <dd>Draw marks below the text in horizontal layout, to the left in
          vertical layout.</dd>
    </dl>

    <p class="issue">The list of shapes here is copied from the
      <a href="http://www.w3.org/TR/2002/WD-css3-fonts-20020802/#font-emphasize-props">CSS3 Fonts module</a>
      drafts, and it is not correct or at least not complete. Any input on
      what shapes are needed, what usage patterns are found in real texts,
      etc. would be much appreciated. Send them off to
      <a href="mailto:www-style@w3.org">www-style@w3.org</a> or
      <a href="mailto:www-international@w3.org">www-international@w3.org</a> with
      [CSS3 Text] in the subject line.</p>

    <div class="note">
      <p>Note, the preferred position of emphasis marks depends on the
        language. In Japanese for example, the preferred position is 'before'.
        In Chinese used in the PRC, on the other hand, the preferred position
        is 'after'. The informative table below summarizes the preferred
        emphasis mark position for Chinese and Japanese:</p>

      <table class="data">
        <caption>Preferred emphasis mark and ruby position</caption>
        <thead>
          <tr>
            <th scope="col">Language</th>
            <th scope="col">Preferred mark position</th>
            <th scope="col">Illustration</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td scope="row">Japanese</td>
            <td>before</td>
            <td rowspan="2">
                <img alt="Emphasis marks appear above each emphasized character in horizontal Japanese text."
                    title="Emphasis (shown in blue for clarity) applied above a fragment of Japanese text"
                    src="text-emphasis-ja.gif" height="28" width="225">
            </td>
          </tr>
          <tr>
            <td scope="row">Chinese (Traditional)</td>
            <td>before</td>
            <td></td>
          </tr>
          <tr>
            <td scope="row">Chinese (Simplified)</td>
            <td>after</td>
            <td>
              <img alt="Emphasis marks appear below each emphasized character in horizontal Simplified Chinese text."
                    title="Emphasis (shown in blue for clarity) applied below a fragment of Chinese text"
                    src="text-emphasis-zh.gif" height="28" width="133">
          </tr>
        </tbody>
      </table>
    </div>

  <h3 id="text-shadow"><span class="secno">8.3</span>
    Text Shadows: the 'text-shadow' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-shadow</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>none | [<var>&lt;shadow&gt;</var>, ] * <var>&lt;shadow&gt;</var>
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements and generated content</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>a color plus three absolute &lt;length&gt;s</td>
        </tr>
      </tbody>
    </table>

    <p>This property accepts a comma-separated list of shadow effects to
      be applied to the text of the element. <dfn>&lt;shadow&gt;</dfn>
      is defined as
         <code>[
           <a href="http://www.w3.org/TR/css3-color/#color0"><span class="value-inst-color">&lt;color&gt;</span></a>?
           <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>
           <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>
           <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>?
         |
           <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>
           <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>
           <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>?
           <a href="http://www.w3.org/TR/css3-color/#color0"><span class="value-inst-color">&lt;color&gt;</span></a>?
         ]</code>,
      where the first two lengths represent the offset and the third an
      optional blur radius. The shadow is applied to all of the element's
      text as well as any text decoration applied to it. <!-- merge with above sentence once issue resolved -->
      <span class="issue">Would it be better to apply shadows together with
      text decoration: i.e. a descendant of an underlined element doesn't
      apply shadow to its underline, but the underlining element, if it has
      shadows, would apply it to the underline of all text it underlines.</span>
      When a <a href="#text-outline">text outline</a> is specified, the shadow
      shadows the outlined shape rather than the glyph shape.</p>

    <p>The shadow offset is specified with two
      <a href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length" class="noxref"><span class="value-inst-length">&lt;length&gt;</span></a>
      values that indicate an offset from direct alignment with the text.
      The first length value specifies the horizontal distance to the right
      of the text. A negative horizontal length value places the shadow to
      the left of the text. The second length value specifies the vertical
      distance below the text. A negative vertical length value places the
      shadow above the text.</p>

    <p>A blur radius may optionally be specified after the shadow offset.
      The blur radius is a length value that indicates the boundaries of the
      blur effect. The exact algorithm for computing the blur effect is not
      specified. If the blur radius is not specified, it is equal to zero.</p>

    <p>A color value may optionally be specified before or after the length
      values of the shadow effect. The color value will be used as the color
      of the shadow effect. If the color is not specified, a UA-chosen color
      will be used.</p>

    <p>The shadow effects are applied in the order specified
      <span class="issue">should this be changed to layer the same way
      multiple backgrounds do (earlier on top)?</span>
      and may thus overlay each other, but they will never overlay the text 
      itself. Shadow effects do not alter the size of a box, but may extend
      beyond its boundaries.  The
      <a href="http://www.w3.org/TR/CSS21/visuren.html#stack-level">stack
      level</a> of the shadow effects is the same as for the element itself.
      <span class="issue">Does this definition cause problems with the shadow
      of one element painting over the text of the previous element? How would
      we solve that?</span></p>

  <h3 id="text-outline"><span class="secno">8.4</span>
    Text Outlines: the 'text-outline' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-outline</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>none | 
            [
              <a href="http://www.w3.org/TR/css3-color/#color0"><span class="value-inst-color">&lt;color&gt;</span></a>
              <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>
              <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>?
            |
              <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>
              <a class="noxref" href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length"><span class="value-inst-length">&lt;length&gt;</span></a>?
              <a href="http://www.w3.org/TR/css3-color/#color0"><span class="value-inst-color">&lt;color&gt;</span></a>
            ]
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>all elements and generated content</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>a color plus two absolute &lt;length&gt;s</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies a text outline where the first length represents
      the outline's thickness and the second represents an optional blur radius.
      The outline never overlays the text itself. Its effect is the same as that
      obtained by applying text shadows in every radial direction, i.e. all text
      shadows whose offsets satisfy the equation
      <code>x<sup>2</sup> + y<sup>2</sup> = thickness<sup>2</sup></code>.</p>

    <p class="issue">The Timed-Text WG <a href="http://lists.w3.org/Archives/Public/public-tt/2004Aug/0008.html">had
     suggestions</a> for some keywords
     (text-outline: normal|heavy|light;) as well as a &lt;length&gt; thickness. Should
     these be added? How would they be defined? (Maybe use (thin|medium|thick)
     as in <a href="http://www.w3.org/TR/CSS21/box.html#border-width-properties">border-width</a>?)</p>

    <p>The blur radius is a length value that indicates the boundaries of the
      blur effect. The exact algorithm for computing the blur effect is not
      specified, but it is only applied to the outer edge of the outline. If
      the blur radius is not specified, it is equal to zero.
      <span class="issue">Is a second blur radius needed for the inner edge?
      Or should the blur apply to both edges?</span> Implementations may choose
      to ignore the blur radius when text outline is combined with a
      <a href="#text-shadow">text shadow</a>.</p>

    <p>A color value must be specified before or after the length values of
      the outline effect. The color value will be used as the color of the
      outline.</p>

<h2 id="edge-effects"><span class="secno">9.</span>
  Edge Effects</h2>

  <h3 id="text-indent"><span class="secno">9.1</span>
    First Line Indentation: the 'text-indent' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>text-indent</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>[ <span class="value-inst-length"><a href="http://www.w3.org/TR/CSS21/syndata.html#value-def-length">&lt;length&gt;</a></span>
              | <span class="value-inst-percentage"><a href="http://www.w3.org/TR/CSS21/syndata.html#value-def-percentage">&lt;percentage&gt;</a></span>
              ] hanging?
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>0</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block-level, inline-block elements and table cells</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>refers to width of containing block</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>the percentage as specified or the absolute length</td>
        </tr>
      </tbody>
    </table>

    <p>This property specifies the indentation applied to lines of inline
      content in a block. The indentation only affects the first line of
      inline content in the block unless the 'hanging' keyword is specified,
      in which case it affects all lines except the first.</p>

    <p>The indent is treated as a margin applied to the start edge of the
      line box. The amount of indentation is given by the length or percentage
      value. Percentages are relative to the containing block, even in the
      presence of floats. They are inherited as percentages, not as absolute
      lengths.</p>

    <div class="example">
      <p>If 'text-align' is 'start' and 'text-indent' is '5em' in
      left-to-right text with no floats present, then first line of text
      will start 5em into the block:</p>

      <pre><!--
       -->     Since CSS1 it has been possible
<--    -->to indent the first line of a block
<--    -->element using the 'text-indent'
<--    -->property.<!--
   --></pre>
    </div>

    <p class="note">Note that since the 'text-indent' property inherits,
      when specified on a block element, it will affect descandent
      inline-block elements.
      For this reason, it is often wise to specify 'text-indent: 0' on
      elements that are specified 'display: inline-block'.</p>

  <!-- text-overflow -->

  <h3 id="hanging-punctuation"><span class="secno">9.2</span>
    Hanging Punctuation: the 'hanging-punctuation' property</h3>

    <table class="propdef">
      <tbody>
        <tr>
          <th>Name:</th>
          <td><dfn>hanging-punctuation</dfn></td>
        </tr>
        <tr>
          <th>Value:</th>
          <td>none | [ start || end || end-edge ]
          </td>
        </tr>
        <tr>
          <th>Initial:</th>
          <td>none</td>
        </tr>
        <tr>
          <th>Applies to:</th>
          <td>block-level, inline-block elements and table cells</td>
        </tr>
        <tr>
          <th>Inherited:</th>
          <td>yes</td>
        </tr>
        <tr>
          <th>Percentages:</th>
          <td>N/A</td>
        </tr>
        <tr>
          <th>Media:</th>
          <td>visual</td>
        </tr>
        <tr>
          <th>Computed&#160;value:</th>
          <td>as specified</td>
        </tr>
      </tbody>
    </table>

    <p>This property determines whether a punctuation mark, if one is present,
      may be placed outside the line box at the start or at the end of a
      full line of text. <span class="issue">If a justified line can fit the
      punctuation will it expand to push it outside the content area? No. What if
      the line ends in multiple punctuation marks? Which punctuation marks are
      affected?</span>
      Values have the following meanings:</p>

    <dl>
      <dt><dfn title="hanging-punctuation:start"><code>start</code></dfn></dt>
        <dd>Punctuation may hang outside the start edge of the first line.</dd>
      <dt><dfn title="hanging-punctuation:end"><code>end</code></dfn></dt>
        <dd>Punctuation may hang outside the end edge of the last line.</dd>
      <dt><dfn title="hanging-punctuation:start"><code>end-edge</code></dfn></dt>
        <dd>Punctuation may hang outside the end edge of all lines.</dd>
    </dl>

    <p class="issue">Need to work on the description.
      Cover indentation as well.

<p class="issue">To be continued...</p>

<h2 id="changes"><span class="secno">10.</span>
  Changes from the <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/">May
  2003 CSS3 Text <abbr title="Candidate Recommendation">CR</abbr></a></h2>

  <p>Much of the text has been rewritten or severely revised, so all changes
    will not be listed here. Highlights include:</p>
  <ul>
    <li>The <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#line-break" class="property">'line-break'</a>
        and <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#word-break-cjk" class="property">'word-break-cjk'</a>
        properties have been replaced by the
        <a href="#word-break" class="property">'word-break'</a> property.</li>
    <li>The <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#word-break-inside" class="property">'word-break-inside'</a>
        property has been replaced by the
        <a href="#hyphenate" class="property">'hyphenate'</a> property.</li>
    <li>The <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#wrap-option" class="property">'wrap-option'</a>
        property has been replaced by the
        <a href="#text-wrap" class="property">'text-wrap'</a> and
        <a href="#word-break" class="property">'word-break'</a> property.</li>
    <li>The <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#linefeed-treatment" class="property">'linefeed-treatment'</a>,
        <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#white-space-treatment" class="property">'white-space-treatment'</a>,
        and <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#all-space-treatment" class="property">'all-space-treatment'</a>
        properties have been replaced by the
        <a href="#word-break" class="property">'white-space-collapsing'</a> property.</li>
    <li>The <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#min-font-size" class="property">'min-font-size'</a>
        and <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#max-font-size" class="property">'max-font-size'</a>
        properties have been delegated to the next revision of the
        <a href="http://www.w3.org/TR/css3-fonts/">CSS3 Fonts</a> module.
    <li>Change 'text-align's vertical text behavior for the 'left' and 'right'
        values to be relative to LTR text rather than relative to the beginning
        of the line stack.
    <li>The 'size' value has been removed from the
        <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#text-align-last" class="property">'text-align-last'</a>
        property.
    <li>The 'newspaper' value for <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#text-justify" class="property">'text-justify'</a>
        has been dropped in favor of using minimum and maximum limits set on
        the <a href="#word-spacing" class="property">'word-spacing'</a> and
        <a href="#letter-spacing" class="property">'letter-spacing'</a>
        properties to guide justification.
    <li>The <a href="#word-spacing" class="property">'word-spacing'</a>
        and <a href="#letter-spacing" class="property">'letter-spacing'</a>
        now take percentage values.</li>
    <li>The new <a href="#text-wrap" class="property">'text-wrap'</a> property's
        'suppress' value allows authors to suppress text wrapping within an
        element with respect to its surrounding text <em>without forbidding
        correctly-restricted breaks when they are needed</em>.
    <li>The <a href="#line-break-transform">automatic line break conversions</a>
        specified in the <a href="#white-space-rules">white space processing
        rules</a> have been changed to <em>try</em> not to break existing East
        and Southeast Asian content. Explicit control of these rules through
        the <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#linefeed-treatment" class="property">'linefeed-treatment'</a>
        property has been removed because style sheets should not be expected
        to adapt to the source code formatting style.
    <li>The <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#text-align-last">'size'</a>
        value for <a href="#text-align-last">text-align-last</a> has been
        removed.
    <li><a href="#text-justify">Text justification</a> has been much more
        explicitly specified with prioritized expansion opportunities.
    <li>The 'tibetan' value for <a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#text-justify" class="property">'text-justify'</a>
        has been added to specify traditional Tibetan justification (which
        is still in use in modern books and newspapers) and details have
        been added for handling Tibetan text in other justification schemes.
    <li>An 'end' value has been added to
        <a href="#punctuation-trim">'punctuation-trim'</a>.
    <li><a href="http://www.w3.org/TR/2003/CR-css3-text-20030514/#kerning-props">'kerning-mode: contextual'</a>
        has been replaced with <a href="#punctuation-trim">'punctuation-trim: adjacent'</a>.
        Any further controls for kerning will likely be delegated to the Fonts
        module.
    <li>The <a href="#text-shadow">'text-shadow'</a> property now inherits,
        which makes more sense and is consistent with recent implementation.
        The default color is now UA-specified, which is more reasonable than
        defaulting to the current text color.
        The definition now also mentions that it applies to text decoration
        and makes a few minor clarifications.
    <li>The <a href="#text-outline">'text-outline'</a> property has been added
        in response to <a href="http://lists.w3.org/Archives/Member/w3c-css-wg/2004JulSep/0113.html">feedback</a>
        from the Timed-Text WG and Ada Chan. Its design derives from a
        <a href="http://lists.w3.org/Archives/Member/w3c-css-wg/2004JulSep/0130.html">discussion</a>
        of requirements within the CSS Working Group.
    <li>The <a href="#text-emphasis">'text-emphasis'</a> property has been
        added to replace the
        <a href="http://www.w3.org/TR/2002/WD-css3-fonts-20020802/#font-emphasize-props">'font-emphasis'</a>
        property from the CSS3 Fonts module.
    <li>The definition for <a href="#text-indent">'text-indent'</a> has been
        replaced with the precise text
        <a href="http://lists.w3.org/Archives/Member/w3c-css-wg/2003JanMar/0323">sent
        in</a> by Ian Hickson and fantasai on 8 March 2003
        (<a href="http://lists.w3.org/Archives/Member/w3c-css-wg/2003JanMar/0364.html">minus</a>
        the 'text-align' dependence rules).
    <li>The 'hanging-punctuation' property has been redesigned with the
        combinable values 'start', 'end', and 'end-edge' instead of 'start'
        'end' and 'both' to eliminate the script and language dependencies.
  </ul>

  <p>Many sections intended for this module are not yet represented
    in this draft. In particular, the 'text-justify-trim',
    'text-overflow', 'text-decoration', 'text-transformation',
    'text-autospace', other properties have not yet been evaluated.</p>

  <p>Sections relating to text layout (vertical text, grids, 'text-combine')
    will be moved to a separate Text Layout module. These features may
    change greatly from the last revision, but they have not been dropped.
    The vertical text feature, for example, will likely be based on the
    methods described in <a href="http://www.unicode.org/notes/tn22/">Unicode
    Technical Note #22</a>.</p>

<h2 id="recent-changes"><span class="secno">11.</span>
  Changes from the June 2005 CSS3 Text WD</h2>

  <ul>
    <li>Update references
    <li>Add an at-risk section
    <li>Add Yi to the Line Break Transformation rules
    <li>Rewrite line-breaking intro
    <li>Put reference to UAX14 et al. in a note and add note of caution about UAX14
    <li>Define shaping behavior for hyphenated words
    <li>Allow only a single character, not a string, as a value of 'text-align'
    <li>Fix syntax definition for &lt;spacing-limit> and adjust min/max wording
    <li>Define letter-spacing behavior at element boundaries.
    <li>Allow and specify letter-spacing expansion for cursive scripts
    <li>Recommend that 'normal' min/max limits for letter-spacing and word-spacing
        vary based on the line length; also allow them to change based on text-justify.
    <li>Re-add definition for 'white-space' shorthand property
    <li>Change 'text-align's vertical text behavior for the 'left' and 'right'
        values to be relative to LTR text rather than relative to the beginning
        of the line stack.
    <li>Add Tibetan justification definition
    <li>Remove 'size' justification value
    <li>Rename 'inter-character' justification value back to 'distribute'
    <li>Improve justification text
    <li>Add back 'white-space' shorthand
    <li>Add back text-decoration section as an open issue.
    <li>Add 'text-emphasis' property to replace 'font-emphasis' from CSS3 Fonts drafts
    <li>Add back definition for 'text-indent', with more precise (and concise) text
    <li>Add back definition for 'text-shadow', make it inherit and let UA pick
        default color.
    <li>Add 'text-outline' property.
    <li>Add back 'punctuation-trim' with new value 'adjacent' (which
        replaces 'kerning-mode: contextual').
    <li>Add back 'hanging-punctuation'.
    <li>Various minor clarifications.
    <li>
  </ul>

<h2 id="acknowledgements"><span class="secno">12.</span>
  Acknowledgements</h2>

  <p>This specification would not have been possible without the help from:
    Ayman Aldahleh, Bert Bos, Tantek Çelik, Stephen Deach, Martin Dürst,
    Laurie Anna Edlund, Ben Errez, Yaniv Feinberg, Arye Gittelman, Ian
    Hickson, Martin Heijdra, Richard Ishida, Koji Ishii, Masayasu Ishikawa,
    Michael Jochimsen, Eric LeVine, Chris Lilley, Shinyu Murakami, Paul Nelson,
    Chris Pratley, Martin Sawicki, Rahul Sonnad, Frank Tang, Chris Thrasher,
    Etan Wexler, Chris Wilson, Masafumi Yabe and Steve Zilles.</p>

<h2 id="references"><span class="secno">13.</span>
  References</h2>

  <h3 id="normative-ref"><span class="secno">13.1.</span>
    Normative References</h3>

    <dl>
      <dt id="CSS21">[CSS21]</dt>
      <dd>Bert Bos; et al. <cite>Cascading Style Sheets, level 2 revision 1.</cite>
        06 November 2006. W3C Working Draft. (Work in progress.)
        URL: <a href="http://www.w3.org/TR/2006/WD-CSS21-20061106/">http://www.w3.org/TR/2006/WD-CSS21-20061106/</a></dd>
      <dt id="RFC2119">[RFC2119]</dt>
      <dd>S. Bradner. <cite>Key words for use in RFCs to Indicate Requirement
        Levels.</cite> Internet RFC 2119.URL: <a href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a></dd>
      <dt id="UAX11">[UAX11]</dt>
      <dd>Asmus Freytag. <cite>East Asian Width.</cite> 15 September 2006.
          Unicode Standard Annex #11.
          URL: <a href="http://www.unicode.org/unicode/reports/tr11/tr11-15.html">http://www.unicode.org/unicode/reports/tr11/tr11-15.html</a></dd>
      <dt id="UAX14-norm">[UAX14]
      <dd>Asmus Freytag. <cite>Line Breaking Properties.</cite> 29 March 2005.
         Unicode Standard Annex #14.
         URL: <a href="http://www.unicode.org/unicode/reports/tr14/tr14-17.html">http://www.unicode.org/unicode/reports/tr14/tr14-17.html</a>
      <dt id="UAX24">[UAX24]</dt>
      <dd>Mark Davis. <cite>Script Names.</cite> 15 September 2006.
        Unicode Standard Annex #24.
        URL: <a href="http://www.unicode.org/unicode/reports/tr24/tr24-9.html">http://www.unicode.org/unicode/reports/tr24/tr24-9.html</a></dd>
      <dt id="UAX29">[UAX29]</dt>
      <dd>Mark Davis. <cite>Text Boundaries.</cite> 12 October 2006.
        Unicode Standard Annex #29.
        URL: <a href="http://www.unicode.org/unicode/reports/tr29/tr29-11.html">http://www.unicode.org/unicode/reports/tr29/tr29-11.html</a></dd>
    </dl>

  <h3 id="informative-ref"><span class="secno">13.2.</span>
    Informative References</h3>

    <dl>
      <dt id="ZHMARK">[标点符号]</dt>
      <dd>标点符号用法 (Punctuation Mark Usage). 中华人民共和国国家标准. 1995.</dd>
      <dt id="JIS4051">[JIS4051]</dt>
      <dd>JIS X 4051:2004. Formatting rules for Japanese documents.
          (『日本語文書の組版方法』) Japanese Standards Association. 2004.</dd>
      <dt id="UAX14">[UAX14]
      <dd>Asmus Freytag. <cite>Line Breaking Properties.</cite> 29 March 2005.
         Unicode Standard Annex #14.
         URL: <a href="http://www.unicode.org/unicode/reports/tr14/tr14-17.html">http://www.unicode.org/unicode/reports/tr14/tr14-17.html</a>
    </dl>

</body>
</html>
