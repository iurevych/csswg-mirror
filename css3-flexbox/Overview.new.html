<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html>
 <head>
  <title>Flexible Box Layout Module</title>
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel=stylesheet
  type="text/css">
  <!-- TODO: remove before build -->
  <link href="http://dev.w3.org/csswg/default.css" rel=stylesheet>
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel=stylesheet
  type="text/css">
  <link href="../default.css" rel=stylesheet type="text/css">

  <style type="text/css">
	p { margin: .5em 0; }
	dd > p { text-indent: 0; }
	a > b { font-weight: normal; color: #800; }
</style>

 <body>
  <div class=head>
   <h1 id=head-box-flexible>Flexible Box Layout Module</h1>

   <h2 class="no-num no-toc" id=w3c-working>Editor's Draft, 28 January 2011</h2>

   <dl>
    <dt>This version:

    <dd><!-- <a href="http://www.w3.org/TR/2011/WD-css3-flexbox-20110128/">http://www.w3.org/TR/2011/WD-css3-flexbox-20110128/</a></dd> -->
     <a
     href="http://dev.w3.org/csswg/css3-flexbox/">http://dev.w3.org/csswg/css3-flexbox/</a>
     

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css3-flexbox/">http://www.w3.org/TR/css3-flexbox/</a>
     

    <dt>Editors:

    <dd>Tab Atkins Jr. <a
     href="mailto:jackalmage@gmail.com">jackalmage@gmail.com</a>

    <dd>Alex Mogilevsky <a
     href="mailto:alexmog@microsoft.com">alexmog@microsoft.com</a>

    <dd>L. David Baron, Mozilla Corporation, <a
     href="mailto:dbaron@dbaron.org">dbaron@dbaron.org</a>

    <dt>Authors and former editors:

    <dd>Neil Deakin, Mozilla Corporation, <a
     href="mailto:enndeakin@gmail.com">enndeakin@gmail.com</a>

    <dd>Ian Hickson, formerly of Opera Software, <a
     href="mailto:ian@hixie.ch">ian@hixie.ch</a>

    <dd>David Hyatt, Apple, <a
     href="mailto:hyatt@apple.com">hyatt@apple.com</a>
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> &copy; 2011 <a
    href="http://www.w3.org/"><acronym title="World Wide Web
    Consortium">W3C</acronym></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute
    of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym
    title="European Research Consortium for Informatics and
    Mathematics">ERCIM</acronym></a>, <a
    href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright--></div>

  <hr>

  <div>
   <h2 class="no-num no-toc" id=abstract>Abstract</h2>

   <p>The draft describes a CSS box model optimized for interface design. It
    provides an additional layout system alongside the ones already in CSS.
    <a href="#CSS21" rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a> In this new
    box model, the children of a box are laid out either horizontally or
    vertically, and unused space can be assigned to a particular child or
    distributed among the children by assignment of "flex" to the children
    that should expand. Nesting of these boxes (horizontal inside vertical,
    or vertical inside horizontal) can be used to build layouts in two
    dimensions. This model is based on the box model in the XUL
    user-interface language used for the user interface of many Mozilla-based
    applications (such as Firefox).</p>
  </div>

  <div>
   <h2 class="no-num no-toc" id=table>Table of contents</h2>
   <!--begin-toc-->
   <ul class=toc>
    <li><a href="#overview"><span class=secno>1. </span>Overview</a>

    <li><a href="#display-flexbox"><span class=secno>2. </span>New values for
     &lsquo;<code class=property>display</code>&rsquo; property</a>

    <li><a href="#flex-direction"><span class=secno>3. </span>Flexbox
     Direction: the &lsquo;<code class=property>flex-direction</code>&rsquo;
     property</a>

    <li><a href="#flex-order"><span class=secno>4. </span>Display Order: the
     &lsquo;<code class=property>flex-order</code>&rsquo; property</a>

    <li><a href="#flexibility"><span class=secno>5. </span>Flexibility</a>
     <ul class=toc>
      <li><a href="#flex-unit"><span class=secno>5.1. </span>The &lsquo;<code
       class=css>fl</code>&rsquo; unit</a>

      <li><a href="#flex-function"><span class=secno>5.2. </span>The
       &lsquo;<code class=css>flex()</code>&rsquo; function</a>
     </ul>

    <li><a href="#flex-pack"><span class=secno>6. </span>The &lsquo;<code
     class=property>flex-pack</code>&rsquo; property</a>

    <li><a href="#flex-align"><span class=secno>7. </span>The &lsquo;<code
     class=property>flex-align</code>&rsquo; property</a>

    <li><a href="#free-space-algorithm"><span class=secno>8. </span>Free
     Space Calculation and Distribution</a>

    <li><a href="#inlinesAndBlocks"><span class=secno>9. </span>Relationship
     to Inlines and blocks</a>

    <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

    <li class=no-num><a href="#references">References</a>
     <ul class=toc>
      <li class=no-num><a href="#normative">Normative references</a>
     </ul>

    <li class=no-num><a href="#index">Index</a>

    <li class=no-num><a href="#property">Property index</a>
   </ul>
   <!--end-toc--></div>

  <hr>

  <div>
   <h2 id=overview><span class=secno>1. </span>Overview</h2>

   <p>CSS 2.1 defined four layout modes, algorithms which determine the size
    and position of boxes based on their relationships with their sibling and
    ancestor boxes: block layout, designed for laying out documents and
    simple applications, inline layout, designed for laying out text, table
    layout, designed for laying out information in a tabular format, and
    positioned layout, designed for very explicit positioning without much
    regard for other elements in the document. This module introduces a new
    layout mode, flexbox layout, which is designed for laying out more
    complex applications and webpages.</p>

   <p>Flexbox layout is superficially similar to block layout. It lacks many
    of the more complex text or document-formatting properties that can be
    used in block layout, such as &lsquo;<code
    class=property>float</code>&rsquo; and &lsquo;<code
    class=property>columns</code>&rsquo;, but in return it gains more simple
    and powerful tools for aligning its contents in ways that webapps and
    complex web pages often need. The contents of a flexbox can be laid out
    in any direction, can have their order swapped around dynamically, and
    can "flex" their sizes and positions to respond to the available space.</p>

   <p>Similar to other layout modes such as table layout, a flexbox acts like
    a block when placed into other layout modes. Inline flexboxes can also be
    declared, which act like inline-blocks.</p>

   <p>Block-level and atomic inline-level children of the flexbox are
    referred to as <dfn id=flexbox-children>flexbox children</dfn> in this
    specification. Inline children are wrapped in anonymous blocks, and these
    anonymous blocks are also <a href="#flexbox-children"><b>flexbox
    children</b></a>.</p>

   <div class=example>
    <p>For example:</p>

    <pre class=html>
&lt;p style="width: 400px; display: flexbox;">
	&lt;button style="width: 200px;">Child 1&lt;/button>
	&lt;button style="width: 100px;">Child 2&lt;/button>
&lt;/p>
		</pre>

    <p>In this example, the first button is 200 pixels wide and the second
     button is 100 pixels wide. As the flexbox is 400 pixels wide, there is
     extra space left over which is placed after the two buttons but inside
     the flexbox. The placement of this extra space may be modified using the
     various flex properties described in the next sections. Neither the
     height of the buttons nor the height of the flexbox are specified, so
     the height is computed intrinsically from the content. In this case, the
     buttons will be the height needed to display the label and button
     border, and the flexbox will also be this height plus any margins around
     the buttons.</p>
   </div>
  </div>
  <!-- ====================================================================== -->

  <div>
   <h2 id=display-flexbox><span class=secno>2. </span>New values for
    &lsquo;<code class=property>display</code>&rsquo; property</h2>

   <table class=propdef>
    <tbody>
     <tr>
      <th>Name:

      <td>display

     <tr>
      <th>New value:

      <td>flexbox | inline-flexbox
   </table>

   <p class=issue>The proliferation of "inline-*" display values is untenable
    and restrictive. Table cells should be able to use the flexbox layout
    mode for their contents, for example, rather than being forced to use
    block layout. It's expected that this will be fixed by splitting the
    &lsquo;<code class=property>display</code>&rsquo; property into
    subproperties controlling how the element formats its contents
    (&lsquo;<code class=property>display-inside</code>&rsquo;) and how it
    reacts to its surroundings (&lsquo;<code
    class=property>display-outside</code>&rsquo;). Once that occurs, this
    section will instead describe a single new &lsquo;<code
    class=property>display-inside</code>&rsquo; value that triggers flexbox
    layout.</p>

   <p>You can declare that an element is a flexbox, and thus should use
    flexbox layout, by setting the &lsquo;<code
    class=property>display</code>&rsquo; property on the element to the value
    &lsquo;<code class=css>flexbox</code>&rsquo;.</p>

   <p>All children of a flexbox must be block-level or atomic inline-level
    elements. Contiguous runs of non-replaced inline elements are wrapped in
    an anonymous block-level box. Out-of-flow elements (such as absolutely
    positioned elements - floats are also out-of-flow but can't exist as
    flexbox children) leave behind a "placeholder" in their original source
    location which is treated like a non-replaced inline element for the
    purpose of this wrapping. (This can, for example, create an empty flexbox
    child, if all the children are block-level elements and one is absolutely
    positioned.) It is recommended that authors avoid putting in elements
    which are auto-wrapped with anonymous boxes, as the anonymous boxes
    cannot be targetted and controlled with the various flexbox properties
    defined in later sections.</p>

   <p>A flexbox child creates a new BFC. The margins of a flexbox child do
    not collapse with any other margin. Flexboxes "shrinkwrap" their contents
    by default (when their &lsquo;<code class=property>width</code>&rsquo; or
    &lsquo;<code class=property>height</code>&rsquo; properties are
    &lsquo;<code class=css>auto</code>&rsquo;), similar to tables or floats.</p>

   <p>Setting &lsquo;<code class=css>display:flexbox</code>&rsquo; on an
    element forces it to use a new layout algorithm, and so some properties
    that were designed with the assumption of block layout don't make sense
    in a flexbox context. In particular:</p>

   <ul>
    <li>all of the &lsquo;<code class=css>column-*</code>&rsquo; properties
     in the Multicol module compute to their initial values on a flexbox
     (&lsquo;<code class=property>break-before</code>&rsquo;, &lsquo;<code
     class=property>break-inside</code>&rsquo;, and &lsquo;<code
     class=property>break-after</code>&rsquo; are still valid on a flexbox).

    <li>&lsquo;<code class=property>float</code>&rsquo; and &lsquo;<code
     class=property>clear</code>&rsquo; compute to their initial values on a
     flexbox child

    <li class=issue>[Others?]
   </ul>
  </div>
  <!-- ====================================================================== -->

  <div>
   <h2 id=flex-direction><span class=secno>3. </span>Flexbox Direction: the
    &lsquo;<a href="#flex-direction0"><code
    class=property>flex-direction</code></a>&rsquo; property</h2>

   <table class=propdef>
    <tbody>
     <tr>
      <th>Name:

      <td><dfn id=flex-direction0>flex-direction</dfn>

     <tr>
      <th>Values:

      <td>lr | rl | tb | bt | inline | inline-reverse | block | block-reverse
       

     <tr>
      <th>Initial:

      <td>inline

     <tr>
      <th>Applies To:

      <td>flexboxes

     <tr>
      <th>Inherited:

      <td>no

     <tr>
      <th>Computed Value:

      <td>See text

     <tr>
      <th>Media:

      <td>visual
   </table>

   <p>The &lsquo;<code class=property>flexbox-direction</code>&rsquo;
    property specifies how flexbox children are placed on each line of the
    flexbox. A value of &lsquo;<code class=css>lr</code>&rsquo; means that
    the first flexbox child is placed against the left edge of the flexbox,
    with later children placed immediately to the right of the preceding
    flexbox child. A value of &lsquo;<code class=css>rl</code>&rsquo; is the
    same, but with the initial flexbox child placed against the right edge of
    the flexbox and later children placed to the left. Both of these values
    mean that the flexbox is a <dfn id=horizontal-flexbox>horizontal
    flexbox</dfn>. A value of &lsquo;<code class=css>tb</code>&rsquo; means
    that the first flexbox child is placed against the top edge of the
    flexbox, with later children placed immediately below it, while
    &lsquo;<code class=css>bt</code>&rsquo; means the first child is placed
    against the bottom edge of the flexbox, with later children placed
    immediately above it. Both of these values mean that the flexbox is a
    <dfn id=vertical-flexbox>vertical flexbox</dfn>.</p>

   <p>A value of &lsquo;<code class=css>inline</code>&rsquo; computes to one
    of &lsquo;<code class=css>lr</code>&rsquo;, &lsquo;<code
    class=css>rl</code>&rsquo;, &lsquo;<code class=css>tb</code>&rsquo;, or
    &lsquo;<code class=css>bt</code>&rsquo;, depending on the direction and
    block-flow of the flexbox: if the start side of the flexbox is the left
    side, &lsquo;<code class=css>inline</code>&rsquo; must compute to
    &lsquo;<code class=css>lr</code>&rsquo;; similarly, if the start side of
    the flexbox is the right, top, or bottom side, &lsquo;<code
    class=css>inline</code>&rsquo; must compute to &lsquo;<code
    class=css>rl</code>&rsquo;, &lsquo;<code class=css>tb</code>&rsquo;, or
    &lsquo;<code class=css>bt</code>&rsquo; respectively. &lsquo;<code
    class=css>inline-reverse</code>&rsquo;, &lsquo;<code
    class=css>block</code>&rsquo;, and &lsquo;<code
    class=css>block-reverse</code>&rsquo; determine their computed value
    identically to &lsquo;<code class=css>inline</code>&rsquo;, but use the
    location of the end side, before side, and after side of the flexbox,
    respectively.</p>

   <div class=example>
    <p>A vertical flexbox can be used to emulate the functionality of HTML's
     &lsquo;<code class=css>&lt;center></code>&rsquo; element:</p>

    <pre>
&lt;div>
	&lt;span>foo foo foo foo&lt;/span>
	&lt;span>bar bar&lt;br>bar bar&lt;/span>
	&lt;span>foo foo foo foo foo foo foo foo foo foo foo foo&lt;/span>
&lt;/div>
&lt;style>
	div {
		display: flexbox;
		flex-direction: tb;
		width: 200px;
	}
	span {
		margin: 0 auto;
	}
&lt;/style>
		</pre>

    <p><img alt="" src="images/basic-vertical-flexbox.png"></p>
   </div>

   <p>In the rest of this specification, the direction in which new flexbox
    children are laid out will be referred to as the <dfn
    id=layout-direction>layout direction</dfn> (if a precise direction is
    required) or the <dfn id=layout-axis>layout axis</dfn> (if only the axis
    orientiation is required).</p>

   <p>The axis perpendicular to the &lsquo;<a href="#layout-axis"><code
    class=css>layout axis</code></a>&rsquo; will be refered to as the <dfn
    id=transverse-axis>transverse axis</dfn>, with the <dfn
    id=transverse-direction>transverse direction</dfn> being either a line
    extending from the &lsquo;<code class=css>before</code>&rsquo; side of
    the flexbox to the &lsquo;<code class=css>after</code>&rsquo; side, or
    from the &lsquo;<code class=css>start</code>&rsquo; side of the flexbox
    to the &lsquo;<code class=css>end</code>&rsquo; side, whichever would
    produce a direction parallel to the &lsquo;<a
    href="#transverse-axis"><code class=css>transverse
    axis</code></a>&rsquo;.</p>

   <p>Similarly, the <dfn id=layout-size>layout size</dfn> is the width of
    the flexbox child in a horizontal flexbox, or the height in a vertical
    flexbox. The <dfn id=transverse-size>transverse size</dfn> is the height
    of the flexbox child in a horizontal flexbox, or the width in a vertical
    flexbox.</p>
  </div>
  <!-- ====================================================================== -->

  <div>
   <h2 id=flex-order><span class=secno>4. </span>Display Order: the &lsquo;<a
    href="#flex-order0"><code class=property>flex-order</code></a>&rsquo;
    property</h2>

   <p>Flexbox children are, by default, displayed and laid out in the same
    order as they appear in the source document. The &lsquo;<a
    href="#flex-order0"><code class=property>flex-order</code></a>&rsquo;
    property may be used to change this ordering.</p>

   <table class=propdef>
    <tbody>
     <tr>
      <th>Name:

      <td><dfn id=flex-order0>flex-order</dfn>

     <tr>
      <th>Value:

      <td>&lt;integer>

     <tr>
      <th>Initial:

      <td>1

     <tr>
      <th>Applies to:

      <td>flexbox children

     <tr>
      <th>Inherited:

      <td>no

     <tr>
      <th>Computed value:

      <td>specified value

     <tr>
      <th>Media:

      <td>visual
   </table>

   <p class=issue>Maybe name this &lsquo;<code
    class=property>flex-index</code>&rsquo; instead, to be consistent with
    &lsquo;<code class=property>z-index</code>&rsquo;.</p>

   <p>Flexbox children may be assigned to ordinal groups using the &lsquo;<a
    href="#flex-order0"><code class=property>flex-order</code></a>&rsquo;
    property. This property is an integer with an initial value of 1.</p>

   <p>Ordinal groups control the order in which flexbox children appear. A
    flexbox will lay out its children starting from the lowest numbered
    ordinal group and going up. Elements with the same ordinal group are laid
    out in the order they appear in the source document.

   <div class=example>
    <p>This example shows how ordinal groups might be used.</p>

    <pre><code>
	div { display: flexbox; }
	#span1 { flex-order: 2; }
	#span3 { flex-order: 2; }
	#span4 { flex-order: 1; }

	&lt;div>
		&lt;span id="span1">span1&lt;/span>
		&lt;span id="span2">span2&lt;/span>
		&lt;span id="span3">span3&lt;/span>
		&lt;span id="span4">span4&lt;/span>
	&lt;/div></code></pre>

    <p>The first ordinal group, 1, contains span2 and span4. As span2 does
     not specify an ordinal group, it will default to 1. The elements will be
     displayed in document order, so span2 will be displayed before span4.
     The second ordinal group, 2, contains the remaining two spans. The
     resulting display order will be:</p>

    <pre><code>span2 span4 span1 span3</code></pre>
   </div>
  </div>
  <!-- ====================================================================== -->

  <div>
   <h2 id=flexibility><span class=secno>5. </span>Flexibility</h2>

   <p>The defining aspect of Flexbox Layout is the ability to make various
    lengths of the flexbox children flexible. Flexible lengths can be used
    for the &lsquo;<code class=property>width</code>&rsquo;, &lsquo;<code
    class=property>height</code>&rsquo;, &lsquo;<code
    class=property>padding</code>&rsquo;, and &lsquo;<code
    class=property>margin</code>&rsquo; properties. A <dfn
    id=flexible-length>flexible length</dfn> can grow if the flexbox has
    extra space available, or shrink if the flexbox would otherwise overflow.</p>

   <p>When figuring out how large a flexible length should be, CSS starts
    with the length's <dfn id=preferred-size>preferred size</dfn>. For
    lengths specified using the &lsquo;<code class=css>fl</code>&rsquo; unit,
    the preferred size is &lsquo;<code class=css>0</code>&rsquo; - it starts
    from nothing, and only gets some space if there is any left over to
    distribute. For lengths specified with the &lsquo;<code
    class=css>flex()</code>&rsquo; function, the preferred size is the value
    of the first argument.</p>

   <p>CSS then sums all the lengths that are sharing space, whether they are
    flexible or inflexible, and subtracts that value from the total available
    space in that direction. If there's space left over, then any lengths
    with <dfn id=positive-flexibility>positive flexibility</dfn> split the
    space between each other in proportion to their flexibility. If the sum
    is larger than the available space, so that the flexbox would be
    overflowing, then any lengths with <dfn id=negative-flexibility>negative
    flexibility</dfn> shrink in proportion to their flexibility, so that the
    contents of the flexbox exactly fit without overflowing.</p>

   <p>The &lsquo;<a href="#flex-pack0"><code
    class=property>flex-pack</code></a>&rsquo; and &lsquo;<a
    href="#flex-align0"><code class=property>flex-align</code></a>&rsquo;
    properties offer more complex control over free-space distribution. The
    precise details of how free space is determined and assigned to flexible
    lengths is detailed in a later chapter.</p>

   <p>For <a href="#flexbox-children"><b>flexbox children</b></a>, the
    &lsquo;<code class=property>width</code>&rsquo;, &lsquo;<code
    class=property>height</code>&rsquo;, &lsquo;<code
    class=property>padding</code>&rsquo;, and &lsquo;<code
    class=property>margin</code>&rsquo; properties additionally accept the
    <dfn id=ltflex>&lt;flex></dfn> data type. Using &lsquo;<a
    href="#ltflex"><code class=css>&lt;flex></code></a>&rsquo; in any other
    context is a syntax error. The &lsquo;<a href="#ltflex"><code
    class=css>&lt;flex></code></a>&rsquo; data type can be expressed in two
    forms: the &lsquo;<code class=css>fl</code>&rsquo; unit, and the
    &lsquo;<code class=css>flex()</code>&rsquo; function.</p>

   <div>
    <h3 id=flex-unit><span class=secno>5.1. </span>The &lsquo;<code
     class=css>fl</code>&rsquo; unit</h3>

    <p>One way to indicate that a length is flexible is by setting the
     property's value using the <dfn id=flex-unit0>flex unit</dfn>, denoted
     as a &lsquo;<code class=css>&lt;number></code>&rsquo; followed by
     &lsquo;<code class=css>fl</code>&rsquo;. The &lsquo;<code
     class=css>fl</code>&rsquo; unit defines a <a
     href="#flexible-length"><b>flexible length</b></a> with a <a
     href="#preferred-size"><b>preferred size</b></a> of &lsquo;<code
     class=css>0</code>&rsquo;, a minimum size of &lsquo;<code
     class=css>0</code>&rsquo;, no maximum size, and a flexibility equal to
     its value.</p>
   </div>

   <div>
    <h3 id=flex-function><span class=secno>5.2. </span>The &lsquo;<code
     class=css>flex()</code>&rsquo; function</h3>

    <p>For more complex flexible lengths, the &lsquo;<code
     class=css>flex()</code>&rsquo; function can be used to specify various
     attributes of the length; most importantly, the &lsquo;<code
     class=css>flex()</code>&rsquo; function can specify a non-zero length
     for the <a href="#preferred-size"><b>preferred size</b></a>. The syntax
     of the &lsquo;<code class=css>flex()</code>&rsquo; function is:</p>

    <pre
     class=prod>flex( &lt;preferred-size>, &lt;flex-grow> &lt;max-size>? [, &lt;flex-shrink> &lt;min-size>?]? )</pre>

    <p>The first argument given to the function sets the <a
     href="#preferred-size"><b>preferred size</b></a> of the <a
     href="#flexible-length"><b>flexible length</b></a>. It must be a value
     that would be valid for the property the &lsquo;<code
     class=css>flex()</code>&rsquo; function is being used on, and resolves
     to the same length that it would if used in that property (with the
     exception of &lsquo;<code class=css>auto</code>&rsquo;, which is handled
     specially in flexbox layout). It must not be a &lsquo;<a
     href="#ltflex"><code class=css>&lt;flex></code></a>&rsquo; value itself.</p>

    <p>The second argument sets the <a
     href="#positive-flexibility"><b>positive flexibility</b></a> of the
     length, and optionally the maximum size of the length. The
     &lt;flex-grow> must be specified in <a href="#flex-unit0"><b>flex
     unit</b></a>s, while the &lt;max-size>, if provided, must be a value
     that would be valid if used in the property that the &lsquo;<code
     class=css>flex()</code>&rsquo; function is being used on. If the
     &lt;max-size> is not provided, the <a
     href="#flexible-length"><b>flexible length</b></a> has no maximum size.</p>

    <p>The third argument is optional. If provided, it sets the <a
     href="#negative-flexibility"><b>negative flexibility</b></a> of the <a
     href="#flexible-length"><b>flexible length</b></a>. Just like the
     previous argument, the &lt;flex-shrink> must be specified in <a
     href="#flex-unit0"><b>flex unit</b></a>s, while the optional
     &lt;min-size> must be a value that would be valid if used in the
     property that the &lsquo;<code class=css>flex()</code>&rsquo; function
     is being used on. If the &lt;min-size> is not provided, the <a
     href="#flexible-length"><b>flexible length</b></a> has a minimum size of
     &lsquo;<code class=css>0</code>&rsquo;. If this argument is not provided
     at all, the <a href="#flexible-length"><b>flexible length</b></a> has no
     negative flexibility and a minimum size of &lsquo;<code
     class=css>0</code>&rsquo;.</p>
   </div>

   <div class=figure>
    <p class=caption><span class=issue>TODO: Diagram showing the relevant
     flexible lengths in both the layout and transverse axis.</span></p>
   </div>

   <div class=example>
    <p class=issue>TODO: Yank some examples from my original blog post and/or
     the HTML5ROCKS article.</p>
   </div>
  </div>
  <!-- ====================================================================== -->

  <div>
   <h2 id=flex-pack><span class=secno>6. </span>The &lsquo;<a
    href="#flex-pack0"><code class=property>flex-pack</code></a>&rsquo;
    property</h2>

   <table class=propdef>
    <tbody>
     <tr>
      <th>Name:

      <td><dfn id=flex-pack0>flex-pack</dfn>

     <tr>
      <th>Value:

      <td>start | end | center | justify

     <tr>
      <th>Initial:

      <td>start

     <tr>
      <th>Applies to:

      <td>flexboxes

     <tr>
      <th>Inherited:

      <td>no

     <tr>
      <th>Computed Value:

      <td>specified value

     <tr>
      <th>Media:

      <td>visual
   </table>

   <p>Between and around the margins of <a
    href="#flexbox-children"><b>flexbox children</b></a> there are additional
    flexible lengths, called <dfn id=packing-space>packing space</dfn>.
    Packing space can absorb leftover free space in a flexbox if there aren't
    any <a href="#flexible-length"><b>flexible length</b></a>s otherwise, or
    if all the <a href="#flexible-length"><b>flexible length</b></a>s have
    reached their maximum size. The &lsquo;<a href="#flex-pack0"><code
    class=property>flex-pack</code></a>&rsquo; property defines the
    flexibility of these packing spaces:

   <dl>
    <dt>start

    <dd>Flexbox children must be packed toward the start of the flexbox. The
     last packing space (between the margin of the last flexbox child and the
     edge of the flexbox) must absorb all leftover free space; all other
     packing spaces must have a length of &lsquo;<code
     class=css>0</code>&rsquo;.

    <dt>end

    <dd>Flexbox children must be packed toward the end of the flexbox. The
     first packing space (between the edge of the flexbox and the margin of
     the first flexbox child ) must absorb all leftover free space; all other
     packing spaces must have a length of &lsquo;<code
     class=css>0</code>&rsquo;.

    <dt>center

    <dd>Flexbox children must be packed toward the center of the flexbox. The
     first and last packing spaces must equally split all leftover free
     space; all other packing spaces must have a length of &lsquo;<code
     class=css>0</code>&rsquo;.

    <dt>justify

    <dd>Flexbox children must be evenly distributed through the flexbox. The
     first and last packing spaces must have a length of &lsquo;<code
     class=css>0</code>&rsquo;; all other packing spaces must equally split
     all leftover free space.
   </dl>

   <div class=figure>
    <p class=caption><span class=issue>TODO: Provide a diagram showing
     packing spaces.</span></p>
   </div>

   <div class=example>
    <p class=issue>TODO: Examples showing the four values.</p>
   </div>
  </div>
  <!-- ====================================================================== -->
  <!-- Aborted new introduction to flexboxes
<p>A flexbox has two axes, which are treated differently by the space distribute algorithm:  the <b>layout axis</b>, which is the axis along which the flexbox grows as you add more children, and the <b>transverse axis</b>, which is the perpendicular axis.</p>

<img alt="In a horizontal flexbox, the layout axis is horizontal, while the transverse axis is vertical.">

<p>The layout axis is more interesting, as there are more places where things can potentially flex.  As such, there are more controls for specifying how to distribute free space in this axis: the &lsquo;<code class=property>width</code>&rsquo; or &lsquo;<code class=property>height</code>&rsquo; property starts things off, modified by the &lsquo;<code class=property>flex</code>&rsquo; property; the &lsquo;<code class=property>margin</code>&rsquo; property gives individual control over spacing between flexbox children; and the &lsquo;<code class=property>flex-pack</code>&rsquo; property gives a more flexbox-global level of control over the between-children spacing.</p>

<p>In general terms, determining where to allocate free space in the layout axis starts by determining just how much free space there is.  All the non-flexible lengths, and the preferred sizes of all the flexible widths or heights, are subtracted from the total width or height of the flexbox.  If a positive length is left over, this is split up among all the flexible lengths according to their flexibility.  Flexible margins automatically have a flexibility of 1, while widths or heights have their flexibility specified by the &lsquo;<code class=property>flex-grow</code>&rsquo; property.</p>

<div class=example>
	<p>Three boxes, all with a preferred size of 0, will end up with sizes exactly proportional to their flex-grow values.</p>
	<img alt="">
</div>
<div class=example>
	<p>If the three boxes have different preferred sizes, then they'll split the free space proportionately, but their final sizes won't be exactly proportional.</p>
	<img alt="">
</div>
<div class=example>
	<p>Margins can also participate in flex calculations.  They have a preferred size of 0, and a flexibility of 1.</p>
	<img alt="">
</div>

<p>If none of the lengths are flexible, or if all the flexible widths or height have reached their maximum size (if &lsquo;<code class=property>max-width</code>&rsquo; or &lsquo;<code class=property>max-height</code>&rsquo; properties are in effect), then any leftover space is distributed according to the &lsquo;<code class=property>flex-pack</code>&rsquo; property between the margins of the flexbox children.</p>

<div class=example>
	<p>If the flexbox is small enough, then the flexible child can absorb all the space...</p>
	<img>
	<p>...but if it gets large enough, there'll be extra space left over for &lsquo;<code class=property>flex-pack</code>&rsquo; to distribute.</p>
	<img>
</div>

<p>If the original calculation of how much free space was left gave a negative length (that is, if the preferred sizes of all the flexbox children sum to a larger length than the width or height of the flexbox), then flexible margins get set to 0, &lsquo;<code class=property>flex-pack</code>&rsquo; has no effect, and flexbox children with a non-zero &lsquo;<code class=property>flex-shrink</code>&rsquo; value split the responsibility for shrinking between themselves proportionally.  Just like when they grow, their size starts from the preferred size, then combines that with the proportional share of (negative) space.</p>

<div class=example>
	<p>When the children are too wide, the shrinkable elements reduce their size to fit...</p>
	<img>
	<p>...but if they all reach their minimum size, they just overflow.</p>
</div>

[write the transverse axis section]
-->
  <!-- ====================================================================== -->

  <div>
   <h2 id=flex-align><span class=secno>7. </span>The &lsquo;<a
    href="#flex-align0"><code class=property>flex-align</code></a>&rsquo;
    property</h2>

   <table class=propdef>
    <tbody>
     <tr>
      <th>Name:

      <td><dfn id=flex-align0>flex-align</dfn>

     <tr>
      <th>Value:

      <td>auto | baseline

     <tr>
      <th>Initial:

      <td>auto

     <tr>
      <th>Applies to:

      <td>flexboxes

     <tr>
      <th>Inherited:

      <td>no

     <tr>
      <th>Computed Value:

      <td>specified value

     <tr>
      <th>Media:

      <td>visual
   </table>

   <p>By default, laying out flexbox children in the <a
    href="#transverse-axis"><b>transverse axis</b></a> is a simple matter of
    determining free space and then splitting it between any <a
    href="#flexible-length"><b>flexible length</b></a>s in that axis. This is
    not always sufficient, however; in particular, it is often useful to
    align flexbox children by their baseline. The &lsquo;<a
    href="#flex-align0"><code class=property>flex-align</code></a>&rsquo;
    property changes the way free space is allocated in the <a
    href="#transverse-axis"><b>transverse axis</b></a>.</p>

   <dl>
    <dt>auto

    <dd>Allocate free space in the <a href="#transverse-axis"><b>transverse
     axis</b></a> as normal, by distributing it proportionally between <a
     href="#flexible-length"><b>flexible length</b></a>s in that axis.

    <dt>baseline

    <dd>
     <p>Align all flexbox children so that their baselines line up, then
      distribute free space above and below the content.</p>

     <p>This only has an effect on flexbox children with a horizontal
      baseline in a horizontal flexbox, or flexbox children with a vertical
      baseline in a vertical flexbox. Otherwise, alignment for that flexbox
      child proceeds as if &lsquo;<code
      class=css>flex-align:auto</code>&rsquo; had been specified.</p>
   </dl>

   <p>The precise effects that &lsquo;<a href="#flex-align0"><code
    class=property>flex-align</code></a>&rsquo; has on alignment and free
    space distribution are detailed in a later chapter.</p>
  </div>
  <!-- ====================================================================== -->

  <div>
   <h2 id=free-space-algorithm><span class=secno>8. </span>Free Space
    Calculation and Distribution</h2>

   <p class=issue>TODO: to be completed. I've done it <a
    href="http://www.xanthir.com/blog/b45o0">once before</a>, I just need to
    make the necessary modifications to accomodate the differences here, once
    we've decided on what changes to make.</p>
  </div>
  <!-- ====================================================================== -->

  <div>
   <h2 id=inlinesAndBlocks><span class=secno>9. </span>Relationship to
    Inlines and blocks</h2>

   <div class=issue>
    <p>This section seems necessary, but not the precise way it's written. I
     need to identify precisely what data needs to be exposed both by the
     containing layout model (for the flexbox to use) and by the flexbox (for
     the containing layout model to use), and then write that up. Then the
     other layout models we produce can re-use the same template.</p>

    <p>For now, I'm commenting out the text of the section.</p>
   </div>
   <!--
  <p>
   A box placed in a block is considered a block level element and will be positioned
   and sized according to the rules for CSS 2.1 (section 10.3 for widths). Specifically,
   the following equation applies for calculating the width:
  </p>
  <blockquote>
  <p>&lsquo;<code class=property>margin-left</code>&rsquo; + &lsquo;<code class=property>border-left-width</code>&rsquo; + &lsquo;<code class=property>padding-left</code>&rsquo; + &lsquo;<code class=property>width</code>&rsquo; + &lsquo;<code class=property>padding-right</code>&rsquo; + &lsquo;<code class=property>border-right-width</code>&rsquo; + &lsquo;<code class=property>margin-right</code>&rsquo; + scrollbar width (if any) = width of containing block
  </p>
  </blockquote>
  <p>All children of &lsquo;<code class=property>box</code>&rsquo; elements are block-level. If inline-level elements are nested
     inside boxes, they get wrapped in an anonymous block which then takes part in the
     box layout.

  </p><p>
     If the width of a child of a flexible box is computed as &lsquo;<code class=property>auto</code>&rsquo;, then the used value
     is the shrink-to-fit width. This calculation is done similarly to how the width of
     a floating element is determined. Otherwise if the width has a computed value,
     then that value is used as the width.
  </p><p>

     In a horizontally oriented box, the flexibility is then applied which may increase
     or decrease the used width. In a vertically oriented box, the position and size
     of the child may be adjusted by the value of the container's
     <span class="property">&lsquo;<code class=property>box-align</code>&rsquo;</span> property.
  </p><p>

     The <span class="property">&lsquo;<code class=property>min-width</code>&rsquo;</span>, <span class="property">&lsquo;<code class=property>min-height</code>&rsquo;</span>,
     <span class="property">&lsquo;<code class=property>max-width</code>&rsquo;</span>, and <span class="property">&lsquo;<code class=property>max-height</code>&rsquo;</span>
     CSS properties act the same on boxes as on blocks.
  </p><p>

     The height of a child of a flexible box is determined in the same manner as specified
     in the CSS specification. The used height may further be adjusted by the container's
     <span class="property">&lsquo;<code class=property>box-align</code>&rsquo;</span> property in a horizontally
     oriented box, or the flexibility in a vertically oriented box.
  </p><p>

     Note that it is possible for a horizontally oriented box that the height of a
     flexible child containing an inline descendant will change when the flexibility is
     applied. Similarly, in a vertically oriented box, the height of a child may change
     based on the <span class="property">&lsquo;<code class=property>box-align</code>&rsquo;</span> property of the
     box.
  </p>
	-->
   </div>

  <hr title="Separator from footer">

  <h2 class=no-num id=acknowledgments><a
   name=acknowledgments>Acknowledgments</a></h2>

  <p>[This section will contain further acknowledgments.]

  <p>Thanks for feedback from James Elmore and Shinichiro Hamaji.

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative>Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=CSS21>[CSS21]

   <dd>Bert Bos; et al. <a
    href="http://www.w3.org/TR/2009/CR-CSS2-20090908"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS 2.1) Specification.</cite></a> 8 September
    2009. W3C Candidate Recommendation. (Work in progress.) URL: <a
    href="http://www.w3.org/TR/2009/CR-CSS2-20090908">http://www.w3.org/TR/2009/CR-CSS2-20090908</a>
    </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>&lt;flex>, <a href="#ltflex" title="&lt;flex>"><strong>5.</strong></a>
    

   <li>flex-align, <a href="#flex-align0"
    title=flex-align><strong>7.</strong></a>

   <li>flexbox children, <a href="#flexbox-children" title="flexbox
    children"><strong>1.</strong></a>

   <li>flex-direction, <a href="#flex-direction0"
    title=flex-direction><strong>3.</strong></a>

   <li>flexible length, <a href="#flexible-length" title="flexible
    length"><strong>5.</strong></a>

   <li>flex-order, <a href="#flex-order0"
    title=flex-order><strong>4.</strong></a>

   <li>flex-pack, <a href="#flex-pack0"
    title=flex-pack><strong>6.</strong></a>

   <li>flex unit, <a href="#flex-unit0" title="flex
    unit"><strong>5.1.</strong></a>

   <li>horizontal flexbox, <a href="#horizontal-flexbox" title="horizontal
    flexbox"><strong>3.</strong></a>

   <li>layout axis, <a href="#layout-axis" title="layout
    axis"><strong>3.</strong></a>

   <li>layout direction, <a href="#layout-direction" title="layout
    direction"><strong>3.</strong></a>

   <li>layout size, <a href="#layout-size" title="layout
    size"><strong>3.</strong></a>

   <li>negative flexibility, <a href="#negative-flexibility" title="negative
    flexibility"><strong>5.</strong></a>

   <li>packing space, <a href="#packing-space" title="packing
    space"><strong>6.</strong></a>

   <li>positive flexibility, <a href="#positive-flexibility" title="positive
    flexibility"><strong>5.</strong></a>

   <li>preferred size, <a href="#preferred-size" title="preferred
    size"><strong>5.</strong></a>

   <li>transverse axis, <a href="#transverse-axis" title="transverse
    axis"><strong>3.</strong></a>

   <li>transverse direction, <a href="#transverse-direction"
    title="transverse direction"><strong>3.</strong></a>

   <li>transverse size, <a href="#transverse-size" title="transverse
    size"><strong>3.</strong></a>

   <li>vertical flexbox, <a href="#vertical-flexbox" title="vertical
    flexbox"><strong>3.</strong></a>
  </ul>
  <!--end-index-->

  <h2 class=no-num id=property>Property index</h2>
  <!--begin-properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies&nbsp;to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
    <tr valign=baseline>
     <td><span class=property>display</span>

     <td>flexbox | inline-flexbox

    <tr valign=baseline>
     <td><a class=property href="#flex-align0">flex-align</a>

     <td>auto | baseline

     <td>auto

     <td>flexboxes

     <td>no

     <td>specified value

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#flex-direction0">flex-direction</a>

     <td>lr | rl | tb | bt | inline | inline-reverse | block | block-reverse

     <td>inline

     <td>flexboxes

     <td>no

     <td>See text

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#flex-order0">flex-order</a>

     <td>&lt;integer>

     <td>1

     <td>flexbox children

     <td>no

     <td>specified value

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#flex-pack0">flex-pack</a>

     <td>start | end | center | justify

     <td>start

     <td>flexboxes

     <td>no

     <td>specified value

     <td>visual
  </table>
  <!--end-properties-->
  <!-- Keep this comment at the end of the file
    Local variables:
    mode: sgml
    sgml-declaration:"~/SGML/HTML4.decl"
    sgml-default-doctype-name:"html"
    sgml-minimize-attributes:t
    sgml-nofill-elements:("pre" "style" "br")
    sgml-live-element-indicator:t
    End:
    -->
