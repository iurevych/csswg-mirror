<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>CSS Image Values Module Level 3</title>
  <link rel="stylesheet" type="text/css" href="../default.css">
  <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-ED">
</head>

<body>

<div class="head">
<!--logo-->

<h1>CSS Image Values Module Level 3</h1>

<h2 class="no-num no-toc">[LONGSTATUS] [DATE]</h2>
<dl>
  <dt>This version:</dt>
    <!-- <dd><a href="http://www.w3.org/TR/[YEAR]/CR-css3-images-[CDATE]/">http://www.w3.org/TR/[YEAR]/CR-css3-images-[CDATE]/</a></dd> -->
    <dd><a href="http://dev.w3.org/csswg/css3-images/">http://dev.w3.org/csswg/css3-images/</a>
  <!-- <dt>Latest version:</dt>
    <dd><a href="http://www.w3.org/TR/css3-images/">http://www.w3.org/TR/css3-images/</a></dd>
  <dt>Previous version:</dt>
    <dd><a href="http://www.w3.org/TR/2008/CR-css3-namespace-20080523/">http://www.w3.org/TR/2008/CR-css3-namespace-20080523/</a></dd> -->
  <dt>Editor:</dt>
    <dd><a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a></dd>
	<dd><a href="http://www.xanthir.com/contact">Tab Atkins Jr.</a></dd>
</dl>
<!--begin-copyright-->
<p>[Here will be included the file "../copyright.inc"]</p>
<!--end-copyright-->

<hr title="Separator for header">
</div>

<h2 class="no-num no-toc" id="abstract">Abstract</h2>

  <p>This CSS Image Values module defines the syntax for &lt;image&gt; values
    in CSS. &lt;image&gt; values can be a single URI to an image, a list of
    URIs denoting a series of fallbacks, sprites (image slices), or gradients.</p>

<h2 class="no-num no-toc" id="status">Status of this document</h2>
<!--status-->

<h2 class="no-num no-toc" id="contents">Table of contents</h2>
<!--toc-->

<div>
  <h2 id="intro">Introduction</h2>

  <p><em>This section is non-normative.</em></p>

  <p>In CSS Levels 1 and 2, image values, such as those used in the
    'background-image' property, could only be given by a single URI
    value. This module introduces additional notations that allow a
    2D image to be given as a list of URIs denoting fallbacks, as a
    slice of a larger image (sprite), and as a gradient.</p>
</div>

<div>
  <h2 id="conformance">Conformance</h2>

  <p>A document or implementation cannot conform to CSS Image Values Level 3
    alone, but can claim conformance to CSS Image Values Level 3 if it satisfies
    the conformance requirements in this specification when implementing CSS or
    another host language that normatively references this specification.</p>

  <p>Conformance to CSS Namespaces is defined for two classes:
  <dl>
    <dt><dfn>style sheet</dfn></dt>
      <dd>A <a href="http://www.w3.org/TR/CSS21/conform.html#style-sheet">CSS style
        sheet</a> (or a complete unit of another host language that normatively
        references CSS Namespaces).
    <dt><dfn>interpreter</dfn></dt>
      <dd>Someone or something that interprets the semantics of a style sheet.
        (CSS <a href="http://www.w3.org/TR/CSS21/conform.html#user-agent">user
        agents</a> fall under this category.)</dd>
  </dl>

  <p>The conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words "MUST",
    "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
    "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. All of the text of this specification is
    normative except sections explicitly marked as non-normative, examples,
    and notes. [[!RFC2119]]</p>

  <p>Examples in this specification are introduced with the words "for example"
    or are set apart from the normative text with <code>class="example"</code>,
    like this:

  <div class="example">
    <p>This is an example of an informative example.</p>
  </div>

  <p>Informative notes begin with the word "Note" and are set apart from the
    normative text with <code>class="note"</code>, like this:

  <p class="note">Note, this is an informative note.</p>
</div>

<div>
  <h2 id="image">The &lt;image&gt; value type</h2>

  <p>The &lt;image&gt; value type denotes a 2D image. It is defined as

  <pre class="prod"><dfn>&lt;image&gt;</dfn> = &lt;url&gt; | &lt;sprite&gt; | &lt;image-list&gt; | &lt;linear-gradient&gt; | &lt;radial-gradient&gt;</pre>

  <p>Image values can be used in many CSS properties, including the
    'background-image', 'list-style-image', 'cursor' properties [[!CSS21]].
</div>

<div>
  <h2 id="url">Image References and Image Slices: the ''url()'' notation</h2>

  <p>The simplest way to indicate an image is to reference an image file
  by URI. This is done with the
  <a href="http://www.w3.org/TR/CSS21/syndata.html#uri">''url()'' notation</a>,
  defined in [[!CSS21]].

  <div class="example">
    <p>In the example below, a background image is specified with ''url()''
    syntax:</p>
    <pre>background-image: url(wavy.png);</pre>
  </div>

  <p>A portion of an image may be referenced (clipped out and used as a
  standalone image) by use of fragment identifiers.
  <span class='issue'>Need a spec to reference here. Expecting to get one from
    <a href="http://www.w3.org/2008/WebVideo/Fragments/">Media Fragments WG</a>.</span>

  <div class="example">
    <p>For example,</p>
    <pre>background-image: url('logos.png#xywh=10,30,60,20')</pre>
    <p>uses the 60 pixel by 20 pixel rectangle of <code>logos.png</code> beginning
    at the point 10 pixels in from the left, 30 pixels down from the top.

    <p class="note">Note that quotation marks are required here, because
    unquoted commas are not allowed in ''url()'' syntax.</p>
  </div>
</div>

<div>
  <h2 id="image-notation">Image Fallbacks: the ''image()'' notation</h2>

  <p>The ''image()'' notation allows an author to specify multiple images,
  each one a fallback for the previous. The UA must use only the first image
  that it can load and display. The syntax for ''image()'' is defined as

  <pre class="prod"><dfn>&lt;image-list&gt;</dfn> = <!--
     -->image( [ &lt;image-decl&gt; , ]* [ &lt;image-decl&gt; ] [ or &lt;color&gt; ]? )</pre>

  <p>where &lt;image-decl&gt; is given by

  <pre class="prod"><dfn>&lt;image-decl&gt;</dfn> = <!--
    -->[ &lt;string&gt; | &lt;url-token&gt; ] [ snap? &amp;&amp; &lt;resolution&gt; ]?</pre>

  <p>&lt;url-token&gt; is given as <code>[!#$%&amp;*-~]|{nonascii}|{escape}</code>
  (i.e. the contents of ''url()'') using the productions in the
  <a href="http://www.w3.org/TR/CSS21/syndata.html#tokenization">CSS2.1 tokenization</a>.
  <strong>The &lt;url-token&gt; must not contain unescaped brackets, commas,
  white space characters, single quotes (&#39;) or double quotes (&quot;);
  if it does the ''image()'' containing it is invalid.</strong>

  <p>Each string or url-token represents the URI of an image. If a resolution
  is given, then the image must be rendered at the specified resolution. If the
  ''snap'' keyword is also specified, and the image is a raster image, then the
  image must be rendered at the resolution closest to the specified resolution
  that would result in no pixel rounding. <span class="issue">I don't think
  "no pixel rounding" is the right terminology here... basically we want to
  avoid blurry images.</span></p>

  <p>The optional color at the end of the list is the <dfn>fallback color</dfn>.
  It is used if, and only if, none of the images can be loaded and displayed
  (e.g. because they are in unsupported formats, or cannot be found, or are
  corrupted in some way, or because image loading is disabled in the UA). It
  is treated as a single-color image with no intrinsic dimensions.

  <div class="example">
    <p>For example, the rule below would tell the UA to load ''wavy.svg'' if
      it can; failing that to load ''wavy.png'' and display it at 150dpi;
      failing that to display ''wavy.gif''; and finally, if none of the images
      can be loaded and displayed, to use the color ''blue'' to create a
      dimensionless background image.
      <pre>background-image: image(wavy.svg, 'wavy.png' 150dpi, "wavy.gif"  or blue);</pre>
    <p>The 'background-image' property specifies that dimensionless images
       must stretch to cover the entire background positioning area
       [[CSS3BG]], so if none of the specified images can be displayed
       the background will be painted blue. As with any image, this fallback
       will be painted over the 'background-color' (if any).
  </div>

  <p>If the URL for the image ends in a file extension (a period followed by
  letters) of four ascii letters ([a-zA-Z]) or less, then the UA <em>may</em>
  skip trying to load images whose file extension matches an image format it
  knows it does not support. For example, a UA that knows it supports JPEG and
  GIF, but expects to encounter many PNG and SVG images may choose to skip over
  images with filenames ending in '.png' or '.svg' without loading them to
  check their MIME type. However it must not skip over images with filenames
  ending in extensions it doesn't recognize.
</div>

<div>
  <h2>Image Sprites</h2>

  <p>The image sprites syntax is different from image slices noted above.
    Image slice syntax allows you to specify the coordinates of a region
    in the image and use that as a standalone image, but all the coordinates
    must be specified inline. This is great for one-off cutouts, but becomes
    unnecessarily verbose when the slices fit into a grid structure. The goal
    of this section is to define a syntax that:
  <ul>
    <li>Makes it easy to specify an image slice and swap it out in later
      subclass or :hover rules.
    <li>Makes it easy to maintain a sprite image, so that adding or shifting
      sections of the image don't require crawling through and modifying the
      entire style sheet.
    <li>Has straightforward handling of strict grids, but can also handle
      more irregular sprite organization.
    <li>(Any other use cases/requirements?)
  </ul>

  <div class="issue">
    <p>As yet unwritten. Discussions/proposals include:</p>
    <ul>
      <li><a href="http://lists.w3.org/Archives/Public/www-style/2009May/0157.html">Jorrit's @sprite proposal</a>
      <li><a href="http://www.css3.info/summary-of-the-two-current-css-constants-proposals/#comment-212898">Adrian's image-vars proposal</a>
      <li><a href="http://lists.w3.org/Archives/Public/www-style/2009Jan/0185.html">Discussion from Jan 2008</a> and <a href="http://lists.w3.org/Archives/Public/www-style/2009Jan/0284.html">Jorrit's response</a>
    </ul>
  </div>
</div>

<div>
	<h2>Gradients</h1>

	<p>A gradient is a browser-generated image specified entirely in CSS, which consists of smooth fades between several colors.  There are two basic kinds of gradients currently defined, linear and radial.  These are specified by the <code>linear-gradient()</code> and <code>radial-gradient()</code> functions, and can be used any place an image can currently be used.</p>
	<p>In many places this specification references a viewport, such as "the viewport's top-left corner" or "the viewport's right side".  In all of these circumstances, the viewport refers to the rectangle that would be filled by an SVG image without intrinsic dimensions used in the same context.  (See the CSS 2.1 spec for clarification on this.)  Though gradients are theoretically infinite in size, and a gradient function can validly refer to locations outside of the viewport, after constructing the gradient the image is clipped to the size of the viewport.  As well, any properties that would change the size or position of an image (such as background-size or background-position) change the size or position of the viewport, and scale/translate/etc the gradient correspondingly.</p>
	<div class=example>
		<p>As with the other &lt;image&gt; types defined in this specification, gradients can be used in any property that accepts images.  For example:</p>
		<ul>
			<li><code>background: linear-gradient(white, gray);</code></li>
			<li><code>list-style-image: radial-gradient(circle, #006, #00a 90%, #0000af 100%, white 100%)</code></li>
		</ul>
	</div>

	<h3>Linear Gradients</h3>

	<p>A linear gradient is created by specifying a gradient-line and then several colors placed along that line.  The image is constructed by creating an infinite canvas and painting it with lines perdendicular to the gradient-line, with the color of the painted line being the color of the gradient-line where the two intersect.</p>
	<h4 class=no-toc><code>linear-gradient()</code> syntax</h4>
	<pre class=prod><code>linear-gradient([&lt;bg-position&gt; || &lt;angle&gt;,]? &lt;color-stop&gt;, &lt;color-stop&gt;[, &lt;color-stop&gt;]*);</code></pre>
	<p>The first argument to the function specifies the <strong>gradient-line</strong>, which gives the gradient a direction.  The gradient typically starts at the starting-point and ends at the ending-point, but this is not a firm requirement.  The starting-point merely defines where 0%, 0px, etc are located when used in the <code>&lt;color-stop&gt;</code> construction, and the ending-point defines where 100% is.  Color-stops can have values below 0 or above 100%, and they refer to positions on the gradient-line before the starting-point or after the ending-point as expected.</p>
	<p><code>&lt;bg-position&gt;</code> is taken from the Backgrounds and Borders Module, and has the same definition.  <code>&lt;angle&gt;</code> is from the Values Module, and has the same definition.</p>
	<p>If the <code>&lt;angle&gt;</code> is omitted in the first argument, the <code>&lt;bg-position&gt;</code> specifies the starting-point of the gradient-line.  The ending-point is obtained by rotating the starting-point 180 degrees around the center of the viewport.  For example, specifying "right" would place the starting-point in the center of the right edge of the viewport (as described by Backgrounds and Borders) and the ending-point in the center of the left edge, producing a horizontal gradient that went from right to left.  Specifying "top left" would place the starting-point in the top-left corner of the viewport, and the ending-point in the bottom-right corner of the viewport, and would produce a diagonal gradient.  Specifying "left 10px" would place the starting-point at the left edge, 10px from the top and the ending-point on the right edge, 10px from the bottom - if you would like a horizontal gradient that start 10px in from the left edge, specify "10px center" or "left 10px center".  Refer to the Backgrounds and Borders Module for more examples.</p>
	<p>If the <code>&lt;bg-position&gt;</code> is omitted in the first argument, the starting-point is in one of the viewport's corners, based on the <code>&lt;angle&gt;</code>.  If the angle is between [0deg,90deg), the starting point is the bottom-left corner.  If the angle is between [90deg,180deg), the starting point is the bottom-right corner.  If the angle is between [180deg,270deg), the starting point is the top-right corner.  If the angle is between [270deg,360deg), the starting point is the top-left corner.  The gradient-line extends from this corner in the direction specified by <code>&lt;angle&gt;</code>.  The ending-point is the point on the gradient-line where a line drawn perpendicular to the gradient-line intersects the corner opposite the starting corner.</p>
	<p>If both <code>&lt;bg-position&gt;</code> and <code>&lt;angle&gt;</code> are specified, then the starting-point is determined by the <code>&lt;bg-position&gt;</code>, and the gradient-line extends from that point in the direction specified by the <code>&lt;angle&gt;</code>.  The ending-point is determined similarly to the method in the previous paragraph - the <code>&lt;angle&gt;</code> defines a 'starting corner' (though it has no effect on where the gradient-line starts - that's determined by the <code>&lt;bg-position&gt;</code>), and the ending-point is the point on the gradient-line where a line drawn perpendicularly to it would intersect the corner opposite the starting corner.  (In some cases this may cause the gradient to 'reverse direction', for example if you specify "-10px -10px 135deg" - the ending-point is identical to if you had specified an angle of 315deg.)</p>
	<p>If both are omitted, it is equivalent to simply specifying "top" for the first argument, and defines a vertical gradient.</p>
	<p>If both starting-point and ending-point are the same, then the gradient is just a solid color, defined by the last color-stop in the list.  For example, "left top 90deg", and "center center" will both result in a solid-color gradient.</p>
	<p>The <strong><code>&lt;color-stop&gt;</code></strong> stands for:</p>
	<pre class=prod><code>&lt;color&gt; [ &lt;percentage&gt; | &lt;length&gt; ]?</code></pre>
	<p>The color-stops are points placed along the line defined by the gradient-line at the beginning of the rule.  Percentages refer to the length of the gradient-line, with 0% being at the starting point and 100% being at the ending point.  Lengths are measured from the starting-point in the direction of the ending-point.  With either measure, color-stops may be placed before the starting-point or after the ending-point; this is perfectly valid, as the starting-point and ending-point are just convenient references, and do not directly interact in the display of the gradient.  At each color-stop, the line is the color of the color-stop.  Before the first color-stop, the line is the color of the first color-stop.  After the last color-stop, the line is the color of the last color-stop.  Between two color-stops, the colors are interpolated as SVG gradients.</p>
	<p>If the first color-stop does not have a <code>&lt;length&gt;</code> or <code>&lt;percentage&gt;</code>, it defaults to 0%. If the last color-stop does not have a <code>&lt;length&gt;</code> or <code>&lt;percentage&gt;</code>, it defaults to 100%.</p>
	<p>Color-stops must be specified in order.  After assigning default values to the first and last stops if necessary, if a color-stop has a specified position that is less than the specified position of any color-stop before it in the list, its position is changed to be equal to the largest specified position of any color-stop before it.</p>
	<p>Finally, after correcting any misordered stops, if any other color-stop does not have a <code>&lt;length&gt;</code> or <code>&lt;percentage&gt;</code> specified, then all adjacent color-stops without a <code>&lt;length&gt;</code> or <code>&lt;percentage&gt;</code> are collected together, and then evenly spaced between the color-stops on the boundaries that do have a <code>&lt;length&gt;</code> or <code>&lt;percentage&gt;</code>.</p>
	<p>If multiple color-stops fall on the same point, they produce an infinitesimal transition from the one specified first in the rule to the one specified last.  In effect, the color suddenly changes at that point rather than smoothly transitioning.</p>
	<p>It is recommended that authors not mix different types of units, such as px, em, or %, in a single rule, as this can cause a color-stop to unintentionally try to move before an earlier one.  For example, the rule <code>linear-gradient(red, yellow 100px, blue 50%)</code> would work as expected as long as the gradient's block was at least 200px tall.  If it was 150px tall, however, the blue color-stop would be specifying a position of "75px", before the yellow color-stop, and would be corrected to a position of 100px.</p>
	
	<h4 class=no-toc>Linear Gradient Examples</h4>
	
	<p>All of the following examples are applied to a viewport that is 200px wide and 100px tall.</p>
	<div class=example>	
		<p>Below are various ways of specifying a basic vertical gradient:</p>
		
		<pre><code>linear-gradient(top, yellow, blue);
linear-gradient(bottom, blue, yellow);
linear-gradient(-90deg, yellow, blue);
linear-gradient(270deg, yellow, blue);
linear-gradient(top, yellow 0%, blue 100%);
linear-gradient(center top, yellow, blue);
linear-gradient(yellow, blue);</code></pre>
		<p><img src="linear1.png" alt="" ></p>
	</div>
	<div class=example>	
		<p>This gradient goes from the upper-left to the lower-right corner.</p>
		
		<pre><code>linear-gradient(top left, yellow, blue);
linear-gradient(0 0, yellow, blue);
linear-gradient(top 0px left 0px, yellow, blue);
linear-gradient(bottom right, blue, yellow);</code></pre>
		<p><img src="linear2.png" alt="" ></p>
	</div>
	<div class=example>	
		<p>This demonstrates the use of an angle in the gradient.  Compare this image with the previous example.  In both gradients, the top-left of the viewport is pure yellow, and the bottom-right of the viewport is pure blue.  The difference is in the angle that the gradient follows.</p>
		
		<pre><code>linear-gradient(-45deg, yellow, blue);
linear-gradient(315deg, yellow, blue);</code></pre>
		<p><img src="linear3.png" alt="" ></p>
	</div>
	<div class=example>	
		<p>This demonstrates a 3-color gradient, and how to specify the location of a stop explicitly:</p>
		
		<pre><code>linear-gradient(top, yellow, blue 20%, #0f0);</code></pre>
		<p><img src="linear4.png" alt="" ></p>
	</div>
	<div class=example>	
		<p>Here we use the full background-position syntax to specify the direction of the gradient.  Notice that in this example a substantial portion of the image is pure yellow and pure blue, because the starting and ending points of the gradient-line are not on the viewport edge, but rather somewhere within the viewport.</p>
		
		<pre><code>linear-gradient(20px 30px, yellow, blue);
linear-gradient(left 20px top 30px, yellow, blue);</code></pre>
		<p><img src="linear5.png" alt="" ></p>
	</div>

	<h3>Radial Gradients</h3>
	
	<p>A radial gradient is specified in a manner very similar to a linear gradient.  You define a gradient-line by providing a starting-point and an angle and place color-stops along this line, but also specify a gradient-shape that determines where the gradient-line ends and the overall appearance of the gradient image.  The image is constructed by creating an infinite canvas and painting it with concentric scaled copies of the ending-shape, with the color of the painted shape being the color of the gradient-line where the two intersect.</p>
	
	<h4 class=no-toc><code>radial-gradient()</code> Syntax</h4>
	
	<pre class=prod><code>radial-gradient([&lt;bg-position&gt; || &lt;angle&gt;,]? [&lt;shape&gt; || &lt;size&gt;,]? &lt;color-stop&gt;, &lt;color-stop&gt;[, &lt;color-stop&gt;]*)</code></pre>
	<p>The first argument to the function specifies the <strong><code>gradient-line</code></strong>.  <code>&lt;bg-position&gt;</code> is taken from the Backgrounds and Borders Module, and has the same definition.  It specifies the starting-point of the gradient-line, and the center of the gradient-shape.  If omitted, it defaults to <code>center</code>.  <code>&lt;angle&gt;</code> is from the Values Module, and has the same definition.  If omitted, it defaults to 0deg.  The gradient-line extends from the starting-point at this angle.</p>
	<p>The second argument to the function specifies the <strong><code>gradient-shape</code></strong>.  <code>&lt;shape&gt;</code> is defined as <code>[ circle | ellipse ]</code>.  <code>circle</code> indicates that the gradient-shape will be a circle with a constant radius.  <code>ellipse</code> indicates that the gradient-shape will be an axis-aligned ellipse (that is, its major and minor radiuses will be horizontal and vertical, not necessarily in that order).  If omitted, it defaults to <code>ellipse</code>.</p>
	<p><code>&lt;size&gt;</code> is defined as <code>[ closest-side | closest-corner | farthest-side | farthest-corner | contain | cover ]</code>.  If <code>&lt;shape&gt;</code> is <code>circle</code> and <code>&lt;size&gt;</code> is <code>closest-side</code>, the ending-shape is a circle sized so that it exactly meets the side of the viewport closest to its center.  For example, if the viewport was 100px wide and 200px tall, and the starting-point of the gradient-line was <code>'10% 10%'</code>, then the closest side is the left side of the viewport (it is 10px from the starting-point, while the top is 20px from it, and the right and bottom sides are much further).  The gradient-shape would be a circle with a radius of 10px.  If <code>&lt;shape&gt;</code> is <code>ellipse</code> and <code>&lt;size&gt;</code> is <code>closest-side</code>, the gradient-shape is an ellipse sized so that it exactly meets the vertical and horizontal sides of the viewport closest to its center.  Using the same viewport and starting-point as the previous example, the gradient-shape would be an ellipse with a 20px vertical radius and a 10px horizontal radius.  (If necessary, such as if the starting-point is outside of the viewport, extend the sides of the viewport so that there is a line the ellipse can meet.)</p>
	<p><code>farthest-side</code> is identical to <code>closest-side</code>, except that the gradient-shape is sized to meet the side of the viewport that is farthest from its center (or the farthest vertical and horizontal sides, in the case of <code>ellipse</code>).  <code>closest-corner</code> and <code>farthest-corner</code> size the gradient-shape so that it exactly meets the closest or farthest corner of the viewport from its center, respectively.  If <code>&lt;shape&gt;</code> is <code>ellipse</code>, the gradient-shape has the same ratio of width to height that it would if <code>closest-side</code> or <code>farthest-side</code> were specified, as appropriate.  <code>contain</code> is a synonym for <code>closest-side</code>, and <code>cover</code> is a synonym for <code>farthest-corner</code>.  If omitted, <code>&lt;size&gt;</code> defaults to <code>cover</code>.</p>
	<p>In certain circumstances the given parameters may define a degenerate shape - a circle or ellipse with a radius of 0. In these instances the gradient image is just a solid color equal to the color of the last color-stop in the rule.  The following combinations of values will trigger this: <code>closest-side</code> if the starting-point is on a viewport edge, <code>closest-corner</code> if the starting-point is on a viewport corner, and <code>ellipse</code> and <code>closest-corner</code> if the starting-point is on a viewport-edge.</p>
	<p>The ending-point of the gradient-line is determined by extending a line from the starting-point in the direction specified by the <code>&lt;angle&gt;</code> in the first argument.  The ending-point is where this line intersects the gradient-shape.</p>
	<p><code>&lt;color-stop&gt;</code> is defined identically to its treatment in <code>linear-gradient()</code>.  As in linear gradients, 0% is at the starting-point of the gradient-line, and 100% is at the ending-point.  Distances past 100% can be specified, and simply indicate a color-stop placed on the gradient-line a corresponding distance from the starting-point.  Negative distances are allowed in a radial gradient and work the same as in linear gradients with respect to setting the color of the gradient-line, but colors before the starting-point of the gradient-line are not displayed.  For example, <code>radial-gradient(red -50px, yellow 100px)</code> would produce an elliptical gradient which starts with a reddish-orange color in the center (the color 1/3 between red and yellow) and transitions to yellow at 100px wide.</p>
	
	<h4 class=no-toc>Radial Gradient Examples</h4>
	
	<p>All of the following examples are applied to a viewport that is 200px wide and 100px tall.</p>
	<div class=example>	
		<p>These examples demonstrate the basic syntax for radial gradients:</p>
		
		<pre><code>radial-gradient(yellow, green);
radial-gradient(center, ellipse cover, yellow 0%, green 100%);
radial-gradient(50% 50%, farthest-corner, yellow, green);</code></pre>
		<p><img src="radial1.png" alt="" ></p>
		
		<pre><code>radial-gradient(circle, yellow, green);</code></pre>
		<p><img src="radial2.png" alt="" ></p>
		
		<pre><code>radial-gradient(red, yellow, green);</code></pre>
		<p><img src="radial3.png" alt="" ></p>
	</div>
	<div class=example>	
		<p>The next two images show a gradient originating from somewhere other than the center of the viewport:</p>
		
		<pre><code>radial-gradient(bottom left, farthest-side, red, yellow 50px, green);</code></pre>
		<p><img src="radial4.png" alt="" ></p>

		<pre><code>radial-gradient(bottom left 90deg, farthest-side, red, yellow 50px, green);</code></pre>
		<p><img src="radial5.png" alt="" ></p>
		
		<p>Pay attention to the differences in these two images.  In both of them the distance between the red color-stop and the yellow color-stop is 50px; the difference is the <em>direction</em> this distance is measured.  By default the angle is 0deg, which means that distances are measured from the center going right.  An angle of 90deg makes it measure from the center going up.  Specifying an angle between 0deg and 90deg would produce a gradient somewhere between these two examples.</p>
	</div>
	<div class=example>	
		<p>Here we illustrate a 'contain' gradient.</p>
		
		<pre><code>radial-gradient(20px 30px, contain, red, yellow, green)</code></pre>
		<p><img src="radial6.png" alt="" ></p>
		
		<pre><code>radial-gradient(20px 30px, circle contain, red, yellow, green)</code></pre>
		<p><img src="radial7.png" alt="" ></p>
	</div>
<!-- Removed for lack of a use-case; we'll just leave it as a vendor-prefix for now.
	<h3>Repeating Gradients</h3>
	
	<p>In addition to the <code>linear-gradient()</code> and <code>radial-gradient()</code> functions, this specification defines <code>repeating-linear-gradient()</code> and <code>repeating-radial-gradient()</code> functions.  These two functions take the same values and are interpreted the same as their respective non-repeating siblings defined previously.  However, the color-stops are repeated infinitely in both directions, with their positions shifted by multiples of the difference between the last color-stop's position and the first color-stop's position.  For example, <code>repeating-linear-gradient(red 10px, blue 50px)</code> is equivalent to <code>linear-gradient(..., red -30px, blue 10px, red 10px, blue 50px, red 50px, blue 90px, ...)</code>.  Note that the last color-stop and first color-stop will always coincide at the boundaries of each group, which may produce sharp transitions if the gradient does not start and end with the same color.</p>

	<div class=example>
		<p>Repeating gradient syntax is basically identical to that of non-repeating gradients:</p>

		<pre><code>repeating-linear-gradient(red, blue 20px, red 40px)</code></pre>
		<p><img src="repeating1.png" alt=""></p>

		<pre><code>repeating-radial-gradient(red, blue 20px, red 40px)</code></pre>
		<p><img src="repeating2.png" alt=""></p>

		<pre><code>repeating-radial-gradient(20px 30px, circle contain, red, yellow, green 100%, yellow 150%, red 200%)</code></pre>
		<p><img src="repeating3.png" alt=""></p>
	</div>
-->
	<p>If the difference in the first and last color-stops is 0 (for example, in the rule <code>linear-gradient(red 10px, blue 10px)</code>), the gradient defines a solid-color image with the color of the last color-stop in the rule (in this case, then, it would simply define a blue image).</p>
</div>

<div>
	<h2>View Boxes, or Sizing Background Images in CSS</h2>

	<p>Images used in CSS may come from a number of sources, from defined image formats (such as gif, jpeg, etc), dedicated markup formats (such as SVG), and CSS-specific formats (such as the linear-gradient() value type defined in this specification).  These images may offer many types of sizing information to CSS, or none at all.  The concepts 'Image View Box' and 'CSS View Box' are specified here to define exactly how such images are treated within CSS.</p>
	<p>The general treatment of images in CSS is as follows:</p>

	<ol>
		<li>When an image is specified in CSS, such as through a url() value in the background-image property, CSS requests sizing information from the image.  The image may return an intrinsic height and width, an intrinsic height alone, an intrinsic width alone, an intrinsic size ratio alone (FIXME defined as height/width, or width/height?  assuming height/width for now), or no size information at all.  This sizing information defines an <dfn>Image View Box</dfn>, a rectangle in which the image believes it naturally fits in.</li>
		<li>The Image View Box is then then transformed into a CSS View Box that defines the actual size that the image will display in as follows:
			<ol>
				<li>If the Image View Box has an intrinsic width and an intrinsic height, the CSS View Box is that height and width.</li>
				<li>If the Image View Box has only an intrinsic width, or only an intrinsic height, XXX.</li>
				<li>If the Image View Box has only an intrinsic size ratio, then if the ratio of the background positioning area's height and width is greater than the intrinsic size ratio of the Image View Box (that is, the Image View Box has an intrinsic size ratio narrower than the background positioning area), then the CSS View Box has a height equal to the height of the background positioning area, and a width equal to the height of the background positioning area divided by the intrinsic size ratio of the Image View Box.  If the ratio of the background positioning area's height and width is less than the intrinsic size ratio of the Image View Box, then the CSS View Box has a width equal to the width of the background positioning area, and a height equal to the width of the background positioning area times the intrinsic size ratio of the Image View Box.</li>
				<li>If the Image View Box has neither an intrinsic height, nor an intrinsic width, nor an intrinsic size ratio, then the CSS View Box has a width equal to the width of the background positioning area, and a height equal to the height of the background positioning area.</li>
			</ol>
		</li>
		<li>The image is then given the dimensions of the CSS View Box and asked to render itself according to these dimensions.  CSS does not define how image formats may react to a CSS View Box that is a different size than the Image View Box, but commonly the image will scale itself to fit the new dimensions, perhaps scaling both dimensions independently, scaling both dimensions together so that it exactly touches the sides of the view box without going outside of them, seam carving to remove content that does not fit within the dimensions, or any other method.</li>
		<li>CSS then establishes a viewport to which the image is clipped.  This viewport is determined by the value of background-repeat for the given background layer.  Values of 'no-repeat', 'repeat-x', 'repeat-y', or 'repeat' cause the viewport to be the same size as the CSS View Box.  A value of 'extend' causes the viewport to be infinite in size (that is, the image is not clipped at all).</li>
	</ol>

	<p>After this process, the image is then rendered onto the background layer canvas, and may be subsequently transformed by the various background properties, such as background-size, background-repeat, etc.</p>

	<ul class=issue>
		<li>The algorithm described above does not take into account the background-size information, which it should.  Background-size is *not* applied after this point, since vector formats like SVG render properly and clearly even if massively blown up by background-size.</li>
		<li>At this point it's probably worthwhile to describe the entire lifecycle of a background image, from specification in background-image to clipping in background-clip.  I think that a precise listing of what order background properties are applied in would be very useful.</li>
	</ul>
</div>

<div>
  <h2>Resolution Units</h2>

  <p>This specification defines the following units as part of the
    <dfn>&lt;resolution&gt;</dfn> value type:

  <dl>
    <dt>dpi <dd>dots per inch

    <dt>dpcm <dd>dots per centimeter

    <dt>dppx <dd>dots per ''px'' unit
  </dl>

  <p class="note">The default resolution of raster images in CSS is ''1dppx''.</p>
</div>

<h2 class="no-num" id="acknowledgments">Acknowledgments</h2>


<h2 class="no-num" id="references">References</h2>


<h3 class="no-num" id="normative-references">Normative references</h3>
<!--begin-normative-->
<p>[Here will be inserted the file "normative.inc"]</p>
<!--end-normative-->


<h3 class="no-num" id="informative-references">Informative references</h3>
<!--begin-informative-->
<p>[Here will be inserted the file "informative.inc"]</p>
<!--end-informative-->


</body>
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
