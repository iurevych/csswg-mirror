<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en"><head>


 <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

  <title>CSS Image Values and Replaced Content Module Level 3</title>
  <link href="Overview_files/default.html" rel="stylesheet" type="text/css">
  <link href="Overview_files/default.css" rel="stylesheet">
  <link href="Overview_files/W3C-ED.css" rel="stylesheet" type="text/css">

  <style>
	p { margin: .5em 0; }
	dd > p { text-indent: 0; }
	a > b { font-weight: normal; color: #800; }
  </style>

 </head><body>
  <div class="head"> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt="W3C" src="Overview_files/w3c_home.png" height="48" width="72"></a> <!--end-logo-->

   </p><h1>CSS Image Values and Replaced Content Module Level 3</h1>

   <h2 class="no-num no-toc" id="longstatus-date">Editor's Draft 3 February
    2011</h2>

   <dl>
    <dt>Latest Version:</dt>
    <!-- <dd><a href="http://www.w3.org/TR/2011/CR-css3-images-20110203/">http://www.w3.org/TR/2011/CR-css3-images-20110203/</a></dd> -->

    <dd><a href="http://dev.w3.org/csswg/css3-images/">http://dev.w3.org/csswg/css3-images/</a>
     

    </dd><dt>Latest Working Draft:

    </dt><dd><a href="http://www.w3.org/TR/css3-images/">http://www.w3.org/TR/css3-images/</a>

    </dd><dt>Previous Working Draft:

    </dt><dd><a href="http://www.w3.org/TR/2009/WD-css3-images-20090723/">http://www.w3.org/TR/2009/WD-css3-images-20090723/</a>

    </dd><dt>Editor:

    </dt><dd><a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a>

    </dd><dd><a href="http://www.xanthir.com/contact">Tab Atkins Jr.</a>
   </dd></dl>
   <!--begin-copyright-->
   <p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright" rel="license">Copyright</a> © 2011 <a href="http://www.w3.org/"><acronym title="World Wide Web
    Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute
    of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and
    Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id="abstract">Abstract</h2>

  <p>This CSS Image Values and Replaced Content module has two parts: First,
   it defines the syntax for <a href="#ltimage"><b>&lt;image&gt;</b></a> values
   in CSS. <a href="#ltimage"><b>&lt;image</b></a> values can be a single URI
   to an image, a list of URIs denoting a series of fallbacks, a reference to
   an element in the document, or gradients. Second, it defines properties
   used to control the interaction of replaced content and the CSS layout
   algorithms. These properties can affect the used image resolution for
   bitmaps, the replaced object's orientation, and whether and how to
   preserve the object's aspect ratio.

  </p><h2 class="no-num no-toc" id="status">Status of this document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  </p><p>The (<a href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a href="mailto:www-style@w3.org?Subject=%5Bcss3-images%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   “css3-images” in the subject, preferably like this:
   “[<!---->css3-images<!---->] <em>…summary of
   comment…</em>”

  </p><p>This document was produced by the <a href="http://cgi.w3.org/Style/CSS/members">CSS
   Working Group</a> (part of the <a href="http://cgi.w3.org/Style/">Style Activity</a>).

  </p><p>This document was produced by a group operating under the <a href="http://cgi.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="http://cgi.w3.org/2004/01/pp-impl/32061/status" rel="disclosure">public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a href="http://cgi.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a href="http://cgi.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->

  <h2 class="no-num no-toc" id="contents">Table of contents</h2>
  <!--begin-toc-->

  <ul class="toc">
   <li><a href="#intro"><span class="secno">1. </span>Introduction</a>

   </li><li><a href="#conformance"><span class="secno">2. </span>Conformance</a>

   </li><li><a href="#resolution-units-the-ltresolutiongt-valu"><span class="secno">3. </span>Resolution Units: the &lt;resolution&gt; value
    type</a>

   </li><li><a href="#image"><span class="secno">4. </span>Image Values: the
    &lt;image&gt; value type</a>
    <ul class="toc">
     <li><a href="#url"><span class="secno">4.1. </span>Image References and
      Image Slices: the ‘<code class="css">url()</code>’
      notation</a>

     </li><li><a href="#image-notation"><span class="secno">4.2. </span>Image
      Fallbacks: the ‘<code class="css">image()</code>’
      notation</a>

     </li><li><a href="#element-reference"><span class="secno">4.3. </span>Using
      Elements as Images: The ‘<code class="css">element()</code>’
      notation</a>

     </li><li><a href="#cross-fade-function"><span class="secno">4.4.
      </span>Combining images: The ‘<code class="css">cross-fade()</code>’ notation</a>
    </li></ul>

   </li><li><a href="#gradients"><span class="secno">5. </span>Gradients</a>
    <ul class="toc">
     <li><a href="#linear-gradients"><span class="secno">5.1. </span>Linear
      Gradients</a>

     </li><li><a href="#radial-gradients"><span class="secno">5.2. </span>Radial
      Gradients</a>

     </li><li><a href="#repeating-gradients"><span class="secno">5.3.
      </span>Repeating Gradients</a>

     </li><li><a href="#color-stop-syntax"><span class="secno">5.4.
      </span><code>color-stop</code> Syntax</a>
    </li></ul>

   </li><li><a href="#sizing"><span class="secno">6. </span>Sizing Images and
    Objects in CSS</a>
    <ul class="toc">
     <li><a href="#image-resolution"><span class="secno">6.1. </span>Overriding
      Image Resolutions: the ‘<code class="property">image-resolution</code>’ property</a>

     </li><li><a href="#image-orientation"><span class="secno">6.2. </span>Orienting
      an Image on the Page: the ‘<code class="property">image-orientation</code>’ property</a>

     </li><li><a href="#image-rendering"><span class="secno">6.3. </span>Determining
      How to Scale an Image: The ‘<code class="property">image-rendering</code>’ Property</a>

     </li><li><a href="#object-fit"><span class="secno">6.4. </span>Sizing Replaced
      Elements: The ‘<code class="property">object-fit</code>’
      Property</a>

     </li><li><a href="#object-position"><span class="secno">6.5. </span>Positioning
      Replaced Images: The ‘<code class="property">object-position</code>’ Property</a>
    </li></ul>

   </li><li><a href="#serialization"><span class="secno">7. </span>Serialization</a>
    
    <ul class="toc">
     <li><a href="#serializing-resolution"><span class="secno">7.1.
      </span>Serializing a &lt;resolution&gt;</a>

     </li><li><a href="#serializing-url-notation"><span class="secno">7.2.
      </span>Serializing the ‘<code class="css">url()</code>’
      notation</a>

     </li><li><a href="#serializing-image-notation"><span class="secno">7.3.
      </span>Serializing the ‘<code class="css">image()</code>’ /
      <b>&lt;image-list&gt;</b> notation</a>

     </li><li><a href="#serializing-element-notation"><span class="secno">7.4.
      </span>Serializing the ‘<code class="css">element()</code>’ /
      <b>&lt;element-reference&gt;</b> notation</a>

     </li><li><a href="#serializing-cross-fade"><span class="secno">7.5.
      </span>Serializing the ‘<code class="css">cross-fade()</code>’ / <b>&lt;image-combination&gt;</b>
      notation</a>

     </li><li><a href="#serializing-gradients"><span class="secno">7.6.
      </span>Serializing Gradients</a>

     </li><li><a href="#serializing-properties"><span class="secno">7.7.
      </span>Serializing new properties</a>
    </li></ul>

   </li><li><a href="#interpolation"><span class="secno">8. </span>Interpolation</a>
    
    <ul class="toc">
     <li><a href="#interpolating-ltimage"><span class="secno">8.1.
      </span>Interpolating <b>&lt;image&gt;</b></a>

     </li><li><a href="#interpolating-gradients"><span class="secno">8.2.
      </span>Interpolating <b>&lt;gradient&gt;</b></a>
    </li></ul>

   </li><li class="no-num"><a href="#acknowledgments">Acknowledgments</a>

   </li><li class="no-num"><a href="#references">References</a>
    <ul class="toc">
     <li class="no-num"><a href="#normative-references">Normative
      references</a>

     </li><li class="no-num"><a href="#informative-references">Informative
      references</a>
    </li></ul>
  </li></ul>
  <!--end-toc-->

  <div>
   <h2 id="intro"><span class="secno">1. </span>Introduction</h2>

   <p><em>This section is non-normative.</em></p>

   <p>In CSS Levels 1 and 2, image values, such as those used in the
    ‘<code class="property">background-image</code>’ property,
    could only be given by a single URI value. This module introduces
    additional notations that allow a 2D image to be given as a list of URIs
    denoting fallbacks, as a reference to an element in the document, and as
    a gradient.</p>
  </div>

  <div>
   <h2 id="conformance"><span class="secno">2. </span>Conformance</h2>

   <p>A document or implementation cannot conform to CSS Image Values &amp;
    Replaced Content Level 3 alone, but can claim conformance to CSS Image
    Values &amp; Replaced Content Level 3 if it satisfies the conformance
    requirements in this specification when implementing CSS or another host
    language that normatively references this specification.</p>

   <p>Conformance to CSS Image Values &amp; Replaced Content Level 3 is defined
    for three classes:

   </p><dl>
    <dt><dfn id="minimal">minimal</dfn>

    </dt><dd>A device that does not implement CSS Transforms, CSS Animations, nor
     CSSOM may ignore the chapters on Serializing and Interpolating values
     for the purpose of claiming conformance.

    </dd><dt><dfn id="transition-capable">transition-capable</dfn>

    </dt><dd>A device that implements CSS Transitions or CSS Animations must
     conform to the <a href="#minimal"><b>minimal</b></a> class, and
     additionally must implement the chapter on Interpolation.

    </dd><dt><dfn id="cssom-capable">CSSOM-capable</dfn>

    </dt><dd>A device that implements CSSOM must conform to the <a href="#minimal"><b>minimal</b></a> class, and additionally must
     implement the chapter on Serialization.
   </dd></dl>

   <p>The conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words "MUST",
    "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
    "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
    document are to be interpreted as described in RFC 2119. However, for
    readability, these words do not appear in all uppercase letters in this
    specification. All of the text of this specification is normative except
    sections explicitly marked as non-normative, examples, and notes. <a href="#RFC2119" rel="biblioentry">[RFC2119]<!--{{!RFC2119}}--></a></p>

   <p>Examples in this specification are introduced with the words "for
    example" or are set apart from the normative text with
    <code>class="example"</code>, like this:

   </p><div class="example">
    <p>This is an example of an informative example.</p>
   </div>

   <p>Informative notes begin with the word "Note" and are set apart from the
    normative text with <code>class="note"</code>, like this:

   </p><p class="note">Note, this is an informative note.</p>
  </div>

  <div>
   <h2 id="resolution-units-the-ltresolutiongt-valu"><span class="secno">3.
    </span>Resolution Units: the &lt;resolution&gt; value type</h2>

   <p>This specification defines the following units as part of the <dfn id="ltresolutiongt">&lt;resolution&gt;</dfn> value type:

   </p><dl>
    <dt>dpi

    </dt><dd>dots per inch

    </dd><dt>dpcm

    </dt><dd>dots per centimeter

    </dd><dt>dppx

    </dt><dd>dots per ‘<code class="css">px</code>’ unit
   </dd></dl>

   <p class="note">The default resolution of raster images in CSS is
    ‘<code class="css">1dppx</code>’.</p>
  </div>

  <div>
   <h2 id="image"><span class="secno">4. </span>Image Values: the &lt;image&gt;
    value type</h2>

   <p>The &lt;image&gt; value type denotes a 2D image. It is defined as

   </p><pre class="prod"><dfn id="ltimage">&lt;image&gt;</dfn> = &lt;url&gt; | &lt;image-list&gt; | &lt;element-reference&gt; | &lt;image-combination&gt; | &lt;gradient&gt;</pre>

   <p>Image values can be used in many CSS properties, including the
    ‘<code class="property">background-image</code>’, ‘<code class="property">list-style-image</code>’, ‘<code class="property">cursor</code>’ properties <a href="#CSS21" rel="biblioentry">[CSS21]<!--{{!CSS21}}--></a>.

   </p><div>
    <h3 id="url"><span class="secno">4.1. </span>Image References and Image
     Slices: the ‘<code class="css">url()</code>’ notation</h3>

    <p>The simplest way to indicate an image is to reference an image file by
     URI. This is done with the <a href="http://www.w3.org/TR/CSS21/syndata.html#uri">‘<code class="css">url()</code>’ notation</a>, defined in <a href="#CSS21" rel="biblioentry">[CSS21]<!--{{!CSS21}}--></a>.

    </p><div class="example">
     <p>In the example below, a background image is specified with
      ‘<code class="css">url()</code>’ syntax:</p>

     <pre>background-image: url(wavy.png);</pre>
    </div>

    <p>A portion of an image may be referenced (clipped out and used as a
     standalone image) by use of fragment identifiers. <span class="issue">Need
     a spec to reference here. Expecting to get one from <a href="http://www.w3.org/2008/WebVideo/Fragments/">Media Fragments
     WG</a>.</span>

    </p><div class="example">
     <p>For example,</p>

     <pre>background-image: url('logos.png#xywh=10,30,60,20')</pre>

     <p>uses the 60 pixel by 20 pixel rectangle of <code>logos.png</code>
      beginning at the point 10 pixels in from the left, 30 pixels down from
      the top.

     </p><p class="note">Note that quotation marks are required here, because
      unquoted commas are not allowed in ‘<code class="css">url()</code>’ syntax.</p>
    </div>
   </div>

   <div>
    <h3 id="image-notation"><span class="secno">4.2. </span>Image Fallbacks: the
     ‘<code class="css">image()</code>’ notation</h3>

    <p>The ‘<code class="css">image()</code>’ notation allows an
     author to specify multiple images, each one a fallback for the previous.
     The UA must use only the first image that it can load and display. The
     syntax for ‘<code class="css">image()</code>’ is defined as

    </p><pre class="prod"><dfn id="ltimage-list">&lt;image-list&gt;</dfn> = <!--
		  -->image( [ &lt;image-decl&gt; , ]* [ &lt;image-decl&gt; | &lt;color&gt; | &lt;element-reference&gt; | &lt;image-combination&gt; | &lt;gradient&gt; ] )</pre>

    <p>where &lt;image-decl&gt; is given by

    </p><pre class="prod"><dfn id="ltimage-decl">&lt;image-decl&gt;</dfn> = <!--
		 -->[ &lt;string&gt; | &lt;url-token&gt; ] [ snap? &amp;&amp; &lt;resolution&gt; ]?</pre>

    <p>&lt;url-token&gt; is given as
     <code>[!#$%&amp;*-~]|{nonascii}|{escape}</code> (i.e. the contents of
     ‘<code class="css">url()</code>’) using the productions in the
     <a href="http://www.w3.org/TR/CSS21/syndata.html#tokenization">CSS2.1
     tokenization</a>. <strong>The &lt;url-token&gt; must not contain
     unescaped brackets, commas, white space characters, single quotes (') or
     double quotes ("); if it does the ‘<code class="css">image()</code>’ containing it is invalid.</strong>

    </p><p>Each string or url-token represents the URI of an image. If a
     resolution is given, then the image must be rendered at the specified
     resolution. If the ‘<code class="css">snap</code>’ keyword is
     also specified, and the image is a raster image, then the image must be
     rendered at the resolution closest to the specified resolution that
     would result in no pixel rounding. <span class="issue">I don't think "no
     pixel rounding" is the right terminology here... basically we want to
     avoid blurry images.</span></p>

    <p>The final argument may be a color or generated image, to serve as an
     ultimate fallback if none of the preceeding <a href="#ltimage-decl"><b>&lt;image-decl&gt;</b></a>s can be used. If it is a
     color, the <a href="#ltimage-list"><b>&lt;image-list&gt;</b></a> must
     represent a single-color image of that color with no <a href="#intrinsic-dimensions"><b>intrinsic dimensions</b></a>.</p>

    <div class="example">
     <p>For example, the rule below would tell the UA to load ‘<code class="css">wavy.svg</code>’ if it can; failing that to load
      ‘<code class="css">wavy.png</code>’ and display it at 150dpi;
      failing that to display ‘<code class="css">wavy.gif</code>’;
      and finally, if none of the images can be loaded and displayed, to use
      the color ‘<code class="css">blue</code>’ to create a
      dimensionless background image.

     </p><pre>background-image: image(wavy.svg, 'wavy.png' 150dpi, "wavy.gif", blue);</pre>

     <p>The ‘<code class="property">background-image</code>’
      property specifies that dimensionless images must stretch to cover the
      entire background positioning area <a href="#CSS3BG" rel="biblioentry">[CSS3BG]<!--{{CSS3BG}}--></a>, so if none of the
      specified images can be displayed the background will be painted blue.
      As with any image, this fallback will be painted over the ‘<code class="property">background-color</code>’ (if any).
    </p></div>
   </div>

   <div>
    <h3 id="element-reference"><span class="secno">4.3. </span>Using Elements as
     Images: The ‘<code class="css">element()</code>’ notation</h3>

    <p>The ‘<code class="css">element()</code>’ function allows an
     author to reference an element in the document that should be used as an
     image. As the referenced element changes, for example, by the user
     typing into a &lt;textarea&gt; element or a script drawing into a
     &lt;canvas&gt; element in HTML, the image produced by the ‘<code class="css">element()</code>’ function stays in sync, allowing
     dynamic effects such as script-animated background images or previews of
     the next slide in a slideshow. The syntax for ‘<code class="css">element()</code>’ is defined as:</p>

    <pre class="prod"><dfn id="ltelement-reference">&lt;element-reference&gt;</dfn> = element( [&lt;id-selector&gt; | &lt;identifier&gt; ] )</pre>

    <p>where &lt;id-selector&gt; is an ID selector <a href="#SELECT" rel="biblioentry">[SELECT]<!--{{!SELECT}}--></a>, and &lt;identifier&gt; is
     an identifer <a href="#CSS3VAL" rel="biblioentry">[CSS3VAL]<!--{{!CSS3VAL}}--></a>.</p>

    <p>If the argument to the ‘<code class="css">element()</code>’
     function is an ID selector, the function references the element matched
     by the selector. If it's an identifier, the function references the
     element who's <dfn id="css-element-reference-identifier">CSS element
     reference identifier</dfn> is the given identifier. (CSS does not define
     how an element acquires a <a href="#css-element-reference-identifier"><b>CSS element reference
     identifier</b></a>; that is determined by the host language.) If no
     element in the document matches the selector, or no element has the
     identifier as its <a href="#css-element-reference-identifier"><b>CSS
     element reference identifier</b></a>, the function represents a fully
     transparent image with no intrinsic dimensions, equivalent to
     <code>image(transparent)</code>. If the document changes so that which
     element is matched, or whether an element is matched at all, changes,
     the image represented by the function must change accordingly.</p>

    <p>If the ‘<code class="css">element()</code>’ function refers
     to an element, then it represents an image with width and height equal
     to the width and height of the margin box of the referenced element. The
     image must be constructed by rendering the referenced element and its
     descendants at the same size that the element would be in its document,
     over an infinite transparent black background, positioned so that the
     edges of the margin box of the element is flush with the edges of the
     image. <span class="note">If the element has decorations or descendants
     that extend outside the margin box, these will be clipped to the margin
     box in the generated image by default. ‘<code class="css">background-repeat:extend</code>’ may allow the author to
     override this behavior so that decorations and descendants outside the
     margin box are still painted.</span> If the referenced element or an
     ancestor of the referenced element has a transform applied to it, the
     transform must be ignored for the purpose of constructing this image
     (transforms on descendants must be unaffected).</p>

    <p>If the argument passed to ‘<code class="css">element()</code>’ isn't an ID selector or an ident, it
     is a syntax error.</p>

    <div class="example"> TODO: copy an example from the MozHacks article</div>

    <div>
     <h4 class="no-num no-toc" id="element-cycles">Detecting and Resolving
      Circular Relationships Introduced by ‘<code class="css">element()</code>’</h4>

     <p>The ‘<code class="css">element()</code>’ function can
      produce nonsensical circular relationships, such as an element using
      itself as its own background. These relationships can be easily and
      reliably detected and resolved, however, by keeping track of a
      dependency graph and using common cycle-detection algorithms.</p>

     <p>Populate the dependency graph initially by having every element
      depend on each of its children. Then, whenever a property on an element
      A uses the ‘<code class="css">element()</code>’ function to
      refer to an element B, add an edge to the graph by having A depend on
      B. If a dependency cycle is detected, any ‘<code class="css">element()</code>’ functions that produced a dependency
      in the cycle represent a fully transparent image with no intrinsic
      dimensions.</p>

     <p class="issue">Someone else needs to review this and make sure that I'm
      not missing any cycles.</p>
    </div>
   </div>

   <div>
    <h3 id="cross-fade-function"><span class="secno">4.4. </span>Combining
     images: The ‘<code class="css">cross-fade()</code>’ notation</h3>

    <p>When transitioning between images, CSS requires a way to explicitly
     refer to the intermediate image that is a combination of the start and
     end images. This is accomplished with the ‘<code class="css">cross-fade()</code>’ function, which indicates the two
     images to be combined and how far along in the transition the
     combination is. Authors may also use the ‘<code class="css">cross-fade()</code>’ function for many simple image
     manipulations, such as tinting an image with a solid color or
     highlighting a particular area of the page by combining an image with a
     radial gradient. The syntax for ‘<code class="css">cross-fade()</code>’ is defined as:</p>

    <pre class="prod"><dfn id="ltimage-combination">&lt;image-combination&gt;</dfn> = cross-fade( &lt;image&gt;, &lt;image&gt;, &lt;percentage&gt; )</pre>

    <p>The function represents an image generated by combining the first and
     second image (referred to in this section as the "start" and "end"
     images, respectively). The percentage represents how far along the
     transformation is, with 0% representing the start image, 100%
     representing the end image, and percentages between that representing
     corresponding combinations of the two images. The &lt;percentage&gt; must
     be between 0% and 100% inclusive; any other value is a syntax error.</p>

    <p>Given the &lt;percentage&gt; p, the combined image represented by the
     ‘<code class="css">cross-fade()</code>’ function has a width
     equal to <code>start image width * (1-p) + end image width * p</code>
     and a height equal to <code>start image height * (1-p) + end image
     height * p</code>. The image itself is generated by first scaling both
     the start and end images to the size of the combined image. Then, the
     start image has a global alpha applied to it equal to (1-p), the end
     image has a global alpha applied to it equal to p, and the end image is
     then composited over the start image with the source-over operation.
     [[PORTERDUFF]]</p>
   </div>
  </div>

  <div>
   <h2 id="gradients"><span class="secno">5. </span>Gradients</h2>

   <p>A gradient is an image that smoothly fades from one color to another.
    These are commonly used for subtle shading in background images, buttons,
    and many other things. The two functions described in this section allow
    an author to specify such an image in a terse syntax, so that the UA can
    generate the image automatically when rendering the page. Gradients are a
    type of image, and can be used anywhere an image can, such as in the
    ‘<code class="property">background-image</code>’ or
    ‘<code class="property">list-style-image</code>’ properties.
    Gradients have no <a href="#intrinsic-dimensions"><b>intrinsic
    dimensions</b></a>. The syntax of a <a href="#ltgradient"><b>&lt;gradient&gt;</b></a> is:</p>

   <pre class="prod"><dfn id="ltgradient">&lt;gradient&gt;</dfn> = [ &lt;linear-gradient&gt; | &lt;radial-gradient&gt; | &lt;repeating-linear-gradient&gt; | &lt;repeating-radial-gradient&gt; ]</pre>

   <p>where <a href="#ltlinear-gradient"><b>&lt;linear-gradient&gt;</b></a>, <a href="#ltradial-gradient"><b>&lt;radial-gradient&gt;</b></a>, <a href="#ltrepeating-linear-gradient"><b>&lt;repeating-linear-gradient&gt;</b></a>,
    and <a href="#ltrepeating-radial-gradient"><b>&lt;repeating-radial-gradient&gt;</b></a>
    are defined in their applicable sections below.</p>

   <div class="example">
    <p>As with the other <a href="#ltimage"><b>&lt;image&gt;</b></a> types
     defined in this specification, gradients can be used in any property
     that accepts images. For example:</p>

    <ul>
     <li><code>background: linear-gradient(white, gray);</code>

     </li><li><code>list-style-image: radial-gradient(circle, #006, #00a 90%,
      #0000af 100%, white 100%)</code>
    </li></ul>
   </div>

   <p class="note">In many places this section references a box, such as "the
    box's top-left corner" or "the box's right side". In all of these
    circumstances, the "box" refers to the ‘<a href="#css-view-box"><code class="css">CSS View Box</code></a>’ (see
    the "Sizing Images and Objects in CSS" section of this spec for
    clarification). A gradient has no intrinsic dimensions. This means that,
    for example, if you use a gradient in a ‘<code class="property">background-image</code>’, the "box" will simply be
    the size of the background sizing area. If you use a gradient in a
    list-style-image, the "box" will be a 1em square.</p>

   <p class="issue">It has been suggested that repeating gradients aren't
    necessary, and can instead be achieved by altering the behavior of
    background-repeat.</p>

   <p class="issue">It has been suggested that we can avoid the center position
    in radial gradients, and instead use background-position.</p>

   <p class="issue">It has been suggested that we should use some other
    definition for mapping angles to directions to match other parts of CSS.</p>

   <div>
    <h3 id="linear-gradients"><span class="secno">5.1. </span>Linear Gradients</h3>

    <p>A linear gradient is created by specifying a gradient-line and then
     several colors placed along that line. The image is constructed by
     creating an infinite canvas and painting it with lines perdendicular to
     the gradient-line, with the color of the painted line being the color of
     the gradient-line where the two intersect. This produces a smooth fade
     from each color to the next, progressing in the specified direction.</p>

    <h4 class="no-toc" id="linear-gradient-syntax"><span class="secno">5.1.1.
     </span>‘<code class="css">linear-gradient()</code>’ syntax</h4>

    <pre class="prod"><code><dfn id="ltlinear-gradient">&lt;linear-gradient&gt;</dfn> = linear-gradient(
[ 
	[ [top | bottom] || [left | right] ] 
	| 
	&lt;angle&gt;
,]? 
&lt;color-stop&gt;[, &lt;color-stop&gt;]+
);</code></pre>

    <p>The first argument to the function specifies the <dfn id="gradient-line">gradient-line</dfn>, which gives the gradient a
     direction and determines how color-stops are positioned. It may be
     omitted; if so, it defaults to ‘<code class="css">top</code>’.</p>

    <p>The <a href="#gradient-line"><b>gradient-line</b></a> may be specified
     in two different ways. The first is by specifying the angle the <a href="#gradient-line"><b>gradient-line</b></a> should assume; this uses
     the standard algebraic notation for angles where 0deg points to the
     right, 90deg points up, and positive angles go counterclockwise. The
     starting-point and ending-point of the <a href="#gradient-line"><b>gradient-line</b></a> are determined by
     extending a line in both direction from the center of the box at the
     angle specified. In the direction of the angle, the ending-point is the
     point on the <a href="#gradient-line"><b>gradient-line</b></a> where a
     line drawn perpendicular to the <a href="#gradient-line"><b>gradient-line</b></a> would intersect the
     corner of the box in that direction. The starting-point is determined
     identically, except in the opposite direction of the angle.</p>

    <p>The second way is to simply provide a side or corner of the box that
     the gradient should start at; the gradient will then automatically angle
     itself to extend from the specified side or corner to the opposite side
     or corner in a straight line. To be precise, the gradient is converted
     to the angle form described in the previous paragraph at used-value
     time. If a ‘<code class="css">left</code>’, ‘<code class="css">bottom</code>’, ‘<code class="css">right</code>’, or ‘<code class="css">top</code>’ is given, the used value of the gradient is
     0deg, 90deg, 180deg, or 270 deg, respectively. If a corner is given, the
     used value of the gradient is the angle necessary to place the
     starting-point of the gradient in that corner of the box.</p>

    <div class="example">
     <div style="overflow: hidden;"> <img alt="[An image showing a box with a
      background shading gradually from white in the bottom-left corner to
      black in the top-right corner. There is a line, illustrating the
      gradient-line, angled at 45 degrees and passing through the center of
      the box. The starting-point and ending-point of the gradient-line are
      indicated by the intersection of the gradient-line with two additional
      lines that pass through the bottom-left and top-right corners of the
      box.]" src="Overview_files/gradient-diagram.html" style="float: right; margin-left: 1em;">
      <p>This example illustrates visually how to calculate the <a href="#gradient-line"><b>gradient-line</b></a> from the rules above.
       This shows the starting and ending-point of the <a href="#gradient-line"><b>gradient-line</b></a>, along with the actual
       gradient, produced by an element with ‘<code class="css">background: linear-gradient(45deg, white,
       black);</code>’.</p>

      <p>Notice how, though the starting-point and ending-point are outside
       of the box, they're positioned precisely right so that the gradient is
       pure white <em>exactly</em> at the corner, and pure black
       <em>exactly</em> at the opposite corner. That's intentional, and will
       always be true for linear gradients.</p>
     </div>
    </div>

    <p>The gradient's color stops are typically placed between the
     starting-point and ending-point on the <a href="#gradient-line"><b>gradient-line</b></a>, but this isn't required
     - the <a href="#gradient-line"><b>gradient-line</b></a> extends
     infinitely in both directions. The starting-point and ending-point are
     merely arbitrary distance markers - the starting-point defines where 0%,
     0px, etc are located when specifying color-stops, and the ending-point
     defines where 100% is located. Color-stops are allowed to have positions
     before 0% or after 100%.</p>

    <h4 class="no-toc" id="linear-gradient-examples"><span class="secno">5.1.2.
     </span>Linear Gradient Examples</h4>

    <p>All of the following ‘<code class="css">linear-gradient()</code>’ examples are presumed to be
     backgrounds applied to a box that is 200px wide and 100px tall.</p>

    <div class="example">
     <p>Below are various ways of specifying a basic vertical gradient:</p>

     <pre><code>linear-gradient(yellow, blue);
linear-gradient(top, yellow, blue);
linear-gradient(bottom, blue, yellow);
linear-gradient(-90deg, yellow, blue);
linear-gradient(270deg, yellow, blue);
linear-gradient(top, yellow 0%, blue 100%);</code></pre>

     <p><img alt="" src="Overview_files/linear1.html"></p>
    </div>

    <div class="example">
     <p>This gradient goes from the upper-left to the lower-right corner.</p>

     <pre><code>linear-gradient(top left, yellow, blue);</code></pre>

     <p><img alt="" src="Overview_files/linear2.html"></p>
    </div>

    <div class="example">
     <p>This demonstrates the use of an angle in the gradient. Compare this
      image with the previous example. In both gradients, the top-left of the
      box is pure yellow, and the bottom-right of the box is pure blue. The
      difference is in the angle that the gradient follows.</p>

     <pre><code>linear-gradient(-45deg, yellow, blue);
linear-gradient(315deg, yellow, blue);</code></pre>

     <p><img alt="" src="Overview_files/linear3.html"></p>
    </div>

    <div class="example">
     <p>This demonstrates a 3-color gradient, and how to specify the location
      of a stop explicitly:</p>

     <pre><code>linear-gradient(yellow, blue 20%, #0f0);</code></pre>

     <p><img alt="" src="Overview_files/linear4.html"></p>
    </div>
   </div>

   <div>
    <h3 id="radial-gradients"><span class="secno">5.2. </span>Radial Gradients</h3>

    <p>In a radial gradient, rather than colors smoothly fading from one side
     of the box to the other as with linear gradients, they instead emerge
     from a single point and smoothly spread outward in a circular or
     elliptical shape.</p>

    <p>A radial gradient is specified by first pinpointing the center of the
     gradient, where the 0% ellipse will be, then specifying the size and
     shape of the 100% ellipse, ending with a list of color-stops just like a
     linear-gradient. Between the center and the ending-ellipse, and past the
     ending-ellipse, concentric ellipses are drawn and colored according to
     the specified color-stops.</p>

    <h4 class="no-toc" id="radial-gradient-syntax"><span class="secno">5.2.1.
     </span><code>radial-gradient()</code> Syntax</h4>

    <pre class="prod"><code><dfn id="ltradial-gradient">&lt;radial-gradient&gt;</dfn> = radial-gradient(
	[&lt;bg-position&gt;,]? 
	[
		[&lt;shape&gt; || &lt;size&gt;]
		|
		[&lt;length&gt; | &lt;percentage&gt;]{2}
	,]? 
	&lt;color-stop&gt;[, &lt;color-stop&gt;]+
)</code></pre>

    <p>The first argument to the function specifies the center of the
     ellipse. <b>&lt;bg-position&gt;</b> is taken from the Backgrounds and
     Borders Module, and has the same definition. It specifies the center of
     the gradient. If omitted, it defaults to ‘<code class="css">center</code>’. Color-stop positions are measured along
     an imaginary line extending from the center of the gradient to the
     right.</p>

    <p>The second argument to the function specifies the size and shape of
     the ending-ellipse. This can be specified in two ways, with different
     characteristics:</p>

    <dl>
     <dt>Implicitly

     </dt><dd>
      <p>The size and shape of the ending-ellipse can be defined
       <em>implicitly</em> with a size and shape keyword. The <a href="#ltshape"><b>&lt;shape&gt;</b></a> is defined as</p>

      <pre><code><dfn id="ltshape">&lt;shape&gt;</dfn> = [ circle | ellipse ]</code></pre>

      <p>‘<code class="css">circle</code>’ indicates that the
       ending-ellipse will be a circle with a constant radius. ‘<code class="css">ellipse</code>’ indicates that the gradient-shape will
       be an axis-aligned ellipse (that is, its major and minor radiuses will
       be horizontal and vertical, not necessarily in that order).</p>

      <p>The <a href="#ltsize"><b>&lt;size&gt;</b></a> keyword is defined as</p>

      <pre><code><dfn id="ltsize">&lt;size&gt;</dfn> = [ closest-side | closest-corner | farthest-side | farthest-corner | contain | cover ]</code></pre>

      <p>If <a href="#ltshape"><b>&lt;shape&gt;</b></a> is ‘<code class="css">circle</code>’ and <a href="#ltsize"><b>&lt;size&gt;</b></a> is ‘<code class="css">closest-side</code>’, the ending-shape is a circle
       sized so that it exactly meets the side of the box closest to its
       center. For example, if the box was 100px wide and 200px tall, and the
       center of the gradient was ‘<code class="css">10%
       10%</code>’, then the closest side is the left side of the box
       (it is 10px from the starting-point, while the top is 20px from it,
       and the right and bottom sides are much further). The gradient-shape
       would thus be a circle with a radius of 10px. If <a href="#ltshape"><b>&lt;shape&gt;</b></a> is ‘<code class="css">ellipse</code>’ and <a href="#ltsize"><b>&lt;size&gt;</b></a> is ‘<code class="css">closest-side</code>’, the gradient-shape is an ellipse
       sized so that it exactly meets the vertical and horizontal sides of
       the box closest to its center. Using the same box and starting-point
       as the previous example, the gradient-shape would be an ellipse with a
       20px vertical radius and a 10px horizontal radius. (If necessary, such
       as if the starting-point is outside of the box, extend the sides of
       the box so that there is a line the ellipse can meet.)</p>

      <p>‘<code class="css">farthest-side</code>’ is identical to
       ‘<code class="css">closest-side</code>’, except that the
       gradient-shape is sized to meet the side of the box that is farthest
       from its center (or the farthest vertical and horizontal sides, if the
       shape is ‘<code class="css">ellipse</code>’). ‘<code class="css">closest-corner</code>’ and ‘<code class="css">farthest-corner</code>’ size the gradient-shape so
       that it exactly meets the closest or farthest corner of the box from
       its center, respectively. If <a href="#ltshape"><b>&lt;shape&gt;</b></a>
       is ‘<code class="css">ellipse</code>’, the gradient-shape
       has the same ratio of width to height that it would if ‘<code class="css">closest-side</code>’ or ‘<code class="css">farthest-side</code>’ were specified, as appropriate.
       ‘<code class="css">contain</code>’ is a synonym for
       ‘<code class="css">closest-side</code>’, and ‘<code class="css">cover</code>’ is a synonym for ‘<code class="css">farthest-corner</code>’.</p>

      <p>If this implicit form is used, then it is converted to an equivalent
       explicit form (described below) at used-value time.</p>

     </dd><dt>Explicitly

     </dt><dd>
      <p>Alternately, the ending-shape's size and shape can be defined
       explicitly, by providing two lengths or percentages. These measure the
       length of the horizontal and vertical axes of the ellipse,
       respectively. (The axis length is the length from the center of the
       ellipse to the edge, similar to the radius of a circle, not the
       diameter.)</p>

      <p>Percentages used in the first value are relative to the width of the
       box, while percentages used in the second value are relative to the
       height of the box.</p>

      <p>Both of the values must be positive - specifying either as zero or
       negative is a syntax error.</p>
    </dd></dl>

    <p>If this argument is omitted, it defaults to ‘<code class="css">ellipse cover</code>’.</p>

    <p>If only one argument is provided before the color-stops, and it could
     be interpreted as either a position or an explicit size (for example, in
     ‘<code class="css">radial-gradient(10% 10%, red,
     blue)</code>’), it must be interpreted as a position.</p>

    <p>In certain circumstances the given parameters may define a degenerate
     shape - a circle or ellipse with a radius of 0. In these instances the
     gradient image is just a solid color equal to the color of the last
     color-stop in the rule. The following combinations of values will
     trigger this: ‘<code class="css">closest-side</code>’ if the
     starting-point is on a box edge, ‘<code class="css">closest-corner</code>’ if the starting-point is on a box
     corner, and ‘<code class="css">ellipse closest-corner</code>’
     if the starting-point is on a box edge.</p>

    <p>Color-stops are placed on an imaginary line extending from the center
     of the gradient toward the right, with the 0% point at the center of the
     gradient, and 100% at the point where the line intersects the
     ending-ellipse. The color of each ellipse is equal to the color of the
     line where the ellipse intersects it. Distances past 100% can be
     specified, and simply indicate a color-stop placed on the line a
     corresponding distance from the center. Negative distances are allowed
     in a radial gradient and work the same as in linear gradients with
     respect to setting the color of the <a href="#gradient-line"><b>gradient-line</b></a>, but colors before the
     starting-point of the <a href="#gradient-line"><b>gradient-line</b></a>
     are not displayed. For example, ‘<code class="css">radial-gradient(red -50px, yellow 100px)</code>’ would
     produce an elliptical gradient which starts with a reddish-orange color
     in the center (the color 1/3 between red and yellow) and transitions to
     yellow at 100px wide.</p>

    <h4 class="no-toc" id="radial-gradient-examples"><span class="secno">5.2.2.
     </span>Radial Gradient Examples</h4>

    <p>All of the following examples are applied to a box that is 200px wide
     and 100px tall.</p>

    <div class="example">
     <p>These examples demonstrate the basic syntax for radial gradients:</p>

     <pre><code>radial-gradient(yellow, green);
radial-gradient(center, ellipse cover, yellow 0%, green 100%);
radial-gradient(50% 50%, farthest-corner, yellow, green);</code></pre>

     <p><img alt="" src="Overview_files/radial1.html"></p>

     <pre><code>radial-gradient(circle, yellow, green);</code></pre>

     <p><img alt="" src="Overview_files/radial2.html"></p>

     <pre><code>radial-gradient(red, yellow, green);</code></pre>

     <p><img alt="" src="Overview_files/radial3.html"></p>
    </div>

    <div class="example">
     <p>This image shows a gradient originating from somewhere other than the
      center of the box:</p>

     <pre><code>radial-gradient(bottom left, farthest-side, red, yellow 50px, green);</code></pre>

     <p><img alt="" src="Overview_files/radial4.html"></p>
    </div>

    <div class="example">
     <p>Here we illustrate a ‘<code class="property">contain</code>’ gradient.</p>

     <pre><code>radial-gradient(20px 30px, contain, red, yellow, green);
radial-gradient(20px 30px, 20px 30px, red, yellow, green);</code></pre>

     <p><img alt="" src="Overview_files/radial6.html"></p>

     <pre><code>radial-gradient(20px 30px, circle contain, red, yellow, green);
radial-gradient(20px 30px, 20px 20px, red, yellow, green);</code></pre>

     <p><img alt="" src="Overview_files/radial7.html"></p>
    </div>
   </div>

   <div>
    <h3 id="repeating-gradients"><span class="secno">5.3. </span>Repeating
     Gradients</h3>

    <p>In addition to the ‘<code class="css">linear-gradient()</code>’ and ‘<code class="css">radial-gradient()</code>’ functions, this specification
     defines ‘<code class="css">repeating-linear-gradient()</code>’
     and ‘<code class="css">repeating-radial-gradient()</code>’
     functions. These two functions take the same values and are interpreted
     the same as their respective non-repeating siblings defined previously:</p>

    <pre class="prod"><code><dfn id="ltrepeating-linear-gradient">&lt;repeating-linear-gradient&gt;</dfn> = repeating-linear-gradient(
	[ 
		[ [top | bottom] || [left | right] ] 
		|| 
		&lt;angle&gt;
	,]? 
	&lt;color-stop&gt;[, &lt;color-stop&gt;]+
)
<dfn id="ltrepeating-radial-gradient">&lt;repeating-radial-gradient&gt;</dfn> = repeating-radial-gradient(
	[&lt;bg-position&gt;,]? 
	[
		[&lt;shape&gt; || &lt;size&gt;]
		|
		[&lt;length&gt; | &lt;percentage&gt;]{2}
	,]? 
	&lt;color-stop&gt;[, &lt;color-stop&gt;]+
)</code></pre>

    <p>When rendered, however, the color-stops are repeated infinitely in
     both directions, with their positions shifted by multiples of the
     difference between the last specified color-stop's position and the
     first specified color-stop's position. For example, ‘<code class="css">repeating-linear-gradient(red 10px, blue 50px)</code>’
     is equivalent to ‘<code class="css">linear-gradient(..., red -30px,
     blue 10px, red 10px, blue 50px, red 50px, blue 90px, ...)</code>’.
     Note that the last color-stop and first color-stop will always coincide
     at the boundaries of each group, which will produce sharp transitions if
     the gradient does not start and end with the same color.</p>

    <div class="example">
     <p>Repeating gradient syntax is basically identical to that of
      non-repeating gradients:</p>

     <pre><code>repeating-linear-gradient(red, blue 20px, red 40px)</code></pre>

     <p><img alt="" src="Overview_files/repeating1.html"></p>

     <pre><code>repeating-radial-gradient(red, blue 20px, red 40px)</code></pre>

     <p><img alt="" src="Overview_files/repeating2.html"></p>

     <pre><code>repeating-radial-gradient(20px 30px, circle contain, red, yellow, green 100%, yellow 150%, red 200%)</code></pre>

     <p><img alt="" src="Overview_files/repeating3.html"></p>
    </div>

    <p>If the difference in the positions of the first and last color-stops
     is 0 (for example, in the value ‘<code class="css">linear-gradient(red 10px, blue 10px)</code>’), the
     gradient defines a solid-color image with the color of the last
     color-stop in the rule (in this case, then, it would simply define a
     blue image).</p>
   </div>

   <div>
    <h3 id="color-stop-syntax"><span class="secno">5.4.
     </span><code>color-stop</code> Syntax</h3>

    <pre class="prod"><code><dfn id="ltcolor-stop">&lt;color-stop&gt;</dfn> = &lt;color&gt; [ &lt;percentage&gt; | &lt;length&gt; ]?</code></pre>

    <p>Color-stops are points placed along the line defined by the <a href="#gradient-line"><b>gradient-line</b></a> at the beginning of the
     rule. Color-stops must be specified in order. Percentages refer to the
     length of the gradient-line, with 0% being at the starting point and
     100% being at the ending point. Lengths are measured from the
     starting-point in the direction of the ending-point. Color-stops are
     usually placed between the starting-point and ending-point, but that's
     not required; the gradient-line extends infinitely in both directions,
     and a color-stop can be placed at any position on the line.</p>

    <p>At each color-stop, the line is the color of the color-stop. Between
     two color-stops, the line's color is linearly interpolated between the
     colors of the two color-stops, with the interpolation taking place in
     premultiplied RGBA space. Before the first color-stop, the line is the
     color of the first color-stop. After the last color-stop, the line is
     the color of the last color-stop.</p>

    <p>The following steps must be applied <em>in order</em> to process the
     list of color-stops. After applying these rules, all color-stops will
     have a definite position and they will be in ascending order:</p>

    <ol>
     <li>If the first color-stop does not have a position, its position
      defaults to 0%. If the last color-stop does not have a position, its
      position defaults to 100%.

     </li><li>If a color-stop has a position that is less than the specified
      position of any color-stop before it in the list, its position is
      changed to be equal to the largest specified position of any color-stop
      before it.

     </li><li>If any color-stop still does not have a position, then, for each run
      of adjacent color-stops without positions, set their positions so that
      they are evenly spaced between the preceding and following color-stops
      with positions.
    </li></ol>

    <p>If multiple color-stops have the same position, they produce an
     infinitesimal transition from the one specified first in the rule to the
     one specified last. In effect, the color suddenly changes at that
     position rather than smoothly transitioning.</p>

    <p class="note">It is recommended that authors not mix different types of
     units, such as px, em, or %, in a single rule, as this can cause a
     color-stop to unintentionally try to move before an earlier one. For
     example, the rule ‘<code class="css">background-image:
     linear-gradient(red, yellow 100px, blue 50%)</code>’ would work as
     expected as long as the background area is at least 200px tall. If it
     was 150px tall, however, the blue color-stop's position would be
     equivalent to "75px", which precedes the yellow color-stop, and would be
     corrected to a position of 100px.</p>

    <p class="note">The definition and implications of "premultiplied" color
     spaces are given elsewhere in the technical literature, but a quick
     primer is given here to illuminate the process. Given a color expressed
     as an rgba() 4-tuple, one can convert this to a premultiplied
     representation by multiplying the red, green, and blue components by the
     alpha component. For example, a partially-transparent blue may be given
     as rgba(0,0,255,.5), which would then be expressed as (0,0,127.5,.5) in
     its premultiplied representation. Note that fully opaque colors have the
     same representation in rgba and premultiplied-rgba (you multiply the
     components by 1), and all fully transparent colors are expressed the
     same way in the premultiplied representation (you multiply each
     component by 0, so no matter what the source color was in rgba, the
     premultiplied representation is (0,0,0,0)). Interpolating colors using
     the premultiplied representations rather than the plain rgba
     representations tends to produce more attractive transitions,
     particularly when transitioning from a fully opaque color to fully
     transparent.</p>
   </div>
  </div>

  <div>
   <h2 id="sizing"><span class="secno">6. </span>Sizing Images and Objects in CSS</h2>

   <p>Images used in CSS may come from a number of sources, from defined
    image formats (such as gif, jpeg, etc), dedicated markup formats (such as
    SVG), and CSS-specific formats (such as the linear-gradient() value type
    defined in this specification). As well, a document may contain many
    other types of objects, such as video, plugins, or nested documents.
    These images and objects (just "objects" hereafter) may offer many types
    of sizing information to CSS, or none at all. This section defines
    generically the size negotiation model between the object and the CSS
    layout algorithms.</p>

   <p>In order to define this handling, we must define a few terms, to make
    it easier to refer to various concepts:</p>

   <dl>
    <dt><dfn id="intrinsic-dimensions">intrinsic dimensions</dfn>

    </dt><dd>
     <p>The intrinsic dimensions are defined are the object's preferred,
      natural size or aspect ratio, if any. There can be an <dfn id="intrinsic-height">intrinsic height</dfn> and <dfn id="intrinsic-width">intrinsic width</dfn>, defining a definite
      rectangle. (Most bitmap images fall into this category.) There can be
      an <dfn id="intrinsic-aspect-ratio">intrinsic aspect ratio</dfn> defining
      the relation of the width to the height, but no definite size. (SVG
      images designed to scale may fall into this category.) There can be
      just an intrinsic height or width. Or there can be no intrinsic
      dimensions at all, implying that the object has no preferred size or
      aspect ratio. (Embedded documents are often assumed to have no
      intrinsic size, as are CSS gradients, defined in this specification.)</p>

     <p>If an object (such as an icon) has multiple sizes, then the largest
      size is used. If it has multiple aspect ratios of that size (or of no
      size), then the aspect ratio closest to the aspect ratio of the <a href="#default-image-sizing-area"><b>default image sizing area</b></a>
      is used. <span class="issue">This is pretty arbitrary.</span></p>

    </dd><dt><dfn id="specified-size">specified size</dfn>

    </dt><dd>The specified size of an object is given by CSS, such as through the
     ‘<a href="#object-fit0"><code class="property">object-fit</code></a>’ or ‘<code class="property">background-size</code>’ properties. The specified
     size can be a definite width and height, a set of constraints, or a
     combination thereof.

    </dd><dt><dfn id="css-view-box">CSS View Box</dfn>

    </dt><dd>The CSS View Box is the result of transforming the <a href="#intrinsic-dimensions"><b>intrinsic dimensions</b></a> into a
     concrete size, based on the specified size and the <a href="#default-image-sizing-area"><b>default image sizing area</b></a>.
     A CSS View Box always has a definite height and width.

    </dd><dt><dfn id="default-image-sizing-area">default image sizing area</dfn>

    </dt><dd>The default image sizing area is a rectangle with a definite height
     and width used to determine the size of the CSS View Box when both the
     <a href="#intrinsic-dimensions"><b>intrinsic dimensions</b></a> and <a href="#specified-size"><b>specified size</b></a> are missing dimensions.
     It varies based on the property that the image is being used as a value
     in:
     <dl>
      <dt>‘<code class="property">background-image</code>’

      </dt><dd>The <a href="#default-image-sizing-area"><b>default image sizing
       area</b></a> is the size of the background positioning area of the
       element.

      </dd><dt>‘<code class="property">list-style-image</code>’

      </dt><dd>The <a href="#default-image-sizing-area"><b>default image sizing
       area</b></a> is a 1em square.

      </dd><dt>‘<code class="property">border-image</code>’

      </dt><dd>The <a href="#default-image-sizing-area"><b>default image sizing
       area</b></a> is the size of the element's <a href="http://dev.w3.org/csswg/css3-background/#border-image-area"><b>border
       image area</b></a>.

      </dd><dt>‘<code class="property">cursor</code>’

      </dt><dd>The <a href="#default-image-sizing-area"><b>default image sizing
       area</b></a> is a UA-defined size that should be based on the size of
       a typical cursor on the UA's operating system.

      </dd><dt>Anything else

      </dt><dd>The <a href="#default-image-sizing-area"><b>default image sizing
       area</b></a> is a rectangle 300px wide and 150px tall.
     </dd></dl>
   </dd></dl>

   <p>Images and objects in CSS are sized as follows:</p>

   <ol>
    <li>When an image or object is specified in a document, such as through
     url() value in a ‘<code class="property">background-image</code>’ property or a @src
     attribute on an &lt;img&gt; element, CSS queries the object for its <a href="#intrinsic-dimensions"><b>intrinsic dimensions</b></a>.

    </li><li>Using the <a href="#intrinsic-dimensions"><b>intrinsic
     dimensions</b></a> and the <a href="#specified-size"><b>specified
     size</b></a>, CSS then computes a <a href="#css-view-box"><b>CSS View
     Box</b></a> that defines the size of the region the object will render
     in, as follows:
     <ol>
      <li>If the <a href="#specified-size"><b>specified size</b></a> is just
       a definite width and height, the <a href="#css-view-box"><b>CSS View
       Box</b></a> must be that width and height.

      </li><li>If the <a href="#specified-size"><b>specified size</b></a> is just
       a definite width or just a definite height, then the <a href="#css-view-box"><b>CSS View Box</b></a> must have the same width
       or height, as appropriate. The other dimension is calculated as
       follows:
       <ol>
        <li>If the object has an <a href="#intrinsic-aspect-ratio"><b>intrinsic aspect ratio</b></a>,
         the <a href="#css-view-box"><b>CSS View Box</b></a> must have the
         same aspect ratio.

        </li><li>Otherwise, if the object has an an <a href="#intrinsic-height"><b>intrinsic height</b></a> or <a href="#intrinsic-width"><b>intrinsic width</b></a> (whichever is
         missing from the <a href="#specified-size"><b>specified
         size</b></a>), then the <a href="#css-view-box"><b>CSS View
         Box</b></a> must have that height or width.

        </li><li>Otherwise, the <a href="#css-view-box"><b>CSS View Box</b></a>
         must have the same width or height (whichever is missing from the
         specified size) as the <a href="#default-image-sizing-area"><b>default image sizing
         area</b></a>.
       </li></ol>

      </li><li>If the <a href="#specified-size"><b>specified size</b></a> is
       neither a definite width nor height, and has no additional contraints,
       the dimensions of the <a href="#css-view-box"><b>CSS View Box</b></a>
       must be computed as follows:
       <ol>
        <li>If the object has an <a href="#intrinsic-width"><b>intrinsic
         width</b></a> and an <a href="#intrinsic-height"><b>intrinsic
         height</b></a>, the <a href="#css-view-box"><b>CSS View Box</b></a>
         must have that same height and width.

        </li><li>If the object has only an <a href="#intrinsic-width"><b>intrinsic
         width</b></a> or <a href="#intrinsic-height"><b>intrinsic
         height</b></a>, and no <a href="#intrinsic-aspect-ratio"><b>intrinsic aspect ratio</b></a>,
         the <a href="#css-view-box"><b>CSS View Box</b></a> must have that
         width or height, and the height or width (whichever is missing from
         the <a href="#intrinsic-dimensions"><b>intrinsic dimensions</b></a>)
         of the <a href="#default-image-sizing-area"><b>default image sizing
         area</b></a>.

        </li><li>If the object has only an <a href="#intrinsic-aspect-ratio"><b>intrinsic aspect ratio</b></a>,
         the <a href="#css-view-box"><b>CSS View Box</b></a> must have that
         aspect ratio, and additionally be as large as possible without
         either its height or width exceeding the height or width of the <a href="#default-image-sizing-area"><b>default image sizing
         area</b></a>.

        </li><li>Otherwise, the <a href="#css-view-box"><b>CSS View Box</b></a>
         must be the size of the <a href="#default-image-sizing-area"><b>default image sizing
         area</b></a>.
       </li></ol>

      </li><li>If the <a href="#specified-size"><b>specified size</b></a> has
       additional constraints, the <a href="#css-view-box"><b>CSS View
       Box</b></a> must be sized to satisfy those constraints. (For example,
       ‘<code class="css">object-fit: contain</code>’ specifies
       slightly more complex handling for sizing replaced elements, and
       ‘<code class="css">background-repeat: round</code>’ can
       adjust the size specified in ‘<code class="property">background-size</code>’ so that the image fits an
       even number of times into the background positioning area.)
     </li></ol>
   </li></ol>

   <p>After determining the size of the CSS View Box, CSS positions it within
    the appropriate area according to any relevant properties, such as
    object-position or background-position, and asks the object to render
    itself using the dimensions of the CSS View Box. CSS does not define how
    objects render when the dimensions of the CSS View Box are different than
    the object's intrinsic dimensions. The object may adjust itself to match
    the dimensions of the CSS View Box in some way, or even render itself
    larger or smaller than the CSS View Box to satisfy sizing constraints of
    its own.</p>

   <div>
    <h3 id="image-resolution"><span class="secno">6.1. </span>Overriding Image
     Resolutions: the ‘<a href="#image-resolution1"><code class="property">image-resolution</code></a>’ property</h3>

    <p>The <dfn id="image-resolution0">image resolution</dfn> is defined as the
     number of image pixels per unit length, e.g., pixels per inch. Some
     image formats can record information about the resolution of images.
     This information can be helpful when determining the actual size of the
     image in the formatting process. However, the information can also be
     wrong, in which case it should be ignored. By default, CSS assumes a
     resolution of one image pixel per CSS ‘<code class="css">px</code>’ unit; however, the ‘<a href="#image-resolution1"><code class="property">image-resolution</code></a>’ property allows using
     some other resolution.

    </p><table class="propdef">
     <tbody>
      <tr>
       <th>Name:

       </th><td><dfn id="image-resolution1">image-resolution</dfn>

      </td></tr><tr>
       <th>Value:

       </th><td>from-image || &lt;dpi&gt;

      </td></tr><tr>
       <th>Initial:

       </th><td>1dppx

      </td></tr><tr>
       <th>Applies to:

       </th><td>replaced elements <span class="issue">and background images?</span>

      </td></tr><tr>
       <th>Inherited:

       </th><td>yes

      </td></tr><tr>
       <th>Media:

       </th><td>visual

      </td></tr><tr>
       <th>Computed value:

       </th><td>specified value
    </td></tr></tbody></table>

    <p>The ‘<a href="#image-resolution1"><code class="property">image-resolution</code></a>’ property specifies the
     resolution of images. Values have the following meanings:

    </p><dl>
     <dt>&lt;resolution&gt;

     </dt><dd>The value sets the resolution of the image. In combination with
      ‘<code class="css">from-image</code>’, the specified
      resolution is only used if the image does not have a resolution.

     </dd><dt>from-image

     </dt><dd>The UA must look for the resolution in the image itself. If the
      image does not have a resolution, the specified &lt;resolution&gt; value
      is used, or ‘<code class="css">1dppx</code>’ if none is
      given.
    </dd></dl>

    <div class="example">
     <p>This rule specifies that the UA should use the image resolution found
      in the image itself, falling back to 1 image pixel per CSS ‘<code class="css">px</code>’ unit

     </p><pre>		  img { image-resolution: from-image }
		  </pre>
    </div>

    <div class="example">
     <p>Using this rule, the image resolution is set to 300dpi and the
      resolution in the image, if any, is ignored.

     </p><pre>

		  img { image-resolution: 300dpi }
		  </pre>
    </div>

    <div class="example">
     <p>These rules both specify that the UA should use the image resolution
      found in the image itself. If the image has no resolution, the
      resolution is set to 300dpi.

     </p><pre>		  img { image-resolution: from-image 300dpi }
		  img { image-resolution: 300dpi from-image }
		  </pre>
    </div>
   </div>

   <div>
    <h3 id="image-orientation"><span class="secno">6.2. </span>Orienting an Image
     on the Page: the ‘<a href="#image-orientation0"><code class="property">image-orientation</code></a>’ property</h3>

    <p>Images from camera phones, digital cameras or scanners may be encoded
     sideways. For example, the first row of image data may represent the
     leftmost or rightmost column of image pixels. Furthermore, often such
     devices have limited resources, and do not have the capability to rotate
     the image into an upright orientation. However, this type of device may
     have internal knowledge or can accept input from its user as to the
     rotational correction to perform.</p>

    <p>The image-orientation property provides a way to specify an
     "out-of-band" rotation to be applied to image source data. This facility
     is not intended to specify layout transformations such as arbitrary
     rotation or flipping the image in the horizontal or vertical direction.
     It is not needed to correctly orient an image when printing in landscape
     versus portrait orientation, as that rotation is done as part of layout.
     It should only be used to correct incorrectly-oriented images.</p>

    <table class="propdef">
     <tbody>
      <tr>
       <th>Name:

       </th><td><dfn id="image-orientation0">image-orientation</dfn>

      </td></tr><tr>
       <th>Value:

       </th><td>&lt;angle&gt;

      </td></tr><tr>
       <th>Initial:

       </th><td>0deg

      </td></tr><tr>
       <th>Applies to:

       </th><td>images

      </td></tr><tr>
       <th>Inherited:

       </th><td>N/A

      </td></tr><tr>
       <th>Media:

       </th><td>visual

      </td></tr><tr>
       <th>Computed value:

       </th><td>specified value, rounded and normalized (see text)
    </td></tr></tbody></table>

    <p>‘<a href="#image-orientation0"><code class="property">image-orientation</code></a>’ specifies an
     orthogonal rotation to be applied to an image before it is laid out. CSS
     layout processing applies to the image <em>after</em> rotation. This
     implies, for example:</p>

    <ul>
     <li>The intrinsic height and width are derived from the rotated rather
      than the original image dimensions;

     </li><li>The height (width) property applies to the vertical (horizontal)
      dimension of the image, <em>after</em> rotation.
    </li></ul>

    <p>Positive values cause the image to be rotated to the right (in a
     clockwise direction), while negative values cause a rotation to the
     left. The computed value of the property is calculated by rounding the
     specified angle to the nearest quarter-turn (90deg, 100grad, .25turn,
     etc.), rounding away from 0 (that is, 45deg is rounded to 90deg, while
     -45deg is rounded to -90deg), then moduloing the value by 1 turn
     (360deg, 400grad, etc.).

    </p><div class="example">
     <p>The following example rotates the image 90 degrees clockwise:</p>

     <pre>	img.ninety     { image-orientation: 90deg }
	...
	&lt;img class="ninety" src=... /&gt;
			</pre>

     <p>The same effect could be achieved with, for example, an angle of
      -270deg or 450deg.</p>
    </div>
   </div>

   <div>
    <h3 id="image-rendering"><span class="secno">6.3. </span>Determining How to
     Scale an Image: The ‘<a href="#image-rendering0"><code class="property">image-rendering</code></a>’ Property</h3>

    <table class="propdef">
     <tbody>
      <tr>
       <th>Name:

       </th><td><dfn id="image-rendering0">image-rendering</dfn>

      </td></tr><tr>
       <th>Value:

       </th><td>auto | optimize-contrast

      </td></tr><tr>
       <th>Initial:

       </th><td>auto

      </td></tr><tr>
       <th>Applies to:

       </th><td>All elements

      </td></tr><tr>
       <th>Inherited:

       </th><td>Yes

      </td></tr><tr>
       <th>Media:

       </th><td>visual

      </td></tr><tr>
       <th>Computed Value:

       </th><td>specified value
    </td></tr></tbody></table>

    <p>The ‘<a href="#image-rendering0"><code class="property">image-rendering</code></a>’ property provides a
     hint to the user-agent about what aspects of an image are most important
     to preserve when the image is scaled, to aid the user-agent in the
     choice of an appropriate scaling algorithm. When specified on an
     element, it applies to all images given in properties for the element,
     such as background images, list-style images, or the content of replaced
     elements when they represent an image that must be scaled. The values of
     the ‘<a href="#image-rendering0"><code class="property">image-rendering</code></a>’ property are
     interpreted as follows:</p>

    <dl>
     <dt>auto

     </dt><dd>The image should be scaled with an algorithm that maximizes the
      appearance of the image. In particular, scaling algorithms that
      ‘<code class="property">smooth</code>’ colors are acceptable,
      such as bilinear interpolation. This is intended for images such as
      photos.

     </dd><dt>optimize-contrast

     </dt><dd>The image should be scaled with an algorithm that maximizes the
      contrast of the image, preserving sharp lines and not smoothing colors
      or introducing blur to the image in the process. This is intended for
      images such as pixel art.
    </dd></dl>

    <p>This property does <em>not</em> dictate any particular scaling
     algorithm to be used. For example, with ‘<code class="css">image-rendering:auto</code>’, a user agent may scale
     images with bilinear interpolation by default, switch to
     nearest-neighbor interpolation in high-load situations, and switch to a
     high-quality scaling algorithm like Lanczos interpolation for static
     images that aren't moving or changing. Similarly, with ‘<code class="css">image-rendering:optimize-contrast</code>’, a user agent
     may scale images with nearest-neighbor interpolation by default, and
     switch to EPX interpolation in low-load situations.</p>

    <p>This property previously accepted the values ‘<code class="css">optimizeSpeed</code>’ and ‘<code class="css">optimizeQuality</code>’. These are now deprecated; a
     user agent may accept them as valid values, but must treat them as
     aliases for the ‘<code class="css">auto</code>’ value.</p>
   </div>

   <div>
    <h3 id="object-fit"><span class="secno">6.4. </span>Sizing Replaced Elements:
     The ‘<a href="#object-fit0"><code class="property">object-fit</code></a>’ Property</h3>

    <table class="propdef">
     <tbody>
      <tr>
       <th>Name:

       </th><td><dfn id="object-fit0">object-fit</dfn>

      </td></tr><tr>
       <th>Value:

       </th><td>fill | contain | cover | none | scale-down

      </td></tr><tr>
       <th>Initial:

       </th><td>fill

      </td></tr><tr>
       <th>Applies to:

       </th><td>replaced elements

      </td></tr><tr>
       <th>Inherited:

       </th><td>no

      </td></tr><tr>
       <th>Percentages:

       </th><td>N/A

      </td></tr><tr>
       <th>Media:

       </th><td>visual

      </td></tr><tr>
       <th>Computed value:

       </th><td>specified value
    </td></tr></tbody></table>

    <p>The ‘<a href="#object-fit0"><code class="property">object-fit</code></a>’ property specifies how the
     contents of a replaced element should be scaled relative to the box
     established by its used height and width. It also enables scaling a
     replaced element's contents up to a specified maximum size or down to a
     specified minimum size while preserving its aspect ratio.</p>

    <p>Not all replaced elements can be scaled, but images typically can.</p>

    <p>The contents of a replaced element with an intrinsic aspect ratio
     (which may be derived from intrinsic dimensions) are scaled as follows:</p>

    <dl>
     <dt>fill

     </dt><dd>
      <p>Determine the used ‘<code class="property">height</code>’
       and ‘<code class="property">width</code>’ <a href="http://cgi.w3.org/TR/CSS21/visudet.html">as usual</a>. Scale the content height
       and width independently so that the edges of the content just meet the
       edges of the box established by the used ‘<code class="property">height</code>’ and ‘<code class="property">width</code>’.</p>

     </dd><dt>contain

     </dt><dd>
      <p>Determine the used ‘<code class="property">height</code>’
       and ‘<code class="property">width</code>’ <a href="http://cgi.w3.org/TR/CSS21/visudet.html">as usual</a>, except if both
       ‘<code class="property">height</code>’ and ‘<code class="property">width</code>’ are ‘<code class="css">auto</code>’, and the used value of at least one of
       ‘<code class="property">max-width</code>’ and ‘<code class="property">max-height</code>’ is not ‘<code class="property">none</code>’, then compute the element's used
       width and used height as though the intrinsic dimensions of the
       contents were infinitely large numbers whose ratio is the actual
       intrinsic ratio of the contents.</p>

      <p>Scale the contents of the element, preserving their aspect ratio, to
       the largest size such that the width of the contents is less than or
       equal to the used width of the box and the height of the contents is
       less than or equal to the used height of the box.</p>

     </dd><dt>cover

     </dt><dd>
      <p>Determine the used ‘<code class="property">height</code>’
       and ‘<code class="property">width</code>’ <a href="http://cgi.w3.org/TR/CSS21/visudet.html">as usual</a>, except if both
       ‘<code class="property">height</code>’ and ‘<code class="property">width</code>’ are ‘<code class="css">auto</code>’, and the used value of at least one of
       ‘<code class="property">min-width</code>’ and ‘<code class="property">min-height</code>’ is not ‘<code class="css">0</code>’, then compute the used width and used height
       of the element as though the intrinsic dimensions of the contents were
       infinitesimally small numbers whose ratio is the actual intrinsic
       ratio of the contents.</p>

      <p>Scale the contents of the element, preserving their aspect ratio, to
       the smallest size such that the width of the contents is greater than
       or equal to the used width of the box and the height of the contents
       is greater than or equal to the height of the box.</p>

     </dd><dt>none

     </dt><dd>
      <p>Determine the used ‘<code class="property">height</code>’
       and ‘<code class="property">width</code>’ <a href="http://cgi.w3.org/TR/CSS21/visudet.html">as usual</a>. If the content has an
       intrinsic height and width, do not scale it. Otherwise, this value
       must be treated as ‘<code class="css">fill</code>’.</p>

     </dd><dt>scale-down <b class="issue">better name?</b>

     </dt><dd>
      <p>This value must act identically to ‘<code class="css">none</code>’ or ‘<code class="css">contain</code>’, whichever would make the contents
       smaller.</p>
    </dd></dl>

    <p>The ‘<code class="property">overflow</code>’ property
     determines how to render parts of the replaced element's content that
     extend beyond the edges of its box. See the ‘<a href="#object-position0"><code class="property">object-position</code></a>’ property for
     positioning the object with respect to the element's box.</p>

    <div class="figure">
     <p><img alt="" src="Overview_files/img_scale.html" style="border: thin solid black;"></p>

     <p class="caption"> An example showing how each of the four values of
      ‘<a href="#object-fit0"><code class="property">object-fit</code></a>’ causes the replaced element
      (blue figure) to be scaled to fit its height/width box (shown with a
      green background), with overflow ‘<code class="property">visible</code>’ and ‘<code class="property">hidden</code>’, using the initial value for
      ‘<a href="#object-position0"><code class="property">object-position</code></a>’.</p>
    </div>

    <p class="note">Note: the ‘<a href="#object-fit0"><code class="property">object-fit</code></a>’ property has similar
     semantics to the fit attribute in <a href="#SMIL10" rel="biblioentry">[SMIL10]<!--{{SMIL10}}--></a>.</p>
   </div>

   <div>
    <h3 id="object-position"><span class="secno">6.5. </span>Positioning Replaced
     Images: The ‘<a href="#object-position0"><code class="property">object-position</code></a>’ Property</h3>

    <table class="propdef">
     <tbody>
      <tr>
       <th>Name:

       </th><td><dfn id="object-position0">object-position</dfn>

      </td></tr><tr>
       <th>Value:

       </th><td>[ [ &lt;percentage&gt; | &lt;length&gt; | left | center | right ] [
        &lt;percentage&gt; | &lt;length&gt; | top | center | bottom ]? ] | [ [ left
        | center | right ] || [ top | center | bottom ] ]

      </td></tr><tr>
       <th>Initial:

       </th><td>50% 50%

      </td></tr><tr>
       <th>Applies to:

       </th><td>replaced elements

      </td></tr><tr>
       <th>Inherited:

       </th><td>no

      </td></tr><tr>
       <th>Percentages:

       </th><td>refer to width and height of box itself

      </td></tr><tr>
       <th>Media:

       </th><td>visual

      </td></tr><tr>
       <th>Computed value:

       </th><td>specified value
    </td></tr></tbody></table>

    <p>The ‘<a href="#object-position0"><code class="property">object-position</code></a>’ property determines the
     alignment of the replaced element inside its box. The values have the
     same meaning as the values for the <a href="http://w3.org/TR/CSS21/colors.html#propdef-background-position">‘<code class="property">background-position</code>’</a> property, using the
     image as the image and the content box as the positioning area. <a href="#CSS21" rel="biblioentry">[CSS21]<!--{{!CSS21}}--></a></p>

    <p class="note">Note that areas of the box not covered by the replaced
     element will show the element's background.</p>
   </div>
  </div>

  <div>
   <h2 id="serialization"><span class="secno">7. </span>Serialization</h2>

   <p>This section describes the serialization of all new properties and
    value types introduced in this specification, for the purpose of
    interfacing with the CSS Object Model <a href="#CSSOM" rel="biblioentry">[CSSOM]<!--{{CSSOM}}--></a>.</p>

   <p>All of these algorithms refer to a variable "s". For each, let s
    initially be the empty string, run the steps described, and then return
    s.</p>

   <div>
    <h3 id="serializing-resolution"><span class="secno">7.1. </span>Serializing a
     &lt;resolution&gt;</h3>

    <p>The serialization of the <b>&lt;resolution&gt;</b> value type is defined
     in the CSSOM spec.</p>

    <p class="note">This spec defines several new units for resolutions. These
     can all be converted to the canonical "dpcm" unit that CSSOM defines the
     serialization in terms of.</p>
   </div>

   <div>
    <h3 id="serializing-url-notation"><span class="secno">7.2. </span>Serializing
     the ‘<code class="css">url()</code>’ notation</h3>

    <p>The serialization of the url() function is defined in the CSSOM spec.</p>
   </div>

   <div>
    <h3 id="serializing-image-notation"><span class="secno">7.3.
     </span>Serializing the ‘<code class="css">image()</code>’ / <a href="#ltimage-list"><b>&lt;image-list&gt;</b></a> notation</h3>

    <p>To serialize an <a href="#ltimage-list"><b>&lt;image-list&gt;</b></a>:</p>

    <ol>
     <li>Append "image(" to s.

     </li><li>For each argument, serialize the argument as an &lt;image-decl&gt;,
      &lt;color&gt;, &lt;element-reference&gt;, or &lt;gradient&gt; as appropriate,
      and append it to s. Then, if it is not the final argument, append a
      comma and a space ", " to s.

     </li><li>Append a close parenthesis ")" to s.
    </li></ol>

    <p>To serialize an <a href="#ltimage-decl"><b>&lt;image-decl&gt;</b></a>:</p>

    <ol>
     <li>Serialize the first part of the value (the &lt;string&gt; or
      &lt;url-token&gt;) as a string.

     </li><li>If a &lt;resolution&gt; was provided, append a space " " to s. Then
      serialize the &lt;resolution&gt; and append it to s.

     </li><li>If the ‘<code class="property">snap</code>’ keyword was
      provided, append a space " " and the literal string "snap" to s.
    </li></ol>
   </div>

   <div>
    <h3 id="serializing-element-notation"><span class="secno">7.4.
     </span>Serializing the ‘<code class="css">element()</code>’ /
     <a href="#ltelement-reference"><b>&lt;element-reference&gt;</b></a>
     notation</h3>

    <p>To serialize an <a href="#ltelement-reference"><b>&lt;element-reference&gt;</b></a>:</p>

    <ol>
     <li>Append "element(" to s.

     </li><li>Serialize the argument as a selector or identifier, as appropriate,
      and append it to s.

     </li><li>Append a close parenthesis ")" to s.
    </li></ol>
   </div>

   <div>
    <h3 id="serializing-cross-fade"><span class="secno">7.5. </span>Serializing
     the ‘<code class="css">cross-fade()</code>’ / <a href="#ltimage-combination"><b>&lt;image-combination&gt;</b></a> notation</h3>

    <p>To serialize an <a href="#ltimage-combination"><b>&lt;image-combination&gt;</b></a>:</p>

    <ol>
     <li>Append "cross-fade(" to s.

     </li><li>Serialize the first argument to the function as an <a href="#ltimage"><b>&lt;image&gt;</b></a>, and append it to s.

     </li><li>Append a comma and a space ", " to s.

     </li><li>Serialize the second argument to the function as an <a href="#ltimage"><b>&lt;image&gt;</b></a>, and append it to s.

     </li><li>Append a comma and a space ", " to s.

     </li><li>Serialize the third argument to the function as a &lt;percentage&gt;,
      and append it to s.

     </li><li>Append a close parenthesis ")" to s.
    </li></ol>
   </div>

   <div>
    <h3 id="serializing-gradients"><span class="secno">7.6. </span>Serializing
     Gradients</h3>

    <p>To serialize a <a href="#ltlinear-gradient"><b>&lt;linear-gradient&gt;</b></a>:</p>

    <ol>
     <li>Append "linear-gradient(" to s.

     </li><li>
      <ul>
       <li>If the first argument to the gradient function was a single
        keyword, serialize the keyword and append it to s.

       </li><li>Otherwise, if the first argument to the gradient function was two
        keywords, serialize the vertical keyword (‘<code class="css">top</code>’ or ‘<code class="css">bottom</code>’) and append it to s, then append a
        space " " to s, then serialize the horizontal keyword (‘<code class="css">left</code>’ or ‘<code class="css">right</code>’) and append it to s.

       </li><li>Otherwise, if the first argument to the gradient function was an
        &lt;angle&gt;, serialize the &lt;angle&gt; and append it to s.

       </li><li>Otherwise, append "top" to s.
      </li></ul>

     </li><li>Append a comma and a space ", " to s.

     </li><li>For each color-stop in the gradient, serialize the color-stop, and
      append it to s. Then, if it is not the final color-stop, append a comma
      and a space ", " to s.

     </li><li>Append a close parenthesis ")" to s.
    </li></ol>

    <p>To serialize a <a href="#ltradial-gradient"><b>&lt;radial-gradient&gt;</b></a>:</p>

    <ol>
     <li>Append "radial-gradient(" to s.

     </li><li>If a &lt;bg-position&gt; was specified in the first argument to the
      gradient function, serialize it and append it to s. Otherwise, append
      "center" to s.

     </li><li>Append a comma and a space ", " to s.

     </li><li>
      <ul>
       <li>If a &lt;shape&gt; and/or &lt;size&gt; was specified in the second
        argument to the gradient function:
        <ol>
         <li>If a &lt;shape&gt; was specified, serialize it as a keyword and
          append it to s. Otherwise, append "ellipse" to s.

         </li><li>Append a space " " to s.

         </li><li>If a &lt;size&gt; was specified, serialize it as a keyword and
          append it to s. Otherwise, append "cover" to s.
        </li></ol>

       </li><li>Otherwise, if two &lt;length&gt;s or &lt;percentage&gt;s were specified
        in the second argument to the gradient function:
        <ol>
         <li>Serialize the first &lt;length&gt; or &lt;percentage&gt; and append it
          to s.

         </li><li>Append a space " " to s.

         </li><li>Serialize the second &lt;length&gt; or &lt;percentage&gt; and append
          it to s.
        </li></ol>

       </li><li>Otherwise, append "ellipse cover" to s.
      </li></ul>

     </li><li>Append a comma and a space ", " to s.

     </li><li>For each color-stop in the gradient, serialize the color-stop, and
      append it to s. Then, if it is not the final color-stop, append a comma
      and a space ", " to s.

     </li><li>Append a close parenthesis ")" to s.
    </li></ol>

    <p>To serialize a <a href="#ltrepeating-linear-gradient"><b>&lt;repeating-linear-gradient&gt;</b></a>:</p>

    <ol>
     <li>Append "repeating-linear-gradient(" to s.

     </li><li>Follow the steps for serializing a <a href="#ltlinear-gradient"><b>&lt;linear-gradient&gt;</b></a>, except skip
      step 1.
    </li></ol>

    <p>To serialize a <a href="#ltrepeating-radial-gradient"><b>&lt;repeating-radial-gradient&gt;</b></a>:</p>

    <ol>
     <li>Append "repeating-radial-gradient(" to s.

     </li><li>Follow the steps for serializing a <a href="#ltradial-gradient"><b>&lt;radial-gradient&gt;</b></a>, except skip
      step 1.
    </li></ol>

    <p>To serialize a <a href="#ltcolor-stop"><b>&lt;color-stop&gt;</b></a>:</p>

    <ol>
     <li>Serialize the &lt;color&gt;, and append it to s.

     </li><li>If a &lt;length&gt; or &lt;percentage&gt; was specified, append a space "
      " to s, then serialize the &lt;length&gt; or &lt;percentage&gt; and append it
      to s.
    </li></ol>
   </div>

   <div>
    <h3 id="serializing-properties"><span class="secno">7.7. </span>Serializing
     new properties</h3>

    <p>To serialize the ‘<a href="#image-resolution1"><code class="property">image-resolution</code></a>’ property:

    </p><ol>
     <li>If the ‘<code class="css">from-image</code>’ keyword is
      specified in the property value, append "from-image" to s.

     </li><li>If both the ‘<code class="css">from-image</code>’ keyword
      and a &lt;resolution&gt; are specified, append a space " " to s.

     </li><li>If a &lt;resolution is specified, serialize it and append it to s.
    </li></ol>

    <p>To serialize the ‘<a href="#image-orientation0"><code class="property">image-orientation</code></a>’ property:</p>

    <ol>
     <li>Serialize the &lt;angle&gt; and append it to s.
    </li></ol>

    <p>To serialize the ‘<a href="#image-rendering0"><code class="property">image-rendering</code></a>’ property:</p>

    <ol>
     <li>Serialize the keyword and append it to s.
    </li></ol>

    <p>To serialize the ‘<a href="#object-fit0"><code class="property">object-fit</code></a>’ property:</p>

    <ol>
     <li>Serialize the keyword and append it to s.
    </li></ol>

    <p>To serialize the ‘<a href="#object-position0"><code class="property">object-position</code></a>’ property:

    </p><ol>
     <li>Serialize the value as a &lt;bg-position&gt; and append it to s.
    </li></ol>
   </div>
  </div>

  <div>
   <h2 id="interpolation"><span class="secno">8. </span>Interpolation</h2>

   <p>This section describes how to interpolate between new value types
    defined in this specification, for use with modules such as CSS
    Transitions and CSS Animations.</p>

   <p>If an algorithm below simply states that two values should be
    "interpolated" or "transitioned" without further details, then the value
    should be interpolated as described by the Transitions spec. Otherwise,
    the algorithm may reference a variable "t" in its detailed description of
    the interpolation. This is a number which starts at 0% and goes to 100%,
    and is set to a value that represents the progress through the
    transition, based on the duration of the transition, the elapsed time,
    and the timing function in use. For example, with a linear timing
    function and a 1s duration, after .3s t is equal to .3.</p>

   <div>
    <h3 id="interpolating-ltimage"><span class="secno">8.1. </span>Interpolating
     <a href="#ltimage"><b>&lt;image&gt;</b></a></h3>

    <p>All images can be interpolated, though some special types of images
     (like some gradients) have their own special interpolation rules. In
     general terms, images are interpolated by scaling them to the size of
     the start image and cross-fading the two while they transition to the
     size of the end image.</p>

    <p>In specific terms, at each point in the interpolation the image is
     equal to <code>cross-fade(&lt;start image&gt;, &lt;end image&gt;, t)</code>.</p>
   </div>

   <div>
    <h3 id="interpolating-gradients"><span class="secno">8.2.
     </span>Interpolating <a href="#ltgradient"><b>&lt;gradient&gt;</b></a></h3>

    <p>Gradient images can be interpolated directly in CSS transitions and
     animations, smoothly animating from one gradient to another. There are
     only a few restrictions on what gradients are allowed to be
     interpolated:</p>

    <ol>
     <li>Both the starting and ending gradient must be expressed with the
      same function. (For example, you can transition from a
      linear-gradient() to a linear-gradient(), but not from a
      linear-gradient() to a radial-gradient() or a
      repeating-linear-gradient().)

     </li><li>Both the starting and ending gradient must have the same number of
      color-stops. For this purpose, a repeating gradient is considered to
      have infinite color-stops, and thus all repeating gradients have the
      same number of color-stops. (Note that one may pad a gradient with
      additional color-stops placed atop each other, if necessary to make two
      gradients have the same number of color-stops.)
    </li></ol>

    <p>If the two gradients satisfy both of those constraints, they must be
     interpolated as described below. If not, they must be interpolated as a
     generic image.</p>

    <ol>
     <li>Convert both the start and end gradients to their used value.

     </li><li>Interpolate each component and color-stop of the gradients
      independently. For linear gradients, the only component is the angle.
      For radial gradients, the components are the horizontal and vertical
      position of the center and the horizontal and vertical axis lengths.

     </li><li>To interpolate a color-stop, first match each color-stop in the
      start gradient to the corresponding color-stop at the same index in the
      end gradient. For repeating gradients, the first specified color-stop
      in the start and end gradients are considered to be at the same index,
      and all other color-stops following and preceding are indexed
      appropriately. Then, for each pair of color-stops, interpolate the
      position and color independently.
    </li></ol>
   </div>
  </div>

  <h2 class="no-num" id="acknowledgments">Acknowledgments</h2>

  <h2 class="no-num" id="references">References</h2>

  <h3 class="no-num" id="normative-references">Normative references</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class="bibliography">
   <dt style="display: none;"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   </dt><dt id="CSS21">[CSS21]

   </dt><dd>Bert Bos; et al. <a href="http://www.w3.org/TR/2009/CR-CSS2-20090908"><cite>Cascading Style
    Sheets Level 2 Revision 1 (CSS 2.1) Specification.</cite></a> 8 September
    2009. W3C Candidate Recommendation. (Work in progress.) URL: <a href="http://www.w3.org/TR/2009/CR-CSS2-20090908">http://www.w3.org/TR/2009/CR-CSS2-20090908</a>
    </dd>
   <!---->

   <dt id="CSS3VAL">[CSS3VAL]

   </dt><dd>Chris Lilley; Håkon Wium Lie. <a href="http://www.w3.org/TR/2006/WD-css3-values-20060919"><cite>CSS3
    Values and Units.</cite></a> 19 September 2006. W3C Working Draft. (Work
    in progress.) URL: <a href="http://www.w3.org/TR/2006/WD-css3-values-20060919">http://www.w3.org/TR/2006/WD-css3-values-20060919</a>
    </dd>
   <!---->

   <dt id="RFC2119">[RFC2119]

   </dt><dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key
    words for use in RFCs to Indicate Requirement Levels.</cite></a> Internet
    RFC 2119. URL: <a href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
    </dd>
   <!---->

   <dt id="SELECT">[SELECT]

   </dt><dd>Tantek Çelik; et al. <a href="http://www.w3.org/TR/2009/PR-css3-selectors-20091215"><cite>Selectors
    Level 3.</cite></a> 15 December 2009. W3C Proposed Recommendation. (Work
    in progress.) URL: <a href="http://www.w3.org/TR/2009/PR-css3-selectors-20091215">http://www.w3.org/TR/2009/PR-css3-selectors-20091215</a>
    </dd>
   <!---->
  </dl>
  <!--end-normative-->

  <h3 class="no-num" id="informative-references">Informative references</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class="bibliography">
   <dt style="display: none;"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   </dt><dt id="CSS3BG">[CSS3BG]

   </dt><dd>Bert Bos; Elika J. Etemad; Brad Kemper. <a href="http://www.w3.org/TR/2010/WD-css3-background-20100612"><cite>CSS
    Backgrounds and Borders Module Level 3.</cite></a> 12 June 2010. W3C
    Working Draft. (Work in progress.) URL: <a href="http://www.w3.org/TR/2010/WD-css3-background-20100612">http://www.w3.org/TR/2010/WD-css3-background-20100612</a>
    </dd>
   <!---->

   <dt id="CSSOM">[CSSOM]

   </dt><dd>Anne van Kesteren. <cite>CSSOM.</cite> (forthcoming). W3C Working
    Draft. (Work in progress.)</dd>
   <!---->

   <dt id="SMIL10">[SMIL10]

   </dt><dd>Philipp Hoschka. <a href="http://www.w3.org/TR/1998/REC-smil-19980615"><cite>Synchronized
    Multimedia Integration Language (SMIL) 1.0 Specification.</cite></a> 15
    June 1998. W3C Recommendation. URL: <a href="http://www.w3.org/TR/1998/REC-smil-19980615">http://www.w3.org/TR/1998/REC-smil-19980615</a>
    </dd>
   <!---->
  </dl>
  <!--end-informative-->
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
</body></html>