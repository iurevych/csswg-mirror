<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <title>CSS3 Values and Units</title>
  <style type="text/css">
    .issue { color: red }
    table { border-collapse: collapse; border: 1px solid black; margin: 1em 0 }
    th, td { border: 1px solid black; padding: 0.2em; text-align: left }
    tt.declaration { white-space: nowrap }
    .del { text-decoration: line-through}
    .say { font-style: italic }
  </style>
  <link rel="stylesheet" type="text/css" href="../default.css">
  <link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/TR/W3C-[STATUS].css">
</head>


<body>
<div class="head">
<!--logo-->

<h1 id="css3-template">CSS3 Values and Units</h1>

<h2 class="no-num no-toc">[LONGSTATUS] [DATE]</h2>

<dl>
<dt>This version:</dt>

<dd><a href="[VERSION]">[VERSION]</a></dd>

<dt>Latest version:</dt>

<dd><a href="http://www.w3.org/TR/css3-values">[LATEST]</a></dd>

<dt>Previous version:</dt>

<dd><a href="http://www.w3.org/TR/2005/WD-css3-values-20050726">http://www.w3.org/TR/2005/WD-css3-values-20050726</a></dd>

<dt>Editors:</dt>
<dd>H&aring;kon Wium Lie, Opera Software &lt;howcome@opera.com&gt;</dd>
<dd>Chris Lilley, W3C &lt;chris@w3.org&gt;</dd>
</dl>


<!--copyright-->

<hr title="Separator for header">
</div>


<h2 class="no-num no-toc" id="abstract">Abstract</h2>

<p>This CSS3 module describes the various values and units that CSS
properties accept. Also, it describes how values are computed from
"specified" through "computed" and "used" into "actual" values. The
main purpose of this module is to define common values and units in
one specification which can be referred to by other modules. As such,
it does not make sense to claim conformance with this module
alone.</p>

<h2 class="no-num no-toc" id="status">Status of this document</h2>

<!--status-->

<p>All features described in this specification that also
exist in CSS 2.1 [[!CSS21]] are intended to be backwards compatible.
In case of conflict between this draft and CSS&nbsp;2.1 [[!CSS21]],
CSS&nbsp;2.1 probably represents the intention of the CSS WG better
than this draft (other than on values and units that are new to
CSS3).

<p>This is a draft of a <a href="http://www.w3.org/TR/css3-roadmap/">module
of CSS level 3</a>. It will probably be bundled with some other modules
before it becomes a <a href="http://www.w3.org/TR/#About">W3C
Recommendation</a>.</p>


<h2 class="no-num no-toc" id="contents">Table of contents</h2>

<!--toc-->

<h2>Dependencies on other modules</h2>

<p>This CSS3 module depends on the following other CSS3 modules:</p>

<ul>
  <li><cite>Cascading and Inheritance</cite> [[!CSS3CASCADE]], which describes how to find the
    <cite>resulting value</cite> from several competing values. Also, it describes how
    to replace the "inherit" keyword with the inherited value.</li>
  <li><cite>Syntax</cite> [[!CSS3SYN]], which describes the syntax of values at the
    lexical level.</li>
  <li><cite>Color</cite> [[!CSS3COLOR]], which defines additional values used for some properties that control color of text, borders, etc</li>
  <li><cite>Fonts</cite> [[!CSS3FONT]], which describes additional values used for font-related properties</li>
</ul>


<h2>Introduction</h2>

<p>By setting property values on elements in a document, style sheets
express the appearance of the document. In order to express rich
designs, a wide range of values and associated units are necessary.
This specifiction describes the various types of values and units that
can be used in CSS style sheets.


<h2>Value definitions</h2>

<p>Each CSS property has a value definition field in the property description. 
The value definition describes what types of values the property accepts. The
syntax used in the value definitions field is <a href="http://www.w3.org/TR/css3-syntax/#property-def-value">defined</a> in [[!CSS3SYN]].


<div class=example>
<p>Here are some sample properties with corresponding value definition fields:
<table>
<tr><th>Property<th>Value definition field
<tr><td>min-width<td>&lt;length&gt; | &lt;percentage&gt; | inherit
<tr><td>outline-color<td>&lt;color&gt; | invert | inherit
<tr><td>orphans<td>&lt;integer&gt; | inherit
<tr><td>pitch<td>&lt;frequency&gt; | x-low | low | medium | high | x-high | inherit
<tr><td>string-set<td>[[ &lt;identifier> &lt;content-list>] [, &lt;identifier> &lt;content-list>]* ] | none
</table>
</div>

<p>The value definition fields contain keywords, data types (which appear between "<" and ">", and information on how they can be combined. Generic data types (&lt;length&gt; being the most widely used) that can be used by many properties are described in this specification, while more specific data types (e.g., &lt;border-width&gt;) are described in the corresponding modules. 

<h2>Syntax and terminology</h2>

<p>The generic data types described in the next sections use some
common syntactic building blocks and terms that are described in this
section.

<h3>Integers</h3>

<p>An <dfn>integer<dfn> is one or more decimal digits "0" to "9".
Integers may be preceded by "-" or "+" to indicate the sign.

<div class="example">
<pre>
orphans: 3
</pre>
</div>

<h3>Numbers</h3>

<p>A <dfn>number</dfn> is either an integer, or zero or more decimal
digits followed by a dot (.) followed by one or more decimal digits.
Numbers may be preceded by "-" or "+" to indicate the sign.

<div class=example>
<pre>
line-height: 1.2
</pre>
</div>

<h3>Numbers with unit identifiers</h3>

<p>A <dfn>number with a unit identifier<dfn> is a number immediately followed by a unit identifier.

<div class="example">
<pre>
border-left: -1.2em
</pre>
</div>

<h3>Identifiers</h3>

<p>An <dfn>identifer</dfn> is an seqence of characters. Identifiers
cannot start with a digit, and there are other restrictions
[[!CSS3SYN]] on what characters an identifier can contain. Identifiers
must not be quoted.</p>

<div class="example">
<pre>
pitch-range: inherit;
counter-increment: header;
</pre>
</div>


<h3>Strings</h3>

<p>A <dfn>string</dfn> is a sequence of characters enclosed by double quotes or single quotes. Double quotes cannot occur inside double quotes, unless escaped (as '\"' or as '\22'). Analogously for single quotes ("\'" or "\27").<!--"-->

<div class=example>
<pre>
content: "this is a 'string'";
content: "this is a \"string\"";
content: 'this is a "string"';
content: 'this is a \'string\'';
</pre>
</div>

<p>A string cannot directly contain a <span class="index">newline</span>. To
include a newline in a string, use the escape "\A" (hexadecimal A is the line
feed character in Unicode (U+000A), but represents the generic notion of "newline" in
CSS). See the <span class="property">'content'</span> property for an
example.</p>

<p>It is possible to break strings over several lines, for esthetic or
other reasons, but in such a case the newline itself has to be escaped
with a backslash (\). The newline is subsequently removed from the
string. For instance, the following two selectors are exactly the
same:</p>

<div class="example">
<p style="display:none">Example(s):</p>
<pre>
a[title="a not s\
o very long title"] {/*...*/}
a[title="a not so very long title"] {/*...*/}
</pre>
</div>


<h3>Functional notation</h3>

<p>Some values use a <dfn>functional notation</dfn> to type values and
to and lump values together. The syntax starts with the name of the
function followed by a left parenthesis followed by optional
whitespace followed by the argument(s) to the functions followed by
optional whitespace followed by a right parenthesis. If a function
takes more than one argument, the arguments are separated by a comma
(',') with optional whitespace before and after the comma.

<div class="example">
background: url(http://www.example.org/image);
color: rgb(100, 200, 50 );
</div>

<p>Some properties accept space- or comma-separated lists of values. A value
that is composed of several values with spaces or commas between them,
is called a <dfn>compound value</dfn>. A value that is not a compound
value is a <dfn>simple value</dfn>.


<h2>Keywords</h2>

<p>In the value definition fields, keywords appear literally. Keywords are identifiers.</p>

<div class="example">
<p>For example, here is the value definition for the 'border-collapse'
property:</p>
<pre>
Value:&nbsp;collapse | separate
</pre>

<p>And here is an example of its use:</p>
<pre>
table { border-collapse: separate }
</pre>
</div>

<p>All CSS3 properties accept the keyword values <span class="css">'inherit'</span> and <span class="css">'initial'</span>, as described in [[!CSS3CASCADE]].


<p class="issue">Would it be useful to have a 'default' value, defined
to be equivalent to <span class="css">'inherit'</span> for properties
that are inherited by default and equivalent to <span
class="css">'initial'</span> for properties that are not inherited by
default? This might be easier for authors to use than <span
class="css">'initial'</span> and <span class="css">'inherit'</span>
since it wouldn't require thinking about whether a property is
inherited by default or not (which isn't obvious for some properties,
such as text-decoration and visibility).</p>


<h2>Generic data types</h2>

<h3>&lt;integer&gt;</h3>

<p>Integer values are denoted by <dfn>&lt;integer&gt;</dfn> in the value
definitions. Properties may restrict the integer value to some range.
If the value is outside the allowed range, the declaration is ignored.

<h3>&lt;number&gt;</h3>

<p>Number values are denoted by <dfn>&lt;number&gt;</dfn> in the value
definitions. Properties may restrict the number value to some range.
If the value is outside the allowed range, the declaration is ignored.

<h3>&lt;length&gt;</h4>

<p>Lengths are denoted by <dfn>&lt;length&gt;</dfn> in the property
definitions. Lengths refer to horizontal or vertical measurements.
Lengths are numbers with a unit identifier. After the '0' length, the
unit identifier is optional.</p>

<p>Some properties allow negative length values, but this may
complicate the formatting and there may be implementation-specific
limits. If a negative length value is allowed but cannot be supported,
it should be converted to the nearest value that can be supported.</p>

<p>There are several types of length units. <dfn>Relative length
units</dfn> specify a length relative to other lengths,
while <dfn>absolute length units</dfn> express fixed lengths. 

<h4>Absolute length units: cm, mm. in, pt, pc</h4>

<p>Absolute length units are useful when the physical
properties of the output medium are known. The absolute units are:</p>

<table>
<tr><th>unit<th>definition
<tr><td><span class="css">cm</span><td>centimeters
<tr><td><span class="css">mm</span><td>millimeters
<tr><td><span class="css">in</span><td>inches; 1 inch is equal to 2.54 centimeters.
<tr><td><span class="css">pt</span><td>points; 1pt is equal to 1/72 inch.
<tr><td><span class="css">pc</span><td>picas; 1 pica is equal to 12 points.
</table>

<div class="example">

<pre>
h1 { margin: 0.5in }      /* inches  */
h2 { line-height: 3cm }   /* centimeters */
h3 { word-spacing: 4mm }  /* millimeters */
h4 { font-size: 12pt }    /* points */
h4 { font-size: 1pc }     /* picas */</pre>
</div>

<p>In cases where the specified length cannot be supported, user agents must
approximate it in the actual value.</p>


<h4>Relative length units</h4>

<p>Relative units are:</p>

<table>
<tr><th>unit<th>relative to
<tr><td><span class="css">em</span><td>the font size of the element (or, to the parent element's font size if set on the <span class="property">'font-size'</span> property)
<tr><td><span class="css">ex</span><td>the <em>x-height</em> of the element's font
<tr><td><span class="css">px</span<td>viewing device
<tr><td><span class="css">rem</span><td>the font size of the root element
<tr><td><span class="css">vw</span><td>the viewport's width
<tr><td><span class="css">vh</span><td>the viewport's height
<tr><td><span class="css">vm</span><td>the viewport's height or width, whichever is smaller of the two
<tr><td><span class="css">ch<span><td>The width of the "0" (ZERO, U+0030) glyph found in the font for the font size used to render. If the "0" glyph is not found in the font, the average character width may be used. <span class="issue">How is the "average character width" found?</span>
</table>


<h5>The 'em' unit</h5>

<p>The <dfn title="em (unit)">em</dfn> unit is equal to the
computed value of the 'font-size' property of the element on which it
is used. The exception is when "em" occurs in the value of the
'font-size' property itself, in which case it refers to the font size
of the parent element. 

<p>When specified on the 'font-size' property of the root element, the ''em'' units refer to the
property's <em>initial value</em>.</p>


<p>The rule:</p>

<pre class="example">
h1 { line-height: 1.2em }
</pre>

<p>means that the line height of <code>h1</code> elements will be 20% greater than the font size of the elements. On the other hand:</p>

<pre class="example">
h1 { font-size: 1.2em }
</pre>

<p>means that the font size of <code>h1</code> elements will be 20%
greater than the font size inherited by <code>h1</code> elements.</p> </div>


<div class="example">
<pre>
h1 { margin: 0.5em }      /* em */
h1 { margin: 1ex }        /* ex */
p  { font-size: 12px }    /* px */
</pre>
</div>

<h5>The 'ex' unit</h5>

<p>The <dfn title="x-height|ex (unit)">ex</dfn> unit is defined by the
font's x-height. The x-height is so called because it is often equal to the
height of the lowercase "x". However, an ''ex'' is defined even for fonts that
do not contain an "x". <span class="issue">Should we say that ex is 0.5em if no better value exists?</span></p>

<p>When specified on the 'font-size' property of the root element, the ''ex'' units refer to the
property's <em>initial value</em>.</p>


<h5>The 'px' unit</h5>

<p>The pixel unit, <dfn title="pixel unit|px (pixel)">px</dfn> is relative to the resolution of the viewing device.
For example, the viewing device can be a computer display or a
printer. Normally, the pixel unit refers to physical pixels of the
viewing device. However, if the pixel density of the output device is
very different from that of a typical computer display, the user agent
should rescale pixel values. It is recommended that the <dfn>reference
pixel</dfn> be the visual angle of one pixel on a device with a pixel
density of 96dpi and a distance from the reader of an arm's length.
For a nominal arm's length of 28 inches, the visual angle is therefore
about 0.0213 degrees.</p>

<p>For reading at arm's length, 1px thus corresponds to about 0.26mm
(1/96&nbsp;inch). When printed on a laser printer, meant for reading at a little
less than arm's length (55&nbsp;cm, 21&nbsp;inches), 1px is about 0.21mm. On a 300
dots-per-inch (dpi) printer, that may be rounded up to 3 dots (0.25&nbsp;mm); on a
600&nbsp;dpi printer, it can be rounded to 5 dots.</p>

<p>The two images below illustrate the effect of viewing distance on the size
of a pixel and the effect of a device's resolution. In the first image, a
reading distance of 71cm (28&nbsp;inch) results in a px of 0.26mm, while a
reading distance of 3.5m (12&nbsp;feet) requires a px of 1.3mm.</p>

<div class="figure">
<p><img src="pixel1" alt="Showing that pixels must become larger if the viewing distance increases">
</p>
</div>

<p>In the second image, an area of 1px by 1px is covered by a single dot in a
low-resolution device (a computer screen), while the same area is covered by
16 dots in a higher resolution device (such as a 400&nbsp;dpi laser printer).</p>

<div class="figure">
<p><img src="pixel2"
alt="Showing that more device pixels (dots) are needed to cover a 1px by 1px area on a high-resolution device than on a low-res one">
</p>
</div>


<h5>The 'rem' unit</h5>

<p>The <dfn title="root em|rem (unit)">rem</dfn> unit ("root em") is
relative to the computed value of 'font-size' on the root element. 

<p>When specified on the 'font-size' property of the root element, the
''rem'' units refer to the property's <em>initial value</em>.</p>

<h5>The 'vw' unit</h5>

<p>The <dfn title="vw (unit)">vw</dfn> unit is relative to
the viewport's width. The viewport's width is equal to 100
'vw' units. 

<div class="example">
<p style="display:none">Example:
<pre>
h1 { font-size: 8vw }
</pre>
</div>

<p>If the width of the viewport is 200mm, the font size of <code
class="html">h1</code> elements will be 16mm ((8&times;200)/100). When
the width of the viewport is changed (for example, when the browser
window is enlarged), lengths specifed in the 'vh' unit is scaled
propertionally.

<h5>The 'vh' unit</h5>

<p>The <dfn title="vh (unit)">vh</dfn> unit is relative to
the viewport's height. The viewport's width is equal to 100
'vh' units. When the height of the viewport is changed (for example,
when the browser window is enlarged), lengths specifed in the 'vh'
unit are scaled proportionally.


<h5>The 'vm' unit</h5>

<p>The <dfn title="vm (unit)">vm</dfn> unit is relative to
the viewport's height or width, whichever of the two is smaller.
The minimum of the viewport's width/height is equivalent to 100 ''vm''
units. When the height or width of the viewport is changed, lengths
specified in the 'vm' unit are scaled proportionally.

<h4>The 'calc' function</h4>

<p>The <dfn>calc(&lt;expression&gt;)</dfn> function can be used wherever length values are allowed, with the syntax given below.

<!--
The expression within the parethesis is computed at the same time as 'em' lengths are
computed
-->

<div class="example">
<pre>
section {
  float: left;
  margin: 1em; border: solid 1px;
  width: calc(100%/3 - 2*1em - 2*1px);
}
</pre>
</div>

<div class="example">
<pre>
p {
  margin: calc(1rem - 2px) calc(1rem - 1px);
  border: solid transparent; border-width: 2px 1px;
}
</pre>
</div>


<p>The simple expression language of the 'calc()' function supports
five arithmetic operators (+ and - have lowest precedence, *, /, and
'mod' have highest precedence) and parentheses.

<p>A value is ignored if a division by zero or other mathemathical
 errors occur in the calculation.

<div class="example">
<p>In this example, the second declaration will be ignored due to a
division by zero.
<pre>
p { 
 margin: 1em;
 margin: calc(1em-2px) calc(1em/0) 
}
</pre>
</div>


<p class=issue>Issue: At a later date new operators such as min/max, conditionals, new constants, division by length units etc. may be added.


<p>The expression language is defined by 'length-expression' below:

<pre>
  &lt;length> := calc( &lt;length-expression> ) | &lt;atomic-length>

  &lt;length-expression> := &lt;length-additive-expression>

  &lt;length-additive-expression> :=
     &lt;length-multiplicative-expression> |
     &lt;length-additive-expression> S+ '+' S+ &lt;length-multiplicative-expression> |
     &lt;length-additive-expression> S+ '-' S+ &lt;length-multiplicative-expression>

  &lt;length-multiplicative-expression>
     &lt;length-term> |
     &lt;length-multiplicative-expression> S* '*' S* &lt;number-term> |
     &lt;number-multiplicative-expression> S* '*' S* &lt;length-term> |
     &lt;length-multiplicative-expression> S* '/' S* &lt;number-term> |
     &lt;length-multiplicative-expression> S+ 'mod' S+ &lt;number-term>

  &lt;length-term> := '(' &lt;length-expression> ')' | &lt;atomic-length>

  &lt;number-additive-expression> :=
     &lt;number-multiplicative-expression> |
     &lt;number-additive-expression> S+ '+' S+ &lt;number-multiplicative-expression> |
     &lt;number-additive-expression> S+ '-' S+ &lt;number-multiplicative-expression>

  &lt;number-multiplicative-expression> :=
     &lt;number-term> |
     &lt;length-multiplicative-expression> S* '/' S* &lt;length-term> |
     &lt;length-multiplicative-expression> S+ 'mod' S+ &lt;length-term>

  &lt;number-term> := '(' &lt;number-additive-expression> ')' | &lt;number>

  &lt;atomic-length> := &lt;number>&lt;length-unit>
</pre>

<div class="note">Note that 'mod' is used instead of '%' for modulus since it is very easy to
get confused about whether '%' is acting as a unit or an operator. At
least with 'mod' it always causes a parse error &mdash; invalid unit &mdash; in the
otherwise ambiguous cases.
</div>


<h3>&lt;string&gt;</h3>

<p>Strings are denoted by <dfn>&lt;string&gt;</dfn> in the value
definitions.



<h3>&lt;color&gt;</h3>

<p><em>This section is not normative. The CSS3 Color module [[!CSS3COLOR]] defines the CSS3 color values. 

<p>Color values are denoted by <dfn>&lt;color&gt;</dfn> in the value
definitions. 

<p>A <dfn>color</dfn> value can either be a keyword, a numerical 
specification in a functional notation, or a numerical RGB
specification in a hexadecimal notation. The hexadecimal notation is
special shorthand format that allows compact color descriptions.

<div class="example">

<pre>
em { color: #F00 }
span.issue { color: red }
* { color: hsl(120, 75%, 75%) } 
</pre>

</div>


<h3>&lt;percentage&gt;</h4>

<p>The format of a percentage value, denoted by <dfn
title="&lt;percentage&gt;::definition of">&lt;percentage&gt;</dfn>, 
is a <span class="index">&lt;number&gt;</span>
immediately followed by '%'.</p>

<p>Percentage values are always relative to another value, for example a
length. Each property that allows percentages also defines the value to which
the percentage refers. The value may be that of another property for the same
element, a property for an ancestor element, or a value of the formatting
context (e.g., the width of a <em>containing block</em>). When a percentage
value is set for a property of the <em>root</em> element and the percentage
is defined as referring to the inherited value of some property, the
resultant value is the percentage times the <em>initial value</em> of that
property.</p>

<div class="example">
<p style="display:none">Example(s):</p>

<p>Since child elements (generally) inherit the <em>computed values</em> of
their parent, in the following example, the children of the P element will
inherit a value of 12pt for <span class="property">'line-height'</span>, not
the percentage value (120%):</p>

<pre>
p { font-size: 10pt }
p { line-height: 120% }  /* 120% of 'font-size' */
</pre>
</div>

<p class="issue">Do we need a "non-negative percentage", e.g. for "font-size"?

<h3>&lt;angle&gt;</h4>

<p>Angle values (denoted by <dfn
title="&lt;angle&gt;::definition of">&lt;angle&gt;</dfn> in the text) are
used with aural cascading style sheets.</p>

<p>Their format is a <span class="index">&lt;number&gt;</span>
immediately followed by an angle unit identifier.</p>

<p>Angle unit identifiers are:</p>
<ul>
  <li><dfn title="deg (degrees)">deg</dfn>: degrees</li>
  <li><dfn title="grad (grads)">grad</dfn>: grads</li>
  <li><dfn title="rad (radians)">rad</dfn>: radians</li>
  <li><dfn title="turn">turn</dfn>: turns</li>
</ul>

<p>Angle values should be normalized to the range
0-360deg by the user agent. For example, -10deg and 350deg are equivalent.</p>

<p>For example, a right angle is '90deg' or '100grad' or
'1.570796326794897rad'.</p>



<h3>&lt;time&gt;</h3>

<p>Time values are denoted by <dfn title="&lt;time&gt;::definition of">&lt;time&gt;</dfn> in the text. Their format is a <span class="index">&lt;number&gt;</span> immediately
followed by a time unit identifier.</p>

<p>Time unit identifiers are:</p>

<ul>
  <li><dfn title="ms (milliseconds)">ms</dfn>: milliseconds</li>
  <li><dfn title="s (seconds)">s</dfn>: seconds</li>
</ul>

<p>Time values are always positive.


<h3>&lt;frequency&gt;</h3>

<p>Frequency values (denoted by <dfn title="&lt;frequency&gt;::definition of">&lt;frequency&gt;</dfn> in the text) are used with aural cascading style sheets.</p>

<p>Their format is a <span class="index">&lt;number&gt;</span> immediately
followed by a frequency unit identifier.</p>

<p>Frequency unit identifiers are:</p>
<ul>
  <li><dfn title="Hz (Hertz)">Hz:</dfn> Hertz</li>
  <li><dfn title="kHz (kilohertz)">kHz:</dfn> kilohertz</li>
</ul>

<p>For example, 200Hz (or 200hz) is a bass sound, and 6kHz (or 6khz) is a
treble sound.</p>

<p>Frequency values are always positive.




<h3>&lt;attr&gt;</h3>

<p>In CSS2.1 [[!CSS21]], the 'attr()' expression always returns a
string. In CSS3, the 'attr()' expression can return many different
types. The new syntax for the attr() expression is:

<pre>
'attr(' ident [ ',' &lt;type> [ ',' &lt;value> ]? ]? ')'
</pre>


<p>The first argument represents the attribute name. The value of the
attribute with that name on the element whose computed values are
being computed is used as the value of the expression, according to
the rules given below.

<p>The first argument accepts an optional namespace prefix to identify
the namespace of the attribute. The namespace prefix and the attribute
name is separated by '|', with no whitespace before or after the
separator [[CSS3NAMESPACE]].

<p>The second argument (which is optional but must be present if the
third argument is present) is a &lt;type> and tells the UA how to
interpret the attribute value. It may be one of the values from the
list below.

<p>The third argument (which is optional) is a CSS value which must be
valid where the attr() expression is placed. If it is not valid, then
the whole attr() expression is invalid.

<p>If the attribute named by the first argument is missing, cannot be
parsed, or is invalid for the property, then the value returned by
attr() will be the third argument, or, if the third argument is
absent, will be the value given as the default for the relevant type
in the list below.


<dl>
<dt>string
<dd>The attribute value will be interpreted as the contents of a CSS
string. The default is the empty string.

<dt>color

<dd>The attribute value will be interpreted as a CSS &lt;color> value. The
default is UA dependent but must be the same as the initial
value of the 'color' property.

<dt>url

<dd>The attribute value will be interpreted as the URI part of a
'url()' expression. The default is a UA-dependent URI defined
to point to a non-existent document with a generic error
condition. (i.e. it shouldn't be an FTP URI that causes a DNS
error, or an HTTP URI that results in a 404, it should be a
non-descript error condition.)

<dt>integer

<dd>The attribute value will be interpreted as a CSS integer. The
default is 0. The default should also be used if the property
in question only accepts integers within a certain range and
the attribute is out of range.

<dt>number

<dd>The attribute value will be interpreted as a CSS number. The
default is 0.0. The default should also be used if the
property in question only accepts numbers within a certain
range and the attribute is out of range.

<dt>length, angle, time, frequency

<dd>The attribute value will be interpreted as a CSS length, angle,
time or frequency (respectively), and the unit identifier (if any)
will appear in the attribute value. The default is 0. The default
should also be used if the property in question only accepts values
within a certain range (e.g. positive lengths or angles from 0 to
90deg) and the attribute is out of range (e.g. a negative length or
180deg).


<dt>em, ex, px, gr, rem, vw, vh, vm, mm, cm, in, pt, pc, deg, grad, rad, ms, s, Hz, kHz, %

<dd>The attribute value will be interpreted as a float, with the given
type suffixed as a unit. The default is 0 in the relevant
units.

</dl>

<p class="issue">Should there also be a "keyword" type to, e.g., support 'float: attr(align)'</p>


<p>If the &lt;type> is missing, 'string' is implied.

<p class="issue">Ideally, it shouldn't be necessary to specify the
type if it is obvious. For example, this should be valid:
"<tt>background-image: attr(href);</tt>". This could be described as:
<q>If the property only accepts one type of value (aside from
'inherit' and 'initial'), that type is implied</q>.

<p>The attr() form is only valid if the type given (or implied, if it
is missing) is valid for the property. For example, all of the
following are invalid and would cause a parse-time error (and thus
cause the relevant declaration, in this case all of them, to be
ignored):


<div class="illegal-example">
<p style="display:none">Illegal Examples:
<pre>
      content: attr(title, color); /* 'content' doesn't accept colors */

      content: attr(end-of-quote, string, inherit) close-quote; /* the
      'inherit' value is not allowed there, since the result would be
      'inherit close-quote', which is invalid. */

      margin: attr(vertical, length) attr(horizontal, deg); /* deg
      units are not valid at that point */
<!--
      font: attr(weight, integer) attr(size, length)/attr(height,
      integer) attr(family, string); /* invalid because
      &lt;'font-weight'>s are not integers, but identifiers. */
-->
      color: attr(color); /* 'color' doesn't accept strings */
</pre>
</div>

<p>The attr() expression cannot return everything, for example it cannot
   do counters, named strings, quotes, or values such as 'auto',
   'nowrap', or 'baseline'. This is intentional, as the intent of the
   'attr()' expression is not to make it possible to describe a
   presentational language's formatting using CSS, but to enable CSS
   to take semantic data into account.

<p>Note that the default value need not be of the type given. For
instance, if the type required of the attribute by the author is
'px', the default could still be '5em'.


<div class="example">
<p>Examples:

<pre>
      &lt;stock>
        &lt;wood length="12"/>
        &lt;wood length="5"/>
        &lt;metal length="19"/>
        &lt;wood length="4"/>
      &lt;/stock>

      stock::before {
        display: block;
        content: "To scale, the lengths of materials in stock are:";
      }
      stock > * {
        display: block;
        width: attr(length, em); /* default 0 */
        height: 1em;
        border: solid thin;
        margin: 0.5em;
      }
      wood {
        background: orange url(wood.png);
      }
      metal {
        background: silver url(metal.png);
      }

      /* this also uses a possible extension to the 'content' property
      to handle replaced content and alternatives to unavailable,
      corrupted or unsupported content */
      img {
         content: replaced attr(src, url), attr(alt, string, none);
         height: attr(height, px, auto);
         width: attr(width, px, auto);
      }
</pre>
</div>

<p>The attr() expression cannot currently fall back onto another
   attribute. Future versions of CSS may extend attr() in this
   direction.


<p class="issue">Should 'attr()' be allowed on any property, in any
source language? For example, do we expect UAs to honor this rule for HTML
documents?: <tt>P[COLOR] { color: attr(COLOR, color)
}</tt>.



<h3 id="uris">&lt;url&gt;</h3>

<p><dfn title="Uniform Resource Locator (URL)|URL (Uniform Resource
Locator)">URLs</dfn> (Uniform Resource Locators, see [[RFC1738]] and
[[RFC1808]]) provide the address of a resource on the Web. An
alternative and more general term is <dfn title="Resource Identifier
(URI)|URI (Uniform Resource Identifier)">URIs</dfn> (Uniform Resource
Identifiers, see [!URI]). This specification uses the term URI.</p>

<p>For historical reasons, the name of the URI function is "url". The
URI function takes one URI as the argument. The URI may be quoted with
single quote (&apos;) or double quote (&quot;) characters. If quoted, the two
quote characters must be the same.

<div class="example">
<p style="display:none">Example(s):</p>

<pre>
body { background: url("http://www.example.com/pinkish.gif") }
</pre>
</div>

<div class="example">
<p>An example without quotes:</p>

<pre>
li { list-style: url(http://www.example.com/redball.png) disc }
</pre>

</div>

<p>Parentheses, commas, whitespace characters, single quotes (') and double
quotes ("<!--"-->) appearing in a URI must be escaped with a backslash: '\(', '\)',
'\,'.</p>

<p>Depending on the type of URI, it might also be possible to write the above
characters as URI-escapes (where "(" = %28, ")" = %29, etc.) as described in
[!URI].</p>

<p>In order to create modular style sheets that are not dependent on the
absolute location of a resource, authors should use relative URIs. Relative URIs
(as defined in [[RFC1808]]) are resolved to full URIs using a base URI.
RFC&nbsp;1808, section&nbsp;3, defines the normative algorithm for this process. For
CSS style sheets, the base URI is that of the style sheet, not that of the
source document.</p>

<div class="example">
<p>For example, suppose the following rule:</p>

<pre>
body { background: url("yellow") }
</pre>

<p>is located in a style sheet designated by the URI:</p>

<pre>
http://www.example.org/style/basic.css
</pre>

<p>The background of the source document's BODY will be tiled with whatever
image is described by the resource designated by the URI</p>
<pre>
http://www.example.org/style/yellow
</pre>
</div>

<p>User agents may vary in how they handle URIs that designate unavailable or
inapplicable resources.</p>

<h3>&lt;image&gt;</h3>

<p>TBD.



<!--
<h4>The 'counter' function</h4>

<p><dfn title="&lt;counter&gt;, definition of">Counters</dfn> are denoted by
identifiers (see the <span class="property">'counter-increment'</span> and
<span class="property">'counter-reset'</span> properties). To refer to the
value of a counter, the notation <dfn>'counter(&lt;identifier&gt;)'</dfn> or
<dfn>'counter(&lt;identifier&gt;, &lt;list-style-type&gt;)'</dfn> is used.
The default style is 'decimal'.</p>

<p>To refer to a sequence of nested counters of the same name, the notation
is 'counters(&lt;identifier&gt;, &lt;string&gt;)' or
'counters(&lt;identifier&gt;, &lt;string&gt;, &lt;list-style-type&gt;)'. See
"Nested counters and scope" [add ref] in the chapter on generated content
[add ref].</p>

<p>In CSS2.1, the values of counters can only be referred to from the <span
class="property">'content'</span> property. Note that 'none' is a possible
&lt;list-style-type&gt;: 'counter(x, none)' yields an empty string.</p>

<div class="example">
<p style="display:none">Example(s):</p>

<p>Here is a style sheet that numbers paragraphs (P) for each chapter (H1).
The paragraphs are numbered with roman numerals, followed by a period and a
space:</p>

<pre>
p { counter-increment: par-num }
h1 { counter-reset: par-num }
p:before { content: counter(par-num, upper-roman) ". " }
</pre>
</div>
-->


<h3>&lt;fraction&gt;</h3>

<p>Some properties accept a series of length values that, in sum,
should add up to a certain length. To take up any remaining space,
fractions can be used. 

<h4>The 'fr' unit</h4>

<p>The <dfn title="fr (unit)">fr</dfn> unit is used to
distribute any remaining space in a series of length values. If
multiple fractions are specified, they take up space proportionally to
their numeric value.

<div class="example">
<pre>
border-parts: 10px 1fr 10px;
border-parts: 10px 1fr 10px 1fr 10px;
border-parts: 10px 2fr 10px 2fr 10px;
</pre>
</div>

<p>The ''fr'' unit can only be used in combination with regular length units.


<h3>&lt;grid&gt;</h3>

<p>A grid is a set of invisible vertical and horizontal lines that can
be used to align content. In CSS3, a grid lines can be established
implicitly or explicitly [[!CSS3COL]] [[!CSS3GRID]]. In any case,
the distance between grid lines can be referred to by the ''gr'' unit.


<h4>The 'gr' unit</h4>

<p>The <dfn title="gr (unit)">gr</dfn> unit is used to position elements in relation to grid
lines. 

<div class="example">
<pre>
img { 
  float: top left multicol; 
  float-offset: 2gr; 
  width: 1gr }
}
</pre>
</div>

<p>Grid lines can be laid out in uneven patterns. Therefore, the ''gr'' unit is not linear. 

<div class="example">
<p>For example, "2gr" is not necessarily twice as long as "1gr".
</div>

<!--

<h3>Special cases</h3>

<p>Two common types of values fall outside the types
described above: the value for font families and the hexadecimal color
notation.

<h4>Font families</h4>

<p>The <span class="property">'font'</span>
and <span class="property">'font-family'</span> properties accept a
comma-separated list of font families. Font families can either be the
name of a certain font, or it can be one of
five <em class="index">generic font families</em>: 'serif',
'sans-serif', 'cursive','fantasy', and 'monospace'. Font family names
are like strings, except that the quotes around them may be omitted.
If quoting is omitted, any white space characters before and after the
font name are ignored and any sequence of white space characters
inside the font name is converted to a single space. Font family names
that happen to be the same as a keyword value (e.g. 'initial',
'inherit', 'default', 'serif', 'sans-serif', 'monospace', 'fantasy',
and 'cursive') must be quoted to prevent confusion with the keywords
with the same names. UAs must not consider these keywords as matching
the ''&lt;family-name&gt;'' type.

<p>Generic font family names are keywords and must not be quoted.

<div class="example">
<pre>body { font-family: "Helvetica", "Univers", "Arial", sans-serif }</pre>
</div>
-->


<h2>Specified, computed, used, and actual values</h2>

<p>The final value of a CSS3 property for a given element is the
result of a three-step calculation. First, cascading and inheritance
yields the <em>specified value</em> [[!CSS3CASCADE]]. Second, relative
values are computed into absolute values as far as possible without
formatting the document, therby yielding the <em>computed value</em>.
Finally, the computed value is transformed to the <em>actual
value</em> in the layout process.</p>


<h3>Finding the <dfn>specified value</dfn></h3>

<p>The <em>specified value</em> is the output of the cascading and
inheritance process [[!CSS3CASCADE]].


<h3>Finding the <dfn>computed value</dfn></h3>

<p>Specified values may be absolute (i.e., they are not specified
relative to another value, as in 'red' or '2mm') or relative (i.e.,
they are specified relative to another value, as in 'auto', '2em').
For absolute values, no processing is needed to find the computed
value.</p>

<p>For relative values, on the other hand, computation is necessary to
find the computed values: percentages must be multiplied by a
reference value (each property defines which value that is), values
with relative units (em, ex, px) must be made absolute by multiplying
with the appropriate font or pixel size, 'auto' values must be
computed by the formulas given with each property, certain keywords
(e.g., 'smaller', 'bolder') must be replaced according to their
definitions. See example (f), (g) and (h) in the table below.</p>

<p>Also, relative URIs are computed into absolute URIs at this stage.
The computed value of invalid and absolute URIs is the same as the
specified value.


<h3>Finding the <dfn>used value</dfn></h3>

<p>Computed values are processed as far as possible without formatting
the document. Some values, however, can only be determined when the
document is being laid out. For example, if the width of an element is
set to be a certain percentage of its containing block, the width
cannot be determined until the width of the containing block has been
determined. The used value is the result of taking the computed value
and resolving any remaining dependencies into an absolute value.


<h3>Finding the <dfn>actual value</dfn></h3>

<p>A used value is in principle ready to be used, but a user agent may
not be able to make use of the value in a given environment. For
example, a user agent may only be able to render borders with integer
pixel widths and may therefore have to approximate the computed width.
Also, the font size of an element may need adjustment based on the
availability of fonts or the value of the 'font-size-adjust' property.
The actual value is the computed value after adjustments have been
made.

<p>By probing the actual values of elements, much can be learned about
how the document is laid out. However, not all information is recorded
in the actual values. For example, the actual value of the
'page-break-after' property does not reflect whether there is a page
break or not after the element. Similarly, the actual value of
'orphans' does not reflect how many orphan lines there is in a certain
element. See examples (j) and (k) in the table below.


<table>
  <tbody>
    <tr>
      <th>Example</th>
      <th>Winning declaration</th>
      <th>Property</th>
<!--      <th>Cascaded value</th>  -->
      <th>Specified value</th>
      <th>Computed value</th>
      <th>Used value</th>
      <th>Actual value</th>
    </tr>
    <tr>
      <td>a</td>
      <td><tt class="declaration">text-align: left</tt></td>
      <td>text-align</td>
<!--      <td>left</td>-->
      <td>left</td>
      <td>left</td>
      <td>left</td>
      <td>left</td>
    </tr>
    <tr>
      <td>b</td>
      <td><tt class="declaration">border-width: inherit</tt></td>
      <td>border-top-width, border-right-width, border-bottom-width,
        border-left-width</td>
<!--      <td>inherit</td> -->
      <td class="say">4.2px</td>
      <td>4.2px</td>
      <td>4.2px</td>
      <td>4px</td>
    </tr>
    <tr>
      <td>c</td>
      <td>(no winning declaration)</td>
      <td>width</td>
<!--      <td>(no specified value)</td>-->
      <td>auto (initial&nbsp;value)</td>
      <td>auto</td>
      <td>120px</td>
      <td>120px</td>
    </tr>
    <tr>
      <td>d</td>
      <td><tt class="declaration">list-style-position: inherit</tt></td>
      <td>list-style-position</td>
<!--      <td>inherit</td> -->
      <td class="say">inside</td>
      <td>inside</td>
      <td>inside</td>
      <td>inside</td>
    </tr>
    <tr>
      <td>e</td>
      <td><tt class="declaration">list-style-position: initial</tt></td>
      <td>list-style-position</td>
<!--      <td>initial</td>-->
      <td>outside (initial&nbsp;value)</td>
      <td>outside</td>
      <td>outside</td>
      <td>outside</td>
    </tr>
    <tr>
      <td>f</td> 
      <td><tt class="declaration">font-size: 1.2em</tt></td>
      <td>font-size</td>
<!--      <td>1.2em</td>-->
      <td>1.2em</td>
      <td class="say">14.1px</td>
      <td>14.1px</td>
      <td>14px</td>
    </tr>
    <tr>
      <td>g</td>
      <td><tt class="declaration">width: 80%</tt></td>
      <td>width</td>
<!--      <td>80%</td>-->
      <td>80%</td>
      <td>80%</td>
      <td class="say">354.2px</td>
      <td>354px</td>
    </tr>
    <tr>
      <td>h</td>
      <td><tt class="declaration">width: auto</tt></td>
      <td>width</td>
<!--      <td>auto</td>-->
      <td>auto</td>
      <td>auto</td>
      <td class="say">134px</td>
      <td>134px</td>
    </tr>
    <tr>
      <td>i</td>
      <td><tt class="declaration">height: auto</tt></td>
      <td>height</td>
<!--      <td>auto</td>-->
      <td>auto</td>
      <td>auto</td>
      <td class="say">176px</td>
      <td>176px</td>
    </tr>
    <tr>
      <td>j</td>
      <td>(no winning declaration)</td>
      <td>page-break-after</td>
<!--      <td>(no specified value)</td>-->
      <td>auto (initial&nbsp;value)</td>
      <td>auto</td>
      <td>auto</td>
      <td>auto</td>
    </tr>
    <tr>
      <td>k</td>
      <td><tt class="declaration">orphans: 3</tt></td>
      <td>orphans</td>
<!--      <td>3</td>-->
      <td>3</td>
      <td>3</td>
      <td>3</td>
      <td>3</td>
    </tr>
  </tbody>
</table>


<h2 class="no-num" id="acknowledgments">Acknowledgments</h2>

<p>Comments and suggestions from Giovanni Campagna, Christoph P&auml;per, Keith Rarick, Alex Mogilevsky, Ian Hickson, David Baron, Edward Welbourne, Boris Zbarsky, Bj&ouml;rn H&ouml;hrmann and Michael Day improved this module.

<!--

Ian's proposal:
  http://lists.w3.org/Archives/Member/w3c-css-wg/2002OctDec/0141.html
David's proposal
  http://lists.w3.org/Archives/Member/w3c-css-wg/2002OctDec/0191.html

-->


<h2 class="no-num" id="references">References</h2>

<h3 class="no-num">Normative references</h3>
<!--begin-normative-->
<!--end-normative-->

<h3 class="no-num">Other references</h3>
<!--begin-informative-->
<!--end-informative-->


<h2 class="no-num">Index</h2>
<!--begin-index-->
<!--end-index-->

</body>
</html>
