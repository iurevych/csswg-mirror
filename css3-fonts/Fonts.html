<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html lang=en>
 <head><meta content="text/html;charset=utf-8" http-equiv=Content-Type>

  <title>CSS Fonts Level 3</title>
  <!--
      FIXME when publishing: copy the current default.css and link to
      "default.css" rather than "../default.css"
   -->
  <link href="../default.css" rel=stylesheet type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED.css" rel=stylesheet
  type="text/css">

  <style type="text/css">
  
  body {
    padding: 2em 70px 2em 70px;
  }
  
  p + p, p.mtb {
    margin-top: 0.8em;
    text-indent: 0px;
  }
  
  #fontformats {
    margin-left: 2em;
    text-align: left;
  }
  
  #fontformats td {
    padding-right: 2em;
  }
  
  dd {
    margin-bottom: 1em;
  }
  
  pre {
  	font-size: 100%;
  }
  
  #authors dd {
    margin-bottom: 0;
  }
  
  #fontstylematchingalg {
    list-style-type: lower-alpha;
  }
  
  #fontmatchingalg ul, #fontmatchingalg ol {
    margin-top: 0.8em;
  }
  
  #fontmatchingalg li + li {
    margin-top: 0.8em;
  }
  
  div.example {
    padding: 1em;
    margin-top: 1em;
  }

  div.example + div.example {
    margin-top: 2em;
  }
  
  div.figure {
    page-break-inside: avoid;
  }
  
  </style>

 <body>
  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo--></p>

   <h1 id=css-fonts>CSS Fonts Level 3</h1>

   <h2 class="no-num no-toc" id=longstatus>Editor's Draft 22 May 2008</h2>

   <dl id=authors>
    <dt>This version:

    <dd><a
     href="http://dev.w3.org/csswg/css3-fonts/">http://dev.w3.org/csswg/css3-fonts/</a>
     

    <dt>Latest version:

    <dd><a
     href="http://www.w3.org/TR/css3-fonts/">http://www.w3.org/TR/css3-fonts/</a>

    <dt>Editors:

    <dd><a href="mailto:jdaggett@mozilla.com">John Daggett (Mozilla)</a>

    <dd><a href="mailto:jason.cranfordteague@corp.aol.com">Jason Cranford
     Teague (AOL)</a>

    <dt>Previous Editors:

    <dd><a href="mailto:paulnel@microsoft.com">Paul Nelson (Microsoft)</a>

    <dd><a href="mailto:chris@w3.org">Chris Lilley (W3C)</a>

    <dd><a href="mailto:marcins@microsoft.com">Marcin Sawicki (Microsoft)</a>

    <dd><a href="mailto:michelsu@microsoft.com">Michel Suignard
     (Microsoft)</a>

    <dd><a href="mailto:szilles@adobe.com">Steve Zilles (Adobe)</a>

    <dd><a href="mailto:tantekc@cs.stanford.edu">Tantek Ã‡elik</a>
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> &copy; 2008 <a
    href="http://www.w3.org/"><acronym title="World Wide Web
    Consortium">W3C</acronym></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute
    of Technology">MIT</acronym></a>, <a
    href="http://www.ercim.org/"><acronym title="European Research Consortium
    for Informatics and Mathematics">ERCIM</acronym></a>, <a
    href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <p class=note style="padding: 20px; background-color: #ddd;">Note: this
   draft is still undergoing some major editing, so portions of it may appear
   quite incoherent or inconsistent at times. Please wait a month or so
   before sending out flames...

  <div class=note style="margin-top: 20px;">
   <ul></ul>

   <p>To do:</p>

   <ul>
    <li>font matching examples

    <li>polish font matching algorithm, deal with bolder/lighter matching

    <li>clean up font-weight wording, better definition of bolder/lighter

    <li>specifics of SVG font reference handling

    <li>why does cvs mangle Tantek's name?

    <li>finish examples for unicode-range

    <li>font-size, font-size-adjust descriptions

    <li>font-variant

    <li>font shorthand

    <li>TrueType/OpenType nitty gritty

    <li>make intro more concise and relevant to rest of the spec, point out
     specific general problems

    <li>illustrations of localized bold, italic names?
   </ul>
  </div>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p>[summarize contents and relate to other CSS3 modules]

  <h2 class="no-num no-toc" id=status>Status of this document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a href="mailto:www-style@w3.org">www-style@w3.org</a> (see
   <a href="http://www.w3.org/Mail/Request">instructions</a>) is preferred
   for discussion of this specification. When sending e-mail, please put the
   text &#8220;unknown-shortname&#8221; in the subject, preferably like this:
   &#8220;[<!---->unknown-shortname<!---->] <em>&hellip;summary of
   comment&hellip;</em>&#8221;

  <p>This document was produced by the <a href="/Style/CSS/members">CSS
   Working Group</a> (part of the <a href="/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->

  <h2 class="no-num no-toc" id=contents>Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#introduction"><span class=secno>1. </span>Introduction</a>

   <li><a href="#font-properties"><span class=secno>2. </span>Font
    properties</a>
    <ul class=toc>
     <li><a href="#font-family"><span class=secno>2.1 </span>Font family: the
      &lsquo;<span class=property>font-family</span>&rsquo; property</a>
      <ul class=toc>
       <li><a href="#generic"><span class=secno>2.1.1 </span>Generic font
        families</a>
        <ul class=toc>
         <li><a href="#serif"><span class=secno>2.1.1.1. </span> <span
          class=index-def id=serif0 title="serif, definition
          of">serif</span></a>

         <li><a href="#sans-serif"><span class=secno>2.1.1.2. </span> <span
          class=index-def id=sans-serif0 title="sans-serif, definition of">
          sans-serif</span></a>

         <li><a href="#cursive"><span class=secno>2.1.1.3. </span> <span
          class=index-def id=cursive0 title="cursive, definition of">
          cursive</span></a>

         <li><a href="#fantasy"><span class=secno>2.1.1.4. </span> <span
          class=index-def id=fantasy0 title="fantasy, definition of">
          fantasy</span></a>

         <li><a href="#monospace"><span class=secno>2.1.1.5. </span> <span
          class=index-def id=monospace0 title="monospace, definition of">
          monospace</span></a>
        </ul>
      </ul>

     <li><a href="#font-weight"><span class=secno>2.2 </span>Font weight: the
      &lsquo;<span class=property>font-weight</span>&rsquo; property</a>

     <li><a href="#font-proportion"><span class=secno>2.3 </span>Font
      proportion: the &lsquo;<span class=property>font-stretch</span>&rsquo;
      property</a>

     <li><a href="#font-style"><span class=secno>2.4 </span>Font style: the
      &lsquo;<span class=property>font-style</span>&rsquo; property</a>

     <li><a href="#small"><span class=secno>2.5 </span>Small caps: the
      &lsquo;<span class=property>font-variant</span>&rsquo; property</a>

     <li><a href="#font-size"><span class=secno>2.6 </span>Font size: the
      &lsquo;<span class=property>font-size</span>&rsquo; property</a>

     <li><a href="#relative"><span class=secno>2.7 </span>Relative sizing:
      the &lsquo;<span class=property>font-size-adjust</span>&rsquo;
      property</a>

     <li><a href="#shorthand"><span class=secno>2.8 </span>Shorthand font
      property: the &lsquo;<span class=property>font</span>&rsquo;
      property</a>
    </ul>

   <li><a href="#font-resources"><span class=secno>3. </span>Font
    resources</a>
    <ul class=toc>
     <li><a href="#the-font-face"><span class=secno>3.1 </span>The @font-face
      rule</a>

     <li><a href="#font-family0"><span class=secno>3.2 </span>Font family:
      the &lsquo;<span class=property>font-family</span>&rsquo;
      descriptor</a>

     <li><a href="#font-reference"><span class=secno>3.3 </span>Font
      reference: the &lsquo;<span class=property>src</span>&rsquo;
      descriptor</a>

     <li><a href="#font-style0"><span class=secno>3.4 </span>Font style: the
      &lsquo;<span class=property>font-style</span>&rsquo; descriptor</a>

     <li><a href="#font-weight0"><span class=secno>3.5 </span>Font weight:
      the &lsquo;<span class=property>font-weight</span>&rsquo;
      descriptor</a>

     <li><a href="#font-stretch"><span class=secno>3.6 </span>Font stretch:
      the &lsquo;<span class=property>font-stretch</span>&rsquo;
      descriptor</a>

     <li><a href="#character"><span class=secno>3.7 </span>Character range:
      the &lsquo;<span class=property>unicode-range</span>&rsquo;
      descriptor</a>
    </ul>

   <li><a href="#font-matching"><span class=secno>4. </span>Font matching
    algorithm</a>
    <ul class=toc>
     <li><a href="#examples"><span class=secno>4.1 </span>Examples of font
      matching</a>
    </ul>

   <li><a href="#font-rendering"><span class=secno>5. </span>Font rendering
    properties</a>

   <li class=no-num><a href="#appendix">Appendix A: Mapping CSS properties to
    font features</a>

   <li class=no-num><a href="#appendix0">Appendix B: Font licensing
    issues</a>

   <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

   <li class=no-num><a href="#references">References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative">Normative</a>

     <li class=no-num><a href="#informative">Informative</a>
    </ul>

   <li class=no-num><a href="#index">Index</a>

   <li class=no-num><a href="#property-index">Property index</a>
  </ul>
  <!--end-toc-->

  <h2 id=introduction><span class=secno>1. </span>Introduction</h2>

  <p>Font properties determine which fonts are used during rendering. Fonts
   represent collections of letterforms, or glyphs, that uniquely describe
   the visual appearance of the underlying characters. Typographic traditions
   vary across the globe so there is no unique way to classify all fonts
   across languages and cultures. For even common Latin letters, wide
   variations are possible:

  <div class=figure><img src=aaaaaa.png>
   <p class=caption>One character, many glyph variations</p>
  </div>

  <p>Differences in the anatomy of letterforms is one way to distinguish
   fonts. For Latin fonts, flourishes at the ends of a character's main
   strokes, or serifs, can distinguish a font from those without. Similar
   comparisons exist in non-Latin fonts. For Japanese fonts, a Mincho face
   contains tapered strokes while a Gothic face does not:

  <div class=figure><img src=serifvssansserif.png>
   <p class=caption>Classifying by letterform style</p>
  </div>

  <p>Fonts contain letterforms and the data needed to map characters to these
   letterforms. Often this may be a simple one-to-one mapping but more
   complex mappings are also possible. The use of combining diacritic marks
   creates many variations for an underlying letterform:

  <div class=figure><img src=aaaaaa-diacritics.png>
   <p class=caption>Variations with diacritic marks</p>
  </div>

  <p class=issue>Include stacking diacritics? Hmm, Vietnamese example?

  <p>A sequence of characters can be represented by a single glyph known as a
   ligature:

  <div class=figure><img src=final-ligature.png>
   <p class=caption>Ligature example</p>
  </div>

  <p>Visual transformations based on textual context like this may be a
   stylistic option for European langauges but are required to correctly
   render languages like Arabic; the lam and alef characters below
   <em>must</em> be combined when they exist in sequence:

  <div class=figure><img src=lamaleflig.png>
   <p class=caption>Required Arabic ligature</p>
  </div>

  <p>The relative complexity of these shaping transformations requires
   additional data within the font.

  <p>Sets of font faces with various stylistic variations are often grouped
   together into font families. In the simplest case a regular face is
   supplemented with bold and italic faces but much more extensive groupings
   are possible. Variations in the thickness of letterform strokes, or the
   weight, or the overall proportions of the letterform, or the width, are
   most common. In the example below, each letter uses a different font face
   within the Univers font family. The width used increases from top to
   bottom and the weight increases from left to right:

  <div class=figure><img src=weightwidthvariations.png>
   <p class=caption>Weight and width variations within a single font family</p>
  </div>

  <p>Creating fonts that support multiple scripts is an extremely difficult
   design problem; designers need to understand the cultural traditions
   surronding the use of type in different scripts and come up with
   letterforms that somehow share a common theme. Many languages often share
   a common script and each of these languages may have noticeable stylistic
   differences. The Arabic script is shared by Persian and Urdu and Cyrillic
   is used with many languages, not just Russian.

  <p>Fonts provide a character map that details the set of characters for
   they have glyphs. If a document contains characters not supported by a
   specified font, a user agent may revert to a system font fallback
   procedure to find glyphs to render these characters correctly. If no font
   can be found, some form of "missing glyph" character is rendered by the
   user agent. Often these are the result of authors failing to explicitly
   indicate the encoding used by a document.

  <h2 id=font-properties><span class=secno>2. </span>Font properties</h2>

  <p>The particular font face used to render a character is determined by the
   font family and other font properties that apply to a given element. This
   structure allows settings to be varied independent of each other.</p>
  <!-- prop: font-family -->

  <h3 id=font-family><span class=secno>2.1 </span>Font family: the &lsquo;<a
   class=property href="#font-family2">font-family</a>&rsquo; property</h3>

  <table class=propdef id=namefont-family>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-family1>font-family</dfn>

    <tr>
     <td>Value:

     <td>[[ &lt;family-name> | &lt;generic-family> ] [, &lt;family-name>|
      &lt;generic-family>]* ] | inherit

    <tr>
     <td>Initial:

     <td>depends on user agent

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>N/A

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>as specified
  </table>

  <p>This property specifies a prioritized list of font family names or
   generic family names. A user agent iterates through the list of family
   names until it matches an available font that contains a glyph for the
   character to be rendered. This allows for differences in available fonts
   across across platforms and for differences in the range of characters
   supported by individual fonts.

  <p>A font family name only specifies a name given to a set of font faces,
   it does not specify an individual face. Given the availability of the
   fonts below, Futura would match but Futura Medium would not:

  <div class=figure><img src=familyvsfacename.png>
   <p class=caption>Family and individual face names</p>
  </div>

  <p>Some font formats support the use of multiple family names for different
   localizations. User agents should recognize any of these names independent
   of the underlying platform localization, system API used or document
   encoding:

  <div class=figure><img src=localizedfamilynames.png>
   <p class=caption>Localized family names</p>
  </div>

  <p>Consider the example below:

  <div class=example>
   <pre>body { 
    font-family: Helvetica, Verdana, sans-serif; 
}</pre>
  </div>

  <p>If Helvetica is available it will be used when rendering. If neither
   Helvetica or Verdana is present, then the user agent defined sans serif
   font will be used.

  <p>There are two types of font family names:

  <dl>
   <dt>&lt;family-name&gt;

   <dd>The name of a font family of choice such as Helvetica or Verdana in
    the previous example. Font family names containing whitespace should be
    quoted. If quoting is omitted, any whitespace characters before and after
    the font name are ignored and any sequence of whitespace characters
    inside the font name is converted to a single space.
    <p class=issue>Need better description of when quoting is needed.
     Reference syntax module?</p>

   <dt>&lt;generic-family&gt;

   <dd> The following generic family keywords are defined: &lsquo;<a
    class=property href="#serif2">serif</a>&rsquo;, &lsquo;<a class=property
    href="#sans-serif2">sans-serif</a>&rsquo;, &lsquo;<a class=property
    href="#cursive2">cursive</a>&rsquo;, &lsquo;<a class=property
    href="#fantasy2">fantasy</a>&rsquo;, and &lsquo;<a class=property
    href="#monospace2">monospace</a>&rsquo;. These keywords can be used as a
    general fallback mechanism when an author's desired font choices are not
    available. As keywords, they should not be quoted. Authors are encouraged
    to append a generic font family as a last alternative for improved
    robustness.
  </dl>

  <h4 id=generic><span class=secno>2.1.1 </span>Generic font families</h4>

  <p>All five generic font families are defined to exist in all CSS
   implementations (they need not necessarily map to five distinct actual
   fonts). User agents should provide reasonable default choices for the
   generic font families, which express the characteristics of each family as
   well as possible within the limits allowed by the underlying technology.
   User agents are encouraged to allow users to select alternative choices
   for the generic fonts.

  <h5 id=serif><span class=secno>2.1.1.1. </span> <span class=index-def
   id=serif1 title="serif, definition of"><a name=serif-def><dfn
   id=serif2>serif</dfn></a></span></h5>

  <p>Glyphs of serif fonts, as the term is used in CSS, have finishing
   strokes, flared or tapering ends, or have actual serifed endings
   (including slab serifs). Serif fonts are typically proportionately-spaced.
   They often display a greater variation between thick and thin strokes than
   fonts from the &lsquo;<a class=property
   href="#sans-serif2">sans-serif</a>&rsquo; generic font family. CSS uses
   the term &lsquo;<a class=property href="#serif2">serif</a>&rsquo; to apply
   to a font for any script, although other names may be more familiar for
   particular scripts, such as Mincho (Japanese), Sung or Song (Chinese),
   Batang (Korean). Any font that is so described may be used to represent
   the generic &lsquo;<a class=property href="#serif2">serif</a>&rsquo;
   family.

  <div class=figure><img src=serifexamples.png>
   <p class=caption>Sample serif fonts</p>
  </div>

  <h5 id=sans-serif><span class=secno>2.1.1.2. </span> <span class=index-def
   id=sans-serif1 title="sans-serif, definition of"> <a
   name=sans-serif-def><dfn id=sans-serif2>sans-serif</dfn></a></span></h5>

  <p>Glyphs in sans-serif fonts, as the term is used in CSS, have stroke
   endings that are plain -- without any flaring, cross stroke, or other
   ornamentation. Sans-serif fonts are typically proportionately-spaced. They
   often have little variation between thick and thin strokes, compared to
   fonts from the &lsquo;<a class=property href="#serif2">serif</a>&rsquo;
   family. CSS uses the term &lsquo;<a class=property
   href="#sans-serif2">sans-serif</a>&rsquo; to apply to a font for any
   script, although other names may be more familiar for particular scripts,
   such as Gothic (Japanese), Kai (Chinese), or Gulim (Korean). Any font that
   is so described may be used to represent the generic &lsquo;<a
   class=property href="#sans-serif2">sans-serif</a>&rsquo; family.

  <p class=issue>Kai for Chinese looks wrong, looks to be a serif-like face.

  <div class=figure><img src=sansserifexamples.png>
   <p class=caption>Sample sans-serif fonts</p>
  </div>

  <h5 id=cursive><span class=secno>2.1.1.3. </span> <span class=index-def
   id=cursive1 title="cursive, definition of"> <a name=cursive-def><dfn
   id=cursive2>cursive</dfn></a></span></h5>

  <p>Glyphs in cursive fonts, as the term is used in CSS, generally have
   either joining strokes or other cursive characteristics beyond those of
   italic typefaces. The glyphs are partially or completely connected, and
   the result looks more like handwritten pen or brush writing than printed
   letterwork. Some scripts, such as Arabic, are almost always cursive. CSS
   uses the term &lsquo;<a class=property href="#cursive2">cursive</a>&rsquo;
   to apply to a font for any script, although other names such as Chancery,
   Brush, Swing and Script are also used in font names.

  <div class=figure><img src=cursiveexamples.png>
   <p class=caption>Sample cursive fonts</p>
  </div>

  <h5 id=fantasy><span class=secno>2.1.1.4. </span> <span class=index-def
   id=fantasy1 title="fantasy, definition of"> <a name=fantasy-def><dfn
   id=fantasy2>fantasy</dfn></a></span></h5>

  <p>Fantasy fonts are primarily decorative fonts that contain playful
   representations of characters. These do not include Pi or Picture fonts
   which do not represent actual characters.

  <div class=figure><img src=fantasyexamples.png>
   <p class=caption>Sample fantasy fonts</p>
  </div>

  <h5 id=monospace><span class=secno>2.1.1.5. </span> <span class=index-def
   id=monospace1 title="monospace, definition of"> <a name=monospace-def><dfn
   id=monospace2>monospace</dfn></a></span></h5>

  <p>The sole criterion of a monospace font is that all glyphs have the same
   fixed width. This is often used to render samples of computer code.

  <div class=figure><img src=monospaceexamples.png>
   <p class=caption>Sample monospace fonts</p>
  </div>
  <!-- prop: font-weight -->

  <h3 id=font-weight><span class=secno>2.2 </span>Font weight: the &lsquo;<a
   class=property href="#font-weight2">font-weight</a>&rsquo; property</h3>

  <table class=propdef id=namefont-weight>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-weight1>font-weight</dfn>

    <tr>
     <td>Value:

     <td>normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600
      | 700 | 800 | 900 | inherit

    <tr>
     <td>Initial:

     <td>normal

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>N/A

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>see description
  </table>

  <p>The <a class=noxref href="#font-weight"><span
   class=property>&lsquo;<span
   class=property>font-weight</span>&rsquo;</span></a> property specifies
   weight of glyphs in the font, their degree of blackness or stroke
   thickness.

  <p>Values have the following meanings:

  <dl>
   <dt>100 to 900

   <dd>These values form an ordered sequence, where each number indicates a
    weight that is at least as dark as its predecessor. These roughly
    correspond to the commonly used weight names below:
  </dl>

  <ul>
   <li>100 - Thin

   <li>200 - Extra Light (Ultra Light)

   <li>300 - Light

   <li>400 - Normal

   <li>500 - Medium

   <li>600 - Semi Bold (Demi Bold)

   <li>700 - Bold

   <li>800 - Extra Bold (Ultra Bold)

   <li>900 - Black (Heavy)
  </ul>

  <dl>
   <dt><strong>normal</strong>

   <dd>Same as &lsquo;<code class=css>400</code>&rsquo;.

   <dt><strong>bold</strong>

   <dd>Same as &lsquo;<code class=css>700</code>&rsquo;.

   <dt><strong>bolder</strong>

   <dd>Specifies the weight of the face bolder than the inherited value.

   <dt><strong>lighter</strong>

   <dd>Specifies the weight of the face lighter than the inherited value.
  </dl>

  <p>Font formats that use a scale other than a nine step scale should map
   their scale onto the CSS scale so that 400 roughly corresponds with a face
   that would be labeled as Regular, Book, Roman and 700 roughly matches a
   face that would be labeled as Bold. Or weights may be inferred from the
   style names, ones that correspond roughly with the scale above. The scale
   is relative, so a face with a larger weight should never appear lighter.
   If style names are used to infer weights, care should be taken to handle
   common variations in different locales:

  <p>Quite often there are only a few weights available for a particular font
   family. When weights other than ones available are specified they are
   automatically mapped onto one of the available weights. In general, bold
   weights map to faces with heavier weights and light weights map to faces
   with lighter weights. For the precise defintion, see the section below on
   font matching. Weights for which no faces exist are shown in grey in the
   examples below:

  <div class=figure><img src=optimaweights.png>
   <p class=caption>Weight mappings for a font family with 400, 700 and 900
    weight faces</p>
  </div>

  <div class=figure><img src=hiraginoweights.png>
   <p class=caption>Weight mappings for a font family with 300 and 600 weight
    faces</p>
  </div>

  <p>Description of how bolder and lighter work. They are relative to an
   inherited value and "accumulate". Child elements inherit the given weight
   plus the accumulated relative bolder/lighter values.

  <p>Although not well-loved by typographers, bold faces are often
   synthesized by user agents for faces that lack actual bold faces. The use
   of the lighter/bolder can lead to strange interactions with synthetic
   bolding.</p>
  <!-- prop: font-stretch -->

  <h3 id=font-proportion><span class=secno>2.3 </span>Font proportion: the
   &lsquo;<a class=property href="#font-stretch1">font-stretch</a>&rsquo;
   property</h3>

  <table class=propdef id=namefont-stretch>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-stretch0>font-stretch</dfn>

    <tr>
     <td>Value:

     <td>normal | wider | narrower | ultra-condensed | extra-condensed |
      condensed | semi-condensed | semi-expanded | expanded | extra-expanded
      | ultra-expanded | inherit

    <tr>
     <td>Initial:

     <td>normal

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>N/A

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>as specified
  </table>

  <p>The <a class=noxref href="#font-stretch"><span
   class=property>&lsquo;<span
   class=property>font-stretch</span>&rsquo;</span></a> property selects a
   normal, condensed, or extended face from a font family. Absolute keyword
   values have the following ordering, from narrowest to widest:

  <ul>
   <li>Ultra Condensed

   <li>Extra Condensed

   <li>Condensed

   <li>Semi Condensed

   <li>Normal

   <li>Semi Expanded

   <li>Expanded

   <li>Extra Expanded

   <li>Ultra Expanded
  </ul>

  <p>The relative keyword &lsquo;<span class=property>wider</span>&rsquo;
   sets the value to the next expanded value above the inherited value (while
   not increasing it above &lsquo;<span
   class=property>ultra-expanded</span>&rsquo;); the relative keyword
   &lsquo;<span class=property>narrower</span>&rsquo; sets the value to the
   next condensed value below the inherited value (while not decreasing it
   below &lsquo;<span class=property>ultra-condensed</span>&rsquo;).

  <p class=issue>Do we really need all these keywords?!? Would
   ultra-extended, extended, normal, condensed, ultra-condensed suffice?

  <p class=issue>What about synthesized condensed/expanded?</p>
  <!-- prop: font-style -->

  <h3 id=font-style><span class=secno>2.4 </span>Font style: the &lsquo;<a
   class=property href="#font-style2">font-style</a>&rsquo; property</h3>

  <table class=propdef id=namefont-style>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-style1>font-style</dfn>

    <tr>
     <td>Value:

     <td>normal | italic | oblique | inherit

    <tr>
     <td>Initial:

     <td>normal

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>N/A

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>as specified
  </table>

  <p>The <a class=noxref href="#font-style"><span class=property>&lsquo;<span
   class=property>font-style</span>&rsquo;</span></a> property allows italic
   or oblique faces to be selected. Italic faces are commonly thought of as
   sloped variations but the distinction is actually more subtle than that.
   Italic forms are generally cursive in nature while oblique faces are
   typically sloped versions of the regular face. Oblique faces can be
   simulated by artificially sloping the glyphs of the regular face. Compare
   the artificially sloped renderings of Palatino &lsquo;<span
   class=property>a</span>&rsquo; and Baskerville &lsquo;<span
   class=property>N</span>&rsquo; in grey with the actual italic versions:

  <div class=figure><img src=realvsfakeitalics.png>
   <p class=caption>Artificial sloping versus real italics</p>
  </div>

  <p>A value of &lsquo;<span class=property>normal</span>&rsquo; selects a
   face that is classified as &lsquo;<span
   class=property>normal</span>&rsquo;, while &lsquo;<span
   class=property>oblique</span>&rsquo; selects a font that is labeled
   &lsquo;<span class=property>oblique</span>&rsquo;. A value of &lsquo;<span
   class=property>italic</span>&rsquo; selects a font that is labeled
   &lsquo;<span class=property>italic</span>&rsquo;, or, if that is not
   available, one labeled &lsquo;<span class=property>oblique</span>&rsquo;.
   If no italic or oblique faces is available, an oblique face can by
   synthesized by rendering the normal face with a sloping transformation
   applied.

  <div class=figure>
   <p class=caption>Common localizations of italic and oblique names</p>
  </div>

  <p>Many scripts lack the tradition of mixing a cursive form within text
   rendered with a normal face. Chinese, Japanese and Korean fonts almost
   always lack italic or oblique faces. Fonts that support a mixture of
   scripts will sometimes omit specific scripts such as Arabic from the set
   of glyphs supported in the italic face. User agents should be careful
   about making character map assumptions across faces.

  <p class=issue>What is the existing behavior for oblique? Is it actually
   <em>ever</em> relevant, i.e. is there a font that defines both italic and
   oblique faces? Or is it effectively an alias for italic?</p>
  <!-- prop: font-variant -->

  <h3 id=small><span class=secno>2.5 </span>Small caps: the &lsquo;<a
   class=property href="#font-variant">font-variant</a>&rsquo; property</h3>

  <table class=propdef id=namefont-variant>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-variant>font-variant</dfn>

    <tr>
     <td>Value:

     <td>normal | small-caps | inherit

    <tr>
     <td>Initial:

     <td>normal

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>N/A

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>as specified
  </table>

  <ul>
   <li>small-caps

   <li>used to select alternate glyphs if available in font

   <li>can be simulated using sized versions of uppercase glyphs
  </ul>

  <p>In a small-caps font, the glyphs for lowercase letters look similar to
   the uppercase ones, but in a smaller size and with slightly different
   proportions. The <a class=noxref href="#font-variant"><span
   class=property>&lsquo;<span
   class=property>font-variant</span>&rsquo;</span></a> property requests
   such a font for <a name=x13><span class=index-def id=bicameral
   title="bicameral::definition of">bicameral</span></a> (having two cases,
   as with Latin script). This property has no visible effect for scripts
   that are <a name=x14><span class=index-def id=unicameral
   title="unicameral::definition of"><dfn
   id=unicameral0>unicameral</dfn></span></a> (having only one case, as with
   most of the world's writing systems). Values have the following meanings:

  <dl>
   <dt><strong>normal</strong>

   <dd>Specifies a face that is not labeled as a small-caps font.

   <dt><strong>small-caps</strong>

   <dd>Specifies a font that is labeled as a small-caps font. If a genuine
    small-caps font is not available, user agents should simulate a
    small-caps font, for example by taking a normal font and replacing the
    lowercase letters by scaled uppercase characters. As a last resort,
    unscaled uppercase letter glyphs in a normal font may replace glyphs in a
    small-caps font so that the text appears in all uppercase letters.
  </dl>

  <div class=example>
   <p style=display:none>Example(s):</p>

   <p> The following example results in an <samp>h3</samp> element in
    small-caps, with emphasized words <samp>em</samp> in oblique small-caps:</p>

   <pre>h3 { font-variant: small-caps }
em { font-style: oblique }
</pre>
  </div>

  <p>Insofar as this property causes text to be transformed to uppercase, the
   same considerations as for <span class=property>&lsquo;<span
   class=property>text-transform</span>&rsquo;</span> apply.</p>
  <!-- prop: font-size -->

  <h3 id=font-size><span class=secno>2.6 </span>Font size: the &lsquo;<a
   class=property href="#font-size0">font-size</a>&rsquo; property</h3>

  <table class=propdef id=namefont-size>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-size0>font-size</dfn>

    <tr>
     <td>Value:

     <td>&lt;absolute-size> | &lt;relative-size> | &lt;length> |
      &lt;percentage> | inherit

    <tr>
     <td>Initial:

     <td>medium

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>refer to parent element's font size

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>absolute length
  </table>

  <ul>
   <li>scale applied to outline fonts

   <li>used to select specific face for bitmap fonts
  </ul>

  <p>This property indicates the desired height of glyphs from the font. For
   scalable fonts, the font-size is a scale factor applied to the EM unit of
   the font. (Note that certain glyphs may bleed outside their EM box.) For
   non-scalable fonts, the font-size is converted into absolute units and
   matched against the declared font-size of the font, using the same
   absolute coordinate space for both of the matched values. Values have the
   following meanings:

  <dl>
   <dt><a name=x18><span class=index-def id=ltabsolute-sizegt
    title="&lt;absolute-size&gt;::definition of">
    <strong>&lt;absolute-size&gt;</strong></span></a>

   <dd> An <a class=value-def
    name=value-def-absolute-size>&lt;absolute-size&gt;</a> keyword refers to
    an entry in a table of font sizes computed and kept by the user agent.
    Possible values are:
    <p> [ xx-small | x-small | small | medium | large | x-large | xx-large ]</p>

   <dt><a name=x19><span class=index-def id=ltrelative-sizegt
    title="&lt;relative-size&gt;::definition
    of"><strong>&lt;relative-size&gt;</strong></span></a>

   <dd> A <a class=value-def
    name=value-def-relative-size>&lt;relative-size&gt;</a> keyword is
    interpreted relative to the table of font sizes and the font size of the
    parent element. Possible values are:
    <p> [ larger | smaller ]</p>

    <p> For example, if the parent element has a font size of &lsquo;<span
     class=property>medium</span>&rsquo;, a value of &lsquo;<span
     class=property>larger</span>&rsquo; will make the font size of the
     current element be &lsquo;<span class=property>large</span>&rsquo;. If
     the parent element's size is not close to a table entry, the user agent
     is free to interpolate between table entries or round off to the closest
     one. The user agent may have to extrapolate table values if the
     numerical value goes beyond the keywords.</p>

   <dt><span class=index-inst id=ltlengthgt
    title="&lt;length&gt;">&lt;length&gt;</span>

   <dd>A length value specifies an absolute font size (that is independent of
    the user agent's font table). Negative lengths are illegal.

   <dt><span class=index-inst id=ltpercentagegt
    title="&lt;percentage&gt;">&lt;percentage&gt; </span>

   <dd>A percentage value specifies an absolute font size relative to the
    parent element's font size. Use of percentage values, or values in
    &lsquo;<span class=property>em</span>&rsquo;s, leads to more robust and
    cascadable style sheets.
  </dl>

  <p>The following table provides user agent's guideline for the
   absolute-size scaling factor and their mapping to XHTML heading and
   absolute font-sizes. The &lsquo;<span class=property>medium</span>&rsquo;
   value is used as the reference middle value. The user agent may fine tune
   these values for different fonts or different types of display devices.

  <table border=1 id=AutoNumber2 style="border-collapse: collapse"
   width="73%">
   <tbody>
    <tr>
     <th width="16%">CSS absolute-size values

     <td align=center width="12%">xx-small

     <td align=center width="9%">x-small

     <td align=center width="10%">small

     <td align=center width="11%">medium

     <td align=center width="11%">large

     <td align=center width="12%">x-large

     <td align=center width="11%">xx-large

     <td align=center width="8%">&nbsp;

    <tr>
     <th width="16%">scaling factor

     <td align=center width="12%">3/5

     <td align=center width="9%">3/4

     <td align=center width="10%">8/9

     <td align=center width="11%">1

     <td align=center width="11%">6/5

     <td align=center width="12%">3/2

     <td align=center width="11%">2/1

     <td align=center width="8%">3/1

    <tr>
     <th width="16%">XHTML headings

     <td align=center width="12%">h6

     <td align=center width="9%">&nbsp;

     <td align=center width="10%">h5

     <td align=center width="11%">h4

     <td align=center width="11%">h3

     <td align=center width="12%">h2

     <td align=center width="11%">h1

     <td align=center width="8%">&nbsp;

    <tr>
     <th width="16%">XHTML font sizes

     <td align=center width="12%">1

     <td align=center width="9%">&nbsp;

     <td align=center width="10%">2

     <td align=center width="11%">3

     <td align=center width="11%">4

     <td align=center width="12%">5

     <td align=center width="11%">6

     <td align=center width="8%">7
  </table>

  <p class=note><em><strong>Note 1.</strong> To preserve readability, an UA
   applying these guidelines should nevertheless avoid creating font-size
   resulting in less than 9 pixels per EM unit on a computer display .</em>

  <p class=note><em><strong>Note 2.</strong> In CSS1, the suggested scaling
   factor between adjacent indexes was 1.5 which user experience proved to be
   too large. In CSS2, the suggested scaling factor for computer screen
   between adjacent indexes was 1.2 which still created issues for the small
   sizes. The new scaling factor varies between each index to provide a
   better readability.</em>

  <p>The actual value [link to Cascading module] of this property may differ
   from the computed value due a numerical value on &lsquo;<a class=property
   href="#font-size-adjust">font-size-adjust</a>&rsquo; and the
   unavailability of certain font sizes.

  <p>Child elements inherit the computed <a class=noxref
   href="#font-size"><span class=property>&lsquo;<span
   class=property>font-size</span>&rsquo;</span></a> value (otherwise, the
   effect of <a class=noxref href="#font-size-adjust"><span
   class=property>&lsquo;<span
   class=property>font-size-adjust</span>&rsquo;</span></a> would compound).

  <div class=example>
   <p style=display:none>Example(s):</p>

   <p></p>

   <pre>p { font-size: 12pt; }
blockquote { font-size: larger }
em { font-size: 150% }
em { font-size: 1.5em }
</pre>
  </div>
  <!-- prop: font-size-adjust -->

  <h3 id=relative><span class=secno>2.7 </span>Relative sizing: the &lsquo;<a
   class=property href="#font-size-adjust">font-size-adjust</a>&rsquo;
   property</h3>

  <table class=propdef id=namefont-size-adjust>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-size-adjust>font-size-adjust</dfn>

    <tr>
     <td>Value:

     <td>&lt;number> | none | inherit

    <tr>
     <td>Initial:

     <td>none

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>hmmmm

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>hmmmm
  </table>

  <ul>
   <li>[TBD]
  </ul>

  <p>In <a name=x23><span class=index-inst id=bicameral0
   title=bicameral>bicameral</span></a> scripts, the subjective apparent size
   and legibility of a font are less dependent on their <a class=noxref
   href="#font-size"><span class=property>&lsquo;<span
   class=property>font-size</span>&rsquo;</span></a> value than on the value
   of their <span class=property>&lsquo;<span
   class=property>x-height</span>&rsquo;</span>, or, more usefully, on the
   ratio of these two values, called the <a name=x24><span class=index-def
   id=aspect title="aspect value"><dfn id=aspect0>aspect
   value</dfn></span></a> (x-height divided by font-size). The higher the
   aspect value, the more likely it is that a font at smaller sizes will be
   legible. Inversely, faces with a lower aspect value will become illegible
   more rapidly below a given threshold size than faces with a higher aspect
   value. Straightforward font substitution that relies on font size alone
   may lead to illegible characters.

  <p>For example, the popular font Verdana has an aspect value of 0.58; when
   Verdana's font size 100 units, its x-height is 58 units. For comparison,
   Times New Roman has an aspect value of 0.46. Verdana will therefore tend
   to remain legible at smaller sizes than Times New Roman. Conversely,
   Verdana will often look &lsquo;<code class=css>too big</code>&rsquo; if
   substituted for Times New Roman at a chosen size.

  <p>This property allows authors to specify an aspect value for an element
   that will preserve the x-height of the first choice font, whether it is
   substituted or not. Values have the following meanings:

  <dl>
   <dt><strong>none</strong>

   <dd>Do not preserve the font's x-height.

   <dt><span class=index-inst id=ltnumbergt
    title="&lt;number&gt;">&lt;number&gt;</span>

   <dd>Specifies the aspect value. The number typically refers to the aspect
    value of the first choice font. The scaling factor for all fonts is
    computed according to the following formula:
    <pre>  y(a/a') = c
</pre>

    <p>where:</p>

    <pre>y = 'font-size' actual value
a  = aspect value as specified by the font-size-adjust property value
a' = aspect value of actual font
c = 'font-size' to apply to font
</pre>
  </dl>

  <div class=example>
   <p style=display:none>Example(s):</p>

   <p>For example, if 14px Verdana (with an aspect value of 0.58) was
    unavailable and an available font had an aspect value of 0.46, the
    font-size of the substitute would be 14 * (0.58/0.46) = 17.65px. If
    Verdana is available, no adjustment occurs, as long as its actual aspect
    value is the same as the hypothetical aspect value provided by the
    font-size-adjust property.</p>
  </div>

  <p>Font size adjustments take place when computing the actual value of <a
   class=noxref href="#font-size"><span class=property>&lsquo;<span
   class=property>font-size</span>&rsquo;</span></a>. Since inheritance is
   based on the computed value, child elements will inherit unadjusted
   values. Font size adjustments are applied to all fonts used by child
   elements, substituted or not.

  <p>The first image below shows several typefaces rasterized at a common
   font size (11pt. at 72 ppi), together with their aspect values. Note that
   faces with higher aspect values appear larger than those with lower. Faces
   with very low aspect values are illegible at the size shown.

  <div class=figure><img alt="Comparison of 12 point fonts" height=720
   src=font-adjust-a.gif width=450>
   <p class=caption>11pt text with various fonts</p>
  </div>

  <p>The next image shows the results of <a class=noxref
   href="#font-size-adjust"><span class=property>&lsquo;<span
   class=property>font-size-adjust</span>&rsquo;</span></a> where Verdana has
   been taken as the"first choice", together with the scaling factor applied.
   As adjusted, the apparent sizes are nearly linear across faces, though the
   actual (em) sizes vary by more than 100%. Note that <a class=noxref
   href="#font-size-adjust"><span class=property>&lsquo;<span
   class=property>font-size-adjust</span>&rsquo;</span></a> tends to
   stabilize the horizontal metrics of lines, as well.

  <div class=figure><img alt="Comparison of font-adjusted fonts" height=720
   src=font-adjust-b.gif width=450>
   <p class=caption>11pt text with various fonts, adjusted font size</p>
  </div>
  <!-- prop: font -->

  <h3 id=shorthand><span class=secno>2.8 </span>Shorthand font property: the
   &lsquo;<a class=property href="#font">font</a>&rsquo; property</h3>

  <table class=propdef id=namefont>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font>font</dfn>

    <tr>
     <td>Value:

     <td>[ [ &lt;&lsquo;<a class=property
      href="#font-style2">font-style</a>&rsquo;> || &lt;&lsquo;<a
      class=property href="#font-variant">font-variant</a>&rsquo;> ||
      &lt;&lsquo;<a class=property
      href="#font-weight2">font-weight</a>&rsquo;> ]? &lt;&lsquo;<a
      class=property href="#font-size0">font-size</a>&rsquo;> [ /
      &lt;&lsquo;<span class=property>line-height</span>&rsquo;> ]?
      &lt;&lsquo;<a class=property
      href="#font-family2">font-family</a>&rsquo;> ] | caption | icon | menu
      | message-box | small-caption | status-bar | inherit

    <tr>
     <td>Initial:

     <td>see individual properties

    <tr>
     <td>Applies to:

     <td>all elements

    <tr>
     <td>Inherited:

     <td>yes

    <tr>
     <td>Percentages:

     <td>see individual properties

    <tr>
     <td>Media:

     <td>visual

    <tr>
     <td>Computed&nbsp;value:

     <td>see individual properties
  </table>

  <ul>
   <li>shorthand for all font properties

   <li>ui font names
  </ul>

  <p> The <a class=noxref href="#font"><span class=property>&lsquo;<span
   class=property>font</span>&rsquo;</span></a> property is, except as
   described <a href="#almost">below</a>, a shorthand property for setting <a
   class=noxref href="#font-style"><span class=property>&lsquo;<span
   class=property>font-style</span>&rsquo;</span></a>, <a class=noxref
   href="#font-variant"><span class=property>&lsquo;<span
   class=property>font-variant</span>&rsquo;</span></a>, <a class=noxref
   href="#font-weight"><span class=property>&lsquo;<span
   class=property>font-weight</span>&rsquo;</span></a>, <a class=noxref
   href="#font-size"><span class=property>&lsquo;<span
   class=property>font-size</span>&rsquo;</span></a>, &lsquo;<span
   class=property>line-height</span>&rsquo;, and <a class=noxref
   href="#font-family"><span class=property>&lsquo;<span
   class=property>font-family</span>&rsquo;</span></a>, at the same place in
   the style sheet. The syntax of this property is based on a traditional
   typographical shorthand notation to set multiple properties related to
   fonts.

  <p>All font-related properties are first reset to their initial values,
   including those listed in the preceding paragraph plus <a class=noxref
   href="#font-stretch"><span class=property>&lsquo;<span
   class=property>font-stretch</span>&rsquo;</span></a> and <a class=noxref
   href="#font-size-adjust"><span class=property>&lsquo;<span
   class=property>font-size-adjust</span>&rsquo;</span></a>. Then, those
   properties that are given explicit values in the <a class=noxref
   href="#font"><span class=property>&lsquo;<span
   class=property>font</span>&rsquo;</span></a> shorthand are set to those
   values. For a definition of allowed and initial values, see the previously
   defined properties. For reasons of backwards compatibility, it is not
   possible to set <a class=noxref href="#font-stretch"><span
   class=property>&lsquo;<span
   class=property>font-stretch</span>&rsquo;</span></a> and <a class=noxref
   href="#font-size-adjust"><span class=property>&lsquo;<span
   class=property>font-size-adjust</span>&rsquo;</span></a> to other than
   their initial values using the <a class=noxref href="#font"><span
   class=property>&lsquo;<span class=property>font</span>&rsquo;</span></a>
   shorthand property; instead, set the individual properties.

  <div class=example>
   <p style=display:none>Example(s):</p>

   <p></p>

   <pre>p { font: 12pt/14pt sans-serif }
p { font: 80% sans-serif }
p { font: x-large/110% &quot;new century schoolbook&quot;, serif }
p { font: bold italic large Palatino, serif }
p { font: normal small-caps 120%/120% fantasy }
p { font: oblique 12pt &quot;Helvetica Nue&quot;, serif; font-stretch: condensed }
</pre>

   <p> In the second rule, the font size percentage value (&lsquo;<code
    class=css>80%</code>&rsquo;) refers to the font size of the parent
    element. In the third rule, the line height percentage (&lsquo;<code
    class=css>110%</code>&rsquo;) refers to the font size of the element
    itself.</p>

   <p>The first three rules do not specify the <a class=noxref
    href="#font-variant"><span class=property>&lsquo;<span
    class=property>font-variant</span>&rsquo;</span></a> and <a class=noxref
    href="#font-weight"><span class=property>&lsquo;<span
    class=property>font-weight</span>&rsquo;</span></a> explicitly, so these
    properties receive their initial values so this property receives its
    initial value (&lsquo;<span class=property>normal</span>&rsquo;). Notice
    that the font family name "new century schoolbook", which contains
    spaces, is enclosed in quotes. The fourth rule sets the <a class=noxref
    href="#font-weight"><span class=property>&lsquo;<span
    class=property>font-weight</span>&rsquo;</span></a> to &lsquo;<span
    class=property>bold</span>&rsquo;, the <a class=noxref
    href="#font-style"><span class=property>&lsquo;<span
    class=property>font-style</span>&rsquo;</span></a> to &lsquo;<span
    class=property>italic</span>&rsquo;, and implicitly sets <a class=noxref
    href="#font-variant"><span class=property>&lsquo;<span
    class=property>font-variant</span>&rsquo;</span></a> to &lsquo;<span
    class=property>normal</span>&rsquo;.</p>

   <p> The fifth rule sets the <a class=noxref href="#font-variant"><span
    class=property>&lsquo;<span
    class=property>font-variant</span>&rsquo;</span></a> (&lsquo;<span
    class=property>small-caps</span>&rsquo;), the <a class=noxref
    href="#font-size"><span class=property>&lsquo;<span
    class=property>font-size</span>&rsquo;</span></a> (120% of the parent's
    font size), the <span class=property>&lsquo;<span
    class=property>line-height</span>&rsquo;</span> (120% of the font size)
    and the <a class=noxref href="#font-family"><span
    class=property>&lsquo;<span
    class=property>font-family</span>&rsquo;</span></a> (&lsquo;<a
    class=property href="#fantasy2">fantasy</a>&rsquo;). It follows that the
    keyword &lsquo;<span class=property>normal</span>&rsquo; applies to the
    two remaining properties: <a class=noxref href="#font-style"><span
    class=property>&lsquo;<span
    class=property>font-style</span>&rsquo;</span></a> and <a class=noxref
    href="#font-weight"><span class=property>&lsquo;<span
    class=property>font-weight</span>&rsquo;</span></a>.</p>

   <p>The sixth fifth rule sets the <a class=noxref href="#font-style"><span
    class=property>&lsquo;<span
    class=property>font-style</span>&rsquo;</span></a>, <a class=noxref
    href="#font-size"><span class=property>&lsquo;<span
    class=property>font-size</span>&rsquo;</span></a>, and <a class=noxref
    href="#font-family"><span class=property>&lsquo;<span
    class=property>font-family</span>&rsquo;</span></a>, the other font
    properties being set to their initial values. It then sets <a
    class=noxref href="#font-stretch"><span class=property>&lsquo;<span
    class=property>font-stretch</span>&rsquo;</span></a> to &lsquo;<span
    class=property>condensed</span>&rsquo; since that property cannot be set
    to that value using the <a class=noxref href="#font"><span
    class=property>&lsquo;<span class=property>font</span>&rsquo;</span></a>
    shorthand property.</p>
  </div>

  <p>The following values refer to <a name=x27><span class=index-def
   id=system title="system fonts">system fonts</span></a>:

  <dl>
   <dt><strong>caption</strong>

   <dd>The font used for captioned controls (e.g., buttons, drop-downs,
    etc.).

   <dt><strong>icon</strong>

   <dd>The font used to label icons.

   <dt><strong>menu</strong>

   <dd>The font used in menus (e.g., dropdown menus and menu lists).

   <dt><strong>message-box</strong>

   <dd>The font used in dialog boxes.

   <dt><strong>small-caption</strong>

   <dd>The font used for labeling small controls.

   <dt><strong>status-bar</strong>

   <dd>The font used in window status bars.
  </dl>

  <p>System fonts may only be set as a whole; that is, the font family, size,
   weight, style, etc. are all set at the same time.These values may then be
   altered individually if desired. If no font with the indicated
   characteristics exists on a given platform, the user agent should either
   intelligently substitute (e.g., a smaller version of the &lsquo;<span
   class=property>caption</span>&rsquo; font might be used for the
   &lsquo;<span class=property>smallcaption</span>&rsquo; font), or
   substitute a user agent default font. As for regular fonts, if, for a
   system font, any of the individual properties are not part of the
   operating system's available user preferences, those properties should be
   set to their initial values.

  <p><a name=almost>That is why</a> this property is "almost" a shorthand
   property: system fonts can only be specified with this property, not with
   <a class=noxref href="#font-family"><span class=property>&lsquo;<span
   class=property>font-family</span>&rsquo;</span></a> itself, so <a
   class=noxref href="#font"><span class=property>&lsquo;<span
   class=property>font</span>&rsquo;</span></a> allows authors to do more
   than the sum of its subproperties. However, the individual properties such
   as <a class=noxref href="#font-weight"><span class=property>&lsquo;<span
   class=property>font-weight</span>&rsquo;</span></a> are still given values
   taken from the system font, which can be independently varied.

  <div class=example>
   <p style=display:none>Example(s):</p>

   <p></p>

   <pre>button { font: 300 italic 1.3em/1.7em &quot;FB Armada&quot;, sans-serif }
button p { font: menu }
button p em { font-weight: bolder }
</pre>

   <p>If the font used for dropdown menus on a particular system happened to
    be, for example, 9-point Charcoal, with a weight of 600, then P elements
    that were descendants of BUTTON would be displayed as if this rule were
    in effect:</p>

   <pre>button p { font: 600 9pt Charcoal }
</pre>

   <p>Because the <a class=noxref href="#font"><span
    class=property>&lsquo;<span class=property>font</span>&rsquo;</span></a>
    shorthand resets to its initial value any property not explicitly given a
    value, this has the same effect as this declaration:</p>

   <pre>button p {
  font-style: normal;
  font-variant: normal;
  font-weight: 600;
  font-size: 9pt;
  line-height: normal;
  font-family: Charcoal
} 
</pre>
  </div>

  <h2 id=font-resources><span class=secno>3. </span>Font resources</h2>

  <h3 id=the-font-face><span class=secno>3.1 </span>The @font-face rule</h3>

  <p>The @font-face rules allows for linking to fonts downloaded
   automatically when needed. Font descriptors detail the location of the
   font data either locally or on the web and are used to match the style
   sheet font properties to data from a particular font. This allows the user
   agent to determine rules for when fonts need to be downloaded and serve as
   a bridge to the underlying font data containing letterform data.

  <p>All font descriptions are specified via a <span class=index-def
   id=font-face title="@font-face"><em>@font-face</em></span> <span
   class=index-inst id=at-rule title=at-rules>at-rule</span>. The general
   form is:

  <pre>
@font-face { <span class=value-inst-font-description>&lt;font-description&gt;</span> }
</pre>

  <p>where the <span class=index-def id=ltfont-descriptiongt
   title="&lt;font-description&gt;::definition of"><a
   name=value-def-font-description>&lt;font-description&gt;</a></span> has
   the form:

  <pre>
descriptor: value;
descriptor: value;
[...]
descriptor: value;
</pre>

  <p>Each <span class=index-inst id=font-face0
   title="@font-face">@font-face</span> rule specifies a value for every font
   descriptor, either implicitly or explicitly. Those not given explicit
   values in the rule take the initial value listed with each descriptor in
   this specification. These descriptors apply solely within the context of
   the @font-face rule in which they are defined, and do not apply to
   document language elements. There is no notion of which elements the
   descriptors apply to or whether the values are inherited by child
   elements.

  <div class=example>
   <p>To use a downloadable font called Gentium:</p>

   <pre>
@font-face {
  font-family: Gentium;
  src: url(http://site/fonts/Gentium.ttf);
}

p { font-family: Gentium, serif; }
</pre>

   <p>If Gentium is not already among available fonts, the user agent will
    download it and use it when rendering text within paragraph elements. If
    for some reason the site serving the font is unavailable, the default
    serif font will be used.</p>
  </div>

  <p>For each document, user agents should store a list of fonts available
   via @font-face rules. When performing font matching, if no matching
   @font-face is found, the user agent will attempt the same match as a user
   agent that does not support @font-face.

  <p>Downloaded fonts are only available to documents that reference them,
   they should not be made available to other applications or other
   documents. User agents might consider it convenient to use downloaded
   fonts when rendering characters in other documents for which no other
   available font exists as part of the system font fallback procedure. This
   however leads to non-deterministic rendering patterns where the appearance
   of a page effectively becomes a function of browsing history.

  <p>User agents which do not understand the @font-face rule will encounter
   the opening curly brackets and will <span class=index-inst id=ignore
   title=ignore><a href="syndata.html#ignore">ignore</a></span> forward until
   the closing curly bracket. This at-rule conforms with the <a
   href="syndata.html#syntax">forward-compatible parsing</a> requirement of
   CSS. Parsers may <span class=index-inst id=ignore0 title=ignore><a
   href="syndata.html#ignore">ignore</a></span> these rules without error.
   Any descriptors that are not recognized or useful to the user agent must
   be <span class=index-inst id=ignored title=ignore><a
   href="syndata.html#ignore">ignored</a></span>.

  <p class=issue>Need to confirm that this statement is accurate with dbaron.

  <p>If a font descriptor is duplicated, the last occurring descriptor wins
   and the rest must be ignored.

  <p class=issue>Hmm, this isn't really a fully flushed out explanation

  <p>The following descriptors have the same names as the corresponding font
   properties and take a single value or comma-separated list of values. The
   values within that list are, except as explicitly noted, the same as those
   for the corresponding font property. If there is a single value, that is
   the value that must be matched. If there is a list, any list item
   constitutes a match. If the descriptor is omitted from the <span
   class=index-inst id=font-face1 title="@font-face">@font-face</span>, the
   initial value for the descriptor is used.

  <p class=issue>Rework this, needs to refer only to font-weight, font-style,
   etc. and not to font-family

  <h3 id=font-family0><span class=secno>3.2 </span>Font family: the &lsquo;<a
   class=property href="#font-family2">font-family</a>&rsquo; descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-family2>font-family</dfn>

    <tr>
     <td>Value:

     <td>&lt;family-name>

    <tr>
     <td>Initial:

     <td>N/A

    <tr>
     <td>Media:

     <td>visual
  </table>

  <p>This descriptor defines the font family name that will be used in all
   CSS font family name matching. It overrides the underlying font name, if
   one is contained within the font data. If a font with the same name is
   among the available platform fonts already, the rule will effectively be
   ignored.

  <div class=issue>
   <p>Several issues here:</p>

   <ul>
    <li>Can't override local names so name collisions can occur. Use
     !important to override local names?

    <li>Trimmed out multiple values, not quite sure what the point of those
     were. Used by IE, Opera, Safari, Prince?

    <li>Ignoring underlying font name data; does this cause any problems?
   </ul>
  </div>

  <h3 id=font-reference><span class=secno>3.3 </span>Font reference: the
   &lsquo;<a class=property href="#src">src</a>&rsquo; descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=src>src</dfn>

    <tr>
     <td>Value:

     <td>[ &lt;uri> [format(&lt;string> [, &lt;string>]*)] |
      &lt;font-face-name> ] [, &lt;uri> [format(&lt;string> [,
      &lt;string>]*)] | &lt;font-face-name> ]*

    <tr>
     <td>Initial:

     <td>undefined

    <tr>
     <td>Media:

     <td>visual
  </table>

  <p>This descriptor is required for referencing actual font data, whether
   downloadable or locally installed. It is a prioritized, comma-separated
   list of external references or locally installed font face names. When
   font data is needed the user agent iterates over the set of references
   listed, using the first one it can resolve.

  <p>The external reference consists of a URI, followed by an optional hint
   regarding the format of font resource to be found at that URI, and this
   information should be used by clients to avoid following links to fonts in
   formats they are unable to use. The format hint contains a comma-separated
   list of format strings that denote well-known font formats. The user agent
   will recognize the name of font formats that it supports, and will avoid
   downloading fonts in formats that it does not recognize.

  <p>An initial list of format strings defined by this specification and
   representing formats likely to be used by implementations on various
   platforms is:

  <table id=fontformats>
   <tbody>
    <tr>
     <th>String

     <th>Font Format

     <th>Common extensions

    <tr>
     <td>"truetype"

     <td>TrueType

     <td>.ttf

    <tr>
     <td>"opentype"

     <td>OpenType

     <td>.ttf, .otf

    <tr>
     <td>"truetype-aat"

     <td>TrueType with Apple Advanced Typography extensions

     <td>.ttf

    <tr>
     <td>"embedded-opentype"

     <td>Embedded OpenType

     <td>.eot

    <tr>
     <td>"svg"

     <td>SVG Font

     <td>.svg
  </table>

  <p>As with <a href="syndata.html#uri">other URIs in CSS</a>, the URI may be
   partial, in which case it is resolved relative to the location of the
   style sheet containing the <span class=index-inst id=font-face2
   title="@font-face">@font-face</span>.

  <div class=example>
   <p>A full font URI with no format hint:</p>

   <pre>
  src: url(http://site/fonts/font.otf);
</pre>

   <p>Arabic font with different versions for specific platforms:</p>

   <pre>
  src: url(../fonts/LateefRegOT.ttf) format("opentype"), 
       url(../fonts/LateefRegAAT.ttf) format("truetype-aat");
</pre>

   <p>A font containing tables to support multiple advanced font formats:</p>

   <pre>
  src: url(DoulosSILR.ttf) format("opentype","truetype-aat");
</pre>
  </div>

  <p>The locally installed <span class=index-def id=ltfont-face-namegt
   title="&lt;font-face-name&gt;::definition of"><a
   name=value-def-font-face-name>&lt;font-face-name&gt;</a></span> is a
   format-specific string that uniquely identifies a single font face. For
   example, TrueType and OpenType fonts are often uniquely identified by
   their PostScript name. The notation for a &lt;font-face-name&gt; is the
   unique font face name enclosed by "local(" and ")". This also allows for
   the creation of aliased font names and referencing faces that belong to
   larger families that cannot otherwise be referenced.

  <div class=example>
   <p>Use a local font or reference an SVG font in another document:</p>

   <pre>
@font-face {
  font-family: Headline;
  src: local(Futura-Medium), url(fonts.svg#MyGeometricModern) format("svg");
}
</pre>

   <p>Create an alias for local Japanese fonts on different platforms:</p>

   <pre>
@font-face {
  font-family: Japanese;
  src: local(HiraKakuPro-W3), local(Meiryo), local(IPAPGothic);
}
</pre>

   <p>Reference a font face that cannot be matched within a larger family:</p>

   <pre>
@font-face {
  font-family: Hoefler Text Ornaments;
  /* has the same font properties as Hoefler Text Regular */
  src: local(HoeflerText-Ornaments); 
}
</pre>
  </div>

  <p class=issue>Are Postscript names really a unique key across platforms?
   May need to give a looser explanation of this, to allow full font names
   for example. All kinds of nasty inter-operability problems abound.

  <h3 id=font-style0><span class=secno>3.4 </span>Font style: the &lsquo;<a
   class=property href="#font-style2">font-style</a>&rsquo; descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-style2>font-style</dfn>

    <tr>
     <td>Value:

     <td>all | normal | italic | oblique

    <tr>
     <td>Initial:

     <td>all

    <tr>
     <td>Media:

     <td>visual
  </table>

  <p>This is the descriptor for the style of a font and takes the same values
   as the <span class=propinst-font-style>&lsquo;<a class=property
   href="#font-style2">font-style</a>&rsquo;</span> property, except that a
   comma-separated list is permitted.

  <h3 id=font-weight0><span class=secno>3.5 </span>Font weight: the &lsquo;<a
   class=property href="#font-weight2">font-weight</a>&rsquo; descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-weight2>font-weight</dfn>

    <tr>
     <td>Value:

     <td>all | normal | bold | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800
      | 900

    <tr>
     <td>Initial:

     <td>all

    <tr>
     <td>Media:

     <td>visual
  </table>

  <p>This is the descriptor for the weight of a face relative to others in
   the same font family. It takes the same values as the <span
   class=propinst-font-weight>&lsquo;<a class=property
   href="#font-weight2">font-weight</a>&rsquo;</span> property with three
   exceptions:

  <ol>
   <li>relative keywords (bolder, lighter) are not permitted.

   <li>a comma-separated list of values is permitted, for fonts that contain
    multiple weights.

   <li>an additional keyword, &lsquo;<span class=property>all</span>&rsquo;
    is permitted, which means that the font will match for all possible
    weights; either because it contains multiple weights, or because that
    face only has a single weight.
  </ol>

  <h3 id=font-stretch><span class=secno>3.6 </span>Font stretch: the
   &lsquo;<a class=property href="#font-stretch1">font-stretch</a>&rsquo;
   descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=font-stretch1>font-stretch</dfn>

    <tr>
     <td>Value:

     <td>all | normal | ultra-condensed | extra-condensed | condensed |
      semi-condensed | semi-expanded | expanded | extra-expanded |
      ultra-expanded

    <tr>
     <td>Initial:

     <td>all

    <tr>
     <td>Media:

     <td>visual
  </table>

  <p>This is the CSS indication of the condensed or expanded nature of the
   face relative to others in the same font family. It takes the same values
   as the <span class=propinst-font-stretch>&lsquo;<a class=property
   href="#font-stretch1">font-stretch</a>&rsquo;</span> property except that:

  <ul>
   <li>relative keywords (wider, narrower) are not permitted

   <li>a comma-separated list is permitted

   <li>The keyword &lsquo;<span class=property>all</span>&rsquo; is permitted
  </ul>

  <h3 id=character><span class=secno>3.7 </span>Character range: the
   &lsquo;<a class=property href="#unicode-range">unicode-range</a>&rsquo;
   descriptor</h3>

  <table class=descdef>
   <tbody>
    <tr>
     <td>Name:

     <td><dfn id=unicode-range>unicode-range</dfn>

    <tr>
     <td>Value:

     <td>&lt;urange> [, &lt;urange>]*

    <tr>
     <td>Initial:

     <td>U+0-7FFFFFFF

    <tr>
     <td>Media:

     <td>visual
  </table>

  <p>This is the descriptor for the Unicode characters covered by the font.
   The values of <span class=index-def id=lturangegt
   title="&lt;urange&gt;::definition of"><a
   name=value-def-urange>&lt;urange&gt;</a></span> are expressed using
   hexadecimal numbers prefixed by "U+", corresponding to <a
   href="http://www.unicode.org/charts/">Unicode character code points</a>.
   The character range can be a subset of the full character map of the
   underlying font. The actual character map used is the intersection of the
   unicode range specified and the underlying character map of the font and
   serves as a hint for user agents when deciding whether or not to download
   a font resource.

  <p>Unicode range values are written using hexadecimal values and are case
   insensitive. They may be written as a list of individual code values or as
   a range. Trailing &lsquo;<code class=css>?</code>&rsquo; characters imply
   &lsquo;<code class=css>any digit value</code>&rsquo;. Leading zeros are
   allowed but not required. Any value within the range U+0-7FFFFFFF is valid
   but the Unicode 5.0 specification currently only defines values within the
   range U+0-10FFFF. In most cases, authors will use values within the Basic
   Multilingual Plane (BMP) comprising the range U+0-FFFF.

  <p>Multiple, discontinuous ranges can be specified, separated by a comma.
   As with other comma-separated lists in CSS, any <a
   href="syndata.html#whitespace">whitespace</a> before or after the comma is
   <span class=index-inst id=ignored. title=ignore><a
   href="syndata.html#ignore">ignored.</a></span>

  <dl>
   <dt>unicode-range: U+A5;

   <dd>a single codepoint, the yen/yuan symbol

   <dt>unicode-range: U+400-U+4FF;

   <dd>code range for Cyrillic characters

   <dt>unicode-range: U+04??;

   <dd>same as above, code range for Cyrillic characters

   <dt>unicode-range: U+590-5ff;

   <dd>code range for Hebrew characters

   <dt>unicode-range: U+A5, U+4E00-9FFF, U+30??, U+FF00-FF9F;

   <dd>code range for Japanese kanji, hiragana and katakana characters plus
    yen/yuan symbol
  </dl>

  <div class=example>
   <p>The BBC provides news services in a wide variety of languages, many
    that are not well supported across all platforms. Using an @font-face
    rule, the BBC could provide a font for any of these languages, as it
    already does via a manual font download.</p>

   <pre>
@font-face {
  font-family: BBCBengali;
  src: url(fonts/BBCBengali.ttf) format("opentype");
  unicode-range: U+00-FF, U+980-9FF;
}
</pre>
  </div>

  <div class=example>
   <p>Technical documents often require a wide range of symbols. The STIX
    Fonts project is one project aimed at providing fonts to support a wide
    range of technical typesetting in a standardized way. The example below
    shows the use of a font that provides glyphs for many of the mathematical
    and technical symbol ranges within Unicode:</p>

   <pre>
@font-face {
  font-family: STIXGeneral;
  src: local(STIXGeneral), url(/stixfonts/STIXGeneral.otf);
  unicode-range: U+000-49F, U+2000-27FF, U+2900-2BFF, U+1D400-1D7FF;
}
</pre>
  </div>

  <p>Multiple @font-face rules with different unicode ranges for the same
   family can be constructed to create composite fonts that mix the glyphs
   from different fonts for different scripts. If the unicode ranges overlap,
   the last rule is used.

  <div class=example>
   <p>Example mixing Latin and Greek.</p>
  </div>

  <div class=example>
   <p>Number font, defines only values for 0-9, currency symbols</p>
  </div>

  <div class=example>
   <p>This example shows how an author can override the glyphs used for Latin
    characters in a Japanese font with glyphs from a different font. The
    first rule specifies no range so it defaults to the entire range. The
    range specified in the second rule overlaps but takes precedence because
    it is defined later.</p>

   <pre>
@font-face {
  font-family: JapaneseWithGentium;
  src: local(MSMincho);
  /* no range specified, defaults to entire range */
}

@font-face {
  font-family: JapaneseWithGentium;
  src: url(../fonts/Gentium.ttf);
  unicode-range: U+0-2FF;
}
</pre>
  </div>
  <!--
<dt>unicode-range: U+3000-303F, U+3100-312F, U+32??, U+33??, U+4E00-9FFF,
U+F9000-FAFF, U+FE30-FE4F

<dd>Something of a worst case in terms of verbosity, this very
precisely indicates that this (extremely large) font contains only
Chinese characters from Unicode, without including any
characters that are uniquely Japanese or Korean. The range is 3000 to
303F (CJK symbols and punctuation) plus 3100 to 312F (Bopomofo) plus
3200 to 32FF (enclosed CJK letters and months) plus 3300 to 33FF (CJK
compatibility zone) plus 4E00 to 9FFF (CJK unified Ideographs) plus
F900 to FAFF (CJK compatibility ideographs) plus FE30 to FE4F (CJK
compatibility forms).

<p>A more likely representation for a typical Chinese font would be:

<p>unicode-range: U+3000-33FF, U+4E00-9FFF</p>

<dt>unicode-range: U+11E00-121FF

<dd>This font covers a proposed registration for Aztec pictograms,
covering the range 1E00 to 21FF in plane 1.

<dt>unicode-range: U+1A00-1A1F

<dd>This font covers a proposed registration for Irish Ogham
covering the range 1A00 to 1A1F
</dl>
-->

  <p class=issue>Tools to create subsetted fonts a problem. Also, combining
   diacritics represent a nasty side issue here. Need named ranges (based on
   Unicode defined range names), e.g. range("Basic Latin") ==> U+00-FF

  <h2 id=font-matching><span class=secno>4. </span>Font matching algorithm</h2>

  <p>The procedure for choosing fonts consists of iterating over the font
   families determined by the font-family property, selecting a font face
   with the appropriate style based on other font properties and then
   determining whether a glyph exists for a given character. This procedure
   is performed on each character to be rendered. Optimizations are allowed
   provided that an implementation behaves as if the algorithm had been
   followed exactly. Matching occurs in a well-defined order to insure that
   the results are as consistent as possible across user agents, given an
   identical set of available fonts and rendering technology.

  <p>To begin with, a user agent must determine the set of font families
   available on a given platform and determine the style characteristics of
   all faces for each family. If two faces have the exact same style
   characteristics, one of them is <span class=index-inst id=ignored.0
   title=ignore> <a href="syndata.html#ignore">ignored.</a></span> Fonts
   available via @font-face rules are referenced per document and are not
   treated as generally available fonts.

  <ol id=fontmatchingalg>
   <li>For each character within a given element, the user agent evaluates
    the font properties applicable. The user agent starts with the first
    family name in the <span class=descinst-font-family>&lsquo;<a
    class=property href="#font-family2">font-family</a>&rsquo;</span>
    prioritized list.

   <li>If the family name is a generic family name, the user agent looks up
    the appropriate font family name to be used. User agents may choose the
    generic font family to use based on the language of the containing
    element or the Unicode range of the character. The user agent attempts to
    find the family name among fonts available on the system and then among
    fonts defined via @font-face rules.

   <li>If a font family match occurs, the user agent then attempts to select
    a face that matches the remaining font properties. It matches these
    properties in the order given below:
    <ol id=fontstylematchingalg>
     <li><span class=descinst-font-style>&lsquo;<a class=property
      href="#font-stretch1">font-stretch</a>&rsquo;</span> is tried first.
      &lsquo;<span class=property>normal</span>&rsquo; matches a font not
      labeled as &lsquo;<span class=property>condensed</span>&rsquo; or
      &lsquo;<span class=property>expanded</span>&rsquo;.

     <li><span class=descinst-font-style>&lsquo;<a class=property
      href="#font-style2">font-style</a>&rsquo;</span> is tried next.
      &lsquo;<span class=property>italic</span>&rsquo; will be satisfied if
      there is either a face in the UA's font database labeled with the CSS
      keyword &lsquo;<span class=property>italic</span>&rsquo; (preferred) or
      &lsquo;<span class=property>oblique</span>&rsquo;. Otherwise the values
      must be matched exactly or font-style will fail.

     <li><span class=descinst-font-variant>&lsquo;<a class=property
      href="#font-variant">font-variant</a>&rsquo;</span> is tried next.
      &lsquo;<span class=property>normal</span>&rsquo; matches a font not
      labeled as &lsquo;<span class=property>small-caps</span>&rsquo;;
      &lsquo;<span class=property>small-caps</span>&rsquo; matches (1) a font
      labeled as &lsquo;<span class=property>small-caps</span>&rsquo;, (2) a
      font in which the small caps are synthesized, or (3) a font where all
      lowercase letters are replaced by uppercase letters. A small-caps font
      may be synthesized by electronically scaling uppercase letters from a
      normal font.

     <li><span class=descinst-font-weight>&lsquo;<a class=property
      href="#font-weight2">font-weight</a>&rsquo;</span> is matched next, it
      will never fail. Given the desired weight and the set of face weights
      that match the properties above, if the desired weight is available
      that face matches. Otherwise, a weight is chosen using the rules below:
      
      <ul>
       <li>If the desired weight is less than 400, weights below the desired
        weight are checked in descending order followed by weights above the
        desired weight in ascending order until a match is found.

       <li>If the desired weight is greater than 500, weights above the
        desired weight are checked in ascending order followed by weights
        below the desired weight in descending order until a match is found.

       <li>If the desired weight is 400, 500 is checked first and then the
        rule for desired weights less than 400 is used.

       <li>If the desired weight is 500, 400 is checked first and then the
        rule for desired weights less than 400 is used.
      </ul>

     <li>If bolder/lighter relative weights are specified, look for
      bolder/lighter weight faces. If relative number of steps of boldness
      not available, use synthetic bolding.

     <li><span class=descinst-font-size>&lsquo;<a class=property
      href="#font-size0">font-size</a>&rsquo;</span> must be matched within a
      UA-dependent margin of tolerance. (Typically, sizes for scalable fonts
      are rounded to the nearest whole pixel, while the tolerance for
      bitmapped fonts could be as large as 20%.) Further computations, e.g.,
      by &lsquo;<span class=property>em</span>&rsquo; values in other
      properties, are based on the <span class=descinst-font-size>&lsquo;<a
      class=property href="#font-size0">font-size</a>&rsquo;</span> value
      that is used, not the one that is specified.
    </ol>

   <li>If no matching face or the matched face does not contain a glyph for
    the character to be rendered, the next family name is selected and the
    previous two steps repeated. Otherwise if the matched font is defined via
    @font-face and needs to be downloaded, the user agent can either wait
    until the font is downloaded or render once with substituted font metrics
    and render again once the font is downloaded. <em>Old wording: The UA may
    choose to block on this download or may choose to proceed to the next
    step while the font downloads. UAs that do not implement font download,
    or are not connected to a network, or where the user preferences have
    disabled font download, or where the requested resource is unavailable
    for whatever reason, or where the downloaded font cannot be used for
    whatever reason, are considered to fail at this step.</em>

   <li>If there are no more font families to be evaluated and no matching
    face has been found, then the user agent performs a system font fallback
    procedure to find the best match for the character to be rendered. The
    result of this procedure may vary across user agents.

   <li>If a particular character cannot be displayed using any font, the user
    agent should indicate by some means that a character is not being
    displayed, either by displaying a symbolic representation of the missing
    glyph or using the &lsquo;<code class=css>missing character</code>&rsquo;
    glyph from another font.
  </ol>

  <p>Discuss implications of the algorithm above. Weight mapping trys to map
   non-bold weights to other non-bold weights, same for bold faces.

  <div class=issue>
   <ul></ul>

   <p>Issues:</p>

   <ul>
    <li>Using the missing character glyph is definitely not the ideal, should
     state this more clearly.

    <li>Basically, if a font family is found, it should always match a face
     and not fall back, no?

    <li>Need more details on bolder/lighter interaction with synthetic
     bolding
   </ul>
  </div>

  <h3 id=examples><span class=secno>4.1 </span>Examples of font matching</h3>

  <p>Simple to complex examples:

  <div class=example>
   <p>bold italic</p>
  </div>

  <div class=example>
   <p>italic (synthesized)</p>
  </div>

  <div class=example>
   <p>specific weights</p>
  </div>

  <div class=example>
   <p>bolder/lighter</p>
  </div>

  <div class=example>
   <p>bolder (synthesized)</p>
  </div>

  <div class=example>
   <p>condensed</p>
  </div>

  <div class=example>
   <p>run of text containing diacritics</p>
  </div>

  <div class=example>
   <p>run of text containing mixture of Japanese/English</p>
  </div>

  <div class=example>
   <p>simple downloaded font</p>
  </div>

  <div class=example>
   <p>font-face with local/url combination</p>
  </div>

  <div class=example>
   <p>It's useful to note that the CSS selector syntax may be used to create
    language-sensitive typography. For example, some Chinese and Japanese
    characters are unified to have the same Unicode codepoint, although the
    abstract glyphs are not the same in the two languages.</p>

   <pre>*:lang(ja-jp) { font: 900 14pt/16pt &quot;Heisei Mincho W9&quot;, serif; }
*:lang(zh-tw) { font: 800 14pt/16.5pt &quot;Li Sung&quot;, serif; }
</pre>

   <p>This selects any element that has the given language - Japanese or
    Traditional Chinese - and uses the appropriate font.</p>
  </div>

  <p>Leftover examples, rework:

  <div class=example>
   <p>Example of a family of fonts with different weights</p>
  </div>

  <div class=example>
   <p> The following example groups three physical fonts into one virtual
    font with extended coverage. In each case, the adorned font name is given
    in the src descriptor to allow locally installed versions to be
    preferentially used if available. A fourth rule points to a font with the
    same coverage, but contained in a single resource.</p>

   <pre>
@font-face {
  font-family: Excelsior;
  src: local(Excelsior Roman), url(http://site/er) format(intellifont);
  unicode-range: U+??; /* Latin-1 */
}
@font-face {
  font-family: Excelsior;
  src: local(Excelsior EastA Roman), url(http://site/ear) format(intellifont);
  unicode-range: U+100-220; /* Latin Extended A and B */
}
@font-face {
  font-family: Excelsior;
  src: local(Excelsior Cyrillic Upright), url(http://site/ecr) format(intellifont);
  unicode-range: U+4??; /* Cyrillic */
}
@font-face {
  font-family: Excelsior;
  src: url(http://site/excels) format(truedoc);
  unicode-range: U+??,U+100-220,U+4??;
}
</pre>
  </div>

  <h2 id=font-rendering><span class=secno>5. </span>Font rendering properties</h2>

  <ul>
   <li>these dictate how text is rendered, not which font face is used

   <li>[TBD]
  </ul>

  <h2 class=no-num id=appendix>Appendix A: Mapping CSS properties to font
   features</h2>

  <p>Font properties in CSS are designed to be independent of the underlying
   font formats used; they can be used to specify bitmap fonts, Type1 fonts,
   SVG fonts in addition to the common TrueType and OpenType formatted fonts.
   But there are facets of TrueType and OpenType format that often present
   challenges to implementors across platforms.

  <ul>
   <li>History of Development of TrueType and OpenType

   <li>Different definitions for different platforms - Windows vs. Apple

   <li>Name table differences - big mess

   <li>Notion of "OpenType savvy"

   <li>Use of weight tables

   <li>Cmap differences

   <li>Complex script handling for Arabic, Devanagari

   <li>Use of font linking on Windows - e.g. Tahoma

   <li>Symbol fonts
  </ul>

  <h2 class=no-num id=appendix0>Appendix B: Font licensing issues</h2>

  <p>The use of fonts on the web is often surrounded in controversy. Font
   designers expend huge amounts of effort to create their designs,
   painstakingly refining letterforms and tuning font data to assure that the
   letterforms appear as desired both in print and on the screen. As a result
   they often license their fonts very carefully, often with somewhat complex
   terms. Authors who want to use specific fonts via a downloadable font
   mechanism must always carefully verify that their intended use is within
   the scope of the font license. Many commercial fonts presently do not
   allow web downloading of their fonts in any form. Font formats often store
   references to the font license within the font data itself. When in doubt,
   it's best to verify with the font designer directly. Vendors that bundle
   fonts with their products are also strongly encouraged to carefully
   explain the license details that covers the fonts they bundle.

  <div class=example>
   <p>An author would like to use <a
    href="http://www.typography.com/fonts/font_overview.php?productLineID=100008">Gotham</a>,
    a font designed by Hoefler & Frere-Jones, as a downloadable font for
    their webpages. But the <a
    href="http://www.typography.com/home/eula.php">end-user license
    agreement</a> that covers Gotham specifically notes that usage via
    @font-face rules in CSS style sheets is not allowed. The author cannot
    use Gotham as a downloadable font for their web pages.</p>
  </div>

  <div class=example>
   <p>An author wants to use <a
    href="http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&item_id=Gentium">Gentium</a>,
    a font developed by SIL International. This font is licensed under the
    terms of the <a
    href="http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&item_id=OFL_web">Open
    Font License</a>, so as long as the author follows the relatively liberal
    terms of this license, they can use Gentium as a downloadable font for
    their web pages.</p>
  </div>

  <h2 class=no-num id=acknowledgments>Acknowledgments</h2>

  <p>A special thanks to Robert Bringhurst for the sublime mind expansion
   that is <em>The Elements of Typographic Style</em>.

  <h2 class=no-num id=references>References</h2>

  <h3 class=no-num id=normative>Normative</h3>
  <!--begin-normative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=UNICODE5>[UNICODE5]

   <dd>The Unicode Consortium. <a
    href="http://www.unicode.org/versions/Unicode5.1.0/"><cite>The Unicode
    Standard, Version 5.1.0.</cite></a> Addison-Wesley. 2007. ISBN
    0-321-48091-0. URL: <a
    href="http://www.unicode.org/versions/Unicode5.1.0/">http://www.unicode.org/versions/Unicode5.1.0/</a>
    </dd>
   <!---->
  </dl>
  <!--end-normative-->
  <!--{{!UNICODE5}}-->

  <h3 class=no-num id=informative>Informative</h3>
  <!--begin-informative-->
  <!-- Sorted by label -->

  <dl class=bibliography>
   <dt style="display: none"><!-- keeps the doc valid if the DL is empty -->
    <!---->

   <dt id=ARABIC-TYPO>[ARABIC-TYPO]

   <dd>Huda Smitshuijzen AbiFares. <cite>Arabic Typography: A Comprehensive
    Sourcebook.</cite> 2001. ISBN 0-86356-347-3.</dd>
   <!---->

   <dt id=ELEMTYPO>[ELEMTYPO]

   <dd>Robert Bringhurst. <cite>The Elements of Typographic Style, Version
    3.1.</cite> 2005. ISBN 0-88179-206-3.</dd>
   <!---->

   <dt id=LANGCULTTYPE>[LANGCULTTYPE]

   <dd>John D. Berry, Ed. <cite>Language Culture Type.</cite> 2001. ISBN
    1-932026-01-0.</dd>
   <!---->
  </dl>
  <!--end-informative-->
  <!--{{ARABIC-TYPO}}-->
  <!--{{ELEMTYPO}}-->
  <!--{{LANGCULTTYPE}}-->

  <h2 class=no-num id=index>Index</h2>
  <!--begin-index-->

  <ul class=indexlist>
   <li>aspect value, <a href="#aspect" title="aspect
    value"><strong>#</strong></a>

   <li>at-rules, <a href="#at-rule" title=at-rules>#</a>

   <li>bicameral, <a href="#bicameral0" title=bicameral>#</a>
    <ul>
     <li>definition of, <a href="#bicameral" title="bicameral definition
      of"><strong>#</strong></a>
    </ul>

   <li>cursive, definition of, <a href="#cursive0" title="cursive, definition
    of"><strong>#</strong></a>, <a href="#cursive1" title="cursive,
    definition of"><strong>#</strong></a>

   <li>fantasy, definition of, <a href="#fantasy0" title="fantasy, definition
    of"><strong>#</strong></a>, <a href="#fantasy1" title="fantasy,
    definition of"><strong>#</strong></a>

   <li>font, <a href="#font" title=font><strong>#</strong></a>

   <li>@font-face, <a href="#font-face"
    title="@font-face"><strong>#</strong></a>, <a href="#font-face0"
    title="@font-face">#</a>, <a href="#font-face1" title="@font-face">#</a>,
    <a href="#font-face2" title="@font-face">#</a>

   <li>font-family, <a href="#font-family1"
    title=font-family><strong>#</strong></a>, <a href="#font-family2"
    title=font-family><strong>#</strong></a>

   <li>font-size, <a href="#font-size0"
    title=font-size><strong>#</strong></a>

   <li>font-size-adjust, <a href="#font-size-adjust"
    title=font-size-adjust><strong>#</strong></a>

   <li>font-stretch, <a href="#font-stretch0"
    title=font-stretch><strong>#</strong></a>, <a href="#font-stretch1"
    title=font-stretch><strong>#</strong></a>

   <li>font-style, <a href="#font-style1"
    title=font-style><strong>#</strong></a>, <a href="#font-style2"
    title=font-style><strong>#</strong></a>

   <li>font-variant, <a href="#font-variant"
    title=font-variant><strong>#</strong></a>

   <li>font-weight, <a href="#font-weight1"
    title=font-weight><strong>#</strong></a>, <a href="#font-weight2"
    title=font-weight><strong>#</strong></a>

   <li>ignore, <a href="#ignore" title=ignore>#</a>, <a href="#ignore0"
    title=ignore>#</a>, <a href="#ignored" title=ignore>#</a>, <a
    href="#ignored." title=ignore>#</a>, <a href="#ignored.0"
    title=ignore>#</a>

   <li>&lt;absolute-size&gt;
    <ul>
     <li>definition of, <a href="#ltabsolute-sizegt"
      title="&lt;absolute-size&gt; definition of"><strong>#</strong></a>
    </ul>

   <li>&lt;font-description&gt;
    <ul>
     <li>definition of, <a href="#ltfont-descriptiongt"
      title="&lt;font-description&gt; definition of"><strong>#</strong></a>
    </ul>

   <li>&lt;font-face-name&gt;
    <ul>
     <li>definition of, <a href="#ltfont-face-namegt"
      title="&lt;font-face-name&gt; definition of"><strong>#</strong></a>
    </ul>

   <li>&lt;length&gt;, <a href="#ltlengthgt" title="&lt;length&gt;">#</a>

   <li>&lt;number&gt;, <a href="#ltnumbergt" title="&lt;number&gt;">#</a>

   <li>&lt;percentage&gt;, <a href="#ltpercentagegt"
    title="&lt;percentage&gt;">#</a>

   <li>&lt;relative-size&gt;
    <ul>
     <li>definition of, <a href="#ltrelative-sizegt"
      title="&lt;relative-size&gt; definition of"><strong>#</strong></a>
    </ul>

   <li>&lt;urange&gt;
    <ul>
     <li>definition of, <a href="#lturangegt" title="&lt;urange&gt;
      definition of"><strong>#</strong></a>
    </ul>

   <li>monospace, definition of, <a href="#monospace0" title="monospace,
    definition of"><strong>#</strong></a>, <a href="#monospace1"
    title="monospace, definition of"><strong>#</strong></a>

   <li>sans-serif, definition of, <a href="#sans-serif0" title="sans-serif,
    definition of"><strong>#</strong></a>, <a href="#sans-serif1"
    title="sans-serif, definition of"><strong>#</strong></a>

   <li>serif, definition of, <a href="#serif0" title="serif, definition
    of"><strong>#</strong></a>, <a href="#serif1" title="serif, definition
    of"><strong>#</strong></a>

   <li>src, <a href="#src" title=src><strong>#</strong></a>

   <li>system fonts, <a href="#system" title="system
    fonts"><strong>#</strong></a>

   <li>unicameral
    <ul>
     <li>definition of, <a href="#unicameral" title="unicameral definition
      of"><strong>#</strong></a>
    </ul>

   <li>unicode-range, <a href="#unicode-range"
    title=unicode-range><strong>#</strong></a>
  </ul>
  <!--end-index-->

  <h2 class=no-num id=property-index>Property index</h2>
  <!--begin properties-->

  <table class=proptable>
   <thead>
    <tr>
     <th>Property

     <th>Values

     <th>Initial

     <th>Applies&nbsp;to

     <th>Inh.

     <th>Percentages

     <th>Media

   <tbody>
    <tr valign=baseline>
     <td><a class=property href="#font">font</a>

     <td>[ [ &lt;&lsquo;font-style&rsquo;> || &lt;&lsquo;font-variant&rsquo;>
      || &lt;&lsquo;font-weight&rsquo;> ]? &lt;&lsquo;font-size&rsquo;> [ /
      &lt;&lsquo;line-height&rsquo;> ]? &lt;&lsquo;font-family&rsquo;> ] |
      caption | icon | menu | message-box | small-caption | status-bar |
      inherit

     <td>see individual properties

     <td>all elements

     <td>yes

     <td>see individual properties

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-family2">font-family</a>

     <td>[[ &lt;family-name> | &lt;generic-family> ] [, &lt;family-name>|
      &lt;generic-family>]* ] | inherit

     <td>depends on user agent

     <td>all elements

     <td>yes

     <td>N/A

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-size0">font-size</a>

     <td>&lt;absolute-size> | &lt;relative-size> | &lt;length> |
      &lt;percentage> | inherit

     <td>medium

     <td>all elements

     <td>yes

     <td>refer to parent element's font size

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-size-adjust">font-size-adjust</a>

     <td>&lt;number> | none | inherit

     <td>none

     <td>all elements

     <td>yes

     <td>hmmmm

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-stretch1">font-stretch</a>

     <td>normal | wider | narrower | ultra-condensed | extra-condensed |
      condensed | semi-condensed | semi-expanded | expanded | extra-expanded
      | ultra-expanded | inherit

     <td>normal

     <td>all elements

     <td>yes

     <td>N/A

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-style2">font-style</a>

     <td>normal | italic | oblique | inherit

     <td>normal

     <td>all elements

     <td>yes

     <td>N/A

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-variant">font-variant</a>

     <td>normal | small-caps | inherit

     <td>normal

     <td>all elements

     <td>yes

     <td>N/A

     <td>visual

    <tr valign=baseline>
     <td><a class=property href="#font-weight2">font-weight</a>

     <td>normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600
      | 700 | 800 | 900 | inherit

     <td>normal

     <td>all elements

     <td>yes

     <td>N/A

     <td>visual
  </table>
  <!--end properties-->
</html>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-declaration:"~/SGML/HTML4.decl"
sgml-default-doctype-name:"html"
sgml-minimize-attributes:t
sgml-nofill-elements:("pre" "style" "br")
sgml-live-element-indicator:t
sgml-omittag:nil
sgml-shorttag:nil
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-always-quote-attributes:t
sgml-indent-step:nil
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
