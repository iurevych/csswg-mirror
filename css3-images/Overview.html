<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">

<html lang=en>
 <head><meta content="text/html; charset=utf-8" http-equiv=Content-Type>

  <title>CSS Image Values and Replaced Content Module Level 3</title>
  <link href="../default.css" rel=stylesheet type="text/css">
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel=stylesheet
  type="text/css">

  <style>
  p { margin: .5em 0; }
  </style>

 <body>
  <div class=head> <!--begin-logo-->
   <p><a href="http://www.w3.org/"><img alt=W3C height=48
    src="http://www.w3.org/Icons/w3c_home" width=72></a> <!--end-logo-->

   <h1>CSS Image Values and Replaced Content Module Level 3</h1>

   <h2 class="no-num no-toc" id=longstatus-date>Editor's Draft 12 January
    2011</h2>

   <dl>
    <dt>This version:</dt>
    <!-- <dd><a href="http://www.w3.org/TR/2011/CR-css3-images-20110112/">http://www.w3.org/TR/2011/CR-css3-images-20110112/</a></dd> -->

    <dd><a
     href="http://dev.w3.org/csswg/css3-images/">http://dev.w3.org/csswg/css3-images/</a>
     <!-- <dt>Latest version:</dt>
    <dd><a href="http://www.w3.org/TR/css3-images/">http://www.w3.org/TR/css3-images/</a></dd>
  <dt>Previous version:</dt>
    <dd><a href="http://www.w3.org/TR/2008/CR-css3-namespace-20080523/">http://www.w3.org/TR/2008/CR-css3-namespace-20080523/</a></dd> -->
     

    <dt>Editor:

    <dd><a href="http://fantasai.inkedblade.net/contact">Elika J. Etemad</a>

    <dd><a href="http://www.xanthir.com/contact">Tab Atkins Jr.</a>
   </dl>
   <!--begin-copyright-->
   <p class=copyright><a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright"
    rel=license>Copyright</a> &copy; 2011 <a
    href="http://www.w3.org/"><acronym title="World Wide Web
    Consortium">W3C</acronym></a><sup>&reg;</sup> (<a
    href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute
    of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym
    title="European Research Consortium for Informatics and
    Mathematics">ERCIM</acronym></a>, <a
    href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a
    href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a>
    and <a
    href="http://www.w3.org/Consortium/Legal/copyright-documents">document
    use</a> rules apply.</p>
   <!--end-copyright-->
   <hr title="Separator for header">
  </div>

  <h2 class="no-num no-toc" id=abstract>Abstract</h2>

  <p>This CSS Image Values and Replaced Content module has two parts: First,
   it defines the syntax for &lt;image&gt; values in CSS. &lt;image&gt;
   values can be a single URI to an image, a list of URIs denoting a series
   of fallbacks, a reference to an element in the document, or gradients.
   Second, it defines properties used to control the interaction of replaced
   content and the CSS layout algorithms. These properties can affect the
   used image resolution for bitmaps, the replaced object's orientation, and
   whether and how to preserve the object's aspect ratio.

  <h2 class="no-num no-toc" id=status>Status of this document</h2>
  <!--begin-status-->

  <p>This is a public copy of the editors' draft. It is provided for
   discussion only and may change at any moment. Its publication here does
   not imply endorsement of its contents by W3C. Don't cite this document
   other than as work in progress.

  <p>The (<a
   href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public
   mailing list <a
   href="mailto:www-style@w3.org?Subject=%5Bcss3-images%5D%20PUT%20SUBJECT%20HERE">
   www-style@w3.org</a> (see <a
   href="http://www.w3.org/Mail/Request">instructions</a>) is preferred for
   discussion of this specification. When sending e-mail, please put the text
   &#8220;css3-images&#8221; in the subject, preferably like this:
   &#8220;[<!---->css3-images<!---->] <em>&hellip;summary of
   comment&hellip;</em>&#8221;

  <p>This document was produced by the <a href="/Style/CSS/members">CSS
   Working Group</a> (part of the <a href="/Style/">Style Activity</a>).

  <p>This document was produced by a group operating under the <a
   href="/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent
   Policy</a>. W3C maintains a <a href="/2004/01/pp-impl/32061/status"
   rel=disclosure>public list of any patent disclosures</a> made in
   connection with the deliverables of the group; that page also includes
   instructions for disclosing a patent. An individual who has actual
   knowledge of a patent which the individual believes contains <a
   href="/Consortium/Patent-Policy-20040205/#def-essential">Essential
   Claim(s)</a> must disclose the information in accordance with <a
   href="/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the
   W3C Patent Policy</a>.</p>
  <!--end-status-->

  <h2 class="no-num no-toc" id=contents>Table of contents</h2>
  <!--begin-toc-->

  <ul class=toc>
   <li><a href="#intro"><span class=secno>1. </span>Introduction</a>

   <li><a href="#conformance"><span class=secno>2. </span>Conformance</a>

   <li><a href="#resolution-units-the-ltresolutiongt-valu"><span
    class=secno>3. </span>Resolution Units: the &lt;resolution&gt; value
    type</a>

   <li><a href="#image"><span class=secno>4. </span>Image Values: the
    &lt;image> value type</a>
    <ul class=toc>
     <li><a href="#url"><span class=secno>4.1. </span>Image References and
      Image Slices: the &lsquo;<code class=css>url()</code>&rsquo;
      notation</a>

     <li><a href="#image-notation"><span class=secno>4.2. </span>Image
      Fallbacks: the &lsquo;<code class=css>image()</code>&rsquo;
      notation</a>

     <li><a href="#element-reference"><span class=secno>4.3. </span>Using
      Elements as Images: The &lsquo;<code class=css>element()</code>&rsquo;
      notation</a>

     <li><a href="#cross-fade-function"><span class=secno>4.4.
      </span>Combining images: The &lsquo;<code
      class=css>cross-fade()</code>&rsquo; notation</a>
    </ul>

   <li><a href="#gradients"><span class=secno>5. </span>Gradients</a>
    <ul class=toc>
     <li><a href="#linear-gradients"><span class=secno>5.1. </span>Linear
      Gradients</a>

     <li><a href="#radial-gradients"><span class=secno>5.2. </span>Radial
      Gradients</a>

     <li><a href="#repeating-gradients"><span class=secno>5.3.
      </span>Repeating Gradients</a>

     <li><a href="#color-stop-syntax"><span class=secno>5.4.
      </span><code>color-stop</code> Syntax</a>
    </ul>

   <li><a href="#sizing"><span class=secno>6. </span>Sizing Images and
    Objects in CSS</a>
    <ul class=toc>
     <li><a href="#image-resolution"><span class=secno>6.1. </span>Overriding
      Image Resolutions: the &lsquo;<code
      class=property>image-resolution</code>&rsquo; property</a>

     <li><a href="#image-orientation"><span class=secno>6.2. </span>Orienting
      an Image on the Page: the &lsquo;<code
      class=property>image-orientation</code>&rsquo; property</a>

     <li><a href="#image-rendering"><span class=secno>6.3. </span>Determining
      How to Scale an Image: The &lsquo;<code
      class=property>image-rendering</code>&rsquo; Property</a>

     <li><a href="#object-fit"><span class=secno>6.4. </span>Sizing Replaced
      Elements: The &lsquo;<code class=property>object-fit</code>&rsquo;
      Property</a>

     <li><a href="#object-position"><span class=secno>6.5. </span>Positioning
      Replaced Images: The &lsquo;<code
      class=property>object-position</code>&rsquo; Property</a>
    </ul>

   <li><a href="#serialization"><span class=secno>7. </span>Serialization</a>
    
    <ul class=toc>
     <li><a href="#serializing-resolution"><span class=secno>7.1.
      </span>Serializing a &lt;resolution></a>

     <li><a href="#serializing-url-notation"><span class=secno>7.2.
      </span>Serializing the &lsquo;<code class=css>url()</code>&rsquo;
      notation</a>

     <li><a href="#serializing-image-notation"><span class=secno>7.3.
      </span>Serializing the &lsquo;<code class=css>image()</code>&rsquo; /
      &lsquo;<code class=css>&lt;image-list></code>&rsquo; notation</a>

     <li><a href="#serializing-element-notation"><span class=secno>7.4.
      </span>Serializing the &lsquo;<code class=css>element()</code>&rsquo; /
      &lsquo;<code class=css>&lt;element-reference></code>&rsquo;
      notation</a>

     <li><a href="#serializing-cross-fade"><span class=secno>7.5.
      </span>Serializing the &lsquo;<code
      class=css>cross-fade()</code>&rsquo; / &lsquo;<code
      class=css>&lt;image-combination></code>&rsquo; notation</a>

     <li><a href="#serializing-gradients"><span class=secno>7.6.
      </span>Serializing Gradients</a>

     <li><a href="#serializing-properties"><span class=secno>7.7.
      </span>Serializing new properties</a>
    </ul>

   <li><a href="#interpolation"><span class=secno>8. </span>Interpolation</a>
    
    <ul class=toc>
     <li><a href="#interpolating-ltimage"><span class=secno>8.1.
      </span>Interpolating &lsquo;<code
      class=css>&lt;image></code>&rsquo;</a>

     <li><a href="#interpolating-gradients"><span class=secno>8.2.
      </span>Interpolating &lsquo;<code
      class=css>&lt;gradient></code>&rsquo;</a>
    </ul>

   <li class=no-num><a href="#acknowledgments">Acknowledgments</a>

   <li class=no-num><a href="#references">References</a>
    <ul class=toc>
     <li class=no-num><a href="#normative-references">Normative
      references</a>

     <li class=no-num><a href="#informative-references">Informative
      references</a>
    </ul>
  </ul>
  <!--end-toc-->

  <div>
   <h2 id=intro><span class=secno>1. </span>Introduction</h2>

   <p><em>This section is non-normative.</em></p>

   <p>In CSS Levels 1 and 2, image values, such as those used in the
    &lsquo;<code class=property>background-image</code>&rsquo; property,
    could only be given by a single URI value. This module introduces
    additional notations that allow a 2D image to be given as a list of URIs
    denoting fallbacks, as a reference to an element in the document, and as
    a gradient.</p>
  </div>

  <div>
   <h2 id=conformance><span class=secno>2. </span>Conformance</h2>

   <p>A document or implementation cannot conform to CSS Image Values &
    Replaced Content Level 3 alone, but can claim conformance to CSS Image
    Values & Replaced Content Level 3 if it satisfies the conformance
    requirements in this specification when implementing CSS or another host
    language that normatively references this specification.</p>

   <p>Conformance to CSS Image Values & Replaced Content Level 3 is defined
    for three classes:

   <dl>
    <dt><dfn id=minimal>minimal</dfn>

    <dd>A device that does not implement CSS Transforms, CSS Animations, nor
     CSSOM may ignore the chapters on Serializing and Interpolating values
     for the purpose of claiming conformance.

    <dt><dfn id=transition-capable>transition-capable</dfn>

    <dd>A device that implements CSS Transitions or CSS Animations must
     conform to the &lsquo;<a href="#minimal"><code
     class=css>minimal</code></a>&rsquo; class, and additionally must
     implement the chapter on Interpolation.

    <dt><dfn id=cssom-capable>CSSOM-capable</dfn>

    <dd>A device that implements CSSOM must conform to the &lsquo;<a
     href="#minimal"><code class=css>minimal</code></a>&rsquo; class, and
     additionally must implement the chapter on Serialization.
   </dl>

   <p>The conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words "MUST",
    "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
    "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
    document are to be interpreted as described in RFC 2119. However, for
    readability, these words do not appear in all uppercase letters in this
    specification. All of the text of this specification is normative except
    sections explicitly marked as non-normative, examples, and notes. <a
    href="#RFC2119" rel=biblioentry>[RFC2119]<!--{{!RFC2119}}--></a></p>

   <p>Examples in this specification are introduced with the words "for
    example" or are set apart from the normative text with
    <code>class="example"</code>, like this:

   <div class=example>
    <p>This is an example of an informative example.</p>
   </div>

   <p>Informative notes begin with the word "Note" and are set apart from the
    normative text with <code>class="note"</code>, like this:

   <p class=note>Note, this is an informative note.</p>
  </div>

  <div>
   <h2 id=resolution-units-the-ltresolutiongt-valu><span class=secno>3.
    </span>Resolution Units: the &lt;resolution&gt; value type</h2>

   <p>This specification defines the following units as part of the <dfn
    id=ltresolutiongt>&lt;resolution&gt;</dfn> value type:

   <dl>
    <dt>dpi

    <dd>dots per inch

    <dt>dpcm

    <dd>dots per centimeter

    <dt>dppx

    <dd>dots per &lsquo;<code class=css>px</code>&rsquo; unit
   </dl>

   <p class=note>The default resolution of raster images in CSS is
    &lsquo;<code class=css>1dppx</code>&rsquo;.</p>
  </div>

  <div>
   <h2 id=image><span class=secno>4. </span>Image Values: the &lt;image>
    value type</h2>

   <p>The &lt;image> value type denotes a 2D image. It is defined as

   <pre
    class=prod><dfn id=ltimagegt>&lt;image&gt;</dfn> = &lt;url> | &lt;image-list> | &lt;element-reference> | &lt;image-combination> | &lt;gradient></pre>

   <p>Image values can be used in many CSS properties, including the
    &lsquo;<code class=property>background-image</code>&rsquo;, &lsquo;<code
    class=property>list-style-image</code>&rsquo;, &lsquo;<code
    class=property>cursor</code>&rsquo; properties <a href="#CSS21"
    rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>.

   <div>
    <h3 id=url><span class=secno>4.1. </span>Image References and Image
     Slices: the &lsquo;<code class=css>url()</code>&rsquo; notation</h3>

    <p>The simplest way to indicate an image is to reference an image file by
     URI. This is done with the <a
     href="http://www.w3.org/TR/CSS21/syndata.html#uri">&lsquo;<code
     class=css>url()</code>&rsquo; notation</a>, defined in <a href="#CSS21"
     rel=biblioentry>[CSS21]<!--{{!CSS21}}--></a>.

    <div class=example>
     <p>In the example below, a background image is specified with
      &lsquo;<code class=css>url()</code>&rsquo; syntax:</p>

     <pre>background-image: url(wavy.png);</pre>
    </div>

    <p>A portion of an image may be referenced (clipped out and used as a
     standalone image) by use of fragment identifiers. <span class=issue>Need
     a spec to reference here. Expecting to get one from <a
     href="http://www.w3.org/2008/WebVideo/Fragments/">Media Fragments
     WG</a>.</span>

    <div class=example>
     <p>For example,</p>

     <pre>background-image: url('logos.png#xywh=10,30,60,20')</pre>

     <p>uses the 60 pixel by 20 pixel rectangle of <code>logos.png</code>
      beginning at the point 10 pixels in from the left, 30 pixels down from
      the top.

     <p class=note>Note that quotation marks are required here, because
      unquoted commas are not allowed in &lsquo;<code
      class=css>url()</code>&rsquo; syntax.</p>
    </div>
   </div>

   <div>
    <h3 id=image-notation><span class=secno>4.2. </span>Image Fallbacks: the
     &lsquo;<code class=css>image()</code>&rsquo; notation</h3>

    <p>The &lsquo;<code class=css>image()</code>&rsquo; notation allows an
     author to specify multiple images, each one a fallback for the previous.
     The UA must use only the first image that it can load and display. The
     syntax for &lsquo;<code class=css>image()</code>&rsquo; is defined as

    <pre class=prod><dfn id=ltimage-list>&lt;image-list></dfn> = <!--
		  -->image( [ &lt;image-decl&gt; , ]* [ &lt;image-decl&gt; | &lt;color> | &lt;element-reference> | &lt;image-combination> | &lt;gradient> ] )</pre>

    <p>where &lt;image-decl&gt; is given by

    <pre class=prod><dfn id=ltimage-decl>&lt;image-decl></dfn> = <!--
		 -->[ &lt;string&gt; | &lt;url-token&gt; ] [ snap? &amp;&amp; &lt;resolution&gt; ]?</pre>

    <p>&lt;url-token&gt; is given as
     <code>[!#$%&amp;*-~]|{nonascii}|{escape}</code> (i.e. the contents of
     &lsquo;<code class=css>url()</code>&rsquo;) using the productions in the
     <a href="http://www.w3.org/TR/CSS21/syndata.html#tokenization">CSS2.1
     tokenization</a>. <strong>The &lt;url-token&gt; must not contain
     unescaped brackets, commas, white space characters, single quotes (') or
     double quotes (&quot;); if it does the &lsquo;<code
     class=css>image()</code>&rsquo; containing it is invalid.</strong>

    <p>Each string or url-token represents the URI of an image. If a
     resolution is given, then the image must be rendered at the specified
     resolution. If the &lsquo;<code class=css>snap</code>&rsquo; keyword is
     also specified, and the image is a raster image, then the image must be
     rendered at the resolution closest to the specified resolution that
     would result in no pixel rounding. <span class=issue>I don't think "no
     pixel rounding" is the right terminology here... basically we want to
     avoid blurry images.</span></p>

    <p>The optional color at the end of the list is the <dfn
     id=fallback-color>fallback color</dfn>. It is used if, and only if, none
     of the images can be loaded and displayed (e.g. because they are in
     unsupported formats, or cannot be found, or are corrupted in some way,
     or because image loading is disabled in the UA). It is treated as a
     single-color image with no intrinsic dimensions.

    <div class=example>
     <p>For example, the rule below would tell the UA to load &lsquo;<code
      class=css>wavy.svg</code>&rsquo; if it can; failing that to load
      &lsquo;<code class=css>wavy.png</code>&rsquo; and display it at 150dpi;
      failing that to display &lsquo;<code class=css>wavy.gif</code>&rsquo;;
      and finally, if none of the images can be loaded and displayed, to use
      the color &lsquo;<code class=css>blue</code>&rsquo; to create a
      dimensionless background image.

     <pre>background-image: image(wavy.svg, 'wavy.png' 150dpi, "wavy.gif", blue);</pre>

     <p>The &lsquo;<code class=property>background-image</code>&rsquo;
      property specifies that dimensionless images must stretch to cover the
      entire background positioning area <a href="#CSS3BG"
      rel=biblioentry>[CSS3BG]<!--{{CSS3BG}}--></a>, so if none of the
      specified images can be displayed the background will be painted blue.
      As with any image, this fallback will be painted over the &lsquo;<code
      class=property>background-color</code>&rsquo; (if any).
    </div>

    <p>If the URL for the image ends in a file extension (a period followed
     by letters) of four ascii letters ([a-zA-Z]) or less, then the UA
     <em>may</em> skip trying to load images whose file extension matches an
     image format it knows it does not support. For example, a UA that knows
     it supports JPEG and GIF, but expects to encounter many PNG and SVG
     images may choose to skip over images with filenames ending in
     &lsquo;<code class=css>.png</code>&rsquo; or &lsquo;<code
     class=css>.svg</code>&rsquo; without loading them to check their MIME
     type. However it must not skip over images with filenames ending in
     extensions it doesn't recognize.
   </div>

   <div>
    <h3 id=element-reference><span class=secno>4.3. </span>Using Elements as
     Images: The &lsquo;<code class=css>element()</code>&rsquo; notation</h3>

    <p>The &lsquo;<code class=css>element()</code>&rsquo; function allows an
     author to reference an element in the document that should be used as an
     image. As the referenced element changes, for example, by the user
     typing into a &lt;textarea> element or a script drawing into a
     &lt;canvas> element in HTML, the image produced by the &lsquo;<code
     class=css>element()</code>&rsquo; function stays in sync, allowing
     dynamic effects such as script-animated background images or previews of
     the next slide in a slideshow. The syntax for &lsquo;<code
     class=css>element()</code>&rsquo; is defined as:</p>

    <pre
     class=prod><dfn id=ltelement-reference>&lt;element-reference></dfn> = element( [&lt;id-selector> | &lt;identifier> ] )</pre>

    <p>where &lt;id-selector> is an ID selector <a href="#SELECT"
     rel=biblioentry>[SELECT]<!--{{!SELECT}}--></a>, and &lt;identifier> is
     an identifer <a href="#CSS3VAL"
     rel=biblioentry>[CSS3VAL]<!--{{!CSS3VAL}}--></a>.</p>

    <p>If the argument to the &lsquo;<code class=css>element()</code>&rsquo;
     function is an ID selector, the function references the element matched
     by the selector. If it's an identifier, the function references the
     element who's <dfn id=css-element-reference-identifier>CSS element
     reference identifier</dfn> is the given identifier. (CSS does not define
     how an element acquires a &lsquo;<a
     href="#css-element-reference-identifier"><code class=css>CSS element
     reference identifier</code></a>&rsquo;; that is determined by the host
     language.) If no element in the document matches the selector, or no
     element has the identifier as its &lsquo;<a
     href="#css-element-reference-identifier"><code class=css>CSS element
     reference identifier</code></a>&rsquo;, the function represents a fully
     transparent image with no intrinsic dimensions, equivalent to
     <code>image(transparent)</code>. If the document changes so that which
     element is matched, or whether an element is matched at all, changes,
     the image represented by the function must change accordingly.</p>

    <p>If the &lsquo;<code class=css>element()</code>&rsquo; function refers
     to an element, then it represents an image with width and height equal
     to the width and height of the margin box of the referenced element. The
     image must be constructed by rendering the referenced element and its
     descendants at the same size that the element would be in its document,
     over an infinite transparent black background, positioned so that the
     edges of the margin box of the element is flush with the edges of the
     image. <span class=note>If the element has decorations or descendants
     that extend outside the margin box, these will be clipped to the margin
     box in the generated image by default. &lsquo;<code
     class=css>background-repeat:extend</code>&rsquo; may allow the author to
     override this behavior so that decorations and descendants outside the
     margin box are still painted.</span> If the referenced element or an
     ancestor of the referenced element has a transform applied to it, the
     transform must be ignored for the purpose of constructing this image
     (transforms on descendants must be unaffected).</p>

    <p>If the argument passed to &lsquo;<code
     class=css>element()</code>&rsquo; isn't an ID selector or an ident, it
     is a syntax error.</p>

    <div class=example> TODO: copy an example from the MozHacks article</div>

    <div>
     <h4 class="no-num no-toc" id=element-cycles>Detecting and Resolving
      Circular Relationships Introduced by &lsquo;<code
      class=css>element()</code>&rsquo;</h4>

     <p>The &lsquo;<code class=css>element()</code>&rsquo; function can
      produce nonsensical circular relationships, such as an element using
      itself as its own background. These relationships can be easily and
      reliably detected and resolved, however, by keeping track of a
      dependency graph and using common cycle-detection algorithms.</p>

     <p>Populate the dependency graph initially by having every element
      depend on each of its children. Then, whenever a property on an element
      A uses the &lsquo;<code class=css>element()</code>&rsquo; function to
      refer to an element B, add an edge to the graph by having A depend on
      B. If a dependency cycle is detected, any &lsquo;<code
      class=css>element()</code>&rsquo; functions that produced a dependency
      in the cycle represent a fully transparent image with no intrinsic
      dimensions.</p>

     <p class=issue>Someone else needs to review this and make sure that I'm
      not missing any cycles.</p>
    </div>
   </div>

   <div>
    <h3 id=cross-fade-function><span class=secno>4.4. </span>Combining
     images: The &lsquo;<code class=css>cross-fade()</code>&rsquo; notation</h3>

    <p>When transitioning between images, CSS requires a way to explicitly
     refer to the intermediate image that is a combination of the start and
     end images. This is accomplished with the &lsquo;<code
     class=css>cross-fade()</code>&rsquo; function, which indicates the two
     images to be combined and how far along in the transition the
     combination is. Authors may also use the &lsquo;<code
     class=css>cross-fade()</code>&rsquo; function for many simple image
     manipulations, such as tinting an image with a solid color or
     highlighting a particular area of the page by combining an image with a
     radial gradient. The syntax for &lsquo;<code
     class=css>cross-fade()</code>&rsquo; is defined as:</p>

    <pre
     class=prod><dfn id=ltimage-combination>&lt;image-combination></dfn> = cross-fade( &lt;image>, &lt;image>, &lt;percentage> )</pre>

    <p>The function represents an image generated by combining the first and
     second image (referred to in this section as the "start" and "end"
     images, respectively). The percentage represents how far along the
     transformation is, with 0% representing the start image, 100%
     representing the end image, and percentages between that representing
     corresponding combinations of the two images. The &lt;percentage> must
     be between 0% and 100% inclusive; any other value is a syntax error.</p>

    <p>Given the &lt;percentage> p, the combined image represented by the
     &lsquo;<code class=css>cross-fade()</code>&rsquo; function has a width
     equal to <code>start image width * (1-p) + end image width * p</code>
     and a height equal to <code>start image height * (1-p) + end image
     height * p</code>. The image itself is generated by first scaling both
     the start and end images to the size of the combined image. Then, the
     start image has a global alpha applied to it equal to (1-p), the end
     image has a global alpha applied to it equal to p, and the end image is
     then composited over the start image with the source-over operation.
     [[PORTERDUFF]]</p>
   </div>
  </div>

  <div>
   <h2 id=gradients><span class=secno>5. </span>Gradients</h2>

   <p>A gradient is an image that smoothly fades from one color to another.
    These are commonly used for subtle shading in background images, buttons,
    and many other things. The two functions described in this section allow
    an author to specify such an image in a terse syntax, so that the UA can
    generate the image automatically when rendering the page. Gradients are a
    type of image, and can be used anywhere an image can, such as in the
    &lsquo;<code class=property>background-image</code>&rsquo; or
    &lsquo;<code class=property>list-style-image</code>&rsquo; properties.
    The syntax of a &lsquo;<a href="#ltgradient"><code
    class=css>&lt;gradient></code></a>&rsquo; is:</p>

   <pre
    class=prod><dfn id=ltgradient>&lt;gradient></dfn> = [ &lt;linear-gradient> | &lt;radial-gradient> | &lt;repeating-linear-gradient> | &lt;repeating-radial-gradient> ]</pre>

   <p>where &lsquo;<a href="#ltlinear-gradient"><code
    class=css>&lt;linear-gradient></code></a>&rsquo;, &lsquo;<a
    href="#ltradial-gradient"><code
    class=css>&lt;radial-gradient></code></a>&rsquo;, &lsquo;<a
    href="#ltrepeating-linear-gradient"><code
    class=css>&lt;repeating-linear-gradient></code></a>&rsquo;, and &lsquo;<a
    href="#ltrepeating-radial-gradient"><code
    class=css>&lt;repeating-radial-gradient></code></a>&rsquo; are defined in
    their applicable sections below.</p>

   <div class=example>
    <p>As with the other &lt;image&gt; types defined in this specification,
     gradients can be used in any property that accepts images. For example:</p>

    <ul>
     <li><code>background: linear-gradient(white, gray);</code>

     <li><code>list-style-image: radial-gradient(circle, #006, #00a 90%,
      #0000af 100%, white 100%)</code>
    </ul>
   </div>

   <p class=note>In many places this section references a box, such as "the
    box's top-left corner" or "the box's right side". In all of these
    circumstances, the "box" refers to the &lsquo;<a
    href="#css-view-box"><code class=css>CSS View Box</code></a>&rsquo; (see
    the "Sizing Images and Objects in CSS" section of this spec for
    clarification). A gradient has no intrinsic dimensions. This means that,
    for example, if you use a gradient in a &lsquo;<code
    class=property>background-image</code>&rsquo;, the "box" will simply be
    the size of the background sizing area. If you use a gradient in a
    list-style-image, the "box" will be a 1em square.</p>

   <div>
    <h3 id=linear-gradients><span class=secno>5.1. </span>Linear Gradients</h3>

    <p>A linear gradient is created by specifying a gradient-line and then
     several colors placed along that line. The image is constructed by
     creating an infinite canvas and painting it with lines perdendicular to
     the gradient-line, with the color of the painted line being the color of
     the gradient-line where the two intersect. This produces a smooth fade
     from each color to the next, progressing in the specified direction.</p>

    <h4 class=no-toc id=linear-gradient-syntax><span class=secno>5.1.1.
     </span><code>linear-gradient()</code> syntax</h4>

    <pre
     class=prod><code><dfn id=ltlinear-gradient>&lt;linear-gradient></dfn> = linear-gradient(
[ 
	[ [top | bottom] || [left | right] ] 
	|| 
	&lt;angle>
,]? 
&lt;color-stop&gt;[, &lt;color-stop&gt;]+
);</code></pre>

    <p>The first argument to the function specifies the <dfn
     id=gradient-line>gradient-line</dfn>, which gives the gradient a
     direction and determines how color-stops are positioned. It may be
     omitted; if so, it defaults to &lsquo;<code class=css>top</code>&rsquo;.</p>

    <p>The &lsquo;<a href="#gradient-line"><code
     class=css>gradient-line</code></a>&rsquo; may be specified in two
     different ways. The first is by specifying the angle the &lsquo;<a
     href="#gradient-line"><code class=css>gradient-line</code></a>&rsquo;
     should assume; this uses the standard algebraic notation for angles
     where 0deg points to the right, 90deg points up, and positive angles go
     counterclockwise. The starting-point and ending-point of the &lsquo;<a
     href="#gradient-line"><code class=css>gradient-line</code></a>&rsquo;
     are determined by extending a line in both direction from the center of
     the box at the angle specified. In the direction of the angle, the
     ending-point is the point on the &lsquo;<a href="#gradient-line"><code
     class=css>gradient-line</code></a>&rsquo; where a line drawn
     perpendicular to the &lsquo;<a href="#gradient-line"><code
     class=css>gradient-line</code></a>&rsquo; would intersect the corner of
     the box in that direction. The starting-point is determined identically,
     except in the opposite direction of the angle.</p>

    <p>The second way is to simply provide a side or corner of the box that
     the gradient should start at; the gradient will then automatically angle
     itself to extend from the specified side or corner to the opposite side
     or corner in a straight line. To be precise, the gradient is converted
     to the angle form described in the previous paragraph at used-value
     time. If a &lsquo;<code class=css>left</code>&rsquo;, &lsquo;<code
     class=css>bottom</code>&rsquo;, &lsquo;<code
     class=css>right</code>&rsquo;, or &lsquo;<code
     class=css>top</code>&rsquo; is given, the used value of the gradient is
     0deg, 90deg, 180deg, or 270 deg, respectively. If a corner is given, the
     used value of the gradient is the angle necessary to place the
     starting-point of the gradient in that corner of the box.</p>

    <div class=example>
     <div style="overflow: hidden"> <img alt="[An image showing a box with a
      background shading gradually from white in the bottom-left corner to
      black in the top-right corner. There is a line, illustrating the
      gradient-line, angled at 45 degrees and passing through the center of
      the box. The starting-point and ending-point of the gradient-line are
      indicated by the intersection of the gradient-line with two additional
      lines that pass through the bottom-left and top-right corners of the
      box.]" src=gradient-diagram.png style="float: right; margin-left:
      1em;">
      <p>This example illustrates visually how to calculate the &lsquo;<a
       href="#gradient-line"><code class=css>gradient-line</code></a>&rsquo;
       from the rules above. This shows the starting and ending-point of the
       &lsquo;<a href="#gradient-line"><code
       class=css>gradient-line</code></a>&rsquo;, along with the actual
       gradient, produced by an element with &lsquo;<code
       class=css>background: linear-gradient(45deg, white,
       black);</code>&rsquo;.</p>

      <p>Notice how, though the starting-point and ending-point are outside
       of the box, they're positioned precisely right so that the gradient is
       pure white <em>exactly</em> at the corner, and pure black
       <em>exactly</em> at the opposite corner. That's intentional, and will
       always be true for linear gradients.</p>
     </div>
    </div>

    <p>The gradient's color stops are typically placed between the
     starting-point and ending-point on the &lsquo;<a
     href="#gradient-line"><code class=css>gradient-line</code></a>&rsquo;,
     but this isn't required - the &lsquo;<a href="#gradient-line"><code
     class=css>gradient-line</code></a>&rsquo; extends infinitely in both
     directions. The starting-point and ending-point are merely arbitrary
     distance markers - the starting-point defines where 0%, 0px, etc are
     located when specifying color-stops, and the ending-point defines where
     100% is located. Color-stops are allowed to have positions before 0% or
     after 100%.</p>

    <h4 class=no-toc id=linear-gradient-examples><span class=secno>5.1.2.
     </span>Linear Gradient Examples</h4>

    <p>All of the following &lsquo;<code
     class=css>linear-gradient()</code>&rsquo; examples are presumed to be
     backgrounds applied to a box that is 200px wide and 100px tall.</p>

    <div class=example>
     <p>Below are various ways of specifying a basic vertical gradient:</p>

     <pre><code>linear-gradient(yellow, blue);
linear-gradient(top, yellow, blue);
linear-gradient(bottom, blue, yellow);
linear-gradient(-90deg, yellow, blue);
linear-gradient(270deg, yellow, blue);
linear-gradient(top, yellow 0%, blue 100%);</code></pre>

     <p><img alt="" src=linear1.png></p>
    </div>

    <div class=example>
     <p>This gradient goes from the upper-left to the lower-right corner.</p>

     <pre><code>linear-gradient(top left, yellow, blue);</code></pre>

     <p><img alt="" src=linear2.png></p>
    </div>

    <div class=example>
     <p>This demonstrates the use of an angle in the gradient. Compare this
      image with the previous example. In both gradients, the top-left of the
      box is pure yellow, and the bottom-right of the box is pure blue. The
      difference is in the angle that the gradient follows.</p>

     <pre><code>linear-gradient(-45deg, yellow, blue);
linear-gradient(315deg, yellow, blue);</code></pre>

     <p><img alt="" src=linear3.png></p>
    </div>

    <div class=example>
     <p>This demonstrates a 3-color gradient, and how to specify the location
      of a stop explicitly:</p>

     <pre><code>linear-gradient(yellow, blue 20%, #0f0);</code></pre>

     <p><img alt="" src=linear4.png></p>
    </div>
   </div>

   <div>
    <h3 id=radial-gradients><span class=secno>5.2. </span>Radial Gradients</h3>

    <p>In a radial gradient, rather than colors smoothly fading from one side
     of the box to the other as with linear gradients, they instead emerge
     from a single point and smoothly spread outward in a circular or
     elliptical shape.</p>

    <p>A radial gradient is specified by first pinpointing the center of the
     gradient, where the 0% ellipse will be, then specifying the size and
     shape of the 100% ellipse, ending with a list of color-stops just like a
     linear-gradient. Between the center and the ending-ellipse, and past the
     ending-ellipse, concentric ellipses are drawn and colored according to
     the specified color-stops.</p>

    <h4 class=no-toc id=radial-gradient-syntax><span class=secno>5.2.1.
     </span><code>radial-gradient()</code> Syntax</h4>

    <pre
     class=prod><code><dfn id=ltradial-gradient>&lt;radial-gradient></dfn> = radial-gradient(
	[&lt;bg-position&gt;,]? 
	[
		[&lt;shape&gt; || &lt;size&gt;]
		|
		[&lt;length> | &lt;percentage>]{2}
	,]? 
	&lt;color-stop&gt;[, &lt;color-stop&gt;]+
)</code></pre>

    <p>The first argument to the function specifies the center of the
     ellipse. &lsquo;<code class=css>&lt;bg-position></code>&rsquo; is taken
     from the Backgrounds and Borders Module, and has the same definition. It
     specifies the center of the gradient. If omitted, it defaults to
     &lsquo;<code class=css>center</code>&rsquo;. Color-stop positions are
     measured along an imaginary line extending from the center of the
     gradient to the right.</p>

    <p>The second argument to the function specifies the size and shape of
     the ending-ellipse. This can be specified in two ways, with different
     characteristics:</p>

    <dl>
     <dt>Implicitly

     <dd>
      <p>The size and shape of the ending-ellipse can be defined
       <em>implicitly</em> with a size and shape keyword. The &lsquo;<a
       href="#ltshape"><code class=css>&lt;shape></code></a>&rsquo; is
       defined as</p>

      <pre><code><dfn id=ltshape>&lt;shape></dfn> = [ circle | ellipse ]</code></pre>

      <p>&lsquo;<code class=css>circle</code>&rsquo; indicates that the
       ending-ellipse will be a circle with a constant radius. &lsquo;<code
       class=css>ellipse</code>&rsquo; indicates that the gradient-shape will
       be an axis-aligned ellipse (that is, its major and minor radiuses will
       be horizontal and vertical, not necessarily in that order).</p>

      <p>The &lsquo;<a href="#ltsize"><code
       class=css>&lt;size></code></a>&rsquo; keyword is defined as</p>

      <pre><code><dfn id=ltsize>&lt;size></dfn> = [ closest-side | closest-corner | farthest-side | farthest-corner | contain | cover ]</code></pre>

      <p>If &lsquo;<a href="#ltshape"><code
       class=css>&lt;shape></code></a>&rsquo; is &lsquo;<code
       class=css>circle</code>&rsquo; and &lsquo;<a href="#ltsize"><code
       class=css>&lt;size></code></a>&rsquo; is &lsquo;<code
       class=css>closest-side</code>&rsquo;, the ending-shape is a circle
       sized so that it exactly meets the side of the box closest to its
       center. For example, if the box was 100px wide and 200px tall, and the
       center of the gradient was &lsquo;<code class=css>10%
       10%</code>&rsquo;, then the closest side is the left side of the box
       (it is 10px from the starting-point, while the top is 20px from it,
       and the right and bottom sides are much further). The gradient-shape
       would thus be a circle with a radius of 10px. If &lsquo;<a
       href="#ltshape"><code class=css>&lt;shape></code></a>&rsquo; is
       &lsquo;<code class=css>ellipse</code>&rsquo; and &lsquo;<a
       href="#ltsize"><code class=css>&lt;size></code></a>&rsquo; is
       &lsquo;<code class=css>closest-side</code>&rsquo;, the gradient-shape
       is an ellipse sized so that it exactly meets the vertical and
       horizontal sides of the box closest to its center. Using the same box
       and starting-point as the previous example, the gradient-shape would
       be an ellipse with a 20px vertical radius and a 10px horizontal
       radius. (If necessary, such as if the starting-point is outside of the
       box, extend the sides of the box so that there is a line the ellipse
       can meet.)</p>

      <p>&lsquo;<code class=css>farthest-side</code>&rsquo; is identical to
       &lsquo;<code class=css>closest-side</code>&rsquo;, except that the
       gradient-shape is sized to meet the side of the box that is farthest
       from its center (or the farthest vertical and horizontal sides, if the
       shape is &lsquo;<code class=css>ellipse</code>&rsquo;). &lsquo;<code
       class=css>closest-corner</code>&rsquo; and &lsquo;<code
       class=css>farthest-corner</code>&rsquo; size the gradient-shape so
       that it exactly meets the closest or farthest corner of the box from
       its center, respectively. If &lsquo;<a href="#ltshape"><code
       class=css>&lt;shape></code></a>&rsquo; is &lsquo;<code
       class=css>ellipse</code>&rsquo;, the gradient-shape has the same ratio
       of width to height that it would if &lsquo;<code
       class=css>closest-side</code>&rsquo; or &lsquo;<code
       class=css>farthest-side</code>&rsquo; were specified, as appropriate.
       &lsquo;<code class=css>contain</code>&rsquo; is a synonym for
       &lsquo;<code class=css>closest-side</code>&rsquo;, and &lsquo;<code
       class=css>cover</code>&rsquo; is a synonym for &lsquo;<code
       class=css>farthest-corner</code>&rsquo;.</p>

      <p>If this implicit form is used, then it is converted to an equivalent
       explicit form (described below) at used-value time.</p>

     <dt>Explicitly

     <dd>
      <p>Alternately, the ending-shape's size and shape can be defined
       explicitly, by providing two lengths or percentages. These measure the
       length of the horizontal and vertical axes of the ellipse,
       respectively. (The axis length is the length from the center of the
       ellipse to the edge, similar to the radius of a circle, not the
       diameter.)</p>

      <p>Percentages used in the first value are relative to the width of the
       box, while percentages used in the second value are relative to the
       height of the box.</p>

      <p>Both of the values must be positive - specifying either as zero or
       negative is a syntax error.</p>
    </dl>

    <p>If this argument is omitted, it defaults to &lsquo;<code
     class=css>ellipse cover</code>&rsquo;.</p>

    <p>If only one argument is provided before the color-stops, and it could
     be interpreted as either a position or an explicit size (for example, in
     &lsquo;<code class=css>radial-gradient(10% 10%, red,
     blue)</code>&rsquo;), it must be interpreted as a position.</p>

    <p>In certain circumstances the given parameters may define a degenerate
     shape - a circle or ellipse with a radius of 0. In these instances the
     gradient image is just a solid color equal to the color of the last
     color-stop in the rule. The following combinations of values will
     trigger this: &lsquo;<code class=css>closest-side</code>&rsquo; if the
     starting-point is on a box edge, &lsquo;<code
     class=css>closest-corner</code>&rsquo; if the starting-point is on a box
     corner, and &lsquo;<code class=css>ellipse closest-corner</code>&rsquo;
     if the starting-point is on a box edge.</p>

    <p>Color-stops are placed on an imaginary line extending from the center
     of the gradient toward the right, with the 0% point at the center of the
     gradient, and 100% at the point where the line intersects the
     ending-ellipse. The color of each ellipse is equal to the color of the
     line where the ellipse intersects it. Distances past 100% can be
     specified, and simply indicate a color-stop placed on the line a
     corresponding distance from the center. Negative distances are allowed
     in a radial gradient and work the same as in linear gradients with
     respect to setting the color of the &lsquo;<a
     href="#gradient-line"><code class=css>gradient-line</code></a>&rsquo;,
     but colors before the starting-point of the &lsquo;<a
     href="#gradient-line"><code class=css>gradient-line</code></a>&rsquo;
     are not displayed. For example, &lsquo;<code
     class=css>radial-gradient(red -50px, yellow 100px)</code>&rsquo; would
     produce an elliptical gradient which starts with a reddish-orange color
     in the center (the color 1/3 between red and yellow) and transitions to
     yellow at 100px wide.</p>

    <h4 class=no-toc id=radial-gradient-examples><span class=secno>5.2.2.
     </span>Radial Gradient Examples</h4>

    <p>All of the following examples are applied to a box that is 200px wide
     and 100px tall.</p>

    <div class=example>
     <p>These examples demonstrate the basic syntax for radial gradients:</p>

     <pre><code>radial-gradient(yellow, green);
radial-gradient(center, ellipse cover, yellow 0%, green 100%);
radial-gradient(50% 50%, farthest-corner, yellow, green);</code></pre>

     <p><img alt="" src=radial1.png></p>

     <pre><code>radial-gradient(circle, yellow, green);</code></pre>

     <p><img alt="" src=radial2.png></p>

     <pre><code>radial-gradient(red, yellow, green);</code></pre>

     <p><img alt="" src=radial3.png></p>
    </div>

    <div class=example>
     <p>This image shows a gradient originating from somewhere other than the
      center of the box:</p>

     <pre><code>radial-gradient(bottom left, farthest-side, red, yellow 50px, green);</code></pre>

     <p><img alt="" src=radial4.png></p>
    </div>

    <div class=example>
     <p>Here we illustrate a &lsquo;<code
      class=property>contain</code>&rsquo; gradient.</p>

     <pre><code>radial-gradient(20px 30px, contain, red, yellow, green);
radial-gradient(20px 30px, 20px 30px, red, yellow, green);</code></pre>

     <p><img alt="" src=radial6.png></p>

     <pre><code>radial-gradient(20px 30px, circle contain, red, yellow, green);
radial-gradient(20px 30px, 20px 20px, red, yellow, green);</code></pre>

     <p><img alt="" src=radial7.png></p>
    </div>
   </div>

   <div>
    <h3 id=repeating-gradients><span class=secno>5.3. </span>Repeating
     Gradients</h3>

    <p>In addition to the &lsquo;<code
     class=css>linear-gradient()</code>&rsquo; and &lsquo;<code
     class=css>radial-gradient()</code>&rsquo; functions, this specification
     defines &lsquo;<code class=css>repeating-linear-gradient()</code>&rsquo;
     and &lsquo;<code class=css>repeating-radial-gradient()</code>&rsquo;
     functions. These two functions take the same values and are interpreted
     the same as their respective non-repeating siblings defined previously:</p>

    <pre
     class=prod><code><dfn id=ltrepeating-linear-gradient>&lt;repeating-linear-gradient></dfn> = repeating-linear-gradient(
	[ 
		[ [top | bottom] || [left | right] ] 
		|| 
		&lt;angle>
	,]? 
	&lt;color-stop&gt;[, &lt;color-stop&gt;]+
)
<dfn id=ltrepeating-radial-gradient>&lt;repeating-radial-gradient></dfn> = repeating-radial-gradient(
	[&lt;bg-position&gt;,]? 
	[
		[&lt;shape&gt; || &lt;size&gt;]
		|
		[&lt;length> | &lt;percentage>]{2}
	,]? 
	&lt;color-stop&gt;[, &lt;color-stop&gt;]+
)</code></pre>

    <p>When rendered, however, the color-stops are repeated infinitely in
     both directions, with their positions shifted by multiples of the
     difference between the last specified color-stop's position and the
     first specified color-stop's position. For example, &lsquo;<code
     class=css>repeating-linear-gradient(red 10px, blue 50px)</code>&rsquo;
     is equivalent to &lsquo;<code class=css>linear-gradient(..., red -30px,
     blue 10px, red 10px, blue 50px, red 50px, blue 90px, ...)</code>&rsquo;.
     Note that the last color-stop and first color-stop will always coincide
     at the boundaries of each group, which will produce sharp transitions if
     the gradient does not start and end with the same color.</p>

    <div class=example>
     <p>Repeating gradient syntax is basically identical to that of
      non-repeating gradients:</p>

     <pre><code>repeating-linear-gradient(red, blue 20px, red 40px)</code></pre>

     <p><img alt="" src=repeating1.png></p>

     <pre><code>repeating-radial-gradient(red, blue 20px, red 40px)</code></pre>

     <p><img alt="" src=repeating2.png></p>

     <pre><code>repeating-radial-gradient(20px 30px, circle contain, red, yellow, green 100%, yellow 150%, red 200%)</code></pre>

     <p><img alt="" src=repeating3.png></p>
    </div>

    <p>If the difference in the positions of the first and last color-stops
     is 0 (for example, in the value &lsquo;<code
     class=css>linear-gradient(red 10px, blue 10px)</code>&rsquo;), the
     gradient defines a solid-color image with the color of the last
     color-stop in the rule (in this case, then, it would simply define a
     blue image).</p>
   </div>

   <div>
    <h3 id=color-stop-syntax><span class=secno>5.4.
     </span><code>color-stop</code> Syntax</h3>

    <pre
     class=prod><code><dfn id=ltcolor-stop>&lt;color-stop></dfn> = &lt;color> [ &lt;percentage> | &lt;length> ]?</code></pre>

    <p>Color-stops are points placed along the line defined by the &lsquo;<a
     href="#gradient-line"><code class=css>gradient-line</code></a>&rsquo; at
     the beginning of the rule. Color-stops must be specified in order.
     Percentages refer to the length of the gradient-line, with 0% being at
     the starting point and 100% being at the ending point. Lengths are
     measured from the starting-point in the direction of the ending-point.
     Color-stops are usually placed between the starting-point and
     ending-point, but that's not required; the gradient-line extends
     infinitely in both directions, and a color-stop can be placed at any
     position on the line.</p>

    <p>At each color-stop, the line is the color of the color-stop. Between
     two color-stops, the line's color is linearly interpolated between the
     colors of the two color-stops, with the interpolation taking place in
     premultiplied RGBA space. Before the first color-stop, the line is the
     color of the first color-stop. After the last color-stop, the line is
     the color of the last color-stop.</p>

    <p>The following steps must be applied <em>in order</em> to process the
     list of color-stops. After applying these rules, all color-stops will
     have a definite position and they will be in ascending order:</p>

    <ol>
     <li>If the first color-stop does not have a position, its position
      defaults to 0%. If the last color-stop does not have a position, its
      position defaults to 100%.

     <li>If a color-stop has a position that is less than the specified
      position of any color-stop before it in the list, its position is
      changed to be equal to the largest specified position of any color-stop
      before it.

     <li>If any color-stop still does not have a position, then, for each run
      of adjacent color-stops without positions, set their positions so that
      they are evenly spaced between the preceding and following color-stops
      with positions.
    </ol>

    <p>If multiple color-stops have the same position, they produce an
     infinitesimal transition from the one specified first in the rule to the
     one specified last. In effect, the color suddenly changes at that
     position rather than smoothly transitioning.</p>

    <p class=note>It is recommended that authors not mix different types of
     units, such as px, em, or %, in a single rule, as this can cause a
     color-stop to unintentionally try to move before an earlier one. For
     example, the rule &lsquo;<code class=css>background-image:
     linear-gradient(red, yellow 100px, blue 50%)</code>&rsquo; would work as
     expected as long as the background area is at least 200px tall. If it
     was 150px tall, however, the blue color-stop's position would be
     equivalent to "75px", which precedes the yellow color-stop, and would be
     corrected to a position of 100px.</p>

    <p class=note>The definition and implications of "premultiplied" color
     spaces are given elsewhere in the technical literature, but a quick
     primer is given here to illuminate the process. Given a color expressed
     as an rgba() 4-tuple, one can convert this to a premultiplied
     representation by multiplying the red, green, and blue components by the
     alpha component. For example, a partially-transparent blue may be given
     as rgba(0,0,255,.5), which would then be expressed as (0,0,127.5,.5) in
     its premultiplied representation. Note that fully opaque colors have the
     same representation in rgba and premultiplied-rgba (you multiply the
     components by 1), and all fully transparent colors are expressed the
     same way in the premultiplied representation (you multiply each
     component by 0, so no matter what the source color was in rgba, the
     premultiplied representation is (0,0,0,0)). Interpolating colors using
     the premultiplied representations rather than the plain rgba
     representations tends to produce more attractive transitions,
     particularly when transitioning from a fully opaque color to fully
     transparent.</p>
   </div>
  </div>

  <div>
   <h2 id=sizing><span class=secno>6. </span>Sizing Images and Objects in CSS</h2>

   <p>Images used in CSS may come from a number of sources, from defined
    image formats (such as gif, jpeg, etc), dedicated markup formats (such as
    SVG), and CSS-specific formats (such as the linear-gradient() value type
    defined in this specification). As well, a document may contain many
    other types of objects, such as video, plugins, or nested documents.
    These images and objects (just "objects" hereafter) may offer many types
    of sizing information to CSS, or none at all. This section defines
    generically the size negotiation model between the object and the CSS
    layout algorithms.</p>

   <p>In order to define this handling, we must define a few terms, to make
    it easier to refer to various concepts:</p>

   <dl>
    <dt><dfn id=intrinsic-dimensions>intrinsic dimensions</dfn>

    <dd>
     <p>The intrinsic dimensions are defined are the object's preferred,
      natural size or aspect ratio, if any. There can be an <dfn
      id=intrinsic-height>intrinsic height</dfn> and <dfn
      id=intrinsic-width>intrinsic width</dfn>, defining a definite
      rectangle. (Most bitmap images fall into this category.) There can be
      an <dfn id=intrinsic-aspect-ratio>intrinsic aspect ratio</dfn> defining
      the relation of the width to the height, but no definite size. (SVG
      images designed to scale may fall into this category.) There can be
      just an intrinsic height or width. Or there can be no intrinsic
      dimensions at all, implying that the object has no preferred size or
      aspect ratio. (Embedded documents are often assumed to have no
      intrinsic size, as are CSS gradients, defined in this specification.)</p>

     <p>If an object (such as an icon) has multiple sizes, then the largest
      size is used. If it has multiple aspect ratios of that size (or of no
      size), then the aspect ratio closest to the aspect ratio of the
      &lsquo;<a href="#default-image-sizing-area"><code class=css>default
      image sizing area</code></a>&rsquo; is used. <span class=issue>This is
      pretty arbitrary.</span></p>

    <dt><dfn id=specified-size>specified size</dfn>

    <dd>The specified size of an object is given by CSS, such as through the
     &lsquo;<code class=property>object-fit</code>&rsquo; or &lsquo;<code
     class=property>background-size</code>&rsquo; properties. The specified
     size can be a definite width and height, a set of constraints, or a
     combination thereof.

    <dt><dfn id=css-view-box>CSS View Box</dfn>

    <dd>The CSS View Box is the result of transforming the &lsquo;<a
     href="#intrinsic-dimensions"><code class=css>intrinsic
     dimensions</code></a>&rsquo; into a concrete size, based on the
     specified size and the &lsquo;<a href="#default-image-sizing-area"><code
     class=css>default image sizing area</code></a>&rsquo;. A CSS View Box
     always has a definite height and width.

    <dt><dfn id=default-image-sizing-area>default image sizing area</dfn>

    <dd>The default image sizing area is a rectangle with a definite height
     and width used to determine the size of the CSS View Box when both the
     &lsquo;<a href="#intrinsic-dimensions"><code class=css>intrinsic
     dimensions</code></a>&rsquo; and &lsquo;<a href="#specified-size"><code
     class=css>specified size</code></a>&rsquo; are missing dimensions. It
     varies based on the property that the image is being used as a value in:
     
     <dl>
      <dt>&lsquo;<code class=property>background-image</code>&rsquo;

      <dd>The &lsquo;<code class=css>default image sizing area is the size of
       the background positioning area of the element.</code>

      <dt>'list-style-image'

      <dd>The &rsquo;default image sizing area is a 1em square.

      <dt>&lsquo;<code class=property>border-image</code>&rsquo;

      <dd>The &lsquo;<code class=css>default image sizing area is the size of
       the border box of the element.</code>

      <dt>'cursor'

      <dd>The &rsquo;default image sizing area is a UA-defined size that
       should be based on the size of a typical cursor on the UA's operating
       system.

      <dt>Anything else

      <dd>The ''default image sizing area is a rectangle 300px wide and 150px
       
     </dl>
   </dl>
  </div>
